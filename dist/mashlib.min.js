(function(t,n){'object'==typeof exports&&'object'==typeof module?module.exports=n(require('window'),require('fetch'),require('crypto'),require('null'),require('TextEncoder')):'function'==typeof define&&define.amd?define(['window','fetch','crypto','null','TextEncoder'],n):'object'==typeof exports?exports.Mashlib=n(require('window'),require('fetch'),require('crypto'),require('null'),require('TextEncoder')):t.Mashlib=n(t.window,t.fetch,t.crypto,t['null'],t.TextEncoder)})(this,function(t,n,a,r,o){var s=Math.LN2,l=Math.log,u=Math.abs,d=Math.round,c=Math.sin,f=Math.cos,m=Math.PI,h=Math.imul,g=Math.clz32,y=Math.max,b=Math.ceil,w=Math.floor,v=Math.pow,x=String.fromCharCode,_=Math.min;return function(t){function n(r){if(a[r])return a[r].exports;var o=a[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var a={};return n.m=t,n.c=a,n.d=function(t,a,r){n.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var a=t&&t.__esModule?function(){return t['default']}:function(){return t};return n.d(a,'a',a),a},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p='/dist/',n(n.s=227)}([function(t,n,a){'use strict';(function(t){function r(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,n){if(r()<n)throw new RangeError('Invalid typed array length');return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=s.prototype):(null===t&&(t=new s(n)),t.length=n),t}function s(t,n,a){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(t,n,a);if('number'==typeof t){if('string'==typeof n)throw new Error('If encoding is specified then the first argument must be a string');return u(this,t)}return d(this,t,n,a)}function d(t,n,a,r){if('number'==typeof n)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&n instanceof ArrayBuffer?h(t,n,a,r):'string'==typeof n?f(t,n,a):g(t,n)}function l(t){if('number'!=typeof t)throw new TypeError('"size" argument must be a number');else if(0>t)throw new RangeError('"size" argument must not be negative')}function c(t,n,a,r){return l(n),0>=n?o(t,n):void 0===a?o(t,n):'string'==typeof r?o(t,n).fill(a,r):o(t,n).fill(a)}function u(t,n){if(l(n),t=o(t,0>n?0:0|b(n)),!s.TYPED_ARRAY_SUPPORT)for(var a=0;a<n;++a)t[a]=0;return t}function f(t,n,a){if(('string'!=typeof a||''===a)&&(a='utf8'),!s.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(n,a);t=o(t,r);var d=t.write(n,a);return d!==r&&(t=t.slice(0,d)),t}function m(t,n){var a=0>n.length?0:0|b(n.length);t=o(t,a);for(var r=0;r<a;r+=1)t[r]=255&n[r];return t}function h(t,n,a,r){if(n.byteLength,0>a||n.byteLength<a)throw new RangeError('\'offset\' is out of bounds');if(n.byteLength<a+(r||0))throw new RangeError('\'length\' is out of bounds');return n=void 0===a&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,a):new Uint8Array(n,a,r),s.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=s.prototype):t=m(t,n),t}function g(t,n){if(s.isBuffer(n)){var a=0|b(n.length);return(t=o(t,a),0===t.length)?t:(n.copy(t,0,0,a),t)}if(n){if('undefined'!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||'length'in n)return'number'!=typeof n.length||ne(n.length)?o(t,0):m(t,n);if('Buffer'===n.type&&oe(n.data))return m(t,n.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function b(t){if(t>=r())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+r().toString(16)+' bytes');return 0|t}function y(t,n){if(s.isBuffer(t))return t.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;'string'!=typeof t&&(t=''+t);var a=t.length;if(0===a)return 0;for(var r=!1;;)switch(n){case'ascii':case'latin1':case'binary':return a;case'utf8':case'utf-8':case void 0:return Z(t).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*a;case'hex':return a>>>1;case'base64':return ee(t).length;default:if(r)return Z(t).length;n=(''+n).toLowerCase(),r=!0;}}function k(t,n,a){var r=!1;if((void 0===n||0>n)&&(n=0),n>this.length)return'';if((void 0===a||a>this.length)&&(a=this.length),0>=a)return'';if(a>>>=0,n>>>=0,a<=n)return'';for(t||(t='utf8');;)switch(t){case'hex':return B(this,n,a);case'utf8':case'utf-8':return O(this,n,a);case'ascii':return M(this,n,a);case'latin1':case'binary':return D(this,n,a);case'base64':return L(this,n,a);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return U(this,n,a);default:if(r)throw new TypeError('Unknown encoding: '+t);t=(t+'').toLowerCase(),r=!0;}}function C(t,a,n){var r=t[a];t[a]=t[n],t[n]=r}function T(t,n,a,r,o){if(0===t.length)return-1;if('string'==typeof a?(r=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648),a=+a,isNaN(a)&&(a=o?0:t.length-1),0>a&&(a=t.length+a),a>=t.length){if(o)return-1;a=t.length-1}else if(0>a)if(o)a=0;else return-1;if('string'==typeof n&&(n=s.from(n,r)),s.isBuffer(n))return 0===n.length?-1:E(t,n,a,r,o);if('number'==typeof n)return n&=255,s.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,a):Uint8Array.prototype.lastIndexOf.call(t,n,a):E(t,[n],a,r,o);throw new TypeError('val must be string, number or Buffer')}function E(t,n,a,r,o){function s(t,n){return 1==d?t[n]:t.readUInt16BE(n*d)}var d=1,l=t.length,c=n.length;if(void 0!==r&&(r=(r+'').toLowerCase(),'ucs2'===r||'ucs-2'===r||'utf16le'===r||'utf-16le'===r)){if(2>t.length||2>n.length)return-1;d=2,l/=2,c/=2,a/=2}var u;if(o){var f=-1;for(u=a;u<l;u++)if(s(t,u)!==s(n,-1==f?0:u-f))-1!=f&&(u-=u-f),f=-1;else if(-1==f&&(f=u),u-f+1===c)return f*d}else for(a+c>l&&(a=l-c),u=a;0<=u;u--){for(var m=!0,h=0;h<c;h++)if(s(t,u+h)!==s(n,h)){m=!1;break}if(m)return u}return-1}function S(t,n,a,r){a=+a||0;var o=t.length-a;r?(r=+r,r>o&&(r=o)):r=o;var s=n.length;if(0!=s%2)throw new TypeError('Invalid hex string');r>s/2&&(r=s/2);for(var d=0,l;d<r;++d){if(l=parseInt(n.substr(2*d,2),16),isNaN(l))return d;t[a+d]=l}return d}function A(t,n,a,r){return te(Z(n,t.length-a),t,a,r)}function I(t,n,a,r){return te(Y(n),t,a,r)}function N(t,n,a,r){return I(t,n,a,r)}function j(t,n,a,r){return te(ee(n),t,a,r)}function R(t,n,a,r){return te(Q(n,t.length-a),t,a,r)}function L(t,n,a){return 0===n&&a===t.length?ae.fromByteArray(t):ae.fromByteArray(t.slice(n,a))}function O(t,n,a){a=_(t.length,a);for(var r=[],o=n;o<a;){var s=t[o],d=null,l=239<s?4:223<s?3:191<s?2:1;if(o+l<=a){var c,u,f,m;1==l?128>s&&(d=s):2==l?(c=t[o+1],128==(192&c)&&(m=(31&s)<<6|63&c,127<m&&(d=m))):3==l?(c=t[o+1],u=t[o+2],128==(192&c)&&128==(192&u)&&(m=(15&s)<<12|(63&c)<<6|63&u,2047<m&&(55296>m||57343<m)&&(d=m))):4==l?(c=t[o+1],u=t[o+2],f=t[o+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(m=(15&s)<<18|(63&c)<<12|(63&u)<<6|63&f,65535<m&&1114112>m&&(d=m))):void 0}null===d?(d=65533,l=1):65535<d&&(d-=65536,r.push(55296|1023&d>>>10),d=56320|1023&d),r.push(d),o+=l}return P(r)}function P(t){var n=t.length;if(n<=ie)return x.apply(String,t);for(var a='',r=0;r<n;)a+=x.apply(String,t.slice(r,r+=ie));return a}function M(t,n,a){var r='';a=_(t.length,a);for(var o=n;o<a;++o)r+=x(127&t[o]);return r}function D(t,n,a){var r='';a=_(t.length,a);for(var o=n;o<a;++o)r+=x(t[o]);return r}function B(t,n,a){var r=t.length;(!n||0>n)&&(n=0),(!a||0>a||a>r)&&(a=r);for(var o='',s=n;s<a;++s)o+=X(t[s]);return o}function U(t,n,a){for(var r=t.slice(n,a),o='',s=0;s<r.length;s+=2)o+=x(r[s]+256*r[s+1]);return o}function q(t,n,a){if(0!=t%1||0>t)throw new RangeError('offset is not uint');if(t+n>a)throw new RangeError('Trying to access beyond buffer length')}function F(t,n,a,r,o,d){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<d)throw new RangeError('"value" argument is out of bounds');if(a+r>t.length)throw new RangeError('Index out of range')}function z(t,n,a,r){0>n&&(n=65535+n+1);for(var o=0,s=_(t.length-a,2);o<s;++o)t[a+o]=(n&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function H(t,n,a,r){0>n&&(n=4294967295+n+1);for(var o=0,s=_(t.length-a,4);o<s;++o)t[a+o]=255&n>>>8*(r?o:3-o)}function W(t,n,a,r){if(a+r>t.length)throw new RangeError('Index out of range');if(0>a)throw new RangeError('Index out of range')}function V(t,n,a,r,o){return o||W(t,n,a,4,3.4028234663852886e38,-3.4028234663852886e38),re.write(t,n,a,r,23,4),a+4}function G(t,n,a,r,o){return o||W(t,n,a,8,1.7976931348623157e308,-1.7976931348623157e308),re.write(t,n,a,r,52,8),a+8}function K(t){if(t=J(t).replace(se,''),2>t.length)return'';for(;0!=t.length%4;)t+='=';return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,'')}function X(t){return 16>t?'0'+t.toString(16):t.toString(16)}function Z(t,n){n=n||Infinity;for(var a=t.length,r=null,o=[],s=0,d;s<a;++s){if(d=t.charCodeAt(s),55295<d&&57344>d){if(!r){if(56319<d){-1<(n-=3)&&o.push(239,191,189);continue}else if(s+1===a){-1<(n-=3)&&o.push(239,191,189);continue}r=d;continue}if(56320>d){-1<(n-=3)&&o.push(239,191,189),r=d;continue}d=(r-55296<<10|d-56320)+65536}else r&&-1<(n-=3)&&o.push(239,191,189);if(r=null,128>d){if(0>(n-=1))break;o.push(d)}else if(2048>d){if(0>(n-=2))break;o.push(192|d>>6,128|63&d)}else if(65536>d){if(0>(n-=3))break;o.push(224|d>>12,128|63&d>>6,128|63&d)}else if(1114112>d){if(0>(n-=4))break;o.push(240|d>>18,128|63&d>>12,128|63&d>>6,128|63&d)}else throw new Error('Invalid code point')}return o}function Y(t){for(var n=[],a=0;a<t.length;++a)n.push(255&t.charCodeAt(a));return n}function Q(t,n){for(var a=[],r=0,o,s,d;r<t.length&&!(0>(n-=2));++r)o=t.charCodeAt(r),s=o>>8,d=o%256,a.push(d),a.push(s);return a}function ee(t){return ae.toByteArray(K(t))}function te(t,n,a,r){for(var o=0;o<r&&!(o+a>=n.length||o>=t.length);++o)n[o+a]=t[o];return o}function ne(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var ae=a(234),re=a(235),oe=a(140);n.Buffer=s,n.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT===void 0?function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&'function'==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}():t.TYPED_ARRAY_SUPPORT,n.kMaxLength=r(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,n,a){return d(null,t,n,a)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,n,a){return c(null,t,n,a)},s.allocUnsafe=function(t){return u(null,t)},s.allocUnsafeSlow=function(t){return u(null,t)},s.isBuffer=function(t){return!!(null!=t&&t._isBuffer)},s.compare=function(t,n){if(!s.isBuffer(t)||!s.isBuffer(n))throw new TypeError('Arguments must be Buffers');if(t===n)return 0;for(var a=t.length,r=n.length,o=0,d=_(a,r);o<d;++o)if(t[o]!==n[o]){a=t[o],r=n[o];break}return a<r?-1:r<a?1:0},s.isEncoding=function(t){switch((t+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},s.concat=function(t,n){if(!oe(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var a;if(n===void 0)for(n=0,a=0;a<t.length;++a)n+=t[a].length;var r=s.allocUnsafe(n),o=0;for(a=0;a<t.length;++a){var d=t[a];if(!s.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(r,o),o+=d.length}return r},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(0!=t%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var n=0;n<t;n+=2)C(this,n,n+1);return this},s.prototype.swap32=function(){var t=this.length;if(0!=t%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var n=0;n<t;n+=4)C(this,n,n+3),C(this,n+1,n+2);return this},s.prototype.swap64=function(){var t=this.length;if(0!=t%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var n=0;n<t;n+=8)C(this,n,n+7),C(this,n+1,n+6),C(this,n+2,n+5),C(this,n+3,n+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0==t?'':0===arguments.length?O(this,0,t):k.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError('Argument must be a Buffer');return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t='',a=n.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString('hex',0,a).match(/.{2}/g).join(' '),this.length>a&&(t+=' ... ')),'<Buffer '+t+'>'},s.prototype.compare=function(t,n,a,r,o){if(!s.isBuffer(t))throw new TypeError('Argument must be a Buffer');if(void 0===n&&(n=0),void 0===a&&(a=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),0>n||a>t.length||0>r||o>this.length)throw new RangeError('out of range index');if(r>=o&&n>=a)return 0;if(r>=o)return-1;if(n>=a)return 1;if(n>>>=0,a>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var d=o-r,l=a-n,c=_(d,l),u=this.slice(r,o),f=t.slice(n,a),m=0;m<c;++m)if(u[m]!==f[m]){d=u[m],l=f[m];break}return d<l?-1:l<d?1:0},s.prototype.includes=function(t,n,a){return-1!==this.indexOf(t,n,a)},s.prototype.indexOf=function(t,n,a){return T(this,t,n,a,!0)},s.prototype.lastIndexOf=function(t,n,a){return T(this,t,n,a,!1)},s.prototype.write=function(t,n,a,r){if(void 0===n)r='utf8',a=this.length,n=0;else if(void 0===a&&'string'==typeof n)r=n,a=this.length,n=0;else if(isFinite(n))n|=0,isFinite(a)?(a|=0,void 0===r&&(r='utf8')):(r=a,a=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var o=this.length-n;if((void 0===a||a>o)&&(a=o),0<t.length&&(0>a||0>n)||n>this.length)throw new RangeError('Attempt to write outside buffer bounds');r||(r='utf8');for(var s=!1;;)switch(r){case'hex':return S(this,t,n,a);case'utf8':case'utf-8':return A(this,t,n,a);case'ascii':return I(this,t,n,a);case'latin1':case'binary':return N(this,t,n,a);case'base64':return j(this,t,n,a);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return R(this,t,n,a);default:if(s)throw new TypeError('Unknown encoding: '+r);r=(''+r).toLowerCase(),s=!0;}},s.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var ie=4096;s.prototype.slice=function(t,n){var a=this.length;t=~~t,n=n===void 0?a:~~n,0>t?(t+=a,0>t&&(t=0)):t>a&&(t=a),0>n?(n+=a,0>n&&(n=0)):n>a&&(n=a),n<t&&(n=t);var r;if(s.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=s.prototype;else{var o=n-t;r=new s(o,void 0);for(var d=0;d<o;++d)r[d]=this[d+t]}return r},s.prototype.readUIntLE=function(t,n,a){t|=0,n|=0,a||q(t,n,this.length);for(var r=this[t],o=1,s=0;++s<n&&(o*=256);)r+=this[t+s]*o;return r},s.prototype.readUIntBE=function(t,n,a){t|=0,n|=0,a||q(t,n,this.length);for(var r=this[t+--n],o=1;0<n&&(o*=256);)r+=this[t+--n]*o;return r},s.prototype.readUInt8=function(t,n){return n||q(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,n){return n||q(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,n){return n||q(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,n){return n||q(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,n){return n||q(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,n,a){t|=0,n|=0,a||q(t,n,this.length);for(var r=this[t],o=1,s=0;++s<n&&(o*=256);)r+=this[t+s]*o;return o*=128,r>=o&&(r-=v(2,8*n)),r},s.prototype.readIntBE=function(t,n,a){t|=0,n|=0,a||q(t,n,this.length);for(var r=n,o=1,s=this[t+--r];0<r&&(o*=256);)s+=this[t+--r]*o;return o*=128,s>=o&&(s-=v(2,8*n)),s},s.prototype.readInt8=function(t,n){return n||q(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,n){n||q(t,2,this.length);var a=this[t]|this[t+1]<<8;return 32768&a?4294901760|a:a},s.prototype.readInt16BE=function(t,n){n||q(t,2,this.length);var a=this[t+1]|this[t]<<8;return 32768&a?4294901760|a:a},s.prototype.readInt32LE=function(t,n){return n||q(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,n){return n||q(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,n){return n||q(t,4,this.length),re.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,n){return n||q(t,4,this.length),re.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,n){return n||q(t,8,this.length),re.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,n){return n||q(t,8,this.length),re.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,n,a,r){if(t=+t,n|=0,a|=0,!r){var o=v(2,8*a)-1;F(this,t,n,a,o,0)}var s=1,d=0;for(this[n]=255&t;++d<a&&(s*=256);)this[n+d]=255&t/s;return n+a},s.prototype.writeUIntBE=function(t,n,a,r){if(t=+t,n|=0,a|=0,!r){var o=v(2,8*a)-1;F(this,t,n,a,o,0)}var s=a-1,d=1;for(this[n+s]=255&t;0<=--s&&(d*=256);)this[n+s]=255&t/d;return n+a},s.prototype.writeUInt8=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=w(t)),this[n]=255&t,n+1},s.prototype.writeUInt16LE=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):z(this,t,n,!0),n+2},s.prototype.writeUInt16BE=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):z(this,t,n,!1),n+2},s.prototype.writeUInt32LE=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):H(this,t,n,!0),n+4},s.prototype.writeUInt32BE=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):H(this,t,n,!1),n+4},s.prototype.writeIntLE=function(t,n,a,r){if(t=+t,n|=0,!r){var o=v(2,8*a-1);F(this,t,n,a,o-1,-o)}var s=0,d=1,l=0;for(this[n]=255&t;++s<a&&(d*=256);)0>t&&0==l&&0!==this[n+s-1]&&(l=1),this[n+s]=255&(t/d>>0)-l;return n+a},s.prototype.writeIntBE=function(t,n,a,r){if(t=+t,n|=0,!r){var o=v(2,8*a-1);F(this,t,n,a,o-1,-o)}var s=a-1,d=1,l=0;for(this[n+s]=255&t;0<=--s&&(d*=256);)0>t&&0==l&&0!==this[n+s+1]&&(l=1),this[n+s]=255&(t/d>>0)-l;return n+a},s.prototype.writeInt8=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=w(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},s.prototype.writeInt16LE=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):z(this,t,n,!0),n+2},s.prototype.writeInt16BE=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):z(this,t,n,!1),n+2},s.prototype.writeInt32LE=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):H(this,t,n,!0),n+4},s.prototype.writeInt32BE=function(t,n,a){return t=+t,n|=0,a||F(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):H(this,t,n,!1),n+4},s.prototype.writeFloatLE=function(t,n,a){return V(this,t,n,!0,a)},s.prototype.writeFloatBE=function(t,n,a){return V(this,t,n,!1,a)},s.prototype.writeDoubleLE=function(t,n,a){return G(this,t,n,!0,a)},s.prototype.writeDoubleBE=function(t,n,a){return G(this,t,n,!1,a)},s.prototype.copy=function(t,n,a,r){if(a||(a=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),0<r&&r<a&&(r=a),r===a)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError('targetStart out of bounds');if(0>a||a>=this.length)throw new RangeError('sourceStart out of bounds');if(0>r)throw new RangeError('sourceEnd out of bounds');r>this.length&&(r=this.length),t.length-n<r-a&&(r=t.length-n+a);var o=r-a,d;if(this===t&&a<n&&n<r)for(d=o-1;0<=d;--d)t[d+n]=this[d+a];else if(1e3>o||!s.TYPED_ARRAY_SUPPORT)for(d=0;d<o;++d)t[d+n]=this[d+a];else Uint8Array.prototype.set.call(t,this.subarray(a,a+o),n);return o},s.prototype.fill=function(t,n,a,r){if('string'==typeof t){if('string'==typeof n?(r=n,n=0,a=this.length):'string'==typeof a&&(r=a,a=this.length),1===t.length){var o=t.charCodeAt(0);256>o&&(t=o)}if(void 0!==r&&'string'!=typeof r)throw new TypeError('encoding must be a string');if('string'==typeof r&&!s.isEncoding(r))throw new TypeError('Unknown encoding: '+r)}else'number'==typeof t&&(t&=255);if(0>n||this.length<n||this.length<a)throw new RangeError('Out of range index');if(a<=n)return this;n>>>=0,a=a===void 0?this.length:a>>>0,t||(t=0);var d;if('number'==typeof t)for(d=n;d<a;++d)this[d]=t;else{var l=s.isBuffer(t)?t:Z(new s(t,r).toString()),c=l.length;for(d=0;d<a-n;++d)this[d+n]=l[d%c]}return this};var se=/[^+\/0-9A-Za-z-_]/g}).call(n,a(3))},function(t){t.exports='function'==typeof Object.create?function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}},function(t,n,a){'use strict';var r=a(18),o=a(9),s={ns:o,rdf:r,acl:a(148),aclControl:a(342),authn:a(179),create:a(438),icons:a(20),log:a(19),matrix:a(439),messageArea:a(440),pad:a(441),store:a(14),table:a(442),tabs:a(443),utils:a(23),widgets:a(21)};t.exports=s},function(t){var n=function(){return this}();try{n=n||Function('return this')()||(1,eval)('this')}catch(t){'object'==typeof window&&(n=window)}t.exports=n},function(t,n,a){function r(t,n){for(var a in t)n[a]=t[a]}function o(t,n,a){return d(t,n,a)}var s=a(0),d=s.Buffer;d.from&&d.alloc&&d.allocUnsafe&&d.allocUnsafeSlow?t.exports=s:(r(s,n),n.Buffer=o),r(d,o),o.from=function(t,n,a){if('number'==typeof t)throw new TypeError('Argument must not be a number');return d(t,n,a)},o.alloc=function(t,n,a){if('number'!=typeof t)throw new TypeError('Argument must be a number');var r=d(t);return void 0===n?r.fill(0):'string'==typeof a?r.fill(n,a):r.fill(n),r},o.allocUnsafe=function(t){if('number'!=typeof t)throw new TypeError('Argument must be a number');return d(t)},o.allocUnsafeSlow=function(t){if('number'!=typeof t)throw new TypeError('Argument must be a number');return s.SlowBuffer(t)}},function(t){function n(){throw new Error('setTimeout has not been defined')}function a(){throw new Error('clearTimeout has not been defined')}function r(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(n){try{return f.call(null,t,0)}catch(n){return f.call(this,t,0)}}}function o(t){if(m===clearTimeout)return clearTimeout(t);if((m===a||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(t);try{return m(t)}catch(n){try{return m.call(null,t)}catch(n){return m.call(this,t)}}}function s(){g&&y&&(g=!1,y.length?h=y.concat(h):b=-1,h.length&&d())}function d(){if(!g){var t=r(s);g=!0;for(var n=h.length;n;){for(y=h,h=[];++b<n;)y&&y[b].run();b=-1,n=h.length}y=null,g=!1,o(t)}}function l(t,n){this.fun=t,this.array=n}function c(){}var u=t.exports={},f,m;(function(){try{f='function'==typeof setTimeout?setTimeout:n}catch(t){f=n}try{m='function'==typeof clearTimeout?clearTimeout:a}catch(t){m=a}})();var h=[],g=!1,b=-1,y;u.nextTick=function(t){var n=Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)n[a-1]=arguments[a];h.push(new l(t,n)),1!==h.length||g||r(d)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title='browser',u.browser=!0,u.env={},u.argv=[],u.version='',u.versions={},u.on=c,u.addListener=c,u.once=c,u.off=c,u.removeListener=c,u.removeAllListeners=c,u.emit=c,u.prependListener=c,u.prependOnceListener=c,u.listeners=function(){return[]},u.binding=function(){throw new Error('process.binding is not supported')},u.cwd=function(){return'/'},u.chdir=function(){throw new Error('process.chdir is not supported')},u.umask=function(){return 0}},function(t,n,a){'use strict';var r=n;r.version=a(295).version,r.utils=a(296),r.rand=a(164),r.curve=a(74),r.curves=a(302),r.ec=a(310),r.eddsa=a(314)},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],!t.children&&(t.children=[]),Object.defineProperty(t,'loaded',{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,'id',{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(39),c=a(13),u=function(t){function n(t){r(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(a.termType=n.termType,t&&t.termType===n.termType&&(t=t.value),!t)throw new Error('Missing IRI for NamedNode');if(!t.includes(':'))throw new Error('NamedNode IRI "'+t+'" must be absolute.');if(t.includes(' ')){var s='Error: NamedNode IRI "'+t+'" must not contain unencoded spaces.';throw new Error(s)}return a.value=t,a}return s(n,t),d(n,[{key:'dir',value:function(){var t=this.uri.split('#')[0],a=t.slice(0,-1).lastIndexOf('/'),r=t.indexOf('//');return 0<=r&&a<r+2||0>a?null:new n(t.slice(0,a+1))}},{key:'site',value:function(){var t=this.uri.split('#')[0],a=t.indexOf('//');if(0>a)throw new Error('This URI does not have a web site part (origin)');var r=t.indexOf('/',a+2);if(0>r)throw new Error('This URI does not have a web site part. (origin)');return new n(t.slice(0,r+1))}},{key:'doc',value:function(){return 0>this.uri.indexOf('#')?this:new n(this.uri.split('#')[0])}},{key:'toString',value:function(){return'<'+this.uri+'>'}},{key:'uri',get:function(){return this.value},set:function(t){this.value=t}}],[{key:'fromValue',value:function(t){if('undefined'==typeof t||null===t)return t;var a=t&&t.termType;return a?t:new n(t)}}]),n}(c);u.termType='NamedNode',u.prototype.classOrder=l.NamedNode,u.prototype.isVar=0,t.exports=u},function(t,n,a){'use strict';var r={};t.exports=r;var o=a(18);r.expand=function(t){var n=t.split(':');if(0===n.length)throw new Error('Prefixed name has no colon: '+t);if(!(n[0]in r))throw new Error('Unregistered namespace prefix in: '+t);return r[n[0]](n[1])},r.auth=o.Namespace('http://www.w3.org/ns/auth/acl#'),r.acl=o.Namespace('http://www.w3.org/ns/auth/acl#'),r.arg=o.Namespace('http://www.w3.org/ns/pim/arg#'),r.cal=o.Namespace('http://www.w3.org/2002/12/cal/ical#'),r.contact=o.Namespace('http://www.w3.org/2000/10/swap/pim/contact#'),r.dc=o.Namespace('http://purl.org/dc/elements/1.1/'),r.dct=o.Namespace('http://purl.org/dc/terms/'),r.doap=o.Namespace('http://usefulinc.com/ns/doap#'),r.foaf=o.Namespace('http://xmlns.com/foaf/0.1/'),r.http=o.Namespace('http://www.w3.org/2007/ont/http#'),r.httph=o.Namespace('http://www.w3.org/2007/ont/httph#'),r.ical=o.Namespace('http://www.w3.org/2002/12/cal/icaltzd#'),r.ldp=o.Namespace('http://www.w3.org/ns/ldp#'),r.link=r.tab=r.tabont=o.Namespace('http://www.w3.org/2007/ont/link#'),r.log=o.Namespace('http://www.w3.org/2000/10/swap/log#'),r.meeting=o.Namespace('http://www.w3.org/ns/pim/meeting#'),r.mo=o.Namespace('http://purl.org/ontology/mo/'),r.owl=o.Namespace('http://www.w3.org/2002/07/owl#'),r.pad=o.Namespace('http://www.w3.org/ns/pim/pad#'),r.patch=o.Namespace('http://www.w3.org/ns/pim/patch#'),r.qu=o.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),r.trip=o.Namespace('http://www.w3.org/ns/pim/trip#'),r.rdf=o.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),r.rdfs=o.Namespace('http://www.w3.org/2000/01/rdf-schema#'),r.rss=o.Namespace('http://purl.org/rss/1.0/'),r.sched=o.Namespace('http://www.w3.org/ns/pim/schedule#'),r.schema=o.Namespace('http:/schema.org/'),r.sioc=o.Namespace('http://rdfs.org/sioc/ns#'),r.solid=o.Namespace('http://www.w3.org/ns/solid/terms#'),r.space=o.Namespace('http://www.w3.org/ns/pim/space#'),r.stat=o.Namespace('http://www.w3.org/ns/posix/stat#'),r.ui=o.Namespace('http://www.w3.org/ns/ui#'),r.vcard=o.Namespace('http://www.w3.org/2006/vcard/ns#'),r.wf=o.Namespace('http://www.w3.org/2005/01/wf/flow#'),r.xsd=o.Namespace('http://www.w3.org/2001/XMLSchema#')},function(t){var n=t.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=n)},function(t,n,a){var r=a(116)('wks'),o=a(80),s=a(10).Symbol,d='function'==typeof s,l=t.exports=function(t){return r[t]||(r[t]=d&&s[t]||(d?s:o)('Symbol.'+t))};l.store=r},function(t,n,a){'use strict';function r(t){var n;return n=t.indexOf('#'),0>n?t:t.slice(0,n)}var o=o||console.log;t.exports.docpart=r,t.exports.document=function(t){return new s(r(t.uri))},t.exports.hostpart=function(t){var n=/[^\/]*\/\/([^\/]*)\//.exec(t);return n?n[1]:''},t.exports.join=function(t,n){var a=n.indexOf('#'),r,s,d,l,c,u;if(0<a&&(n=n.slice(0,a)),0===t.length)return n;if(0===t.indexOf('#'))return n+t;if(l=t.indexOf(':'),0<=l)return t;if(r=n.indexOf(':'),0===n.length)return t;if(0>r)return o('Invalid base: '+n+' in join with given: '+t),t;if(s=n.slice(0,+r+1||9e9),0===t.indexOf('//'))return s+t;if(n.indexOf('//',r)===r+1){if(d=n.indexOf('/',r+3),0>d)return 0<n.length-r-3?n+'/'+t:s+t;}else if(d=n.indexOf('/',r+1),0>d)return 0<n.length-r-1?n+'/'+t:s+t;if(0===t.indexOf('/'))return n.slice(0,d)+t;if(u=n.slice(d),c=u.lastIndexOf('/'),0>c)return s+t;for(0<=c&&c<u.length-1&&(u=u.slice(0,+c+1||9e9)),u+=t;u.match(/[^\/]*\/\.\.\//);)u=u.replace(/[^\/]*\/\.\.\//,'');return u=u.replace(/\.\//g,''),u=u.replace(/\/\.$/,'/'),n.slice(0,d)+u},t.exports.protocol=function(t){var n;return n=t.indexOf(':'),0>n?null:t.slice(0,n)},t.exports.refTo=function(t,a){var r=/^[-_a-zA-Z0-9.]+:(\/\/[^\/]*)?\/[^\/]*$/,d,c,u,f,l,m,h,n,o,g,b,y,v;if(!t)return a;if(t===a)return'';for(c=n=0,l=a.length;n<l&&(d=a[c],d===t[c]);c=++n);if(t.slice(0,c).match(r)&&(u=a.indexOf('//'),0>u&&(u=-2),f=a.indexOf('/',u+2),'/'!==a[f+1]&&'/'!==t[f+1]&&a.slice(0,f)===t.slice(0,f)))return a.slice(f);if('#'===a[c]&&t.length===c)return a.slice(c);for(;0<c&&'/'!==a[c-1];)c--;if(3>c)return a;if(0<t.indexOf('//',c-2)||0<a.indexOf('//',c-2))return a;if(0<t.indexOf(':',c))return a;for(h=0,b=t.slice(c),(o=0,m=b.length);o<m;o++)d=b[o],'/'===d&&h++;if(0===h&&c<a.length&&'#'===a[c])return'./'+a.slice(c);if(0===h&&c===a.length)return'./';if(v='',0<h)for(g=1,y=h;1<=y?g<=y:g>=y;1<=y?++g:--g)v+='../';return v+a.slice(c)};var s=a(8)},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=function(){function t(){r(this,t)}return o(t,[{key:'substitute',value:function(){return console.log('@@@ node substitute'+this),this}},{key:'compareTerm',value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.value<t.value?-1:this.value>t.value?1:0}},{key:'equals',value:function(t){return!!t&&this.termType===t.termType&&this.value===t.value}},{key:'hashString',value:function(){return this.toCanonical()}},{key:'sameTerm',value:function(t){return this.equals(t)}},{key:'toCanonical',value:function(){return this.toNT()}},{key:'toNT',value:function(){return this.toString()}},{key:'toString',value:function(){throw new Error('Node.toString() is abstract - see the subclasses instead')}}]),t}();t.exports=s,s.fromValue=function(t){var n=a(65),r=a(40),o=a(8);if('undefined'==typeof t||null===t)return t;var s=t&&t.termType;return s?t:Array.isArray(t)?new n(t):r.fromValue(t)}},function(t,n,a){'use strict';var r=a(18),o=t.exports=r.graph(),s=r.fetcher(o),d=new r.UpdateManager(o);console.log('Unique quadstore initialized.')},function(t){function n(t,n){if(!t)throw new Error(n||'Assertion failed')}t.exports=n,n.equal=function(t,n,a){if(t!=n)throw new Error(a||'Assertion failed: '+t+' != '+n)}},function(t){var n=t.exports={version:'2.5.1'};'number'==typeof __e&&(__e=n)},function(t,n,a){'use strict';t.exports={Formats:a(208),Initializer:a(209),JSONDocument:a(411),JSONMapping:a(412),JSONPatch:a(210),JSONPointer:a(127),JSONSchema:a(413),Validator:a(211)}},function(t,n,a){'use strict';var r=a(64),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s={BlankNode:a(31),Collection:a(65),convert:a(133),DataFactory:a(70),Empty:a(247),Fetcher:a(98),Formula:a(132),IndexedFormula:o.default,jsonParser:a(248),Literal:a(40),log:a(32),N3Parser:a(71),NamedNode:a(8),Namespace:a(51),Node:a(13),parse:a(145),Query:a(69).Query,queryToSPARQL:a(249),RDFaProcessor:a(99),RDFParser:a(100),serialize:a(88),Serializer:a(97),SPARQLToQuery:a(250),sparqlUpdateParser:a(146),Statement:a(67),term:a(13).fromValue,UpdateManager:a(251),UpdatesSocket:a(147).UpdatesSocket,UpdatesVia:a(147).UpdatesVia,uri:a(12),Util:a(24),Variable:a(68)};s.NextId=s.BlankNode.nextId,s.fromNT=s.Formula.prototype.fromNT,s.fetcher=s.DataFactory.fetcher,s.graph=s.DataFactory.graph,s.lit=s.DataFactory.lit,s.st=s.DataFactory.st,s.sym=s.DataFactory.namedNode,s.variable=s.DataFactory.variable,s.blankNode=s.DataFactory.blankNode,s.defaultGraph=s.DataFactory.defaultGraph,s.literal=s.DataFactory.literal,s.namedNode=s.DataFactory.namedNode,s.quad=s.DataFactory.quad,s.triple=s.DataFactory.triple,t.exports=s},function(t){'use strict';t.exports=function(){var t={},n=1,a=2,r=4,o=63;return t.level=n+a+r,t.ascending=!1,t.msg=function(n,a,o){if(a||(a=r,o='mesg'),!!(t.level&a))if('undefined'!=typeof document){var s=document.getElementById('status');if(!s)return;var d=function(t){return t.replace(/&/g,'&amp;').replace(/</g,'&lt;')},l=document.createElement('span');l.setAttribute('class',o);var c=new Date;l.innerHTML=c.getHours()+':'+c.getMinutes()+':'+c.getSeconds()+' ['+o+'] '+d(n)+'<br/>',t.ascending?s.insertBefore(l,s.firstChild):s.appendChild(l)}else if('undefined'!=typeof console)console.log(n);else{var u=dump;if(!u)throw new Error('log: No way to output message: '+n);u('Log: '+n+'\n')}},t.warn=function(n){t.msg(n,a,'warn')},t.debug=function(n){t.msg(n,32,'dbug')},t.info=function(n){t.msg(n,16,'info')},t.error=function(a){t.msg(a,n,'eror')},t.success=function(n){t.msg(n,8,'good')},t.alert='undefined'==typeof alert?t.warn:alert,t.clear=function(){var t=document.getElementById('status');t&&(t.innerHTML='')},t.setLevel=function(n){t.level=o,t.debug('Log level is now '+n),t.level=n},t.dumpHTML=function(){var n=t.level;t.level=o,t.debug(document.innerHTML),t.level=n},t}()},function(t,n,a){'use strict';(function(t){if(t.scriptURI)t.exports.iconBase=''+t.scriptURI.slice(0,t.scriptURI.lastIndexOf('/'))+'/icons/',t.exports.originalIconBase=''+t.scriptURI.slice(0,t.scriptURI.lastIndexOf('/'))+'/originalIcons/';else{var n='https://linkeddata.github.io/solid-ui/src';'undefined'!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.iconBase?(t.exports.iconBase=$SolidTestEnvironment.iconBase,t.exports.originalIconBase=$SolidTestEnvironment.originalIconBase):(t.exports.iconBase=n+'/icons/',t.exports.originalIconBase=n+'/originalIcons/')}console.log('   Icon base is: '+t.exports.iconBase)}).call(n,a(7)(t))},function(t,n,a){'use strict';function r(t,n){var a=t.statusArea||t.div;return console.log('Complaint: '+n),a.appendChild(l.errorMessageBlock(t.dom,n))}function o(t,n,a,r,o,s,l){var c=t.createElement('div'),u=t.createTextNode(a),f=d.store.updater.editable(l.uri);u.style='colour: black; font-size: 100%; padding-left: 0.5 em; padding-right: 0.5 em;',c.appendChild(u);var m=t.createElement('input');c.appendChild(m),m.setAttribute('type','checkbox'),m.setAttribute('style','margin: 0.7em'),o&&o.object&&!o.why&&(o.why=l),r&&r.object&&!r.why&&(r.why=l);var h=n.holds(o);if(r){var g=n.holds(r);if(h&&g)return c.appendChild(d.widgets.errorMessageBlock(t,'Inconsistent data in store!\n'+o+' and\n'+r)),c;h||g||(h=!!n.any(s,d.ns.ui('default')))}if(m.checked=h,!f)return c;return m.addEventListener('click',function(){u.style='color: #bbb;';var n,a;this.checked?(n=o,a=r&&g?r:[],d.store.updater.update(a,n,function(n,a,r){return a?void(u.style='color: #black;',h=!0,g=!1):(u.style='color: #black; background-color: #fee;',c.appendChild(d.widgets.errorMessageBlock(t,'Error updating store (setting boolean, checked) :\n\n'+r)),void(m.checked=!1))})):(n=r,a=o,d.store.updater.update(a,n,function(n,a,o){return u.className='question',a?void(u.style='color: #black;',h=!1,g=!!r):(u.style='color: #black; background-color: #fee;',c.appendChild(d.widgets.errorMessageBlock(t,'Error updating store (unchecked):\n\n'+o)),void(m.checked=!0))}))},!1),c}var s=t.exports=Object.assign({},a(252),a(178),a(76),{buildCheckboxForm:o,complain:r}),d={icons:a(20),log:a(19),ns:a(9),store:a(14),widgets:s},l=a(76),u=a(23);d.widgets.field={},d.widgets.clearElement=function(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},d.widgets.refreshTree=function(t){if(t.refresh)return void t.refresh();for(var n=0;n<t.children.length;n++)d.widgets.refreshTree(t.children[n])},d.widgets.extractLogURI=function(t){var n=t.search(/logFile=/),a=t.search(/&rulesFile=/);return t.substring(n+8,a)},d.widgets.shortDate=function(t){if(!t)return'???';try{var n=new Date,a=$rdf.term(n).value;return t.slice(0,10)===a.slice(0,10)?t.slice(11,16):t.slice(0,4)===a.slice(0,4)?['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][parseInt(t.slice(5,7),10)-1]+' '+parseInt(t.slice(8,10),10):t.slice(0,10)}catch(t){return'shortdate:'+t}},d.widgets.formatDateTime=function(t,n){return n.split('{').map(function(n){var a=n.split('}')[0];return n?('000'+(t['get'+a]()+({Month:1}[a]||0))).slice(-({Milliseconds:3,FullYear:4}[a]||2))+n.split('}')[1]:''}).join('')},d.widgets.timestamp=function(){return d.widgets.formatDateTime(new Date,'{FullYear}-{Month}-{Date}T{Hours}:{Minutes}:{Seconds}.{Milliseconds}')},d.widgets.shortTime=function(){return d.widgets.formatDateTime(new Date,'{Hours}:{Minutes}:{Seconds}.{Milliseconds}')},d.widgets.newThing=function(t){var n=new Date;return $rdf.sym(t.uri+'#id'+(''+n.getTime()))},d.widgets.setName=function(t,n){var a=d.store,r=d.ns,o=function(t){var n=a.any(t,r.vcard('fn'))||a.any(t,r.foaf('name'))||a.any(t,r.vcard('organization-name'));return n?n.value:null},s=n.sameTerm(r.foaf('Agent'))?'Everyone':o(n);t.textContent=s||u.label(n),!s&&n.uri&&a.fetcher.nowOrWhenFetched(n.doc(),void 0,function(){t.textContent=o(n)||u.label(n)})},d.widgets.imagesOf=function(t,n){var a=d.ns;return n.each(t,a.sioc('avatar')).concat(n.each(t,a.foaf('img'))).concat(n.each(t,a.vcard('logo'))).concat(n.each(t,a.vcard('photo'))).concat(n.each(t,a.foaf('depiction')))},d.widgets.setImage=function(t,n){var a=d.store,r=d.ns,o=d.icons.iconBase,s=function(t){if(t.sameTerm(r.foaf('Agent'))||t.sameTerm(r.rdf('Resource')))return o+'noun_98053.svg';var n=a.any(t,r.sioc('avatar'))||a.any(t,r.foaf('img'))||a.any(t,r.vcard('logo'))||a.any(t,r.vcard('hasPhoto'))||a.any(t,r.vcard('photo'))||a.any(t,r.foaf('depiction'));return n?n.uri:null},l=function(t){var n=a.findTypeURIs(t);if(r.solid('AppProvider').uri in n)return o+'noun_15177.svg';if(t.uri){if(4===t.uri.split('/').length&&!t.uri.split('/')[1]&&!t.uri.split('/')[3])return o+'noun_15177.svg';if(t.uri.startsWith('message:')||t.uri.startsWith('mid:'))return o+'noun_480183.svg';if(t.uri.startsWith('mailto:'))return o+'noun_567486.svg';if(t.uri.startsWith('https:')&&0>t.uri.indexOf('#'))return t.site().uri+'favicon.ico'}return r.solid('AppProviderClass').uri in n?o+'noun_144.svg':r.vcard('Group').uri in n||r.rdfs('Class').uri in n?o+'noun_339237.svg':r.vcard('Organization').uri in n||r.rdfs('Class').uri in n?o+'noun_143899.svg':r.vcard('Individual').uri in n||r.foaf('Person').uri in n?o+'noun_15059.svg':r.vcard('AddressBook').uri in n?o+'noun_15695.svg':'http://www.w3.org/ns/pim/trip#Trip'in n?o+'noun_581629.svg':r.meeting('Meeting').uri in n?o+'noun_66617.svg':o+'noun_10636_grey.svg'},c=s(n);t.setAttribute('src',c||l(n)),!c&&n.uri&&a.fetcher.nowOrWhenFetched(n.doc(),void 0,function(){t.setAttribute('src',s(n)||l(n))})};var c=function(t,n){var a=t.createElement('img');if(a.setAttribute('src',d.icons.iconBase+(function(t){if(!t.uri)return!1;var n=t.uri.split('/');return 3===n.length||4===n.length&&''===n[3]}(n)?'noun_15177.svg':'noun_681601.svg')),n.uri&&n.uri.startsWith('https:')&&0>n.uri.indexOf('#')){var r=t.createElement('object');return r.setAttribute('data',n.site().uri+'favicon.ico'),r.setAttribute('type','image/x-icon'),r.appendChild(a),r}return d.widgets.setImage(a,n),a};d.widgets.deleteButtonWithCheck=function(t,n,a,r){var o=d.icons.iconBase+'noun_2188_red.svg',s=t.createElement('img');s.setAttribute('src',o),s.setAttribute('style','margin: 0.2em; width: 1em; height:1em'),s.title='Remove this '+a;var l=s;return n.appendChild(l),n.setAttribute('class','hoverControl'),l.setAttribute('class','hoverControlHide'),l.addEventListener('click',function(){n.removeChild(l);var o=t.createElement('button');o.textContent='cancel',n.appendChild(o).addEventListener('click',function(){n.removeChild(s),n.removeChild(o),n.appendChild(l)},!1);var s=t.createElement('button');s.textContent='Delete '+a,n.appendChild(s).addEventListener('click',function(){n.removeChild(s),n.removeChild(o),r()},!1)},!1),l},d.widgets.askName=function(t,n,a,r,o){return new Promise(function(n){var s=t.createElement('div');r=r||d.ns.foaf('name');var l=o?u.label(o)+'  ':'';l+=u.label(r)+': ',s.appendChild(t.createElement('p')).textContent=l;var c=t.createElement('input');c.setAttribute('type','text'),c.setAttribute('size','100'),c.setAttribute('maxLength','2048'),c.select(),s.appendChild(c),a.appendChild(s);var f=function(){s.parentNode.removeChild(s),n(c.value)};c.addEventListener('keyup',function(t){13==t.keyCode&&f()},!1);var m=s.appendChild(t.createElement('br')),h=s.appendChild(t.createElement('button'));h.setAttribute('type','button'),h.innerHTML='Cancel',h.addEventListener('click',function(){s.parentNode.removeChild(s),n(null)},!1);var g=s.appendChild(t.createElement('button'));g.setAttribute('type','button'),g.innerHTML='Continue',g.addEventListener('click',function(){f()},!1)})},d.widgets.linkIcon=function(t,n,a){var r=t.createElement('a');r.setAttribute('href',n.uri),n.uri.startsWith('http')&&r.setAttribute('target','_blank');var o=r.appendChild(t.createElement('img'));return o.setAttribute('src',a||d.icons.originalIconBase+'go-to-this.png'),o.setAttribute('style','margin: 0.3em;'),r},d.widgets.personTR=function(t,n,a,r){var o=t.createElement('tr');r=r||{};var s=o.appendChild(t.createElement('td')),l=o.appendChild(t.createElement('td')),u=o.appendChild(t.createElement('td')),f=c(t,a);if(s.setAttribute('style','vertical-align: middle; width:2.5em; padding:0.5em; height: 2.5em;'),l.setAttribute('style','vertical-align: middle; text-align:left;'),u.setAttribute('style','vertical-align: middle; width:2em; padding:0.5em; height: 4em;'),f.setAttribute('style','width: 3em; height: 3em; margin: 0.1em; border-radius: 1em;'),s.appendChild(f),d.widgets.setName(l,a),r.deleteFunction&&d.widgets.deleteButtonWithCheck(t,u,r.noun||'one',r.deleteFunction),a.uri){if(!1!==r.link){var m=u.appendChild(d.widgets.linkIcon(t,a));m.classList.add('HoverControlHide'),u.appendChild(t.createElement('br'))}!1!==r.draggable&&(f.setAttribute('draggable','false'),d.widgets.makeDraggable(o,a))}return o},d.widgets.refreshTree=function t(n){if(n.refresh)return void n.refresh();for(var a=0;a<n.children.length;a++)t(n.children[a])},d.widgets.attachmentList=function(t,n,a,o){o=o||{};var s=o.doc||n.doc();o.modify===void 0&&(o.modify=!0);var l=o.modify,c=o.promptIcon||d.icons.iconBase+'noun_748003.svg',f=o.predicate||d.ns.wf('attachment'),m=o.noun||'attachment',h=d.store,g=d.ns,b=a.appendChild(t.createElement('table'));b.setAttribute('style','margin-top: 1em; margin-bottom: 1em;');var y=b.appendChild(t.createElement('tr')),v=y.appendChild(t.createElement('td')),w=y.appendChild(t.createElement('td')),x=w.appendChild(t.createElement('table')),_=x.appendChild(t.createElement('tr')),k=function(t){h.updater.update($rdf.st(n,f,t,s),[],function(t,n,a){n?T():r('Error deleting one: '+a)})},C=function(n){var a={noun:m};return l&&(a.deleteFunction=function(){k(n)}),d.widgets.personTR(t,f,n,a)},T=x.refresh=function(){var t=h.each(n,f);t.sort(),u.syncTableToArray(x,t,C)};b.refresh=T,T();var E=function(t){var a=[];t.map(function(t){var r=$rdf.sym(t);console.log('Dropped on attachemnt '+t),a.push($rdf.st(n,f,r,s))}),h.updater.update([],a,function(t,n,a){n?T():r('Error adding one: '+a)})};if(l){var S=v.appendChild(t.createElement('img'));S.setAttribute('src',c),S.setAttribute('style','width; 2em; height: 2em; margin: 0.5em;'),S.setAttribute('draggable','false'),d.widgets.makeDropTarget(v,E)}return b},d.widgets.field[d.ns.ui('Form').uri]=d.widgets.field[d.ns.ui('Group').uri]=function(n,a,r,o,s,l,c){var u=d.store,f=n.createElement('div');f.setAttribute('style','padding-left: 2em; border: 0.05em solid brown;');var m=d.ns.ui;a.appendChild(f);var h=o.toNT()+'|'+s.toNT();if(r[h]){f.appendChild(n.createTextNode('Group: see above '+h));var g=[$rdf.st(o,d.ns.owl('sameAs'),o)];return d.outline.appendPropertyTRs(f,g),f}var b={};for(var y in r)b[y]=1;b[h]=1;var v=u.any(s,m('parts')),w;if(v)w=v.elements;else{var v=u.each(s,m('part'));w=d.widgets.sortBySequence(v)}if(!v)return f.appendChild(d.widgets.errorMessageBlock(n,'No parts to form! ')),n;for(var x=[],_=[],k=0;k<w.length;k++){var C=w[k],T=d.widgets.bottomURI(C);if(T===m('Options').uri){var t=u.any(C,m('dependingOn'));t&&u.any(o,t)&&(_[k]=u.any(o,t).toNT())}var E=d.widgets.fieldFunction(n,C),S=function(a,s){if(a)for(var h=0;h<w.length;h++){var g=w[h],b=d.widgets.bottomURI(g);if(b===m('Options').uri){var t=u.any(g,m('dependingOn')),y=E(n,f,r,o,g,l,c);f.removeChild(y),f.insertBefore(y,x[h]),f.removeChild(x[h]),_[h]=u.any(o,t).toNT(),x[h]=y}}c(a,s)};x.push(E(n,f,b,o,C,l,S))}return f},d.widgets.field[d.ns.ui('Options').uri]=function(t,n,a,r,o,s,l){var u=d.store,f=t.createElement('div'),m=d.ns.ui;n.appendChild(f);var h=u.any(o,m('dependingOn'));h||(h=d.ns.rdf('type'));var g=u.each(o,m('case'));g||f.appendChild(d.widgets.errorMessageBlock(t,'No cases to Options form. '));var b;if(h.sameTerm(d.ns.rdf('type')))b=u.findTypeURIs(r);else{var y=u.any(r,h);y===void 0?f.appendChild(d.widgets.errorMessageBlock(t,'Can\'t select subform as no value of: '+h)):(b={},b[y.uri]=!0)}for(var v=0;v<g.length;v++)for(var w=g[v],c=u.each(w,m('for')),x=0;x<c.length;x++)if(b[c[x].uri]){var _=u.the(w,m('use'));if(!_)return f.appendChild(d.widgets.errorMessageBlock(t,'No "use" part for case in form '+o)),f;d.widgets.appendForm(t,f,a,r,_,s,l);break}return f},d.widgets.field[d.ns.ui('Multiple').uri]=function(t,n,a,r,o,s,l){var c=d.icons.iconBase+'noun_19460_green.svg',f=d.store;f.updater=f.updater||new $rdf.UpdateManager(f);var m=t.createElement('table'),h=d.ns.ui;n.appendChild(m);var g=f.any(o,h('property'));if(!g)return m.appendChild(d.widgets.errorMessageBlock(t,'No property to multiple: '+o)),m;var b=f.any(o,h('min'));b=b?b.value:0;var y=f.any(o,h('max'));y=y?y.value:99999999;var v=f.any(o,h('part'));if(!v)return m.appendChild(d.widgets.errorMessageBlock(t,'No part to multiple: '+o)),m;var w=0,x=m.appendChild(t.createElement('tr')),_=m.appendChild(t.createElement('tr')),k=_.appendChild(t.createElement('img'));k.setAttribute('src',c),k.setAttribute('style','margin: 0.2em; width: 1em; height:1em'),k.title='Click to add one or more '+u.label(g);var C=_.appendChild(t.createElement('span')),T=function(n,o){d.log.debug('Multiple add: '+o),++w,o||(o=d.widgets.newThing(s));var c=m.insertBefore(t.createElement('tr'),_),h=function(t,n,a){return l(n,a)},b=d.widgets.fieldFunction(t,v),y=b(t,x,a,o,v,s,function(n,a,u){if(!a)c.appendChild(d.widgets.errorMessageBlock(t,'Multiple: item failed: '+x)),l(a,u);else if(!f.holds(r,g,o)){var m=[$rdf.st(r,g,o,s)];f.updater.update([],m,h)}});d.widgets.deleteButtonWithCheck(t,y,u.label(g),function(){if(f.holds(r,g,o)){var n=[$rdf.st(r,g,o,s)];f.updater.update(n,[],function(n,a,r){a?x.removeChild(y):x.appendChild(d.widgets.errorMessageBlock(t,'Multiple: delete failed: '+r))})}})},E=f.each(r,g);C.textContent=(0===E.length?'Add one or more ':'Add more ')+u.label(g),E.map(function(t){T(null,t)});for(var S=b-E.length,A=0;A<S;A++)console.log('Adding extra: min '+b),T();return _.addEventListener('click',T,!0),m},d.widgets.fieldParams={},d.widgets.fieldParams[d.ns.ui('ColorField').uri]={size:9,type:'color',dt:'color'},d.widgets.fieldParams[d.ns.ui('ColorField').uri].pattern=/^\s*#[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]([0-9a-f][0-9a-f])?\s*$/,d.widgets.fieldParams[d.ns.ui('DateField').uri]={size:20,type:'date',dt:'date'},d.widgets.fieldParams[d.ns.ui('DateField').uri].pattern=/^\s*[0-9][0-9][0-9][0-9](-[0-1]?[0-9]-[0-3]?[0-9])?Z?\s*$/,d.widgets.fieldParams[d.ns.ui('DateTimeField').uri]={size:20,type:'date',dt:'dateTime'},d.widgets.fieldParams[d.ns.ui('DateTimeField').uri].pattern=/^\s*[0-9][0-9][0-9][0-9](-[0-1]?[0-9]-[0-3]?[0-9])?(T[0-2][0-9]:[0-5][0-9](:[0-5][0-9])?)?Z?\s*$/,d.widgets.fieldParams[d.ns.ui('TimeField').uri]={size:10,type:'time',dt:'time'},d.widgets.fieldParams[d.ns.ui('TimeField').uri].pattern=/^\s*([0-2]?[0-9]:[0-5][0-9](:[0-5][0-9])?)\s*$/,d.widgets.fieldParams[d.ns.ui('IntegerField').uri]={size:12,style:'text-align: right',dt:'integer'},d.widgets.fieldParams[d.ns.ui('IntegerField').uri].pattern=/^\s*-?[0-9]+\s*$/,d.widgets.fieldParams[d.ns.ui('DecimalField').uri]={size:12,style:'text-align: right',dt:'decimal'},d.widgets.fieldParams[d.ns.ui('DecimalField').uri].pattern=/^\s*-?[0-9]*(\.[0-9]*)?\s*$/,d.widgets.fieldParams[d.ns.ui('FloatField').uri]={size:12,style:'text-align: right',dt:'float'},d.widgets.fieldParams[d.ns.ui('FloatField').uri].pattern=/^\s*-?[0-9]*(\.[0-9]*)?((e|E)-?[0-9]*)?\s*$/,d.widgets.fieldParams[d.ns.ui('SingleLineTextField').uri]={},d.widgets.fieldParams[d.ns.ui('NamedNodeURIField').uri]={namedNode:!0},d.widgets.fieldParams[d.ns.ui('TextField').uri]={},d.widgets.fieldParams[d.ns.ui('PhoneField').uri]={size:20,uriPrefix:'tel:'},d.widgets.fieldParams[d.ns.ui('PhoneField').uri].pattern=/^\s*\+?[ 0-9-]+[0-9]\s*$/,d.widgets.fieldParams[d.ns.ui('EmailField').uri]={size:30,uriPrefix:'mailto:'},d.widgets.fieldParams[d.ns.ui('EmailField').uri].pattern=/^\s*.*@.*\..*\s*$/,d.widgets.field[d.ns.ui('PhoneField').uri]=d.widgets.field[d.ns.ui('EmailField').uri]=d.widgets.field[d.ns.ui('ColorField').uri]=d.widgets.field[d.ns.ui('DateField').uri]=d.widgets.field[d.ns.ui('DateTimeField').uri]=d.widgets.field[d.ns.ui('TimeField').uri]=d.widgets.field[d.ns.ui('NumericField').uri]=d.widgets.field[d.ns.ui('IntegerField').uri]=d.widgets.field[d.ns.ui('DecimalField').uri]=d.widgets.field[d.ns.ui('FloatField').uri]=d.widgets.field[d.ns.ui('TextField').uri]=d.widgets.field[d.ns.ui('SingleLineTextField').uri]=d.widgets.field[d.ns.ui('NamedNodeURIField').uri]=function(t,n,a,r,o,s,l){var c=d.ns.ui,u=d.store,f=t.createElement('tr');n.appendChild(f);var m=t.createElement('td');m.setAttribute('class','formFieldName'),m.setAttribute('style','  vertical-align: middle;'),f.appendChild(m);var h=t.createElement('td');h.setAttribute('class','formFieldValue'),f.appendChild(h);var g=u.any(o,c('property'));if(!g)return f.appendChild(t.createTextNode('Error: No property given for text field: '+o)),f;m.appendChild(d.widgets.fieldLabel(t,g,o));var b=d.widgets.bottomURI(o),y=d.widgets.fieldParams[b];void 0===y&&(y={});var v=y.style||'font-size: 100%; margin: 0.1em; padding: 0.1em;',w=t.createElement('input');h.appendChild(w),w.setAttribute('type',y.type?y.type:'text');var x=u.any(o,c('size'));w.setAttribute('size',x?''+x:y.size?''+y.size:'20');var _=u.any(o,c('maxLength'));w.setAttribute('maxLength',_?''+_:'4096'),s=s||d.widgets.fieldStore(r,g,s);var k=u.any(r,g,void 0,s);return k||(k=u.any(o,c('default')),k&&u.add(r,g,k,s)),k&&k.uri&&y.uriPrefix?w.value=decodeURIComponent(k.uri.replace(y.uriPrefix,'')).replace(/ /g,''):k&&(w.value=k.value||k.uri),w.setAttribute('style',v),w.addEventListener('keyup',function(){y.pattern&&w.setAttribute('style',v+(w.value.match(y.pattern)?'color: green;':'color: red;'))},!0),w.addEventListener('change',function(){if(!y.pattern||w.value.match(y.pattern)){w.disabled=!0,w.setAttribute('style',v+'color: gray;');var n=u.statementsMatching(r,g),a;y.namedNode?a=u.sym(w.value):y.uriPrefix?(a=encodeURIComponent(w.value.replace(/ /g,'')),a=u.sym(y.uriPrefix+w.value)):y.dt?a=new $rdf.Literal(w.value.trim(),void 0,d.ns.xsd(y.dt)):a=new $rdf.Literal(w.value);var o=$rdf.st(r,g,a,s);u.updater.update(n,o,function(n,a,r){a?(w.disabled=!1,w.setAttribute('style',v)):f.appendChild(d.widgets.errorMessageBlock(t,r)),l(a,r)})}},!0),f},d.widgets.field[d.ns.ui('MultiLineTextField').uri]=function(t,n,a,r,o,s,l){var c=d.ns.ui,u=d.store,f=u.any(o,c('property'));if(!f)return d.widgets.errorMessageBlock(t,'No property to text field: '+o);n.appendChild(d.widgets.fieldLabel(t,f,o)),s=d.widgets.fieldStore(r,f,s);var m=d.widgets.makeDescription(t,u,r,f,s,l);return n.appendChild(m),m},d.widgets.field[d.ns.ui('BooleanField').uri]=function(t,n,a,r,s,l){var c=d.ns.ui,f=d.store,m=f.any(s,c('property'));if(!m)return n.appendChild(d.widgets.errorMessageBlock(t,'No property to boolean field: '+s));var h=f.any(s,c('label'));h||(h=u.label(m,!0)),l=d.widgets.fieldStore(r,m,l);var g=f.any(r,m);void 0===g&&(g=!1);var b=$rdf.st(r,m,!0,l),y=$rdf.st(r,m,!1,l),v=o(t,f,h,y,b,s,l);return n.appendChild(v),v},d.widgets.field[d.ns.ui('Classifier').uri]=function(t,n,a,r,o,s,l){var c=d.store,u=d.ns.ui,f=c.any(o,u('category'));if(!f)return d.widgets.errorMessageBlock(t,'No category for classifier: '+o);d.log.debug('Classifier: store='+s);var m=d.widgets.makeSelectForNestedCategory(t,c,r,f,s,function(t,n){return t?l(t,n):l(t,n)});return n.appendChild(m),m},d.widgets.field[d.ns.ui('Choice').uri]=function(t,n,a,r,o,s,l){var c=d.ns.ui,u=d.ns,f=d.store,m=t.createElement('tr'),h;n.appendChild(m);var g=t.createElement('td');m.appendChild(g);var b=t.createElement('td');m.appendChild(b);var y=f.any(o,c('property'));if(!y)return d.widgets.errorMessageBlock(t,'No property for Choice: '+o);g.appendChild(d.widgets.fieldLabel(t,y,o));var v=f.any(o,c('from'));if(!v)return d.widgets.errorMessageBlock(t,'No \'from\' for Choice: '+o);var w=f.any(o,c('use')),_=[],k={multiple:void 0,nullLabel:void 0,disambiguate:!1},C;for(var T in _=f.each(void 0,u.rdf('type'),v),f.findMembersNT(v))_.push(f.fromNT(T));if(v.sameTerm(u.rdfs('Class')))for(h in d.widgets.allClassURIs())_.push(f.sym(h));else if(v.sameTerm(u.rdf('Property'))){for(h in C=d.widgets.propertyTriage(),C.op)_.push(f.fromNT(h));for(h in C.dp)_.push(f.fromNT(h));k.disambiguate=!0}else if(v.sameTerm(u.owl('ObjectProperty'))){for(h in C=d.widgets.propertyTriage(),C.op)_.push(f.fromNT(h));k.disambiguate=!0}else if(v.sameTerm(u.owl('DatatypeProperty'))){for(h in C=d.widgets.propertyTriage(),C.dp)_.push(f.fromNT(h));k.disambiguate=!0}var x=f.any(r,y),E=d.widgets.sortByLabel(_);f.any(o,c('canMintNew'))&&(k.mint='* New *',k.subForm=w);var S=d.widgets.makeSelectForOptions(t,f,r,y,E,k,s,l);return b.appendChild(S),x&&w&&function(){x=f.any(r,y),d.widgets.fieldFunction(t,w)(t,b,a,x,w,s,l)}(!0,''),m},d.widgets.fieldParams[d.ns.ui('Comment').uri]={element:'p',style:'padding: 0.1em 1.5em; color: brown; white-space: pre-wrap;'},d.widgets.fieldParams[d.ns.ui('Heading').uri]={element:'h3',style:'font-size: 110%; color: brown;'},d.widgets.field[d.ns.ui('Comment').uri]=d.widgets.field[d.ns.ui('Heading').uri]=function(t,n,a,r,o){var s=d.ns.ui,l=d.store,c=l.any(o,s('contents'));c||(c='Error: No contents in comment field.');var u=d.widgets.bottomURI(o),f=d.widgets.fieldParams[u];void 0===f&&(f={});var m=t.createElement('div');n.appendChild(m);var h=m.appendChild(t.createElement(f.element));h.textContent=c;var g=l.any(o,s('style'));return void 0===g&&(g=f.style?f.style:''),g&&h.setAttribute('style',g),m},d.widgets.openHrefInOutlineMode=function(t){t.preventDefault(),t.stopPropagation();var n=u.getTarget(t),a=n.getAttribute('href');a||console.log('No href found \n'),d.outline?d.outline.GotoSubject(d.store.sym(a),!0,void 0,!0,void 0):window&&window.UI&&window.UI.outline?window.UI.outline.GotoSubject(d.store.sym(a),!0,void 0,!0,void 0):console.log('ERROR: Can\'t access outline manager in this config')},d.widgets.defaultAnnotationStore=function(t){if(void 0!==t.uri){var n=t.uri;if('http://'===n.slice(0,7)){n=n.slice(7);var a=n.indexOf('#');if(0<=a)n=n.slice(0,a);else{var r=n.lastIndexOf('/');if(0>r)return;n=n.slice(0,r)}return d.store.sym('http://tabulator.org/wiki/annnotation/'+n)}}},d.widgets.fieldStore=function(t,n,a){var r=d.store.statementsMatching(t,n);return 0===r.length?a:0<r.length&&r[0].why.uri&&d.store.updater.editable(r[0].why.uri,d.store)?d.store.sym(r[0].why.uri):null},d.widgets.allClassURIs=function(){var t={};return d.store.statementsMatching(void 0,d.ns.rdf('type'),void 0).map(function(n){n.object.uri&&(t[n.object.uri]=!0)}),d.store.statementsMatching(void 0,d.ns.rdfs('subClassOf'),void 0).map(function(n){n.object.uri&&(t[n.object.uri]=!0),n.subject.uri&&(t[n.subject.uri]=!0)}),d.store.each(void 0,d.ns.rdf('type'),d.ns.rdfs('Class')).map(function(n){n.uri&&(t[n.uri]=!0)}),t},d.widgets.propertyTriage=function(){var t={},n=d.store,a={},r={},o=0,s=0,l=0,c=n.predicateIndex;for(var u in c){var f=c[u][0].object;'Literal'===f.termType?(a[u]=!0,s++):(r[u]=!0,o++)}for(var m=n.each(void 0,d.ns.rdf('type'),d.ns.rdf('Property')),h=0;h<m.length;h++)u=m[h].toNT(),d.log.debug('propertyTriage: unknown: '+u),r[u]||a[u]||(a[u]=!0,r[u]=!0,l++);return t.op=r,t.dp=a,d.log.info('propertyTriage: '+o+' non-lit, '+s+' literal. '+l+' unknown.'),t},d.widgets.fieldLabel=function(t,n,a){var r=d.store.any(a,d.ns.ui('label'));if(r||(r=u.label(n,!0)),void 0===n)return t.createTextNode('@@Internal error: undefined property');var o=t.createElement('a');return n.uri&&o.setAttribute('href',n.uri),o.setAttribute('style','color: #3B5998; text-decoration: none;'),o.textContent=r,o},d.widgets.bottomURI=function(t){var n=d.store,a=n.findTypeURIs(t),r=n.bottomTypeURIs(a),o=[];for(var s in r)o.push(s);return o[0]},d.widgets.fieldFunction=function(t,n){var a=d.widgets.bottomURI(n),r=d.widgets.field[a];return d.log.debug('paneUtils: Going to implement field '+n+' of type '+a),r?r:function(){return d.widgets.errorMessageBlock(t,'No handler for field '+n+' of type '+a)}},d.widgets.editFormButton=function(t,n,a,r,o){var s=t.createElement('button');return s.setAttribute('type','button'),s.innerHTML='Edit '+u.label(d.ns.ui('Form')),s.addEventListener('click',function(){var l=d.widgets.appendForm(t,n,{},a,d.ns.ui('FormForm'),r,o);l.setAttribute('style',d.ns.ui('FormForm').sameTerm(a)?'background-color: #fee;':'background-color: #ffffe7;'),n.removeChild(s)},!0),s},d.widgets.linkButton=function(t,n){var a=t.createElement('button');return a.setAttribute('type','button'),a.textContent='Goto '+u.label(n),a.addEventListener('click',function(){d.outline.GotoSubject(n,!0,void 0,!0,void 0)},!0),a},d.widgets.removeButton=function(t,n){var a=t.createElement('button');return a.setAttribute('type','button'),a.textContent='\u2715',a.addEventListener('click',function(){n.parentNode.removeChild(n)},!0),a},d.widgets.appendForm=function(t,n,a,r,o,s,l){return d.widgets.fieldFunction(t,o)(t,n,a,r,o,s,l)},d.widgets.propertiesForClass=function(t,n){var a=d.ns,r=t.each(void 0,a.rdf('range'),n);[a.rdfs('comment'),a.dc('title'),a.foaf('name'),a.foaf('homepage')].map(function(t){r.push(t)});var o=t.each(void 0,a.rdf('type'),n);60<o.length&&(o=o.slice(0,60));for(var s={},l=0;l<(60<o.length?60:o.length);l++)t.statementsMatching(o[l],void 0,void 0).map(function(t){s[t.predicate.uri]=!0});r.map(function(t){s[t.uri]=!0});var c=[];for(var u in s)c.push(t.sym(u));return c},d.widgets.findClosest=function(t,n,a){for(var r=[t.sym(n)];0<r.length;){var o=r.shift(),s=t.each(o,a);if(d.log.debug('Lists for '+o+', '+a+': '+s.length),0!==s.length)return s;for(var l=t.each(o,d.ns.rdfs('subClassOf')),c=0;c<l.length;c++)r.push(l[c]),d.log.debug('findClosest: add super: '+l[c])}return[]},d.widgets.formsFor=function(n){var a=d.ns,r=d.store;d.log.debug('formsFor: subject='+n);var o=r.findTypeURIs(n),t;for(t in o)d.log.debug('   type: '+t);var s=r.bottomTypeURIs(o),l=[];for(var c in s)d.log.debug('formsFor: trying bottom type ='+c),l=l.concat(d.widgets.findClosest(r,c,a.ui('creationForm'))),l=l.concat(d.widgets.findClosest(r,c,a.ui('annotationForm')));return d.log.debug('formsFor: subject='+n+', forms='),l},d.widgets.sortBySequence=function(t){var n=t.map(function(t){var n=d.store.any(t,d.ns.ui('sequence'));return[n||9999,t]});return n.sort(function(t,n){return t[0]-n[0]}),n.map(function(t){return t[1]})},d.widgets.sortByLabel=function(t){var n=t.map(function(t){return[u.label(t).toLowerCase(),t]});return n.sort(),n.map(function(t){return t[1]})},d.widgets.newButton=function(t,n,a,r,o,s,l,c){var f=t.createElement('button');return f.setAttribute('type','button'),f.innerHTML='New '+u.label(o),f.addEventListener('click',function(){f.parentNode.appendChild(d.widgets.promptForNew(t,n,a,r,o,s,l,c))},!1),f},d.widgets.promptForNew=function(t,n,a,r,o,s,l,c){var m=d.ns,h=t.createElement('form');if(!s){var g=d.widgets.findClosest(n,o.uri,m.ui('creationForm'));if(0===g.length){var y=h.appendChild(t.createElement('p'));y.textContent='I am sorry, you need to provide information about a '+u.label(o)+' but I don\'t know enough information about those to ask you.';var v=h.appendChild(t.createElement('button'));return v.setAttribute('type','button'),v.setAttribute('style','float: right;'),v.innerHTML='Goto '+u.label(o),v.addEventListener('click',function(){d.outline.GotoSubject(o,!0,void 0,!0,void 0)},!1),h}d.log.debug('lists[0] is '+g[0]),s=g[0]}d.log.debug('form is '+s),h.setAttribute('style','border: 0.05em solid brown; color: brown'),h.innerHTML='<h3>New '+u.label(o)+'</h3>';var b=d.widgets.fieldFunction(t,s),w=d.widgets.newThing(l),x=!1,_=function(t,n,a){return c(n,a)};d.log.info('paneUtils Object is '+w);var k=b(t,h,{},w,s,l,function(s,u){if(!s)return c(s,u);var f=[];a&&!n.holds(a,r,w,l)&&f.push($rdf.st(a,r,w,l)),a&&!n.holds(w,m.rdf('type'),o,l)&&f.push($rdf.st(w,m.rdf('type'),o,l)),f.length?d.store.updater.update([],f,_):c(!0,u),x||(x=h.appendChild(d.widgets.linkButton(t,w)))}),f=d.widgets.removeButton(t,k);return f.setAttribute('style','float: right;'),h.AJAR_subject=w,h},d.widgets.makeDescription=function(t,n,a,r,o,s){var l=t.createElement('div'),c=n.statementsMatching(a,r,void 0);if(1<c.length)return d.widgets.errorMessageBlock(t,'Should not be '+c.length+' i.e. >1 '+r+' of '+a);var f=c.length?c[0].object.value:void 0,m=t.createElement('textarea');l.appendChild(m),m.rows=f?f.split('\n').length+2:2,m.cols=80;var h='font-size:100%; white-space: pre-wrap; background-color: white; border: 0.07em solid gray; padding: 1em 0.5em; margin: 1em 1em;';m.setAttribute('style',h),c.length?m.value=f:m.select(),l.refresh=function(){var t=n.any(a,r);t&&t.value!==m.value&&(m.value=t.value)};var g=t.createElement('br');l.appendChild(g);var b=t.createElement('input');b.setAttribute('type','submit'),b.disabled=!0,b.setAttribute('style','visibility: hidden; float: right;'),b.value='Save '+u.label(r),l.appendChild(b);var y=function(){b.disabled=!0,b.setAttribute('style','visibility: hidden; float: right;'),m.disabled=!0,m.setAttribute('style',h+'color: gray;');var c=n.statementsMatching(a,r),u=$rdf.st(a,r,m.value,o);d.store.updater.update(c,u,function(n,a,r){a?(m.setAttribute('style',h+'color: black;'),m.disabled=!1):l.appendChild(d.widgets.errorMessageBlock(t,'Error (while saving change to '+o.uri+'): '+r)),s&&s(a,r)})};return m.addEventListener('keyup',function(){m.setAttribute('style',h+'color: green;'),b&&(b.disabled=!1,b.setAttribute('style','float: right;'))},!0),m.addEventListener('change',y,!0),b.addEventListener('click',y,!1),l},d.widgets.makeSelectForOptions=function(t,a,r,o,s,l,f,m){d.log.debug('Select list length now '+s.length);for(var h=0,n={},g=0,b;g<s.length;g++)b=s[g],b.uri in n||(n[b.uri]=!0,h++);if(0==h&&!l.mint)return d.widgets.errorMessageBlock(t,'Can\'t do selector with no options, subject= '+r+' property = '+o+'.');d.log.debug('makeSelectForOptions: store='+f);var y=function(){return v={},o.sameTerm(d.ns.rdf('type'))?v=a.findTypeURIs(r):a.each(r,o).map(function(t){v[t.uri]=!0}),v},v=y(),w=t.createElement('select');for(var x in w.setAttribute('style','margin: 0.6em 1.5em;'),l.multiple&&w.setAttribute('multiple','true'),w.currentURI=null,w.refresh=function(){v=y();for(var t=0,n;t<w.children.length;t++)n=w.children[t],n.AJAR_uri&&(n.selected=n.AJAR_uri in v);w.disabled=!1},n){var _=a.sym(x),c=t.createElement('option');l.disambiguate?c.appendChild(t.createTextNode(u.labelWithOntology(_,!0))):c.appendChild(t.createTextNode(u.label(_,!0)));var k=a.any(_,a.sym('http://www.w3.org/ns/ui#backgroundColor'));k&&c.setAttribute('style','background-color: '+k.value+'; '),c.AJAR_uri=x,x in v&&(c.setAttribute('selected','true'),w.currentURI=x),w.appendChild(c)}if(l.mint){var C=t.createElement('option');C.appendChild(t.createTextNode(l.mint)),C.AJAR_mint=!0,w.insertBefore(C,w.firstChild)}if(null==w.currentURI&&!l.multiple){var T=t.createElement('option');T.appendChild(t.createTextNode(l.nullLabel)),w.insertBefore(T,w.firstChild),T.selected=!0}return w.addEventListener('change',function(){function n(t,n){m(t,n)}w.disabled=!0;for(var s=[],c=[],u=function(n){a.holds(r,o,n,f)&&s.push($rdf.st(r,o,n,f))},h=0,g;h<w.options.length;h++){if(g=w.options[h],g.selected&&g.AJAR_mint){var b;if(l.mintClass){var x=d.widgets.promptForNew(t,a,r,o,l.mintClass,null,f,function(t,n){t||m(t,n)});w.parentNode.appendChild(x),b=x.AJAR_subject}else b=d.widgets.newThing(f);c.push($rdf.st(r,o,b,f)),l.mintStatementsFun&&(c=c.concat(l.mintStatementsFun(b)))}g.AJAR_uri&&(g.selected&&!(g.AJAR_uri in v)&&c.push($rdf.st(r,o,a.sym(g.AJAR_uri),f)),!g.selected&&g.AJAR_uri in v&&u(a.sym(g.AJAR_uri)),g.selected&&(w.currentURI=g.AJAR_uri))}for(var _=w.subSelect;_&&_.currentURI;)u(a.sym(_.currentURI)),_=_.subSelect;for(_=w.superSelect;_&&_.currentURI;)u(a.sym(_.currentURI)),_=_.superSelect;d.log.info('selectForOptions: stote = '+f),d.store.updater.update(s,c,function(a,r,o){if(v=y(),r&&(w.disabled=!1,b)){var s=d.widgets.fieldFunction(t,l.subForm);s(t,w.parentNode,{},b,l.subForm,f,n)}m&&m(r,o)})},!1),w},d.widgets.makeSelectForCategory=function(t,n,a,r,o,s){var l=d.log,c=n.any(r,d.ns.owl('disjointUnionOf')),u=!1,f;return c?f=c.elements:(f=n.each(void 0,d.ns.rdfs('subClassOf'),r),u=!0),l.debug('Select list length '+f.length),0===f.length?d.widgets.errorMessageBlock(t,'Can\'t do '+(u?'multiple ':'')+'selector with no subclasses of category: '+r):1===f.length?d.widgets.errorMessageBlock(t,'Can\'t do '+(u?'multiple ':'')+'selector with only 1 subclass of category: '+r+':'+f[1]):d.widgets.makeSelectForOptions(t,n,a,d.ns.rdf('type'),f,{multiple:u,nullPrompt:'--classify--'},o,s)},d.widgets.makeSelectForNestedCategory=function(t,n,a,r,o,s){var l=t.createElement('span'),c=null,u;u=d.widgets.makeSelectForCategory(t,n,a,r,o,function(t,n){t&&f(),s(t,n)}),l.appendChild(u);var f=function(){c&&(l.removeChild(c),c=null),u.currentURI&&n.any(n.sym(u.currentURI),d.ns.owl('disjointUnionOf'))&&(c=d.widgets.makeSelectForNestedCategory(t,n,a,n.sym(u.currentURI),o,s),u.subSelect=c.firstChild,u.subSelect.superSelect=u,l.appendChild(c))};return f(),l},d.widgets.selectorPanel=function(t,n,a,r,o,s,l,c,u){return d.widgets.selectorPanelRefresh(t.createElement('div'),t,n,a,r,o,s,l,c,u)},d.widgets.selectorPanelRefresh=function(t,n,a,r,o,s,l,c,u,f){var m='border: 0.1em solid #ddd; border-bottom: none; width: 95%; height: 2em; padding: 0.5em;',h=null;t.innerHTML='';for(var g=function(t,l){var g=function(){var t=s?a.each(void 0,o,l):a.each(l,o);_.setAttribute('class',0===t.length?'hideTillHover':''),v.setAttribute('src',c.connectIcon||d.icons.iconBase+'noun_25830.svg'),v.setAttribute('title',t.length?t.length:'attach')},b=d.widgets.index.twoLine.widgetForClass(r),y,v;y=b(n,l),y.setAttribute('style',m);var w=n.createElement('div');w.setAttribute('class','hideTillHover'),w.setAttribute('style','float:right; width:10%');var x=n.createElement('a');x.setAttribute('href',l.uri),x.setAttribute('style','float:right'),w.appendChild(x).textContent='>',t.appendChild(w);var _=n.createElement('div');return _.setAttribute('style',(s?'float:left;':'float:right;')+' width:30px;'),v=n.createElement('img'),g(),_.appendChild(v),t.appendChild(_),y.addEventListener('click',function(t){h===y?(y.setAttribute('style',m),h=null):(h&&h.setAttribute('style',m),y.setAttribute('style',m+'background-color: #ccc; color:black;'),h=y),u(l,t,h===y),g()},!1),v.addEventListener('click',function(t){f(l,t,s,g)},!1),t.appendChild(y),t},b=0,y;b<l.length;b++)y=n.createElement('div'),t.appendChild(y),g(y,l[b]);return t},d.widgets.index={},d.widgets.index.line={},d.widgets.index.twoLine={},d.widgets.index.twoLine['']=function(t,n){var a=t.createElement('div');return a.textContent=u.label(n),a},d.widgets.index.twoLine.widgetForClass=function(t){var n=d.widgets.index.twoLine[t.uri],a=d.store;if(n)return n;var r=a.findSuperClassesNT(t);for(var o in r)if(n=d.widgets.index.twoLine[a.fromNT(o).uri],n)return n;return d.widgets.index.twoLine['']},d.widgets.index.twoLine['http://www.w3.org/2000/10/swap/pim/qif#Transaction']=function(t,n){var a='',r=function(t){var r=d.store.any(n,d.ns.qu(t));return r||(a+='@@ No value for '+t+'! '),r?u.escapeForXML(r.value):'?'},o=t.createElement('table');return o.innerHTML='<tr><td colspan="2">'+r('payee')+'</td></tr>\n<tr><td><td>'+r('date').slice(0,10)+'</td><td style="text-align: right;">'+r('amount')+'</td></tr>',a&&(o.innerHTML='<tr><td><a href="'+u.escapeForXML(n.uri)+'">'+u.escapeForXML(a)+'</a></td></tr>'),o},d.widgets.index.twoLine['http://www.w3.org/ns/pim/trip#Trip']=function(t,n){var a=function(t){var a=d.store.any(n,t);return a?u.escapeForXML(a.value):'?'},r=t.createElement('table');return r.innerHTML='<tr><td colspan="2">'+a(d.ns.dc('title'))+'</td></tr>\n<tr style="color: #777"><td><td>'+a(d.ns.cal('dtstart'))+'</td><td>'+a(d.ns.cal('dtend'))+'</td></tr>',r},d.widgets.addStyleSheet=function(t,n){for(var a=t.querySelectorAll('link'),r=0;r<a.length;r++)if('stylesheet'===(a[r].getAttribute('rel')||'')&&(a[r].getAttribute('href')||'')===n)return;var o=t.createElement('link');o.setAttribute('rel','stylesheet'),o.setAttribute('type','text/css'),o.setAttribute('href',n),t.getElementsByTagName('head')[0].appendChild(o)},d.widgets.isAudio=function(t){return d.widgets.isImage(t,'audio')},d.widgets.isVideo=function(t){return d.widgets.isImage(t,'video')},d.widgets.isImage=function(n,a){var r=a||'image',o=d.store.findTypeURIs(n),s=$rdf.Util.mediaTypeClass(r+'/*').uri.split('*')[0];for(var l in o)if(l.startsWith(s))return!0;return!!({audio:'http://purl.org/dc/dcmitype/Sound',image:'http://purl.org/dc/dcmitype/Image',video:'http://purl.org/dc/dcmitype/MovingImage'}[r]in o)}},function(t,n,a){'use strict';function r(t){return(t>>>24|65280&t>>>8|16711680&t<<8|(255&t)<<24)>>>0}function o(t){return 1===t.length?'0'+t:t}function s(t){return 7===t.length?'0'+t:6===t.length?'00'+t:5===t.length?'000'+t:4===t.length?'0000'+t:3===t.length?'00000'+t:2===t.length?'000000'+t:1===t.length?'0000000'+t:t}var d=a(15),l=a(1);n.inherits=l,n.toArray=function(t,n){if(Array.isArray(t))return t.slice();if(!t)return[];var a=[];if(!('string'==typeof t))for(r=0;r<t.length;r++)a[r]=0|t[r];else if(!n)for(var r=0;r<t.length;r++){var o=t.charCodeAt(r),s=o>>8,d=255&o;s?a.push(s,d):a.push(d)}else if('hex'===n)for(t=t.replace(/[^a-z0-9]+/ig,''),0!=t.length%2&&(t='0'+t),r=0;r<t.length;r+=2)a.push(parseInt(t[r]+t[r+1],16));return a},n.toHex=function(t){for(var n='',a=0;a<t.length;a++)n+=o(t[a].toString(16));return n},n.htonl=r,n.toHex32=function(t,n){for(var a='',o=0,d;o<t.length;o++)d=t[o],'little'===n&&(d=r(d)),a+=s(d.toString(16));return a},n.zero2=o,n.zero8=s,n.join32=function(t,n,a,r){var o=a-n;d(0==o%4);for(var s=Array(o/4),l=0,c=n;l<s.length;l++,c+=4){var u;u='big'===r?t[c]<<24|t[c+1]<<16|t[c+2]<<8|t[c+3]:t[c+3]<<24|t[c+2]<<16|t[c+1]<<8|t[c],s[l]=u>>>0}return s},n.split32=function(t,n){for(var a=Array(4*t.length),r=0,o=0,s;r<t.length;r++,o+=4)s=t[r],'big'===n?(a[o]=s>>>24,a[o+1]=255&s>>>16,a[o+2]=255&s>>>8,a[o+3]=255&s):(a[o+3]=s>>>24,a[o+2]=255&s>>>16,a[o+1]=255&s>>>8,a[o]=255&s);return a},n.rotr32=function(t,n){return t>>>n|t<<32-n},n.rotl32=function(t,n){return t<<n|t>>>32-n},n.sum32=function(t,n){return t+n>>>0},n.sum32_3=function(t,n,a){return t+n+a>>>0},n.sum32_4=function(t,n,a,r){return t+n+a+r>>>0},n.sum32_5=function(t,n,a,r,o){return t+n+a+r+o>>>0},n.sum64=function(t,n,a,r){var o=t[n],s=t[n+1],d=r+s>>>0,l=(d<r?1:0)+a+o;t[n]=l>>>0,t[n+1]=d},n.sum64_hi=function(t,n,a,r){var o=(n+r>>>0<n?1:0)+t+a;return o>>>0},n.sum64_lo=function(t,n,a,r){return n+r>>>0},n.sum64_4_hi=function(t,n,a,r,o,s,d,l){var c=0,u=n;u=u+r>>>0,c+=u<n?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+l>>>0,c+=u<l?1:0;var f=t+a+o+d+c;return f>>>0},n.sum64_4_lo=function(t,n,a,r,o,s,d,l){return n+r+s+l>>>0},n.sum64_5_hi=function(t,n,a,r,o,s,d,l,c,u){var f=0,m=n;m=m+r>>>0,f+=m<n?1:0,m=m+s>>>0,f+=m<s?1:0,m=m+l>>>0,f+=m<l?1:0,m=m+u>>>0,f+=m<u?1:0;var h=t+a+o+d+c+f;return h>>>0},n.sum64_5_lo=function(t,n,a,r,o,s,d,l,c,u){return n+r+s+l+u>>>0},n.rotr64_hi=function(t,n,a){return(n<<32-a|t>>>a)>>>0},n.rotr64_lo=function(t,n,a){return(t<<32-a|n>>>a)>>>0},n.shr64_hi=function(t,n,a){return t>>>a},n.shr64_lo=function(t,n,a){return(t<<32-a|n>>>a)>>>0}},function(t,n,a){'use strict';function r(){return'v'+b++}function o(t,n){var a,r;for(a=n;a&&1===a.nodeType;a=a.parentNode)if(r=a.getAttribute('about'),r)return t.fromNT(r);g.log.debug('getAbout: No about found')}function s(t){var n=t.ownerDocument,a=n.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return[r.left-a.left,r.top-a.top]}function d(t){if(t.uri===void 0)return'??';var n=t.uri,a=[],r=n.lastIndexOf('#'),o;if(0<=r)n=n.slice(0,r+1);else if(r=n.lastIndexOf('/'),0<=r)n=n.slice(0,r+1);else return t.uri+'?!';for(var s in g.ns)a[g.ns[s]]=s;try{return a[n]}catch(t){}for(n=n.slice(0,-1);n;){if(r=n.lastIndexOf('/'),!(0<=r))return t.uri+'!?';if(o=n.slice(r+1),n=n.slice(0,r),'ns'!==o&&0>'0123456789'.indexOf(o[0]))return o}}function l(t,n){function a(t){return n?t.slice(0,1).toUpperCase()+t.slice(1):t}function r(t){var n='';'/'===t.slice(-1)&&(t=t.slice(0,-1));for(var r=0;r<t.length;r++){if('_'===t[r]||'-'===t[r]){n+=' ';continue}n+=t[r],r+1<t.length&&t[r].toUpperCase()!==t[r]&&t[r+1].toLowerCase()!==t[r+1]&&(n+=' ')}return'has '===n.slice(0,4)&&(n=n.slice(4)),a(n)}var o;if('undefined'!=typeof tabulator&&tabulator.lb&&(o=tabulator.lb.label(t),o))return a(o.value);var d=g.store,l=d.any(t,g.ns.link('message'))||d.any(t,g.ns.vcard('fn'))||d.any(t,g.ns.foaf('name'))||d.any(t,g.ns.dct('title'))||d.any(t,g.ns.dc('title'))||d.any(t,g.ns.rss('title'))||d.any(t,g.ns.contact('fullName'))||d.any(t,d.sym('http://www.w3.org/2001/04/roadmap/org#name'))||d.any(t,g.ns.cal('summary'))||d.any(t,g.ns.foaf('nick'))||d.any(t,g.ns.rdfs('label'));if(l)return a(l.value);if('BlankNode'===t.termType)return'...';if('Collection'===t.termType)return'('+t.elements.length+')';var c=t.uri;if('undefined'==typeof c)return t.toString();try{c=c.split('/').map(decodeURIComponent).join('/')}catch(t){for(var u=c.length-3,f;0<u;u--)for(f='0123456789abcefABCDEF';'%'===c[u]&&0<=f.indexOf(c[u+1])&&0<=f.indexOf(c[u+2]);)c=c.slice(0,u)+x(parseInt(c.slice(u+1,u+3),16))+c.slice(u+3)}'#this'===c.slice(-5)?c=c.slice(0,-5):'#me'===c.slice(-3)&&(c=c.slice(0,-3));var m=c.indexOf('#');if(0<=m)return r(c.slice(m+1));'/foaf.rdf'===c.slice(-9)?c=c.slice(0,-9):'/foaf'===c.slice(-5)&&(c=c.slice(0,-5));var h=c.lastIndexOf('/',c.length-2);return 0<=h&&h<t.uri.length?r(c.slice(h+1)):a(decodeURIComponent(t.uri))}function c(t){return t.replace(/&/g,'&amp;').replace(/</g,'&lt;')}function u(t){return c(l(t))}function f(t,n){var a;if(n){var r=g.store.any(t,g.ns.owl('inverseOf'));if(r||(r=g.store.any(void 0,g.ns.owl('inverseOf'),t)),r)return u(r)}return a=u(t),n?'type'===a?'...':'is '+a+' of':a}function m(t){for(var a=t;;){if(a.getAttribute('predTR'))return a;if(a.previousSibling&&'TR'===a.previousSibling.nodeName)a=a.previousSibling;else return g.log.error('Could not find predParent'),t}}function h(t,n,a){var o=g.store,s=n.AJAR_inverse,d=null,c,u,b,y,w;for(y=n.parentNode;y;y=y.parentNode)if('undefined'!=typeof y.AJAR_statement){y.setAttribute('bla',y.AJAR_statement),y.AJAR_variable||h(t,y),b=y.AJAR_variable;var x=m(y);x.getAttribute('optionalSubqueriesIndex')&&(d=x.getAttribute('optionalSubqueriesIndex'),w=v[d]);break}w||(w=t.pat);var _=m(n),k=_.getAttribute('optional');if(k||(d?_.setAttribute('optionalSubqueriesIndex',d):_.removeAttribute('optionalSubqueriesIndex')),k){var C=o.formula();v.push(C),_.setAttribute('optionalSubqueriesIndex',v.length-1),w.optional.push(C),w=C}var T=n.AJAR_statement,E=n.AJAR_inverse?T.subject:T.object,S=!0;return E.isBlank&&a&&window.alert('You cannot constrain a query with a blank node. No constraint will be added.'),b||(S=!1,b=s?T.object:T.subject),u=n.AJAR_variable?n.AJAR_variable:o.variable(r()),t.vars.push(u),u.label=S?b.label:l(b),u.label+=' '+f(T.predicate,s),c=function(t,n){return s?new g.rdf.Statement(t,T.predicate,n):new g.rdf.Statement(n,T.predicate,t)}(u,b),u.label=u.label.slice(0,1).toUpperCase()+u.label.slice(1),a&&(w.constraints[u]=new function(t){return this.describe=function(n){return n+' = '+t.toNT()},this.test=function(n){return t.sameTerm(n)},this}(E)),g.log.info('Pattern: '+c),c.tr=n,n.AJAR_pattern=c,n.AJAR_variable=u,g.log.debug('Query pattern: '+c),w.statements.push(c),u}t.exports={addLoadEvent:function(t){var n=window.onload;window.onload='function'==typeof window.onload?function(){n(),t()}:t},AJARImage:function(t,n,a,r){r||(r=document);var o=r.createElement('img');return o.setAttribute('src',t),o.addEventListener('copy',function(t){t.clipboardData.setData('text/plain',''),t.clipboardData.setData('text/html',''),t.preventDefault()}),'undefined'!=typeof a&&o.setAttribute('title',a),o},ancestor:function(t,n){var a;for(a=t;a;a=a.parentNode)try{if(a.tagName===n)return a}catch(t){return}},beep:function(){if(y){var t=y,n=new t;return function(t,a,r,o){t=+(t||0.3),r=r||'sine','function'!=typeof o&&(o=function(){});var s=n.createOscillator();s.type=r,s.frequency.value=a||256,s.connect(n.destination),s.start(0),s.stop(t)}}},clearVariableNames:function(){b=0},emptyNode:function(t){var n=t.childNodes,a=n.length,r;for(r=a-1;0<=r;r--)t.removeChild(n[r]);return t},escapeForXML:c,findPos:s,genUuid:function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){var n=0|16*Math.random(),a='x'===t?n:8|3&n;return a.toString(16)})},getAbout:o,getEyeFocus:function(t,n,a,r){r||(r=window);var o=s(t)[1],d=o-52-r.scrollY;if(n)return a?void r.scrollBy(0,o+t.clientHeight-(r.scrollY+r.innerHeight)):void r.scrollBy(0,d);var l=r.setInterval(function(){r.scrollBy(0,d/10),c++,10==c&&r.clearInterval(l)},50),c=0},getTarget:function(t){var n;return t=t||window.event,t.target?n=t.target:t.srcElement&&(n=t.srcElement),3===n.nodeType&&(n=n.parentNode),n},getTerm:function(t){var n=t.parentNode,a=n?n.AJAR_statement:void 0,r=a?t.className:'';return'pred'===r||'pred selected'===r?a.predicate:'obj'===r||'obj selected'===r?n.AJAR_inverse?a.subject:a.object:''===r||'selected'===r?o(g.store,t):'undetermined selected'===r?t.nextSibling?a.predicate:n.AJAR_inverse?a.subject:a.object:void 0},hashColor:function(t){t=t.uri||t;return'#'+(12632256|16777215&function(t){return t.split('').reduce(function(t,n){return t=(t<<5)-t+n.charCodeAt(0),t&t},0)}(t)).toString(16)},include:function(t,n){var a=t.createElement('script');return a.setAttribute('type','text/javascript'),a.setAttribute('src',n),a},label:l,labelForXML:u,labelWithOntology:function(n,a){var r=g.store.findTypeURIs(n);return r[g.ns.rdf('Predicate').uri]||r[g.ns.rdfs('Class').uri]?l(n,a)+' ('+d(n)+')':l(n,a)},makeQueryRow:h,newVariableName:r,ontologyLabel:d,predicateLabelForXML:f,predParentOf:m,RDFComparePredicateObject:function(t,n){var a=t.predicate.compareTerm(n.predicate);return 0===a?t.object.compareTerm(n.object):a},RDFComparePredicateSubject:function(t,n){var a=t.predicate.compareTerm(n.predicate);return 0===a?t.subject.compareTerm(n.subject):a},shortName:function(t){var n=t;0<='#/'.indexOf(n[n.length-1])&&(n=n.slice(0,-1));var a=[];for(var r in this.prefixes)a[this.prefixes[r]]=r;var o=function(t){return'ns'!==t&&(d=t,!0)},s=n.lastIndexOf('#'),d,l;for(0<=s&&(n=n.slice(s-1));;){var c=n.lastIndexOf('/');for(0<=c&&(n=n.slice(c+1)),l=0;l<n.length&&this.prefixchars.indexOf(n[l]);)l++;if(n=n.slice(0,l),6>n.length&&o(n))return d;if(o(n.slice(0,3)))return d;if(o(n.slice(0,2)))return d;if(o(n.slice(0,4)))return d;if(o(n.slice(0,1)))return d;if(o(n.slice(0,5)))return d;for(l=0;;l++)if(o(n.slice(0,3)+l))return d}},stackString:function(t){var n=''+t+'\n',a;if(!t.stack)return n+'No stack available.\n';var r=t.stack.toString().split('\n'),o=[];for(a=0;a<r.length;a++){var s=r[a];if(-1<s.indexOf('ecmaunit.js'))break;'('===s.charAt(0)&&(s='function'+s);var d=s.split('@');o.push(d)}for(a=0;a<o.length;a++)n+='  '+o[a][1]+'\n    '+o[a][0];return n},syncTableToArray:function(t,n,a){var r,o,s;for(s=0;s<t.children.length;s++)o=t.children[s],o.trashMe=!0;for(var d=0,l;d<n.length;d++){for(l=n[d],r=!1,s=0;s<t.children.length;s++)if(o=t.children[s],o.subject&&o.subject.sameTerm(l)){o.trashMe=!1,r=!0;break}if(!r){var c=a(l);if(d>=n.length)t.appendChild(c);else{var u=t.children[d];t.insertBefore(c,u)}c.subject=l}}for(s=0;s<t.children.length;s++)o=t.children[s],o.trashMe&&t.removeChild(o)}};var g={log:a(19),ns:a(9),rdf:a(18),store:a(14)},b=0,y;'undefined'==typeof AudioContext?'undefined'!=typeof window&&(y=window.AudioContext||window.webkitAudioContext):y=AudioContext;var v=[]},function(t,n,a){'use strict';(function(t){function n(t,a,r,o){var s='',d=[!1],l;if('undefined'==typeof t.nodeType)return s;if(1===t.nodeType){if(t.hasAttribute('class')&&'classWithChildText'in a&&t.matches(a.classWithChildText.class))s+=t.querySelector(a.classWithChildText.element).textContent;else if(!('skipNodeWithClass'in a&&t.matches('.'+a.skipNodeWithClass))){var c=t.nodeName.toLowerCase();s+='<'+c;var u=[];for(l=t.attributes.length-1;0<=l;l--){var f=t.attributes[l];if(!(0<o.length&&o[f.name])&&!/^\d+$/.test(f.name)){if('class'===f.name&&'replaceClassItemWith'in a&&-1<f.value.split(' ').indexOf(a.replaceClassItemWith.source)){var m=new RegExp(a.replaceClassItemWith.source,'g');f.value=f.value.replace(m,a.replaceClassItemWith.target).trim()}'class'===f.name&&'skipClassWithValue'in a&&a.skipClassWithValue===f.value||u.push(f.name+'=\''+f.value.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/'/g,'&quot;')+'\'')}}if(0<u.length&&('sortAttributes'in a&&a.sortAttributes&&u.sort(function(t,n){return t.toLowerCase().localeCompare(n.toLowerCase())}),s+=' '+u.join(' ')),r[c])s+=' />';else{for(s+='>',s+='html'===c?'\n  ':'',d.push('style'===c||'script'===c),l=0;l<t.childNodes.length;l++)s+=n(t.childNodes[l]);d.pop(),s+='body'===c?'</'+c+'>\n':'</'+c+'>'}}}else if(8===t.nodeType)s+='<!--'+t.nodeValue+'-->';else if(3===t.nodeType||4===t.nodeType){var h=t.nodeValue.replace(/\n+$/,'');s+=d[d.length-1]?h:h.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}else console.log('Warning; Cannot handle serialising nodes of type: '+t.nodeType),console.log(t);return s}function r(t,n,a,r){var o=function(t){return'BlankNode'===t.termType?null:t},s=function(t){var n=a.statementsMatching(t).map(function(t){return''+o(t.subject)+' '+o(t.predicate)+' '+o(t.object)}).concat(a.statementsMatching(void 0,void 0,t).map(function(t){return''+o(t.subject)+' '+o(t.predicate)+' '+o(t.object)}));return n.sort(),n.join('\n')};return'BlankNode'===t.termType&&'BlankNode'===n.termType?0===t.compareTerm(n)?0:s(t)>s(n)?1:s(t)<s(n)?-1:t.compareTerm(n):r&&t.uri&&n.uri?(r[t.uri]||t.uri).localeCompare(r[n.uri]||n.uri):t.compareTerm(n)}function o(t,n){return t.slice(0,n.length)===n}var s=a(12).docpart,d=a(32),l=a(8);t.exports.AJAR_handleNewTerm=function(t,n,a){var r=null;if('undefined'!=typeof t.fetcher)r=t.fetcher;else return;if('NamedNode'===n.termType){var l=s(n.uri),c;if(0>n.uri.indexOf('#')){if(o(n.uri,'http://dbpedia.org/resource/Category:'))return;o(n.uri,'http://purl.org/dc/elements/1.1/')||o(n.uri,'http://purl.org/dc/terms/')?c='http://dublincore.org/2005/06/13/dcq':o(n.uri,'http://xmlns.com/wot/0.1/')?c='http://xmlns.com/wot/0.1/index.rdf':o(n.uri,'http://web.resource.org/cc/')&&(c='http://web.resource.org/cc/schema.rdf')}return(c&&(l=c),!(r&&'unrequested'!==r.getState(l)))?(c&&d.warn('Assuming server still broken, faking redirect of <'+n.uri+'> to <'+l+'>'),r.fetch(l,{referringTerm:a})):void 0}},t.exports.ArrayIndexOf=function(t,n,a){a||(a=0);var r=t.length;for(0>a&&(a=r+a);a<r;a++)if(t[a]===n)return a;return-1},t.exports.callbackify=function(t,n){t.callbacks={};for(var a=n.length-1;0<=a;a--)t.callbacks[n[a]]=[];t.addHook=function(n){t.callbacks[n]||(t.callbacks[n]=[])},t.addCallback=function(n,a){t.callbacks[n].push(a)},t.removeCallback=function(n,a){for(var r=0;r<t.callbacks[n].length;r++)if(t.callbacks[n][r].name===a)return t.callbacks[n].splice(r,1),!0;return!1},t.insertCallback=function(n,a){t.callbacks[n].unshift(a)},t.fireCallbacks=function(n,a){var r=[],o=[],s=t.callbacks[n].length,d,l;for(d=s-1;0<=d;d--)l=t.callbacks[n][d],l&&l.apply(t,a)&&r.push(l);for(d=r.length-1;0<=d;d--)o.push(r[d]);for(d=s;d<t.callbacks[n].length;d++)o.push(t.callbacks[n][d]);t.callbacks[n]=o}},t.exports.dtstamp=function(){var t=new Date,n=t.getYear()+1900,a=t.getMonth()+1,r=t.getDate(),o=t.getUTCHours(),s=t.getUTCMinutes(),d=t.getSeconds();return 10>a&&(a='0'+a),10>r&&(r='0'+r),10>o&&(o='0'+o),10>s&&(s='0'+s),10>d&&(d='0'+d),n+'-'+a+'-'+r+'T'+o+':'+s+':'+d+'Z'},t.exports.DOMParserFactory=function(){return tabulator&&tabulator.isExtension?Components.classes['@mozilla.org/xmlextras/domparser;1'].getService(Components.interfaces.nsIDOMParser):window.DOMParser?new DOMParser:!!window.ActiveXObject&&new ActiveXObject('Microsoft.XMLDOM')},t.exports.domToString=function(t,a){a=a||{};var r=[];'selfClosing'in a&&a.selfClosing.split(' ').forEach(function(t){r[t]=!0});var o=[];return'skipAttributes'in a&&a.skipAttributes.split(' ').forEach(function(t){o[t]=!0}),n(t,a,r,o)},t.exports.dumpNode=n,t.exports.heavyCompare=r,t.exports.heavyCompareSPO=function(t,n,a,o){return r(t.subject,n.subject,a,o)||r(t.predicate,n.predicate,a,o)||r(t.object,n.object,a,o)},t.exports.output=function(t){var n=document.createElement('div');n.textContent=t,document.body.appendChild(n)},t.exports.parseXML=function(n,r){var o;if(r=r||{},'undefined'!=typeof tabulator&&tabulator.isExtension)o=Components.classes['@mozilla.org/xmlextras/domparser;1'].getService(Components.interfaces.nsIDOMParser);else{if('undefined'!=typeof t&&t&&t.exports){var s=a(41).DOMParser,d=new s().parseFromString(n,r.contentType||'application/xhtml+xml');return d}o='undefined'!=typeof window&&window.DOMParser?new window.DOMParser:new s}return o.parseFromString(n,'application/xml')},t.exports.RDFArrayRemove=function(t,n){for(var a=0;a<t.length;a++)if(t[a].subject.sameTerm(n.subject)&&t[a].predicate.sameTerm(n.predicate)&&t[a].object.sameTerm(n.object)&&t[a].why.sameTerm(n.why))return void t.splice(a,1);throw new Error('RDFArrayRemove: Array did not contain '+n+' '+n.why)},t.exports.stackString=function(t){var n=''+t+'\n';if(!t.stack)return n+'No stack available.\n';for(var a=t.stack.toString().split('\n'),r=[],o=0,s;o<a.length&&(s=a[o],!(-1<s.indexOf('ecmaunit.js')));o++){'('==s.charAt(0)&&(s='function'+s);var d=s.split('@');r.push(d)}for(var o=0;o<r.length;o++)n+='  '+r[o][1]+'\n    '+r[o][0];return n},t.exports.string_startswith=o,t.exports.string={},t.exports.string.template=function(t,n){for(var a=t.split('%s'),r='',o=0;o<n.length;o++)n[o]+='',r+=a[o]+n[o];return r+a.slice(n.length).join()},t.exports.uri=a(12),t.exports.log=d,t.exports.mediaTypeClass=function(t){return t=t.split(';')[0].trim(),new l('http://www.w3.org/ns/iana/media-types/'+t+'#Resource')}}).call(n,a(7)(t))},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function v(t,n,a){return v.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_(t.length,a),s=n,d;s<r;s++)d=t.charCodeAt(s)-48,o<<=4,o|=49<=d&&54>=d?d-49+10:17<=d&&22>=d?d-17+10:15&d;return o}function l(t,n,a,o){for(var s=0,r=_(t.length,a),d=n,l;d<r;d++)l=t.charCodeAt(d)-48,s*=o,s+=49<=l?l-49+10:17<=l?l-17+10:l;return s}function u(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,o=a%26;n[a]=(t.words[r]&1<<o)>>>o}return n}function w(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_(u,n.length-1),g=y(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function x(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_(l,n.length-1),m=y(0,l-t.length+1);m<=f;m++){var h=l-m,g=0|t.words[h],a=0|n.words[m],b=g*a,r=67108863&b;c=0|c+(0|b/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function k(t,n,a){var r=new C;return r.mulp(t,n,a)}function C(t,n){this.x=t,this.y=n}function T(t,n){this.name=t,this.p=new v(n,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){T.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function S(){T.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function A(){T.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function I(){T.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function N(t){if('string'==typeof t){var n=v._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function j(t){N.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=v:n.BN=v,v.BN=v,v.wordSize=26;var R;try{R=a(297).Buffer}catch(t){}v.isBN=function(t){return!!(t instanceof v)||null!==t&&'object'==typeof t&&t.constructor.wordSize===v.wordSize&&Array.isArray(t.words)},v.max=function(t,n){return 0<t.cmp(n)?t:n},v.min=function(t,n){return 0>t.cmp(n)?t:n},v.prototype._init=function(t,n,a){if('number'==typeof t)return this._initNumber(t,n,a);if('object'==typeof t)return this._initArray(t,n,a);'hex'===n&&(n=16),o(n===(0|n)&&2<=n&&36>=n),t=t.toString().replace(/\s+/g,'');var r=0;'-'===t[0]&&r++,16===n?this._parseHex(t,r):this._parseBase(t,n,r),'-'===t[0]&&(this.negative=1),this.strip();'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initNumber=function(t,n,a){0>t&&(this.negative=1,t=-t),67108864>t?(this.words=[67108863&t],this.length=1):4503599627370496>t?(this.words=[67108863&t,67108863&t/67108864],this.length=2):(o(9007199254740992>t),this.words=[67108863&t,67108863&t/67108864,1],this.length=3);'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initArray=function(t,n,a){if(o('number'==typeof t.length),0>=t.length)return this.words=[0],this.length=1,this;this.length=b(t.length/3),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s=0,d,l;if('be'===a)for(r=t.length-1,d=0;0<=r;r-=3)l=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);else if('le'===a)for(r=0,d=0;r<t.length;r+=3)l=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);return this.strip()},v.prototype._parseHex=function(t,n){this.length=b((t.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r=0,o,d;for(a=t.length-6,o=0;a>=n;a-=6)d=s(t,a,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r,r+=24,26<=r&&(r-=26,o++);a+6!==n&&(d=s(t,n,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r),this.strip()},v.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var r=0,o=1;67108863>=o;o*=n)r++;r--,o=0|o/n;for(var s=t.length-a,d=s%r,c=_(s,s-d)+a,u=0,f=a;f<c;f+=r)u=l(t,f,f+r,n),this.imuln(o),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u);if(0!=d){var m=1;for(u=l(t,f,t.length,n),f=0;f<d;f++)m*=n;this.imuln(m),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u)}},v.prototype.copy=function(t){t.words=Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},v.prototype.clone=function(){var t=new v(null);return this.copy(t),t},v.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var L=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];v.prototype.toString=function(t,n){t=t||10,n=0|n||1;var a;if(16===t||'hex'===t){a='';for(var s=0,d=0,l=0;l<this.length;l++){var u=this.words[l],f=(16777215&(u<<s|d)).toString(16);d=16777215&u>>>24-s,a=0!=d||l!==this.length-1?L[6-f.length]+f+a:f+a,s+=2,26<=s&&(s-=26,l--)}for(0!=d&&(a=d.toString(16)+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}if(t===(0|t)&&2<=t&&36>=t){var m=O[t],h=P[t];a='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(t);g=g.idivn(h),a=g.isZero()?c+a:L[m-c.length]+c+a}for(this.isZero()&&(a='0'+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}o(!1,'Base should be between 2 and 36')},v.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?t:-t},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(t,n){return o('undefined'!=typeof R),this.toArrayLike(R,t,n)},v.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},v.prototype.toArrayLike=function(t,n,a){var r=this.byteLength(),s=a||y(1,r);o(r<=s,'byte array longer than desired length'),o(0<s,'Requested array length <= 0'),this.strip();var d=new t(s),l=this.clone(),c,u;if(!('le'===n)){for(u=0;u<s-r;u++)d[u]=0;for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[s-u-1]=c}else{for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[u]=c;for(;u<s;u++)d[u]=0}return d},v.prototype._countBits=g?function(t){return 32-g(t)}:function(n){var a=n,t=0;return 4096<=a&&(t+=13,a>>>=13),64<=a&&(t+=7,a>>>=7),8<=a&&(t+=4,a>>>=4),2<=a&&(t+=2,a>>>=2),t+a},v.prototype._zeroBits=function(n){if(0===n)return 26;var a=n,t=0;return 0==(8191&a)&&(t+=13,a>>>=13),0==(127&a)&&(t+=7,a>>>=7),0==(15&a)&&(t+=4,a>>>=4),0==(3&a)&&(t+=2,a>>>=2),0==(1&a)&&t++,t},v.prototype.bitLength=function(){var t=this.words[this.length-1],n=this._countBits(t);return 26*(this.length-1)+n},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0,a;n<this.length&&(a=this._zeroBits(this.words[n]),t+=a,26===a);n++);return t},v.prototype.byteLength=function(){return b(this.bitLength()/8)},v.prototype.toTwos=function(t){return 0===this.negative?this.clone():this.abs().inotn(t).iaddn(1)},v.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]|=t.words[n];return this.strip()},v.prototype.ior=function(t){return o(0==(this.negative|t.negative)),this.iuor(t)},v.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},v.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},v.prototype.iuand=function(t){var n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]&=t.words[a];return this.length=n.length,this.strip()},v.prototype.iand=function(t){return o(0==(this.negative|t.negative)),this.iuand(t)},v.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},v.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},v.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var r=0;r<a.length;r++)this.words[r]=n.words[r]^a.words[r];if(this!==n)for(;r<n.length;r++)this.words[r]=n.words[r];return this.length=n.length,this.strip()},v.prototype.ixor=function(t){return o(0==(this.negative|t.negative)),this.iuxor(t)},v.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},v.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},v.prototype.inotn=function(t){o('number'==typeof t&&0<=t);var n=0|b(t/26),a=t%26;this._expand(n),0<a&&n--;for(var r=0;r<n;r++)this.words[r]=67108863&~this.words[r];return 0<a&&(this.words[r]=~this.words[r]&67108863>>26-a),this.strip()},v.prototype.notn=function(t){return this.clone().inotn(t)},v.prototype.setn=function(t,n){o('number'==typeof t&&0<=t);var a=0|t/26,r=t%26;return this._expand(a+1),n?this.words[a]|=1<<r:this.words[a]&=~(1<<r),this.strip()},v.prototype.iadd=function(t){var n;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();var r,a;this.length>t.length?(r=this,a=t):(r=t,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|r.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!=o&&s<r.length;s++)n=(0|r.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=r.length,0!=o)this.words[this.length]=o,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},v.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},v.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var o,a;0<r?(o=this,a=t):(o=t,a=this);for(var s=0,d=0;d<a.length;d++)n=(0|o.words[d])-(0|a.words[d])+s,s=n>>26,this.words[d]=67108863&n;for(;0!=s&&d<o.length;d++)n=(0|o.words[d])+s,s=n>>26,this.words[d]=67108863&n;if(0==s&&d<o.length&&o!==this)for(;d<o.length;d++)this.words[d]=o.words[d];return this.length=y(this.length,d),o!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(t){return this.clone().isub(t)};var M=function(t,n,r){var s=t.words,a=n.words,d=r.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,g=f>>>13,b=0|s[2],y=8191&b,v=b>>>13,w=0|s[3],x=8191&w,_=w>>>13,k=0|s[4],C=8191&k,T=k>>>13,E=0|s[5],S=8191&E,A=E>>>13,I=0|s[6],N=8191&I,j=I>>>13,R=0|s[7],L=8191&R,O=R>>>13,P=0|s[8],M=8191&P,D=P>>>13,B=0|s[9],U=8191&B,q=B>>>13,F=0|a[0],z=8191&F,H=F>>>13,W=0|a[1],V=8191&W,G=W>>>13,K=0|a[2],J=8191&K,X=K>>>13,Z=0|a[3],Y=8191&Z,Q=Z>>>13,ee=0|a[4],te=8191&ee,ne=ee>>>13,ae=0|a[5],re=8191&ae,oe=ae>>>13,ie=0|a[6],se=8191&ie,de=ie>>>13,le=0|a[7],pe=8191&le,ce=le>>>13,ue=0|a[8],fe=8191&ue,he=ue>>>13,ge=0|a[9],be=8191&ge,ye=ge>>>13,ve,we,xe;r.negative=t.negative^n.negative,r.length=19,ve=h(c,z),we=h(c,H),we=0|we+h(u,z),xe=h(u,H);var _e=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(_e>>>26),_e&=67108863,ve=h(m,z),we=h(m,H),we=0|we+h(g,z),xe=h(g,H),ve=0|ve+h(c,V),we=0|we+h(c,G),we=0|we+h(u,V),xe=0|xe+h(u,G);var ke=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(ke>>>26),ke&=67108863,ve=h(y,z),we=h(y,H),we=0|we+h(v,z),xe=h(v,H),ve=0|ve+h(m,V),we=0|we+h(m,G),we=0|we+h(g,V),xe=0|xe+h(g,G),ve=0|ve+h(c,J),we=0|we+h(c,X),we=0|we+h(u,J),xe=0|xe+h(u,X);var Ce=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ce>>>26),Ce&=67108863,ve=h(x,z),we=h(x,H),we=0|we+h(_,z),xe=h(_,H),ve=0|ve+h(y,V),we=0|we+h(y,G),we=0|we+h(v,V),xe=0|xe+h(v,G),ve=0|ve+h(m,J),we=0|we+h(m,X),we=0|we+h(g,J),xe=0|xe+h(g,X),ve=0|ve+h(c,Y),we=0|we+h(c,Q),we=0|we+h(u,Y),xe=0|xe+h(u,Q);var Te=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Te>>>26),Te&=67108863,ve=h(C,z),we=h(C,H),we=0|we+h(T,z),xe=h(T,H),ve=0|ve+h(x,V),we=0|we+h(x,G),we=0|we+h(_,V),xe=0|xe+h(_,G),ve=0|ve+h(y,J),we=0|we+h(y,X),we=0|we+h(v,J),xe=0|xe+h(v,X),ve=0|ve+h(m,Y),we=0|we+h(m,Q),we=0|we+h(g,Y),xe=0|xe+h(g,Q),ve=0|ve+h(c,te),we=0|we+h(c,ne),we=0|we+h(u,te),xe=0|xe+h(u,ne);var Ee=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ee>>>26),Ee&=67108863,ve=h(S,z),we=h(S,H),we=0|we+h(A,z),xe=h(A,H),ve=0|ve+h(C,V),we=0|we+h(C,G),we=0|we+h(T,V),xe=0|xe+h(T,G),ve=0|ve+h(x,J),we=0|we+h(x,X),we=0|we+h(_,J),xe=0|xe+h(_,X),ve=0|ve+h(y,Y),we=0|we+h(y,Q),we=0|we+h(v,Y),xe=0|xe+h(v,Q),ve=0|ve+h(m,te),we=0|we+h(m,ne),we=0|we+h(g,te),xe=0|xe+h(g,ne),ve=0|ve+h(c,re),we=0|we+h(c,oe),we=0|we+h(u,re),xe=0|xe+h(u,oe);var Se=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Se>>>26),Se&=67108863,ve=h(N,z),we=h(N,H),we=0|we+h(j,z),xe=h(j,H),ve=0|ve+h(S,V),we=0|we+h(S,G),we=0|we+h(A,V),xe=0|xe+h(A,G),ve=0|ve+h(C,J),we=0|we+h(C,X),we=0|we+h(T,J),xe=0|xe+h(T,X),ve=0|ve+h(x,Y),we=0|we+h(x,Q),we=0|we+h(_,Y),xe=0|xe+h(_,Q),ve=0|ve+h(y,te),we=0|we+h(y,ne),we=0|we+h(v,te),xe=0|xe+h(v,ne),ve=0|ve+h(m,re),we=0|we+h(m,oe),we=0|we+h(g,re),xe=0|xe+h(g,oe),ve=0|ve+h(c,se),we=0|we+h(c,de),we=0|we+h(u,se),xe=0|xe+h(u,de);var Ae=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ae>>>26),Ae&=67108863,ve=h(L,z),we=h(L,H),we=0|we+h(O,z),xe=h(O,H),ve=0|ve+h(N,V),we=0|we+h(N,G),we=0|we+h(j,V),xe=0|xe+h(j,G),ve=0|ve+h(S,J),we=0|we+h(S,X),we=0|we+h(A,J),xe=0|xe+h(A,X),ve=0|ve+h(C,Y),we=0|we+h(C,Q),we=0|we+h(T,Y),xe=0|xe+h(T,Q),ve=0|ve+h(x,te),we=0|we+h(x,ne),we=0|we+h(_,te),xe=0|xe+h(_,ne),ve=0|ve+h(y,re),we=0|we+h(y,oe),we=0|we+h(v,re),xe=0|xe+h(v,oe),ve=0|ve+h(m,se),we=0|we+h(m,de),we=0|we+h(g,se),xe=0|xe+h(g,de),ve=0|ve+h(c,pe),we=0|we+h(c,ce),we=0|we+h(u,pe),xe=0|xe+h(u,ce);var Ie=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ie>>>26),Ie&=67108863,ve=h(M,z),we=h(M,H),we=0|we+h(D,z),xe=h(D,H),ve=0|ve+h(L,V),we=0|we+h(L,G),we=0|we+h(O,V),xe=0|xe+h(O,G),ve=0|ve+h(N,J),we=0|we+h(N,X),we=0|we+h(j,J),xe=0|xe+h(j,X),ve=0|ve+h(S,Y),we=0|we+h(S,Q),we=0|we+h(A,Y),xe=0|xe+h(A,Q),ve=0|ve+h(C,te),we=0|we+h(C,ne),we=0|we+h(T,te),xe=0|xe+h(T,ne),ve=0|ve+h(x,re),we=0|we+h(x,oe),we=0|we+h(_,re),xe=0|xe+h(_,oe),ve=0|ve+h(y,se),we=0|we+h(y,de),we=0|we+h(v,se),xe=0|xe+h(v,de),ve=0|ve+h(m,pe),we=0|we+h(m,ce),we=0|we+h(g,pe),xe=0|xe+h(g,ce),ve=0|ve+h(c,fe),we=0|we+h(c,he),we=0|we+h(u,fe),xe=0|xe+h(u,he);var Ne=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ne>>>26),Ne&=67108863,ve=h(U,z),we=h(U,H),we=0|we+h(q,z),xe=h(q,H),ve=0|ve+h(M,V),we=0|we+h(M,G),we=0|we+h(D,V),xe=0|xe+h(D,G),ve=0|ve+h(L,J),we=0|we+h(L,X),we=0|we+h(O,J),xe=0|xe+h(O,X),ve=0|ve+h(N,Y),we=0|we+h(N,Q),we=0|we+h(j,Y),xe=0|xe+h(j,Q),ve=0|ve+h(S,te),we=0|we+h(S,ne),we=0|we+h(A,te),xe=0|xe+h(A,ne),ve=0|ve+h(C,re),we=0|we+h(C,oe),we=0|we+h(T,re),xe=0|xe+h(T,oe),ve=0|ve+h(x,se),we=0|we+h(x,de),we=0|we+h(_,se),xe=0|xe+h(_,de),ve=0|ve+h(y,pe),we=0|we+h(y,ce),we=0|we+h(v,pe),xe=0|xe+h(v,ce),ve=0|ve+h(m,fe),we=0|we+h(m,he),we=0|we+h(g,fe),xe=0|xe+h(g,he),ve=0|ve+h(c,be),we=0|we+h(c,ye),we=0|we+h(u,be),xe=0|xe+h(u,ye);var je=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(je>>>26),je&=67108863,ve=h(U,V),we=h(U,G),we=0|we+h(q,V),xe=h(q,G),ve=0|ve+h(M,J),we=0|we+h(M,X),we=0|we+h(D,J),xe=0|xe+h(D,X),ve=0|ve+h(L,Y),we=0|we+h(L,Q),we=0|we+h(O,Y),xe=0|xe+h(O,Q),ve=0|ve+h(N,te),we=0|we+h(N,ne),we=0|we+h(j,te),xe=0|xe+h(j,ne),ve=0|ve+h(S,re),we=0|we+h(S,oe),we=0|we+h(A,re),xe=0|xe+h(A,oe),ve=0|ve+h(C,se),we=0|we+h(C,de),we=0|we+h(T,se),xe=0|xe+h(T,de),ve=0|ve+h(x,pe),we=0|we+h(x,ce),we=0|we+h(_,pe),xe=0|xe+h(_,ce),ve=0|ve+h(y,fe),we=0|we+h(y,he),we=0|we+h(v,fe),xe=0|xe+h(v,he),ve=0|ve+h(m,be),we=0|we+h(m,ye),we=0|we+h(g,be),xe=0|xe+h(g,ye);var Re=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Re>>>26),Re&=67108863,ve=h(U,J),we=h(U,X),we=0|we+h(q,J),xe=h(q,X),ve=0|ve+h(M,Y),we=0|we+h(M,Q),we=0|we+h(D,Y),xe=0|xe+h(D,Q),ve=0|ve+h(L,te),we=0|we+h(L,ne),we=0|we+h(O,te),xe=0|xe+h(O,ne),ve=0|ve+h(N,re),we=0|we+h(N,oe),we=0|we+h(j,re),xe=0|xe+h(j,oe),ve=0|ve+h(S,se),we=0|we+h(S,de),we=0|we+h(A,se),xe=0|xe+h(A,de),ve=0|ve+h(C,pe),we=0|we+h(C,ce),we=0|we+h(T,pe),xe=0|xe+h(T,ce),ve=0|ve+h(x,fe),we=0|we+h(x,he),we=0|we+h(_,fe),xe=0|xe+h(_,he),ve=0|ve+h(y,be),we=0|we+h(y,ye),we=0|we+h(v,be),xe=0|xe+h(v,ye);var Le=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Le>>>26),Le&=67108863,ve=h(U,Y),we=h(U,Q),we=0|we+h(q,Y),xe=h(q,Q),ve=0|ve+h(M,te),we=0|we+h(M,ne),we=0|we+h(D,te),xe=0|xe+h(D,ne),ve=0|ve+h(L,re),we=0|we+h(L,oe),we=0|we+h(O,re),xe=0|xe+h(O,oe),ve=0|ve+h(N,se),we=0|we+h(N,de),we=0|we+h(j,se),xe=0|xe+h(j,de),ve=0|ve+h(S,pe),we=0|we+h(S,ce),we=0|we+h(A,pe),xe=0|xe+h(A,ce),ve=0|ve+h(C,fe),we=0|we+h(C,he),we=0|we+h(T,fe),xe=0|xe+h(T,he),ve=0|ve+h(x,be),we=0|we+h(x,ye),we=0|we+h(_,be),xe=0|xe+h(_,ye);var Oe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Oe>>>26),Oe&=67108863,ve=h(U,te),we=h(U,ne),we=0|we+h(q,te),xe=h(q,ne),ve=0|ve+h(M,re),we=0|we+h(M,oe),we=0|we+h(D,re),xe=0|xe+h(D,oe),ve=0|ve+h(L,se),we=0|we+h(L,de),we=0|we+h(O,se),xe=0|xe+h(O,de),ve=0|ve+h(N,pe),we=0|we+h(N,ce),we=0|we+h(j,pe),xe=0|xe+h(j,ce),ve=0|ve+h(S,fe),we=0|we+h(S,he),we=0|we+h(A,fe),xe=0|xe+h(A,he),ve=0|ve+h(C,be),we=0|we+h(C,ye),we=0|we+h(T,be),xe=0|xe+h(T,ye);var Pe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Pe>>>26),Pe&=67108863,ve=h(U,re),we=h(U,oe),we=0|we+h(q,re),xe=h(q,oe),ve=0|ve+h(M,se),we=0|we+h(M,de),we=0|we+h(D,se),xe=0|xe+h(D,de),ve=0|ve+h(L,pe),we=0|we+h(L,ce),we=0|we+h(O,pe),xe=0|xe+h(O,ce),ve=0|ve+h(N,fe),we=0|we+h(N,he),we=0|we+h(j,fe),xe=0|xe+h(j,he),ve=0|ve+h(S,be),we=0|we+h(S,ye),we=0|we+h(A,be),xe=0|xe+h(A,ye);var Me=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Me>>>26),Me&=67108863,ve=h(U,se),we=h(U,de),we=0|we+h(q,se),xe=h(q,de),ve=0|ve+h(M,pe),we=0|we+h(M,ce),we=0|we+h(D,pe),xe=0|xe+h(D,ce),ve=0|ve+h(L,fe),we=0|we+h(L,he),we=0|we+h(O,fe),xe=0|xe+h(O,he),ve=0|ve+h(N,be),we=0|we+h(N,ye),we=0|we+h(j,be),xe=0|xe+h(j,ye);var De=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(De>>>26),De&=67108863,ve=h(U,pe),we=h(U,ce),we=0|we+h(q,pe),xe=h(q,ce),ve=0|ve+h(M,fe),we=0|we+h(M,he),we=0|we+h(D,fe),xe=0|xe+h(D,he),ve=0|ve+h(L,be),we=0|we+h(L,ye),we=0|we+h(O,be),xe=0|xe+h(O,ye);var Be=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Be>>>26),Be&=67108863,ve=h(U,fe),we=h(U,he),we=0|we+h(q,fe),xe=h(q,he),ve=0|ve+h(M,be),we=0|we+h(M,ye),we=0|we+h(D,be),xe=0|xe+h(D,ye);var Ue=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ue>>>26),Ue&=67108863,ve=h(U,be),we=h(U,ye),we=0|we+h(q,be),xe=h(q,ye);var qe=0|(0|o+ve)+((8191&we)<<13);return o=0|(0|xe+(we>>>13))+(qe>>>26),qe&=67108863,d[0]=_e,d[1]=ke,d[2]=Ce,d[3]=Te,d[4]=Ee,d[5]=Se,d[6]=Ae,d[7]=Ie,d[8]=Ne,d[9]=je,d[10]=Re,d[11]=Le,d[12]=Oe,d[13]=Pe,d[14]=Me,d[15]=De,d[16]=Be,d[17]=Ue,d[18]=qe,0!=o&&(d[19]=o,r.length++),r};h||(M=w),v.prototype.mulTo=function(t,n){var a=this.length+t.length,r;return r=10===this.length&&10===t.length?M(this,t,n):63>a?w(this,t,n):1024>a?x(this,t,n):k(this,t,n),r},C.prototype.makeRBT=function(n){for(var a=Array(n),t=v.prototype._countBits(n)-1,r=0;r<n;r++)a[r]=this.revBin(r,t,n);return a},C.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var r=0,o=0;o<n;o++)r|=(1&t)<<n-o-1,t>>=1;return r},C.prototype.permute=function(t,n,a,r,o,s){for(var d=0;d<s;d++)r[d]=n[t[d]],o[d]=a[t[d]]},C.prototype.transform=function(t,n,a,r,o,d){this.permute(d,t,n,a,r,o);for(var u=1;u<o;u<<=1)for(var s=u<<1,l=f(2*m/s),h=c(2*m/s),g=0;g<o;g+=s)for(var b=l,y=h,v=0;v<u;v++){var w=a[g+v],x=r[g+v],_=a[g+v+u],k=r[g+v+u],C=b*_-y*k;k=b*k+y*_,_=C,a[g+v]=w+_,r[g+v]=x+k,a[g+v+u]=w-_,r[g+v+u]=x-k,v!==s&&(C=l*b-h*y,y=l*y+h*b,b=C)}},C.prototype.guessLen13b=function(t,n){var a=1|y(n,t),r=1&a,o=0;for(a=0|a/2;a;a>>>=1)o++;return 1<<o+1+r},C.prototype.conjugate=function(n,a,r){if(!(1>=r))for(var o=0,s;o<r/2;o++)s=n[o],n[o]=n[r-o-1],n[r-o-1]=s,s=a[o],a[o]=-a[r-o-1],a[r-o-1]=-s},C.prototype.normalize13b=function(t,n){for(var a=0,r=0,o;r<n/2;r++)o=8192*d(t[2*r+1]/n)+d(t[2*r]/n)+a,t[r]=67108863&o,a=67108864>o?0:0|o/67108864;return t},C.prototype.convert13b=function(t,n,a,r){for(var s=0,d=0;d<n;d++)s+=0|t[d],a[2*d]=8191&s,s>>>=13,a[2*d+1]=8191&s,s>>>=13;for(d=2*n;d<r;++d)a[d]=0;o(0==s),o(0==(-8192&s))},C.prototype.stub=function(t){for(var n=Array(t),a=0;a<t;a++)n[a]=0;return n},C.prototype.mulp=function(t,n,a){var r=2*this.guessLen13b(t.length,n.length),o=this.makeRBT(r),s=this.stub(r),d=Array(r),l=Array(r),c=Array(r),u=Array(r),f=Array(r),m=Array(r),h=a.words;h.length=r,this.convert13b(t.words,t.length,d,r),this.convert13b(n.words,n.length,u,r),this.transform(d,s,l,c,r,o),this.transform(u,s,f,m,r,o);for(var g=0,b;g<r;g++)b=l[g]*f[g]-c[g]*m[g],c[g]=l[g]*m[g]+c[g]*f[g],l[g]=b;return this.conjugate(l,c,r),this.transform(l,c,h,s,r,o),this.conjugate(h,s,r),this.normalize13b(h,r),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},v.prototype.mul=function(t){var n=new v(null);return n.words=Array(this.length+t.length),this.mulTo(t,n)},v.prototype.mulf=function(t){var n=new v(null);return n.words=Array(this.length+t.length),k(this,t,n)},v.prototype.imul=function(t){return this.clone().mulTo(t,this)},v.prototype.imuln=function(t){o('number'==typeof t),o(67108864>t);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*t,s=(67108863&r)+(67108863&n);n>>=26,n+=0|r/67108864,n+=s>>>26,this.words[a]=67108863&s}return 0!=n&&(this.words[a]=n,this.length++),this},v.prototype.muln=function(t){return this.clone().imuln(t)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(t){var n=u(t);if(0===n.length)return new v(1);for(var a=this,r=0;r<n.length&&!(0!==n[r]);r++,a=a.sqr());if(++r<n.length)for(var o=a.sqr();r<n.length;r++,o=o.sqr())0!==n[r]&&(a=a.mul(o));return a},v.prototype.iushln=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26,r;if(0!=n){var s=0;for(r=0;r<this.length;r++){var d=this.words[r]&67108863>>>26-n<<26-n,l=(0|this.words[r])-d<<n;this.words[r]=l|s,s=d>>>26-n}s&&(this.words[r]=s,this.length++)}if(0!=a){for(r=this.length-1;0<=r;r--)this.words[r+a]=this.words[r];for(r=0;r<a;r++)this.words[r]=0;this.length+=a}return this.strip()},v.prototype.ishln=function(t){return o(0===this.negative),this.iushln(t)},v.prototype.iushrn=function(t,n,a){o('number'==typeof t&&0<=t);var d=n?(n-n%26)/26:0;var l=t%26,r=_((t-l)/26,this.length),s=a;if(d-=r,d=y(0,d),s){for(var c=0;c<r;c++)s.words[c]=this.words[c];s.length=r}if(0===r);else if(this.length>r)for(this.length-=r,c=0;c<this.length;c++)this.words[c]=this.words[c+r];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!=u||c>=d);c--){var f=0|this.words[c];this.words[c]=u<<26-l|f>>>l,u=f&(67108863^67108863>>>l<<l)}return s&&0!=u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(t,n,a){return o(0===this.negative),this.iushrn(t,n,a)},v.prototype.shln=function(t){return this.clone().ishln(t)},v.prototype.ushln=function(t){return this.clone().iushln(t)},v.prototype.shrn=function(t){return this.clone().ishrn(t)},v.prototype.ushrn=function(t){return this.clone().iushrn(t)},v.prototype.testn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(this.length<=a)return!1;var r=this.words[a];return!!(r&1<<n)},v.prototype.imaskn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=a)return this;if(0!=n&&a++,this.length=_(a,this.length),0!=n){this.words[this.length-1]&=67108863^67108863>>>n<<n}return this.strip()},v.prototype.maskn=function(t){return this.clone().imaskn(t)},v.prototype.iaddn=function(t){return o('number'==typeof t),o(67108864>t),0>t?this.isubn(-t):0===this.negative?this._iaddn(t):1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this)},v.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&67108864<=this.words[n];n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=y(this.length,n+1),this},v.prototype.isubn=function(t){if(o('number'==typeof t),o(67108864>t),0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&0>this.words[n];n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},v.prototype.addn=function(t){return this.clone().iaddn(t)},v.prototype.subn=function(t){return this.clone().isubn(t)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(t,n,a){var r=t.length+a,s;this._expand(r);var d=0,l;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+d;var c=(0|t.words[s])*n;l-=67108863&c,d=(l>>26)-(0|c/67108864),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)l=(0|this.words[s+a])+d,d=l>>26,this.words[s+a]=67108863&l;if(0==d)return this.strip();for(o(-1==d),d=0,s=0;s<this.length;s++)l=-(0|this.words[s])+d,d=l>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},v.prototype._wordDiv=function(t,n){var r=this.length-t.length,o=this.clone(),s=t,d=0|s.words[s.length-1],l=this._countBits(d);r=26-l,0!=r&&(s=s.ushln(r),o.iushln(r),d=0|s.words[s.length-1]);var c=o.length-s.length,u;if('mod'!==n){u=new v(null),u.length=c+1,u.words=Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var m=o.clone()._ishlnsubmul(s,1,c);0===m.negative&&(o=m,u&&(u.words[c]=1));for(var h=c-1,g;0<=h;h--){for(g=67108864*(0|o.words[s.length+h])+(0|o.words[s.length+h-1]),g=_(0|g/d,67108863),o._ishlnsubmul(s,g,h);0!==o.negative;)g--,o.negative=0,o._ishlnsubmul(s,1,h),o.isZero()||(o.negative^=1);u&&(u.words[h]=g)}return u&&u.strip(),o.strip(),'div'!==n&&0!=r&&o.iushrn(r),{div:u||null,mod:o}},v.prototype.divmod=function(t,n,a){if(o(!t.isZero()),this.isZero())return{div:new v(0),mod:new v(0)};var r,s,d;return 0!==this.negative&&0===t.negative?(d=this.neg().divmod(t,n),'mod'!==n&&(r=d.div.neg()),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(d=this.divmod(t.neg(),n),'mod'!==n&&(r=d.div.neg()),{div:r,mod:d.mod}):0==(this.negative&t.negative)?t.length>this.length||0>this.cmp(t)?{div:new v(0),mod:this}:1===t.length?'div'===n?{div:this.divn(t.words[0]),mod:null}:'mod'===n?{div:null,mod:new v(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new v(this.modn(t.words[0]))}:this._wordDiv(t,n):(d=this.neg().divmod(t.neg(),n),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:d.div,mod:s})},v.prototype.div=function(t){return this.divmod(t,'div',!1).div},v.prototype.mod=function(t){return this.divmod(t,'mod',!1).mod},v.prototype.umod=function(t){return this.divmod(t,'mod',!0).mod},v.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0===n.div.negative?n.mod:n.mod.isub(t),r=t.ushrn(1),o=t.andln(1),s=a.cmp(r);return 0>s||1===o&&0===s?n.div:0===n.div.negative?n.div.iaddn(1):n.div.isubn(1)},v.prototype.modn=function(t){o(67108863>=t);for(var n=0,a=this.length-1;0<=a;a--)n=(67108864%t*n+(0|this.words[a]))%t;return n},v.prototype.idivn=function(t){o(67108863>=t);for(var n=0,a=this.length-1,r;0<=a;a--)r=(0|this.words[a])+67108864*n,this.words[a]=0|r/t,n=r%t;return this.strip()},v.prototype.divn=function(t){return this.clone().idivn(t)},v.prototype.egcd=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=new v(0),l=new v(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var u=a.clone(),f=n.clone();!n.isZero();){for(var m=0,h=1;0==(n.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(n.iushrn(m);0<m--;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(f)),r.iushrn(1),s.iushrn(1);for(var g=0,b=1;0==(a.words[0]&b)&&26>g;++g,b<<=1);if(0<g)for(a.iushrn(g);0<g--;)(d.isOdd()||l.isOdd())&&(d.iadd(u),l.isub(f)),d.iushrn(1),l.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(d),s.isub(l)):(a.isub(n),d.isub(r),l.isub(s))}return{a:d,b:l,gcd:a.iushln(c)}},v.prototype._invmp=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=a.clone();0<n.cmpn(1)&&0<a.cmpn(1);){for(var l=0,c=1;0==(n.words[0]&c)&&26>l;++l,c<<=1);if(0<l)for(n.iushrn(l);0<l--;)r.isOdd()&&r.iadd(d),r.iushrn(1);for(var u=0,f=1;0==(a.words[0]&f)&&26>u;++u,f<<=1);if(0<u)for(a.iushrn(u);0<u--;)s.isOdd()&&s.iadd(d),s.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(s)):(a.isub(n),s.isub(r))}var m;return m=0===n.cmpn(1)?r:s,0>m.cmpn(0)&&m.iadd(t),m},v.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var o=this.clone(),a=n.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},v.prototype.invm=function(t){return this.egcd(t).a.umod(t)},v.prototype.isEven=function(){return 0==(1&this.words[0])},v.prototype.isOdd=function(){return 1==(1&this.words[0])},v.prototype.andln=function(t){return this.words[0]&t},v.prototype.bincn=function(t){o('number'==typeof t);var n=t%26,a=(t-n)/26,r=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=r,this;for(var s=r,d=a,l;0!=s&&d<this.length;d++)l=0|this.words[d],l+=s,s=l>>>26,l&=67108863,this.words[d]=l;return 0!=s&&(this.words[d]=s,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(t){var n=0>t;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;this.strip();var a;if(1<this.length)a=1;else{n&&(t=-t),o(67108863>=t,'Number is too big');var r=0|this.words[0];a=r===t?0:r<t?-1:1}return 0===this.negative?a:0|-a},v.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0===this.negative?n:0|-n},v.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,r=this.length-1;0<=r;r--){var o=0|this.words[r],a=0|t.words[r];if(o!=a){o<a?n=-1:o>a&&(n=1);break}}return n},v.prototype.gtn=function(t){return 1===this.cmpn(t)},v.prototype.gt=function(t){return 1===this.cmp(t)},v.prototype.gten=function(t){return 0<=this.cmpn(t)},v.prototype.gte=function(t){return 0<=this.cmp(t)},v.prototype.ltn=function(t){return-1===this.cmpn(t)},v.prototype.lt=function(t){return-1===this.cmp(t)},v.prototype.lten=function(t){return 0>=this.cmpn(t)},v.prototype.lte=function(t){return 0>=this.cmp(t)},v.prototype.eqn=function(t){return 0===this.cmpn(t)},v.prototype.eq=function(t){return 0===this.cmp(t)},v.red=function(t){return new N(t)},v.prototype.toRed=function(t){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),t.convertTo(this)._forceRed(t)},v.prototype.fromRed=function(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},v.prototype._forceRed=function(t){return this.red=t,this},v.prototype.forceRed=function(t){return o(!this.red,'Already a number in reduction context'),this._forceRed(t)},v.prototype.redAdd=function(t){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,t)},v.prototype.redIAdd=function(t){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,t)},v.prototype.redSub=function(t){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,t)},v.prototype.redISub=function(t){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,t)},v.prototype.redShl=function(t){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,t)},v.prototype.redMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.mul(this,t)},v.prototype.redIMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.imul(this,t)},v.prototype.redSqr=function(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(t){return o(this.red&&!t.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,t)};var D={k256:null,p224:null,p192:null,p25519:null};T.prototype._tmp=function(){var t=new v(null);return t.words=Array(b(this.n/13)),t},T.prototype.ireduce=function(t){var n=t,a;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),a=n.bitLength();while(a>this.n);var r=a<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},T.prototype.split=function(t,n){t.iushrn(this.n,0,n)},T.prototype.imulK=function(t){return t.imul(this.k)},r(E,T),E.prototype.split=function(t,n){for(var a=4194303,r=_(t.length,9),o=0;o<r;o++)n.words[o]=t.words[o];if(n.length=r,9>=t.length)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(n.words[n.length++]=s&a,o=10;o<t.length;o++){var d=0|t.words[o];t.words[o-10]=(d&a)<<4|s>>>22,s=d}s>>>=22,t.words[o-10]=s,t.length-=0===s&&10<t.length?10:9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0,r;a<t.length;a++)r=0|t.words[a],n+=977*r,t.words[a]=67108863&n,n=64*r+(0|n/67108864);return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(S,T),r(A,T),r(I,T),I.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var r=19*(0|t.words[a])+n,o=67108863&r;r>>>=26,t.words[a]=o,n=r}return 0!=n&&(t.words[t.length++]=n),t},v._prime=function(t){if(D[t])return D[t];var n;if('k256'===t)n=new E;else if('p224'===t)n=new S;else if('p192'===t)n=new A;else if('p25519'===t)n=new I;else throw new Error('Unknown prime '+t);return D[t]=n,n},N.prototype._verify1=function(t){o(0===t.negative,'red works only with positives'),o(t.red,'red works only with red numbers')},N.prototype._verify2=function(t,n){o(0==(t.negative|n.negative),'red works only with positives'),o(t.red&&t.red===n.red,'red works only with red numbers')},N.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},N.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},N.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a._forceRed(this)},N.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a},N.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a._forceRed(this)},N.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a},N.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},N.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},N.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},N.prototype.isqr=function(t){return this.imul(t,t.clone())},N.prototype.sqr=function(t){return this.mul(t,t)},N.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var d=this.m.add(new v(1)).iushrn(2);return this.pow(n,d)}for(var l=this.m.subn(1),u=0;!l.isZero()&&0===l.andln(1);)u++,l.iushrn(1);o(!l.isZero());var s=new v(1).toRed(this),f=s.redNeg(),h=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new v(2*g*g).toRed(this);0!==this.pow(g,h).cmp(f);)g.redIAdd(f);for(var y=this.pow(g,l),c=this.pow(n,l.addn(1).iushrn(1)),r=this.pow(n,l),t=u;0!==r.cmp(s);){for(var m=r,w=0;0!==m.cmp(s);w++)m=m.redSqr();o(w<t);var x=this.pow(y,new v(1).iushln(t-w-1));c=c.redMul(x),y=x.redSqr(),r=r.redMul(y),t=w}return c},N.prototype.invm=function(t){var n=t._invmp(this.m);return 0===n.negative?this.imod(n):(n.negative=0,this.imod(n).redNeg())},N.prototype.pow=function(t,n){if(n.isZero())return new v(1).toRed(this);if(0===n.cmpn(1))return t.clone();var a=4,r=Array(1<<a);r[0]=new v(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var s=r[0],d=0,l=0,c=n.bitLength()%26;for(0==c&&(c=26),o=n.length-1;0<=o;o--){for(var u=n.words[o],f=c-1,m;0<=f;f--){if(m=1&u>>f,s!==r[0]&&(s=this.sqr(s)),0==m&&0==d){l=0;continue}d<<=1,d|=m,l++,l!=a&&(0!==o||0!==f)||(s=this.mul(s,r[d]),l=0,d=0)}c=26}return s},N.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},N.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},v.mont=function(t){return new j(t)},r(j,N),j.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},j.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},j.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new v(0)._forceRed(this);var r=n.mul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.invm=function(t){var n=this.imod(t._invmp(this.m).mul(this.r2));return n._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(7)(t))},function(t,n,a){var r=a(29),o=a(184),s=a(111),d=Object.defineProperty;n.f=a(30)?Object.defineProperty:function(t,n,a){if(r(t),n=s(n,!0),r(a),o)try{return d(t,n,a)}catch(t){}if('get'in a||'set'in a)throw TypeError('Accessors not supported!');return'value'in a&&(t[n]=a.value),t}},function(t,n,a){function r(t){s.call(this),this.hashMode='string'==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}var o=a(4).Buffer,s=a(43).Transform,d=a(94).StringDecoder,l=a(1);l(r,s),r.prototype.update=function(t,n,a){'string'==typeof t&&(t=o.from(t,n));var r=this._update(t);return this.hashMode?this:(a&&(r=this._toString(r,a)),r)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error('trying to get auth tag in unsupported state')},r.prototype.setAuthTag=function(){throw new Error('trying to set auth tag in unsupported state')},r.prototype.setAAD=function(){throw new Error('trying to set aad in unsupported state')},r.prototype._transform=function(t,n,a){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{a(r)}},r.prototype._flush=function(t){var n;try{this.push(this.__final())}catch(t){n=t}t(n)},r.prototype._finalOrDigest=function(t){var n=this.__final()||o.alloc(0);return t&&(n=this._toString(n,t,!0)),n},r.prototype._toString=function(t,n,a){if(this._decoder||(this._decoder=new d(n),this._encoding=n),this._encoding!==n)throw new Error('can\'t switch encodings');var r=this._decoder.write(t);return a&&(r+=this._decoder.end()),r},t.exports=r},function(t,n,a){var r=a(10),o=a(16),s=a(58),d=a(34),l='prototype',c=function(t,n,a){var u=t&c.F,f=t&c.G,m=t&c.S,h=t&c.P,g=t&c.B,b=t&c.W,y=f?o:o[n]||(o[n]={}),v=y[l],w=f?r:m?r[n]:(r[n]||{})[l],x,_,k;for(x in f&&(a=n),a)_=!u&&w&&void 0!==w[x],_&&x in y||(k=_?w[x]:a[x],y[x]=f&&'function'!=typeof w[x]?a[x]:g&&_?s(k,r):b&&w[x]==k?function(t){var n=function(n,a,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,a);}return new t(n,a,r)}return t.apply(this,arguments)};return n[l]=t[l],n}(k):h&&'function'==typeof k?s(Function.call,k):k,h&&((y.virtual||(y.virtual={}))[x]=k,t&c.R&&v&&!v[x]&&d(v,x,k)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n,a){var r=a(46);t.exports=function(t){if(!r(t))throw TypeError(t+' is not an object!');return t}},function(t,n,a){t.exports=!a(59)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(39),c=a(13),u=function(t){function n(t){r(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(a.termType=n.termType,t){if('string'!=typeof t)throw console.log('Bad blank id:',t),new Error('Bad id argument to new blank node: '+t);if(t.includes('#')){var s=t.split('#');t=s[s.length-1]}a.id=t}else a.id='n'+n.nextId++;return a.value=a.id,a}return s(n,t),d(n,[{key:'compareTerm',value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.id<t.id?-1:this.id>t.id?1:0}},{key:'copy',value:function(t){var a=new n;return t.copyTo(this,a),a}},{key:'toCanonical',value:function(){return'_:'+this.value}},{key:'toString',value:function(){return n.NTAnonymousNodePrefix+this.id}}]),n}(c);u.nextId=0,u.termType='BlankNode',u.NTAnonymousNodePrefix='_:',u.prototype.classOrder=l.BlankNode,u.prototype.isBlank=1,u.prototype.isVar=1,t.exports=u},function(t){'use strict';t.exports={debug:function(){},warn:function(){},info:function(){},error:function(){},success:function(){},msg:function(){}}},function(t,n,a){'use strict';function r(t){return this instanceof r?void(u.call(this,t),f.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once('end',o)):new r(t)}function o(){this.allowHalfOpen||this._writableState.ended||d(s,this)}function s(t){t.end()}var d=a(66),l=Object.keys||function(t){var n=[];for(var a in t)n.push(a);return n};t.exports=r;var c=a(50);c.inherits=a(1);var u=a(139),f=a(93);c.inherits(r,u);for(var m=l(f.prototype),h=0,g;h<m.length;h++)g=m[h],r.prototype[g]||(r.prototype[g]=f.prototype[g]);Object.defineProperty(r.prototype,'destroyed',{get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,n){this.push(null),this.end(),d(n,t)}},function(t,n,a){var r=a(26),o=a(60);t.exports=a(30)?function(t,n,a){return r.f(t,n,o(1,a))}:function(t,n,a){return t[n]=a,t}},function(t){var n={}.hasOwnProperty;t.exports=function(t,a){return n.call(t,a)}},function(t,n,a){t.exports=a(366)},function(t,n,a){'use strict';n.__esModule=!0;var r=a(82),o=function(t){return t&&t.__esModule?t:{default:t}}(r);n.default=function(t){return function(){var n=t.apply(this,arguments);return new o.default(function(t,a){function r(s,d){try{var l=n[s](d),c=l.value}catch(t){return void a(t)}return l.done?void t(c):o.default.resolve(c).then(function(t){r('next',t)},function(t){r('throw',t)})}return r('next')})}}},function(t,n,a){t.exports=a(414).default,t.exports.default=t.exports},function(t){'use strict';t.exports={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},l=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),c=a(39),f=a(8),m=a(13),h=a(131),g=function(t){function n(t,a,s){r(this,n);var d=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return d.termType=n.termType,d.value=t,a&&(d.lang=a,s=h.langString),s&&(d.datatype=f.fromValue(s)),d}return s(n,t),l(n,[{key:'copy',value:function(){return new n(this.value,this.lang,this.datatype)}},{key:'equals',value:function(t){return!!t&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&(!this.datatype&&!t.datatype||this.datatype&&this.datatype.equals(t.datatype))}},{key:'toNT',value:function(){if('number'==typeof this.value)return this.toString();if('string'!=typeof this.value)throw new Error('Value of RDF literal is not string or number: '+this.value);var t=this.value;return t=t.replace(/\\/g,'\\\\'),t=t.replace(/\"/g,'\\"'),t=t.replace(/\n/g,'\\n'),t='"'+t+'"',this.language?t+='@'+this.language:!this.datatype.equals(h.string)&&(t+='^^'+this.datatype.toCanonical()),t}},{key:'toString',value:function(){return''+this.value}},{key:'language',get:function(){return this.lang},set:function(t){this.lang=t||''}}],[{key:'fromBoolean',value:function(t){var a=t?'1':'0';return new n(a,null,h.boolean)}},{key:'fromDate',value:function(t){if(!(t instanceof Date))throw new TypeError('Invalid argument to Literal.fromDate()');var a=function(t){return(''+(100+t)).slice(1,3)},r=''+t.getUTCFullYear()+'-'+a(t.getUTCMonth()+1)+'-'+a(t.getUTCDate())+'T'+a(t.getUTCHours())+':'+a(t.getUTCMinutes())+':'+a(t.getUTCSeconds())+'Z';return new n(r,null,h.dateTime)}},{key:'fromNumber',value:function(t){if('number'!=typeof t)throw new TypeError('Invalid argument to Literal.fromNumber()');var a=t.toString(),r;return r=0>a.indexOf('e')&&u(t)<=Number.MAX_SAFE_INTEGER?Number.isInteger(t)?h.integer:h.decimal:h.double,new n(a,null,r)}},{key:'fromValue',value:function(t){if('undefined'==typeof t||null===t)return t;if('object'===('undefined'==typeof t?'undefined':d(t))&&t.termType)return t;switch('undefined'==typeof t?'undefined':d(t)){case'object':if(t instanceof Date)return n.fromDate(t);case'boolean':return n.fromBoolean(t);case'number':return n.fromNumber(t);case'string':return new n(t);}throw new Error('Can\'t make literal from '+t+' of type '+('undefined'==typeof t?'undefined':d(t)))}}]),n}(m);g.termType='Literal',g.prototype.classOrder=c.Literal,g.prototype.datatype=h.string,g.prototype.lang='',g.prototype.isVar=0,t.exports=g},function(n){n.exports=t},function(){},function(t,n,a){function r(){o.call(this)}t.exports=r;var o=a(92).EventEmitter,s=a(1);s(r,o),r.Readable=a(49),r.Writable=a(240),r.Duplex=a(241),r.Transform=a(242),r.PassThrough=a(243),r.Stream=r,r.prototype.pipe=function(t,n){function a(n){t.writable&&!1===t.write(n)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function s(){f||(f=!0,t.end())}function d(){f||(f=!0,'function'==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===o.listenerCount(this,'error'))throw t}function c(){u.removeListener('data',a),t.removeListener('drain',r),u.removeListener('end',s),u.removeListener('close',d),u.removeListener('error',l),t.removeListener('error',l),u.removeListener('end',c),u.removeListener('close',c),t.removeListener('close',c)}var u=this;u.on('data',a),t.on('drain',r),t._isStdio||n&&!1===n.end||(u.on('end',s),u.on('close',d));var f=!1;return u.on('error',l),t.on('error',l),u.on('end',c),u.on('close',c),t.on('close',c),t.emit('pipe',u),t}},function(t){t.exports=n},function(t,n,a){(function(n){function a(t,a){this._block=new n(t),this._finalSize=a,this._blockSize=t,this._len=0,this._s=0}a.prototype.update=function(a,r){'string'==typeof a&&(r=r||'utf8',a=new n(a,r));for(var o=this._len+=a.length,d=this._s||0,s=0,l=this._block;d<o;){for(var c=_(a.length,s+this._blockSize-d%this._blockSize),t=c-s,u=0;u<t;u++)l[d%this._blockSize+u]=a[u+s];d+=t,s+=t,0==d%this._blockSize&&this._update(l)}return this._s=d,this},a.prototype.digest=function(t){var n=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),n%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(n,this._blockSize-4);var a=this._update(this._block)||this._hash();return t?a.toString(t):a},a.prototype._update=function(){throw new Error('_update must be implemented by subclass')},t.exports=a}).call(n,a(0).Buffer)},function(t){t.exports=function(t){return'object'==typeof t?null!==t:'function'==typeof t}},function(t,n,a){var r=a(186),o=a(112);t.exports=function(t){return r(o(t))}},function(t,n,a){function r(t,n){this._id=t,this._clearFn=n}var o=Function.prototype.apply;n.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;0<=n&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},a(230),n.setImmediate=setImmediate,n.clearImmediate=clearImmediate},function(t,n,a){n=t.exports=a(139),n.Stream=n,n.Readable=n,n.Writable=a(93),n.Duplex=a(33),n.Transform=a(143),n.PassThrough=a(239)},function(t,n,a){(function(t){function a(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):'[object Array]'===a(t)},n.isBoolean=function(t){return'boolean'==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return'number'==typeof t},n.isString=function(t){return'string'==typeof t},n.isSymbol=function(t){return'symbol'==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return'[object RegExp]'===a(t)},n.isObject=function(t){return'object'==typeof t&&null!==t},n.isDate=function(t){return'[object Date]'===a(t)},n.isError=function(t){return'[object Error]'===a(t)||t instanceof Error},n.isFunction=function(t){return'function'==typeof t},n.isPrimitive=function(t){return null===t||'boolean'==typeof t||'number'==typeof t||'string'==typeof t||'symbol'==typeof t||'undefined'==typeof t},n.isBuffer=t.isBuffer}).call(n,a(0).Buffer)},function(t,n,a){'use strict';var r=a(8);t.exports=function(t){return function(n){return new r(t+(n||''))}}},function(t,n,a){'use strict';(function(n,r){var o=a(4).Buffer,s=n.crypto||n.msCrypto;t.exports=s&&s.getRandomValues?function(t,a){if(65536<t)throw new Error('requested too many random bytes');var d=new n.Uint8Array(t);0<t&&s.getRandomValues(d);var l=o.from(d.buffer);return'function'==typeof a?r.nextTick(function(){a(null,l)}):l}:function(){throw new Error('secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11')}}).call(n,a(3),a(5))},function(t,n,a){'use strict';(function(n){function r(t){u.call(this,'digest'),this._hash=t,this.buffers=[]}function o(t){u.call(this,'digest'),this._hash=t}var s=a(1),d=a(101),l=a(102),c=a(103),u=a(27);s(r,u),r.prototype._update=function(t){this.buffers.push(t)},r.prototype._final=function(){var t=n.concat(this.buffers),a=this._hash(t);return this.buffers=null,a},s(o,u),o.prototype._update=function(t){this._hash.update(t)},o.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return t=t.toLowerCase(),'md5'===t?new r(d):'rmd160'===t||'ripemd160'===t?new o(new l()):new o(c(t))}}).call(n,a(0).Buffer)},function(t,n,a){(function(n){t.exports=function(t,a){for(var r=_(t.length,a.length),o=new n(r),s=0;s<r;++s)o[s]=t[s]^a[s];return o}}).call(n,a(0).Buffer)},function(t,n,a){'use strict';function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian='big',this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var o=a(22),s=a(15);n.BlockHash=r,r.prototype.update=function(t,n){if(t=o.toArray(t,n),this.pending=this.pending?this.pending.concat(t):t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var a=t.length%this._delta8;this.pending=t.slice(t.length-a,t.length),0===this.pending.length&&(this.pending=null),t=o.join32(t,0,t.length-a,this.endian);for(var r=0;r<t.length;r+=this._delta32)this._update(t,r,r+this._delta32)}return this},r.prototype.digest=function(t){return this.update(this._pad()),s(null===this.pending),this._digest(t)},r.prototype._pad=function(){var n=this.pendingTotal,a=this._delta8,r=a-(n+this.padLength)%a,o=Array(r+this.padLength);o[0]=128;for(var s=1;s<r;s++)o[s]=0;if(n<<=3,'big'===this.endian){for(var d=8;d<this.padLength;d++)o[s++]=0;o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=255&n>>>24,o[s++]=255&n>>>16,o[s++]=255&n>>>8,o[s++]=255&n}else for(o[s++]=255&n,o[s++]=255&n>>>8,o[s++]=255&n>>>16,o[s++]=255&n>>>24,o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0,d=8;d<this.padLength;d++)o[s++]=0;return o}},function(t,n,a){var r=n;r.bignum=a(319),r.define=a(321).define,r.base=a(57),r.constants=a(171),r.decoders=a(327),r.encoders=a(329)},function(t,n,a){var r=n;r.Reporter=a(324).Reporter,r.DecoderBuffer=a(170).DecoderBuffer,r.EncoderBuffer=a(170).EncoderBuffer,r.Node=a(325)},function(t,n,a){var r=a(78);t.exports=function(t,n,a){return(r(t),void 0===n)?t:1===a?function(r){return t.call(n,r)}:2===a?function(r,a){return t.call(n,r,a)}:3===a?function(r,a,o){return t.call(n,r,a,o)}:function(){return t.apply(n,arguments)}}},function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t){t.exports={}},function(t,n,a){'use strict';var r=a(128),o=a(216),s=a(423),d=a(424),l=a(222),c=a(219),u=a(221),f=a(87),m=a(217),h=a(220),g=a(218);t.exports={JWA:r,JWK:o,JWKSet:s,JWT:d,JWS:l,Base64URLSchema:c,JOSEHeaderSchema:u,JWKSchema:f,JWKSetSchema:m,JWTClaimsSetSchema:h,JWTSchema:g}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function d(t,n,a,r){var o=t.any(n,a,void 0);return!!o&&(t.equate(o,r),!0)}function l(t,n,a,r){var o=t.any(void 0,a,r);return!!o&&(t.equate(o,n),!0)}function c(t,n,a,r,o){t.typeCallback&&t.typeCallback(t,r,o);var s=t.classActions[r.hashString()],d=!1;if(s)for(var l=0;l<s.length;l++)d=d||s[l](t,n,a,r,o);return d}Object.defineProperty(n,'__esModule',{value:!0});var u=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),f=a(24).ArrayIndexOf,m=a(132),g=a(24).RDFArrayRemove,b=a(67),y=a(13),h=a(68),v='http://www.w3.org/2002/07/owl#',w=function(t){function n(t){r(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.propertyActions=[],a.classActions=[],a.redirections=[],a.aliases=[],a.HTTPRedirects=[],a.subjectIndex=[],a.predicateIndex=[],a.objectIndex=[],a.whyIndex=[],a.index=[a.subjectIndex,a.predicateIndex,a.objectIndex,a.whyIndex],a.namespaces={},a.features=t||['sameAs','InverseFunctionalProperty','FunctionalProperty'],a.initPropertyActions(a.features),a}return s(n,t),u(n,[{key:'substitute',value:function(t){var a=this.statements.map(function(n){return n.substitute(t)}),r=new n;return r.add(a),r}},{key:'applyPatch',value:function(t,n,r){var o=a(69).Query,s=this,d=null,l=function(a){if(t['delete']){c=t['delete'],d&&(c=c.substitute(d)),c=c.statements;var o=[],l=c.map(function(t){var a=s.statementsMatching(t.subject,t.predicate,t.object,n);return 0===a.length?(o.push(t),null):a[0]});if(o.length)return r('Could not find to delete: '+o.join('\n or '));l.map(function(t){s.remove(t)})}t.insert&&(c=t.insert,d&&(c=c.substitute(d)),c=c.statements,c.map(function(t){t.why=n,s.add(t.subject,t.predicate,t.object,t.why)})),a()},c;if(t.where){var u=new o('patch');u.pat=t.where,u.pat.statements.map(function(t){t.why=n});var f=[];s.query(u,function(t){f.push(t)},s.fetcher,function(){return 0===f.length?r('No match found to be patched:'+t.where):1<f.length?r('Patch ambiguous. No patch done.'):void(d=f[0],l(r))})}else l(r)}},{key:'declareExistential',value:function(t){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(t),t}},{key:'initPropertyActions',value:function(t){this.propertyActions['<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>']=[c],0<=f(t,'sameAs')&&(this.propertyActions['<http://www.w3.org/2002/07/owl#sameAs>']=[function(t,n,a,r){return t.equate(n,r),!0}]),0<=f(t,'InverseFunctionalProperty')&&(this.classActions['<'+v+'InverseFunctionalProperty>']=[function(t,n){return t.newPropertyAction(n,l)}]),0<=f(t,'FunctionalProperty')&&(this.classActions['<'+v+'FunctionalProperty>']=[function(t,n){return t.newPropertyAction(n,d)}])}},{key:'add',value:function(t,a,r,o){var s;if(1===arguments.length){if(t instanceof Array)for(s=0;s<t.length;s++)this.add(t[s]);else t instanceof b?this.add(t.subject,t.predicate,t.object,t.why):t instanceof n&&this.add(t.statements);return this}var d,l;o||(o=this.fetcher?this.fetcher.appNode:this.sym('chrome:theSession')),t=y.fromValue(t),a=y.fromValue(a),r=y.fromValue(r),o=y.fromValue(o),this.predicateCallback&&this.predicateCallback(this,a,o);var c=this.canon(a).hashString();d=this.propertyActions[c];var u=!1;if(d)for(s=0;s<d.length;s++)u=u||d[s](this,t,a,r,o);if(this.holds(t,a,r,o))return null;var f=[this.canon(t).hashString(),c,this.canon(r).hashString(),this.canon(o).hashString()];for(l=new b(t,a,r,o),s=0;4>s;s++){var m=this.index[s],g=f[s];m[g]||(m[g]=[]),m[g].push(l)}return this.statements.push(l),l}},{key:'addAll',value:function(t){var n=this;t.forEach(function(t){n.add(t.subject,t.predicate,t.object,t.graph)})}},{key:'any',value:function(t,n,a,r){var o=this.anyStatementMatching(t,n,a,r);if(null!=o)return null==t?o.subject:null==n?o.predicate:null==a?o.object:void 0}},{key:'anyValue',value:function(t,n,a,r){var o=this.any(t,n,a,r);return o?o.value:void 0}},{key:'anyStatementMatching',value:function(t,n,a,r){var o=this.statementsMatching(t,n,a,r,!0);return o&&0!==o.length?o[0]:void 0}},{key:'canon',value:function(t){if(!t)return t;var n=this.redirections[t.hashString()];return n?n:t}},{key:'check',value:function(){this.checkStatementList(this.statements);for(var t=0,n;4>t;t++)for(var a in n=this.index[t],n)n.hasOwnProperty(a)&&this.checkStatementList(n[a],t)}},{key:'checkStatementList',value:function(t,n){for(var a=['subject','predicate','object','why'],r=' found in '+a[n]+' index.',o=0,s;o<t.length;o++){s=t[o];for(var d=[s.subject,s.predicate,s.object,s.why],l=function(t,n){for(var a=0;a<t.length;a++)if(t[a].subject.sameTerm(n.subject)&&t[a].predicate.sameTerm(n.predicate)&&t[a].object.sameTerm(n.object)&&t[a].why.sameTerm(n.why))return!0},u=0;4>u;u++){var f=this.canon(d[u]),c=f.hashString();this.index[u][c]&&l(this.index[u][c],s)}if(!l(this.statements,s))throw new Error('Statement list does not statement '+s+'@'+s.why+r)}}},{key:'close',value:function(){return this}},{key:'copyTo',value:function(t,n,a){a||(a=[]);var r=this.statementsMatching(t);-1!==f(a,'two-direction')&&r.concat(this.statementsMatching(void 0,void 0,t));for(var o=0,s;o<r.length;o++){switch(s=r[o],s.object.termType){case'NamedNode':this.add(n,s.predicate,s.object);break;case'Literal':case'BlankNode':case'Collection':this.add(n,s.predicate,s.object.copy(this));}-1!==f(a,'delete')&&this.remove(s)}}},{key:'equate',value:function(t,n){t=this.canon(t),n=this.canon(n);var a=t.compareTerm(n);return!a||(0>a?this.replaceWith(n,t):this.replaceWith(t,n))}},{key:'formula',value:function(t){return new n(t)}},{key:'match',value:function(t,n,a,r){return this.statementsMatching(y.fromValue(t),y.fromValue(n),y.fromValue(a),y.fromValue(r))}},{key:'mentionsURI',value:function(t){var n='<'+t+'>';return!!this.subjectIndex[n]||!!this.objectIndex[n]||!!this.predicateIndex[n]}},{key:'newExistential',value:function(t){if(!t)return this.bnode();var n=this.sym(t);return this.declareExistential(n)}},{key:'newPropertyAction',value:function(t,n){var a=t.hashString();this.propertyActions[a]||(this.propertyActions[a]=[]),this.propertyActions[a].push(n);for(var r=this.statementsMatching(void 0,t,void 0),o=!1,s=0;s<r.length;s++)o=o||n(this,r[s].subject,t,r[s].object);return o}},{key:'newUniversal',value:function(t){var n=this.sym(t);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(n),n}},{key:'variable',value:function(t){return new h(t)}},{key:'nextSymbol',value:function(t){for(var n=0,a;;n++)if(a=t.uri+'#n'+n,!this.mentionsURI(a))return this.sym(a)}},{key:'query',value:function(t,n,r,o){var s=a(69).indexedFormulaQuery;return s.call(this,t,n,r,o)}},{key:'remove',value:function(t){if(t instanceof Array){for(var a=0;a<t.length;a++)this.remove(t[a]);return this}if(t instanceof n)return this.remove(t.statements);var r=this.statementsMatching(t.subject,t.predicate,t.object,t.why);if(!r.length)throw new Error('Statement to be removed is not on store: '+t);return this.removeStatement(r[0]),this}},{key:'removeDocument',value:function(t){for(var n=this.statementsMatching(void 0,void 0,void 0,t).slice(),a=0;a<n.length;a++)this.removeStatement(n[a]);return this}},{key:'removeMany',value:function(t,n,a,r,o){for(var s=this.statementsMatching(t,n,a,r,!1),d=[],l=0;l<s.length;l++)d.push(s[l]);for(o&&(d=d.slice(0,o)),l=0;l<d.length;l++)this.remove(d[l])}},{key:'removeMatches',value:function(t,n,a,r){return this.removeStatements(this.statementsMatching(t,n,a,r)),this}},{key:'removeStatement',value:function(t){for(var n=[t.subject,t.predicate,t.object,t.why],a=0;4>a;a++){var r=this.canon(n[a]),o=r.hashString();this.index[a][o]&&g(this.index[a][o],t)}return g(this.statements,t),this}},{key:'removeStatements',value:function(t){for(var n=0;n<t.length;n++)this.remove(t[n]);return this}},{key:'replaceWith',value:function(t,n){for(var a=t.hashString(),r=n.hashString(),o=function(t){var n=t[a];if(n){var o=t[r];t[r]=o?n.concat(o):n,delete t[a]}},s=0;4>s;s++)o(this.index[s]);if(this.redirections[a]=n,t.uri){if(this.aliases[r]||(this.aliases[r]=[]),this.aliases[r].push(t),this.aliases[a])for(s=0;s<this.aliases[a].length;s++)this.redirections[this.aliases[a][s].hashString()]=n,this.aliases[r].push(this.aliases[a][s]);this.add(n,this.sym('http://www.w3.org/2007/ont/link#uri'),t.uri),this.fetcher&&this.fetcher.nowKnownAs(t,n)}return o(this.classActions),o(this.propertyActions),!0}},{key:'allAliases',value:function(t){var n=this.aliases[this.canon(t).hashString()]||[];return n.push(this.canon(t)),n}},{key:'sameThings',value:function(t,n){if(t.sameTerm(n))return!0;var a=this.canon(t);if(!a)return!1;var r=this.canon(n);return!!r&&a.uri===r.uri}},{key:'setPrefixForURI',value:function(t,n){'tab'===t&&this.namespaces.tab||'ns'===t.slice(0,2)||'default'===t.slice(0,7)||(this.namespaces[t]=n)}},{key:'statementsMatching',value:function(t,n,a,r,o){var s=[t,n,a,r],d=[],l=[],c=[],u=[],f,m;for(f=0;4>f;f++)d[f]=this.canon(y.fromValue(s[f])),d[f]?(u.push(f),l[f]=d[f].hashString()):c.push(f);if(0===u.length)return this.statements;if(1===u.length)return f=u[0],m=this.index[f][l[f]],m&&o&&1<m.length&&(m=m.slice(0,1)),m=m||[],m;var h=1e10,g,b;for(b=0;b<u.length;b++){if(f=u[b],m=this.index[f][l[f]],!m)return[];m.length<h&&(h=m.length,g=b)}for(var v=u[g],w=this.index[v][l[v]],x=u.slice(0,g).concat(u.slice(g+1)),_=[],k=['subject','predicate','object','why'],C=0,T;C<w.length;C++){for(T=w[C],b=0;b<x.length;b++)if(f=x[b],!this.canon(T[k[f]]).sameTerm(d[f])){T=null;break}if(null!=T&&(_.push(T),o))break}return _}},{key:'uris',value:function(t){var n=this.canon(t),a=this.aliases[n.hashString()];if(!n.uri)return[];var r=[n.uri];if(a)for(var o=0;o<a.length;o++)r.push(a[o].uri);return r}},{key:'length',get:function(){return this.statements.length}}]),n}(m);n.default=w,w.handleRDFType=c},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(31),c=a(39),u=a(13),f=function(t){function n(t){r(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.termType=n.termType,a.id=l.nextId++,a.elements=[],a.closed=!1,t&&0<t.length&&t.forEach(function(t){a.elements.push(u.fromValue(t))}),a}return s(n,t),d(n,[{key:'append',value:function(t){return this.elements.push(t)}},{key:'close',value:function(){return this.closed=!0,this.closed}},{key:'shift',value:function(){return this.elements.shift()}},{key:'substitute',value:function(t){var a=this.elements.map(function(n){n.substitute(t)});return new n(a)}},{key:'toNT',value:function(){return l.NTAnonymousNodePrefix+this.id}},{key:'toString',value:function(){return'('+this.elements.join(' ')+')'}},{key:'unshift',value:function(t){return this.elements.unshift(t)}}]),n}(u);f.termType='Collection',f.prototype.classOrder=c.Collection,f.prototype.compareTerm=l.prototype.compareTerm,f.prototype.isVar=0,t.exports=f},function(t,n,a){'use strict';(function(n){t.exports=n.version&&0!==n.version.indexOf('v0.')&&(0!==n.version.indexOf('v1.')||0===n.version.indexOf('v1.8.'))?n.nextTick:function(t,a,r,o){if('function'!=typeof t)throw new TypeError('"callback" argument must be a function');var s=arguments.length,d,l;switch(s){case 0:case 1:return n.nextTick(t);case 2:return n.nextTick(function(){t.call(null,a)});case 3:return n.nextTick(function(){t.call(null,a,r)});case 4:return n.nextTick(function(){t.call(null,a,r,o)});default:for(d=Array(s-1),l=0;l<d.length;)d[l++]=arguments[l];return n.nextTick(function(){t.apply(null,d)});}}}).call(n,a(5))},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(13),d=function(){function t(n,a,o,d){r(this,t),this.subject=s.fromValue(n),this.predicate=s.fromValue(a),this.object=s.fromValue(o),this.why=d}return o(t,[{key:'equals',value:function(t){return t.subject.equals(this.subject)&&t.predicate.equals(this.predicate)&&t.object.equals(this.object)&&t.graph.equals(this.graph)}},{key:'substitute',value:function(n){var a=new t(this.subject.substitute(n),this.predicate.substitute(n),this.object.substitute(n),this.why.substitute(n));return console.log('@@@ statement substitute:'+a),a}},{key:'toCanonical',value:function(){var t=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&'DefaultGraph'!==this.graph.termType&&t.push(this.graph.toCanonical()),t.join(' ')+' .'}},{key:'toNT',value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(' ')+' .'}},{key:'toString',value:function(){return this.toNT()}},{key:'graph',get:function(){return this.why},set:function(t){this.why=t}}]),t}();t.exports=d},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(39),c=a(13),u=a(12),f=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'';r(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.termType=n.termType,a.value=t,a.base='varid:',a.uri=u.join(t,a.base),a}return s(n,t),d(n,[{key:'equals',value:function(t){return!!t&&this.termType===t.termType&&this.value===t.value}},{key:'hashString',value:function(){return this.toString()}},{key:'substitute',value:function(t){var n;return null==(n=t[this.toNT()])?this:n}},{key:'toString',value:function(){return this.uri.slice(0,this.base.length)===this.base?'?'+this.uri.slice(this.base.length):'?'+this.uri}}]),n}(c);f.termType='Variable',f.prototype.classOrder=l.Variable,f.prototype.isVar=1,t.exports=f},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=a(64),s=function(t){return t&&t.__esModule?t:{default:t}}(o),d=a(32),l=a(12).docpart;t.exports.Query=function t(n,a){r(this,t),this.pat=new s.default,this.vars=[],this.name=n,this.id=a},t.exports.indexedFormulaQuery=function(t,n,a,r){function o(t,n){return t.nvars===n.nvars?t.index.length-n.index.length:t.nvars-n.nvars}var s=function(t){var n='',a;for(a in t)t.hasOwnProperty(a)&&(n+='    '+a+' -> '+t[a]);return n},u=function(t){var a='Bindings: ',r=t.length,n;for(n=0;n<r;n++)a+=s(t[n][0])+';\n\t';return a},c=function(t,n,a,r){var o=a[t];if(void 0===o){if(t.isVar){var s=[];return s[t]=n,[[s,null]]}o=t}if(!o.complexType)return r.redirections[o]&&(o=r.redirections[o]),r.redirections[n]&&(n=r.redirections[n]),o.sameTerm(n)?[[[],null]]:[];if(t instanceof Array)return n instanceof Array?m(t,n,a):[];throw new Error('query.js: oops - code not written yet')},m=function t(a,r,o,s){var d;if(a.length!==r.length)return[];if(!a.length)return[[[],null]];var l=c(a[0],r[0],o,s);if(0===l.length)return l;var u=[],f=l.length,n,h,g,b,m,y,v;for(n=0;n<f;n++){for(m in h=l[n][0],v=[],h)h.hasOwnProperty(m)&&(v[m]=h[m]);for(m in o)o.hasOwnProperty(m)&&(v[m]=o[m]);for(d=t(a.slice(1),r.slice(1),v,s),b=d.length,g=0;g<b;g++){for(m in y=d[g][0],h)h.hasOwnProperty(m)&&(y[m]=h[m]);u.push([y,null])}}return u},h=function(t,n){var a=n[t];return void 0===a?t:a},g=function(t,n){var a={},r;for(r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);for(r in n)n.hasOwnProperty(r)&&(a[r]=n[r]);return a},y=function(t,n){return this.trunkBindings=n,this.originalCallback=t,this.branches=[],this};y.prototype.checkAllDone=function(){var t;for(t=0;t<this.branches.length;t++)if(!this.branches[t].done)return;d.debug('OPTIONAL BIDNINGS ALL DONE:'),this.doCallBacks(this.branches.length-1,this.trunkBindings)},y.prototype.doCallBacks=function(t,n){var a;if(0>t)return this.originalCallback(n);for(a=0;a<this.branches[t].results.length;a++)this.doCallBacks(t-1,g(n,this.branches[t].results[a]))};var b=function(t,n){return this.count=0,this.success=!1,this.done=!1,this.callback=t,this.onDone=n,this};b.prototype.reportMatch=function(t){this.callback(t),this.success=!0},b.prototype.reportDone=function(){this.done=!0,d.info('Mandatory query branch finished.***'),void 0!==this.onDone&&this.onDone()};var v=function(t){return this.count=0,this.done=!1,this.results=[],this.junction=t,t.branches.push(this),this};v.prototype.reportMatch=function(t){this.results.push(t)},v.prototype.reportDone=function(){d.debug('Optional branch finished - results.length = '+this.results.length),0===this.results.length&&(this.results.push({}),d.debug('Optional branch FAILED - that\'s OK.')),this.done=!0,this.junction.checkAllDone()};var w=function(n,a,r){var o,t,s,d,l;for(a.nvars=0,a.index=null,t=[a.subject,a.predicate,a.object],l=[n.subjectIndex,n.predicateIndex,n.objectIndex],d=0;3>d;d++)if(t[d].isVar&&void 0===r[t[d]])a.nvars++;else{if(o=h(t[d],r),n.redirections[o.hashString()]&&(o=n.redirections[o.hashString()]),s=l[d][o.hashString()],!s)return a.index=[],!1;(null===a.index||a.index.length>s.length)&&(a.index=s)}return null===a.index&&(a.index=n.statements),!0},x=0,_=function t(a,r,o,c,u,f,m){d.debug('Match begins, Branch count now: '+m.count+' for '+m.pattern_debug);var h=a.fetcher?a.fetcher:null,g=r.statements;if(0===g.length){if(d.debug('FOUND MATCH WITH BINDINGS:'+s(o)),0===r.optional.length)m.reportMatch(o);else{d.debug('OPTIONAL: '+r.optional);var w=new y(n,o),_=[],C;for(C=0;C<r.optional.length;C++)_[C]=new v(w),_[C].pattern_debug=r.optional[C];for(C=0;C<r.optional.length;C++)++_[C].count,t(a,r.optional[C],o,'',u,n,_[C])}return m.count--,void d.debug('Match ends -- success , Branch count now: '+m.count+' for '+m.pattern_debug)}var b=g.length,T,E;if(h){var S='match'+x++,A=function(n){var s=n.uri.split('#')[0];h.nowOrWhenFetched(s,void 0,function(s,d){s&&console.log('Error following link to <'+n.uri+'> in query: '+d),t(a,r,o,c,u,f,m)})};for(E=0;E<b;E++){if(T=g[E],void 0!==o[T.subject]&&o[T.subject].uri&&h&&'unrequested'===h.getState(l(o[T.subject].uri)))return void A(o[T.subject],S);if(void 0!==o[T.object]&&o[T.object].uri&&h&&'unrequested'===h.getState(l(o[T.object].uri)))return void A(o[T.object],S)}}k(a,r,o,c,u,f,m)},C=function(t,n){var a=!0,r,o;for(r in t)t.hasOwnProperty(r)&&n[r]&&(o=n[r].test,o&&!o(t[r])&&(a=!1));return a},k=function(t,a,r,l,f,h,g){var b=a.statements,y=b.length,n,x,k,T,v,E,S;for(n=0;n<y;n++)S=b[n],d.info('match2: item='+S+', bindingsSoFar='+s(r)),w(t,S,r);b.sort(o),S=b[0];var A=t.formula();A.optional=a.optional,A.constraints=a.constraints,A.statements=b.slice(1),d.debug(l+'match2 searching '+S.index.length+' for '+S+'; bindings so far='+s(r));var I=S.index.length,N=0,j,c,R;for(j=0;j<I;j++)for(R=S.index[j],c=m([S.subject,S.predicate,S.object],[R.subject,R.predicate,R.object],r,t),d.info(l+' From first: '+c.length+': '+u(c)),k=c.length,x=0;x<k;x++)if(v=[],E=c[x][0],!C(E,a.constraints))d.debug('Branch count CS: '+g.count);else{for(T in E)E.hasOwnProperty(T)&&(v[T]=E[T]);for(T in r)r.hasOwnProperty(T)&&(v[T]=r[T]);g.count++,N++,_(t,A,v,l+'  ',f,h,g)}g.count--,0==N&&d.debug('Match2 fails completely on '+S),d.debug('Match2 ends, Branch count: '+g.count+' for '+g.pattern_debug),0===g.count&&(d.debug('Branch finished.'),g.reportDone())},T=this;d.debug('Query on '+this.statements.length);var f=new b(n,r);return f.count++,void setTimeout(function(){_(T,t.pat,t.pat.initBindings,'',a,n,f)},0)}},function(t,n,a){'use strict';function r(t){return new h(t)}function o(t,n,a,r){return r=r||new u,new g(t,n,a,r)}var s=a(64),d=function(t){return t&&t.__esModule?t:{default:t}}(s),l=a(31),c=a(65),u=a(246),f=a(98),m=a(40),h=a(8),g=a(67),b=a(68);t.exports.blankNode=function(t){return new l(t)},t.exports.defaultGraph=function(){return new u},t.exports.graph=function(){return new d.default},t.exports.literal=function(t,n){return'string'==typeof n?-1===n.indexOf(':')?new m(t,n):new m(t,null,r(n)):new m(t,null,n)},t.exports.namedNode=r,t.exports.quad=o,t.exports.triple=function(t,n,a){return o(t,n,a)},t.exports.variable=function(t){return new b(t)},t.exports.collection=function(t){return new c(t)},t.exports.fetcher=function(t,n){return new f(t,n)},t.exports.lit=function(t,n,a){return new m(''+t,n,a)},t.exports.st=function(t,n,a,r){return new g(t,n,a,r)}},function(t,n,a){'use strict';var r='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},o=a(12),s=a(24).ArrayIndexOf,d=function(){function n(t){return encodeURI(t)}function t(t,n,a,r,o,s,d,l){'undefined'==typeof n&&(n=null),'undefined'==typeof a&&(a=''),'undefined'==typeof r&&(r=null),'undefined'==typeof o&&(o=''),'undefined'==typeof s&&(s=null),'undefined'==typeof d&&(d=''),'undefined'==typeof l&&(l=null),this._bindings=new m([]),this._flags=d,''!=a&&(w(0<=a.indexOf(':'),'Document URI not absolute: '+a),this._bindings['']=a+'#'),this._store=t,o&&t.setGenPrefix(o),this._thisDoc=a,this.source=t.sym(a),this.lines=0,this.statementCount=0,this.startOfLine=0,this.previousLine=0,this._genPrefix=o,this.keywords=new f(['a','this','bind','has','is','of','true','false']),this.keywordsSet=0,this._anonymousNodes=new m([]),this._variables=new m([]),this._parentVariables=new m([]),this._reason=l,this._reason2=null,C,this._baseURI=r?r:a?a:null,w(!this._baseURI||0<=this._baseURI.indexOf(':')),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+'#_g':this._genPrefix=RDFSink_uniqueURI()),this._formula=null==n?this._thisDoc?t.formula(a+'#_formula'):t.formula():n,this._context=this._formula,this._parentContext=null}function a(t,n,a,r,o){return'Line '+(n+1)+' of <'+t+'>: Bad syntax: '+o+'\nat: "'+g(a,r,r+30)+'"'}var d=String.prototype,l={encode:function(t){t=t.replace(/\r\n/g,'\n');for(var a='',r=0,n;r<t.length;r++)n=t.charCodeAt(r),128>n?a+=x(n):127<n&&2048>n?(a+=x(192|n>>6),a+=x(128|63&n)):(a+=x(224|n>>12),a+=x(128|63&n>>6),a+=x(128|63&n));return a},decode:function(t){for(var n='',a=0,r;a<t.length;)r=t.charCodeAt(a),128>r?(n+=x(r),a++):191<r&&224>r?(n+=x((31&r)<<6|63&t.charCodeAt(a+1)),a+=2):(n+=x((15&r)<<12|(63&t.charCodeAt(a+1))<<6|63&t.charCodeAt(a+2)),a+=3);return n}},c='http://www.w3.org/2000/10/swap/log#',u=function(t){return t},f=function(t){return t},m=function(t){if(0<t.length)throw'missing.js: oops nnonempty dict not imp';return[]},h=function(t){return t.length},g=function(t,n,a){if('undefined'==typeof t.slice)throw'@@ mising.js: No .slice function for '+t+' of type '+('undefined'==typeof t?'undefined':r(t));return'undefined'==typeof a||null==a?t.slice(n):t.slice(n,a)},b=Error('dummy error stop iteration'),y=function(t){return this.last=0,this.li=t,this.next=function(){if(this.last==this.li.length)throw b;return this.li[this.last++]},this},v=function(t,n){return t.indexOf(n)},w=function(t,n){if(!t){if(n)throw'python Assertion failed: '+n;throw'(python) Assertion failed.'}},_=function(t){return x(t)};d.encode=function(t){if('utf-8'!=t)throw'UTF8_converter: can only do utf-8';return l.encode(this)},d.decode=function(t){if('utf-8'!=t)throw'UTF8_converter: can only do utf-8';return this};var k=function(t,n){return o.join(n,t)},C=0,T=function(){},E='http://www.w3.org/2002/07/owl#sameAs',S='\t\r\n !"#$%&\'()*.,+/;<=>?@[\\]^`{|}~',A=S+':',I=/^[ \t]*(#[^\n]*)?\r?\n/g,N=/^[ \t]*(#[^\n]*)?$/g,j=/^[ \t]*/g,R=/^[-+]?[0-9]+/g,L=/^([-+]?[0-9]+)(\.[0-9]+)?(e[-+]?[0-9]+)?/g,O=/^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\.[0-9]*)?)?)?Z?/,P=/^[0-9]+/g,M=/[\\\r\n\"]/g,D=/^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*/g;return t.prototype.here=function(t){return this._genPrefix+'_L'+this.lines+'C'+(t-this.startOfLine+1)},t.prototype.formula=function(){return this._formula},t.prototype.loadStream=function(t){return this.loadBuf(t.read())},t.prototype.loadBuf=function(t){return this.startDoc(),this.feed(t),this.endDoc()},t.prototype.feed=function(t){for(var n=t.decode('utf-8'),r=0,o;0<=r;){if(o=this.skipSpace(n,r),0>o)return;var r=this.directiveOrStatement(n,o);if(0>r)throw a(this._thisDoc,this.lines,n,o,'expected directive or statement')}},t.prototype.directiveOrStatement=function(t,n){var a=this.skipSpace(t,n);if(0>a)return a;var r=this.directive(t,a);if(0<=r)return this.checkDot(t,r);var r=this.statement(t,a);return 0<=r?this.checkDot(t,r):r},t.prototype.tok=function(t,n,a){if('@'==g(n,a,a+1))var a=a+1;else if(0>s(this.keywords,t))return-1;var r=a+h(t);return g(n,a,r)==t&&0<=S.indexOf(n.charAt(r))?r:-1},t.prototype.directive=function(r,o){var d=this.skipSpace(r,o);if(0>d)return d;var l=new f([]),d=this.tok('bind',r,o);if(0<d)throw a(this._thisDoc,this.lines,r,o,'keyword bind is obsolete: use @prefix');var d=this.tok('keywords',r,o);if(0<d){var o=this.commaSeparatedList(r,d,l,!1);if(0>o)throw a(this._thisDoc,this.lines,r,o,'\'@keywords\' needs comma separated list of words');return this.setKeywords(g(l,null,null)),80<0,o}var d=this.tok('forAll',r,o);if(0<d){var o=this.commaSeparatedList(r,d,l,!0);if(0>o)throw a(this._thisDoc,this.lines,r,o,'Bad variable list after @forAll');var c=new y(l);try{for(;;){var u=c.next();(0>s(this._variables,u)||0<=s(this._parentVariables,u))&&(this._variables[u]=this._context.newUniversal(u))}}catch(t){if(t!=b)throw t}return o}var d=this.tok('forSome',r,o);if(0<d){var o=this.commaSeparatedList(r,d,l,this.uri_ref2);if(0>o)throw a(this._thisDoc,this.lines,r,o,'Bad variable list after @forSome');var c=new y(l);try{for(;;){var u=c.next();this._context.declareExistential(u)}}catch(t){if(t!=b)throw t}return o}var d=this.tok('prefix',r,o);if(0<=d){var m=new f([]),o=this.qname(r,d,m);if(0>o)throw a(this._thisDoc,this.lines,r,d,'expected qname after @prefix');var d=this.uri_ref2(r,o,m);if(0>d)throw a(this._thisDoc,this.lines,r,o,'expected <uriref> after @prefix _qname_');var t=m[1].uri;if(this._baseURI)var t=k(this._baseURI,t);else w(0<=t.indexOf(':'),'With no base URI, cannot handle relative URI for NS');return w(0<=t.indexOf(':')),this._bindings[m[0][0]]=t,this.bind(m[0][0],n(t)),d}var d=this.tok('base',r,o);if(0<=d){var m=new f([]),o=this.uri_ref2(r,d,m);if(0>o)throw a(this._thisDoc,this.lines,r,d,'expected <uri> after @base ');var t=m[0].uri;if(this._baseURI)var t=k(this._baseURI,t);else throw a(this._thisDoc,this.lines,r,d,'With no previous base URI, cannot use relative URI in @base  <'+t+'>');return w(0<=t.indexOf(':')),this._baseURI=t,o}return-1},t.prototype.bind=function(t,n){''==t||this._store.setPrefixForURI(t,n)},t.prototype.setKeywords=function(t){null==t?this.keywordsSet=0:(this.keywords=t,this.keywordsSet=1)},t.prototype.startDoc=function(){},t.prototype.endDoc=function(){return this._formula},t.prototype.makeStatement=function(t){t[0].add(t[2],t[1],t[3],this.source),this.statementCount+=1},t.prototype.statement=function(t,n){var o=new f([]),n=this.object(t,n,o);if(0>n)return n;var r=this.property_list(t,n,o[0]);if(0>r)throw a(this._thisDoc,this.lines,t,n,'expected propertylist');return r},t.prototype.subject=function(t,n,a){return this.item(t,n,a)},t.prototype.verb=function(t,n,o){var s=this.skipSpace(t,n);if(0>s)return s;var d=new f([]),s=this.tok('has',t,n);if(0<=s){var n=this.prop(t,s,d);if(0>n)throw a(this._thisDoc,this.lines,t,s,'expected property after \'has\'');return o.push(new u(['->',d[0]])),n}var s=this.tok('is',t,n);if(0<=s){var n=this.prop(t,s,d);if(0>n)throw a(this._thisDoc,this.lines,t,s,'expected <property> after \'is\'');var s=this.skipSpace(t,n);if(0>s){throw a(this._thisDoc,this.lines,t,n,'End of file found, expected property after \'is\'')}var n=s,s=this.tok('of',t,n);if(0>s)throw a(this._thisDoc,this.lines,t,n,'expected \'of\' after \'is\' <prop>');return o.push(new u(['<-',d[0]])),s}var s=this.tok('a',t,n);if(0<=s)return o.push(new u(['->',this._store.sym('http://www.w3.org/1999/02/22-rdf-syntax-ns#type')])),s;if('<='==g(t,n,n+2))return o.push(new u(['<-',this._store.sym(c+'implies')])),n+2;if('='==g(t,n,n+1))return'>'==g(t,n+1,n+2)?(o.push(new u(['->',this._store.sym(c+'implies')])),n+2):(o.push(new u(['->',this._store.sym(E)])),n+1);if(':='==g(t,n,n+2))return o.push(new u(['->',c+'becomes'])),n+2;var s=this.prop(t,n,d);if(0<=s)return o.push(new u(['->',d[0]])),s;if('>-'==g(t,n,n+2)||'<-'==g(t,n,n+2))throw a(this._thisDoc,this.lines,t,s,'>- ... -> syntax is obsolete.');return-1},t.prototype.prop=function(t,n,a){return this.item(t,n,a)},t.prototype.item=function(t,n,a){return this.path(t,n,a)},t.prototype.blankNode=function(t){return this._context.bnode(t,this._reason2)},t.prototype.path=function(t,n,r){var o=this.nodeOrLiteral(t,n,r);if(0>o)return o;for(;0<='!^.'.indexOf(g(t,o,o+1));){var s=g(t,o,o+1);if('.'==s){var d=g(t,o+1,o+2);if(!d||0<=A.indexOf(d)&&0>':?<[{('.indexOf(d))break}var l=r.pop(),c=this.blankNode(this.here(o)),o=this.node(t,o+1,r);if(0>o)throw a(this._thisDoc,this.lines,t,o,'EOF found in middle of path syntax');var f=r.pop();'^'==s?this.makeStatement(new u([this._context,f,c,l])):this.makeStatement(new u([this._context,f,l,c])),r.push(c)}return o},t.prototype.anonymousNode=function(t){var n=this._anonymousNodes[t];if(n)return n;var n=this._store.bnode(t);return this._anonymousNodes[t]=n,n},t.prototype.node=function(t,n,r,o){'undefined'==typeof o&&(o=null);var s=o,d=this.skipSpace(t,n);if(0>d)return d;var n=d,l=g(t,n,n+1);if('['==l){var c=this.here(n),d=this.skipSpace(t,n+1);if(0>d)throw a(this._thisDoc,this.lines,t,n,'EOF after \'[\'');if('='==g(t,d,d+1)){var n=d+1,v=new f([]),d=this.objectList(t,n,v);if(0<=d){var s=v[0];if(1<h(v)){var w=new y(v);try{for(;;){var x=w.next();this.makeStatement(new u([this._context,this._store.sym(E),s,x]))}}catch(t){if(t!=b)throw t}}var d=this.skipSpace(t,d);if(0>d)throw a(this._thisDoc,this.lines,t,n,'EOF when objectList expected after [ = ');if(';'==g(t,d,d+1))var d=d+1}else throw a(this._thisDoc,this.lines,t,n,'objectList expected after [= ')}if(null==s)var s=this.blankNode(c);var n=this.property_list(t,d,s);if(0>n)throw a(this._thisDoc,this.lines,t,d,'property_list expected');var d=this.skipSpace(t,n);if(0>d)throw a(this._thisDoc,this.lines,t,n,'EOF when \']\' expected after [ <propertyList>');if(']'!=g(t,d,d+1))throw a(this._thisDoc,this.lines,t,d,'\']\' expected');return r.push(s),d+1}if('{'==l){var _=g(t,n+1,n+2);if('$'==_){n+=1;for(var d=n+1,k=new f([]),C=!0,n;;){if(n=this.skipSpace(t,d),0>n)throw a(this._thisDoc,this.lines,t,n,'needed \'$}\', found end.');if('$}'==g(t,n,n+2)){var d=n+2;break}if(!!!1);else if(','==g(t,n,n+1))n+=1;else throw a(this._thisDoc,this.lines,t,n,'expected: \',\'');var T=new f([]),d=this.item(t,n,T);if(0>d)throw a(this._thisDoc,this.lines,t,n,'expected item in set or \'$}\'');k.push(T[0])}return r.push(this._store.newSet(k,this._context)),d}var d=n+1,S=this._parentContext;this._parentContext=this._context;var A=this._anonymousNodes,I=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new m([]),this._variables=this._variables.slice();var N=this._reason2;if(this._reason2=null,null==s)var s=this._store.formula();for(this._context=s;;){var n=this.skipSpace(t,d);if(0>n)throw a(this._thisDoc,this.lines,t,n,'needed \'}\', found end.');if('}'==g(t,n,n+1)){var d=n+1;break}var d=this.directiveOrStatement(t,n);if(0>d)throw a(this._thisDoc,this.lines,t,n,'expected statement or \'}\'')}return this._anonymousNodes=A,this._variables=this._parentVariables,this._parentVariables=I,this._context=this._parentContext,this._reason2=N,this._parentContext=S,r.push(s.close()),d}if('('==l){var j=this._store.list,_=g(t,n+1,n+2);if('$'==_){var j=this._store.newSet;n+=1}for(var d=n+1,k=new f([]),n;;){if(n=this.skipSpace(t,d),0>n)throw a(this._thisDoc,this.lines,t,n,'needed \')\', found end.');if(')'==g(t,n,n+1)){var d=n+1;break}var T=new f([]),d=this.item(t,n,T);if(0>d)throw a(this._thisDoc,this.lines,t,n,'expected item in list or \')\'');k.push(T[0])}return r.push(j(k,this._context)),d}var d=this.tok('this',t,n);if(0<=d){throw a(this._thisDoc,this.lines,t,n,'Keyword \'this\' was ancient N3. Now use @forSome and @forAll keywords.')}var d=this.tok('true',t,n);if(0<=d)return r.push(!0),d;var d=this.tok('false',t,n);if(0<=d)return r.push(!1),d;if(null==s){var d=this.uri_ref2(t,n,r);if(0<=d)return d}return-1},t.prototype.property_list=function(t,n,r){for(;;){var o=this.skipSpace(t,n);if(0>o){throw a(this._thisDoc,this.lines,t,n,'EOF found when expected verb in property list')}if(':-'==g(t,o,o+2)){var n=o+2,s=new f([]),o=this.node(t,n,s,r);if(0>o)throw a(this._thisDoc,this.lines,t,n,'bad {} or () or [] node after :- ');var n=o;continue}var n=o,d=new f([]),o=this.verb(t,n,d);if(0>=o)return n;var l=new f([]),n=this.objectList(t,o,l);if(0>n)throw a(this._thisDoc,this.lines,t,o,'objectList expected');var c=new y(l);try{for(;;){var m=c.next(),h=d[0],v=h[0],w=h[1];'->'==v?this.makeStatement(new u([this._context,w,r,m])):this.makeStatement(new u([this._context,w,m,r]))}}catch(t){if(t!=b)throw t}var o=this.skipSpace(t,n);if(0>o){throw a(this._thisDoc,this.lines,t,o,'EOF found in list of objects')}if(';'!=g(t,n,n+1))return n;var n=n+1}},t.prototype.commaSeparatedList=function(t,n,r,o){var s=this.skipSpace(t,n);if(0>s){throw a(this._thisDoc,this.lines,t,s,'EOF found expecting comma sep list')}if('.'==t.charAt(s))return n;if(o)var s=this.uri_ref2(t,s,r);else var s=this.bareWord(t,s,r);if(0>s)return-1;for(;;){var n=this.skipSpace(t,s);if(0>n)return n;var d=g(t,n,n+1);if(','!=d)return'.'==d?n:-1;if(o)var s=this.uri_ref2(t,n+1,r);else var s=this.bareWord(t,n+1,r);if(0>s){throw a(this._thisDoc,this.lines,t,s,'bad list content')}}},t.prototype.objectList=function(t,n,r){var n=this.object(t,n,r);if(0>n)return-1;for(;;){var o=this.skipSpace(t,n);if(0>o){throw a(this._thisDoc,this.lines,t,o,'EOF found after object')}if(','!=g(t,o,o+1))return o;var n=this.object(t,o+1,r);if(0>n)return n}},t.prototype.checkDot=function(t,n){var r=this.skipSpace(t,n);if(0>r)return r;if('.'==g(t,r,r+1))return r+1;if('}'==g(t,r,r+1))return r;if(']'==g(t,r,r+1))return r;throw a(this._thisDoc,this.lines,t,r,'expected \'.\' or \'}\' or \']\' at end of statement')},t.prototype.uri_ref2=function(t,n,r){var o=new f([]),d=this.qname(t,n,o);if(0<=d){var l=o[0],c=l[0],u=l[1];if(null==c){w(0,'not used?');var m=this._baseURI+'#'}else{var m=this._bindings[c];if(!m){if('_'==c)return r.push(this.anonymousNode(u)),d;throw a(this._thisDoc,this.lines,t,n,'Prefix '+c+' not bound.')}}var b=this._store.sym(m+u);return 0<=s(this._variables,b)?r.push(this._variables[b]):r.push(b),d}var n=this.skipSpace(t,n);if(0>n)return-1;if('?'==t.charAt(n)){var y=new f([]),d=this.variable(t,n,y);return 0<d?(r.push(y[0]),d):-1}if('<'==t.charAt(n)){for(var n=n+1;n<h(t);){if('>'==t.charAt(n)){var v=g(t,n,n);if(this._baseURI)var v=k(this._baseURI,v);else w(0<=v.indexOf(':'),'With no base URI, cannot deal with relative URIs');if('#'==g(t,n-1,n)&&'#'!=g(v,-1,null))var v=v+'#';var b=this._store.sym(v);return 0<=s(this._variables,b)?r.push(this._variables[b]):r.push(b),n+1}var n=n+1}throw a(this._thisDoc,this.lines,t,d,'unterminated URI reference')}else{if(this.keywordsSet){var y=new f([]),d=this.bareWord(t,n,y);if(0>d)return-1;if(0<=s(this.keywords,y[0]))throw a(this._thisDoc,this.lines,t,n,'Keyword "'+y[0]+'" not allowed here.');return r.push(this._store.sym(this._bindings['']+y[0])),d}return-1}},t.prototype.skipSpace=function(t,n){for(var a=n?n:0,r;a<t.length;a++)if(r=t.charAt(a),!(0>' \n\r\t\f\x0B\xA0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200B\u2028\u2029\u3000'.indexOf(r)))'\n'===t.charAt(a)&&++this.lines;else if('#'===t.charAt(a))for(;;a++){if(a===t.length)return-1;if('\n'===t.charAt(a)){++this.lines;break}}else return a;return-1},t.prototype.variable=function(t,n,r){var o=this.skipSpace(t,n);if(0>o)return-1;if('?'!=g(t,o,o+1))return-1;var o=o+1,n=o;if(0<='0123456789-'.indexOf(t.charAt(o))){throw a(this._thisDoc,this.lines,t,o,'Varible name can\'t start with \''+t.charAt(o)+'s\'')}for(;n<h(t)&&0>A.indexOf(t.charAt(n));)var n=n+1;if(null==this._parentContext)throw a(this._thisDoc,this.lines,t,o,'Can\'t use ?xxx syntax for variable in outermost level: '+g(t,o-1,n));return r.push(this._store.variable(g(t,o,n))),n},t.prototype.bareWord=function(t,n,a){var r=this.skipSpace(t,n);if(0>r)return-1;var o=t.charAt(r);if(0<='0123456789-'.indexOf(o))return-1;if(0<=A.indexOf(o))return-1;for(var n=r,n;n<h(t)&&0>A.indexOf(t.charAt(n));)++n;return a.push(g(t,r,n)),n},t.prototype.qname=function(t,n,a){var n=this.skipSpace(t,n);if(0>n)return-1;var r=t.charAt(n);if(0<='0123456789-+'.indexOf(r))return-1;if(0>A.indexOf(r))for(var o=r,n=n+1,r;n<h(t)&&(r=t.charAt(n),0>A.indexOf(r));)var o=o+r,n=n+1;else var o='';if(n<h(t)&&':'==t.charAt(n)){for(var d=o,n=n+1,o='',r;n<h(t)&&(r=t.charAt(n),0>A.indexOf(r));)var o=o+r,n=n+1;return a.push(new u([d,o])),n}return o&&this.keywordsSet&&0>s(this.keywords,o)?(a.push(new u(['',o])),n):-1},t.prototype.object=function(t,n,a){var r=this.subject(t,n,a);if(0<=r)return r;var r=this.skipSpace(t,n);if(0>r)return-1;var n=r;if('"'==t.charAt(n)){if('"""'==g(t,n,n+3))var o='"""';else var o='"';var n=n+h(o),d=this.strconst(t,n,o),r=d[0],l=d[1];return a.push(this._store.literal(l)),T('New string const ',l,r),r}return-1},t.prototype.nodeOrLiteral=function(t,n,r){var o=this.node(t,n,r);if(0<=o)return o;var o=this.skipSpace(t,n);if(0>o)return-1;var n=o,d=t.charAt(n);if(0<='-+0987654321'.indexOf(d)){O.lastIndex=0;var l=O.exec(t.slice(n));if(null!=l){var c=l[0];o=n+c.length,0<=c.indexOf('T')?r.push(this._store.literal(c,void 0,this._store.sym('http://www.w3.org/2001/XMLSchema#dateTime'))):r.push(this._store.literal(c,void 0,this._store.sym('http://www.w3.org/2001/XMLSchema#date')))}else{L.lastIndex=0;var l=L.exec(t.slice(n));if(null==l)throw a(this._thisDoc,this.lines,t,n,'Bad number or date syntax');o=n+L.lastIndex;var c=g(t,n,o);0<=c.indexOf('e')?r.push(this._store.literal(parseFloat(c),void 0,this._store.sym('http://www.w3.org/2001/XMLSchema#double'))):0<=g(t,n,o).indexOf('.')?r.push(this._store.literal(parseFloat(c),void 0,this._store.sym('http://www.w3.org/2001/XMLSchema#decimal'))):r.push(this._store.literal(parseInt(c),void 0,this._store.sym('http://www.w3.org/2001/XMLSchema#integer')))}return o}if('"'==t.charAt(n)){if('"""'==g(t,n,n+3))var u='"""';else var u='"';var n=n+h(u),m=null,b=this.strconst(t,n,u),o=b[0],y=b[1],s=null;if('@'==g(t,o,o+1)){D.lastIndex=0;var l=D.exec(t.slice(o+1));if(null==l)throw a(this._thisDoc,startline,t,n,'Bad language code syntax on string literal, after @');var n=D.lastIndex+o+1,s=g(t,o+1,n),o=n}if('^^'==g(t,o,o+2))var v=new f([]),o=this.uri_ref2(t,o+2,v),m=v[0];return r.push(this._store.literal(y,s,m)),o}return-1},t.prototype.strconst=function(t,n,r){for(var o=n,s='',d=this.lines,n;o<h(t);){if(n=o+h(r),g(t,o,n)==r)return new u([n,s]);if('"'==t.charAt(o)){var s=s+'"',o=o+1;continue}M.lastIndex=0;var l=M.exec(t.slice(o));if(!l)throw a(this._thisDoc,d,t,o,'Closing quote missing in string at ^ in '+g(t,o-20,o)+'^'+g(t,o,o+20));var n=o+M.lastIndex-1,s=s+g(t,o,n),c=t.charAt(n);if('"'==c){var o=n;continue}else if('\r'==c){var o=n+1;continue}else if('\n'==c){if('"'==r)throw a(this._thisDoc,d,t,n,'newline found in string literal');++this.lines;var s=s+c,o=n+1;this.previousLine=this.startOfLine,this.startOfLine=o}else if('\\'==c){var o=n+1,c=g(t,o,o+1);if(!c)throw a(this._thisDoc,d,t,n,'unterminated string literal (2)');var f=v('abfrtvn\\"',c);if(0<=f)var b='a\b\f\r\t\x0B\n\\"'.charAt(f),s=s+b,o=o+1;else if('u'==c)var y=this.uEscape(t,o+1,d),o=y[0],c=y[1],s=s+c;else if('U'==c)var y=this.UEscape(t,o+1,d),o=y[0],c=y[1],s=s+c;else throw a(this._thisDoc,this.lines,t,n,'bad escape')}}throw a(this._thisDoc,this.lines,t,n,'unterminated string literal')},t.prototype.uEscape=function(t,n,r){for(var o=n,s=0,d=0;4>s;){var l=g(t,o,o+1),c=l.toLowerCase(),o=o+1;if(''==c)throw a(this._thisDoc,r,t,n,'unterminated string literal(3)');var f=v('0123456789abcdef',c);if(0>f)throw a(this._thisDoc,r,t,n,'bad string literal hex escape');var d=16*d+f,s=s+1}var m=x(d);return new u([o,m])},t.prototype.UEscape=function(t,n,r){for(var o=n,s=0,d='\\U';8>s;){var l=g(t,o,o+1),c=l.toLowerCase(),o=o+1;if(''==c)throw a(this._thisDoc,r,t,n,'unterminated string literal(3)');var f=v('0123456789abcdef',c);if(0>f)throw a(this._thisDoc,r,t,n,'bad string literal hex escape');var d=d+c,s=s+1}var m=_('0x'+g(d,2,10)-0);return new u([o,m])},function(t,n,a,r,o){this._str=a.encode('utf-8'),this._str=a,this._i=r,this._why=o,this.lines=n,this._uri=t}.prototype.toString=function(){var t=this._str,n=this._i,a=0;if(60<n)var r='...',a=n-60;else var r='';if(60<h(t)-n)var o='...';else var o='';return'Line %i of <%s>: Bad syntax (%s) at ^ in:\n"%s%s^%s%s"'%new u([this.lines+1,this._uri,this._why,r,g(t,a,n),g(t,n,n+60),o])},function(n,a,r,o,s,d,l,c){return new t(n,a,r,o,s,d,l,c)}}();t.exports=d},function(t,n,a){var r=a(4).Buffer,o=a(266);t.exports=function(t,n,a,s){if(r.isBuffer(t)||(t=r.from(t,'binary')),n&&(r.isBuffer(n)||(n=r.from(n,'binary')),8!==n.length))throw new RangeError('salt should be Buffer with 8 byte length');for(var d=a/8,l=r.alloc(d),c=r.alloc(s||0),u=r.alloc(0),f;0<d||0<s;){f=new o,f.update(u),f.update(t),n&&f.update(n),u=f.digest();var m=0;if(0<d){var h=l.length-d;m=_(d,u.length),u.copy(l,h,0,m),d-=m}if(m<u.length&&0<s){var g=c.length-s,b=_(s,u.length-m);u.copy(c,g,m,m+b),s-=b}}return u.fill(0),{key:l,iv:c}}},function(t,n,a){function r(t){l.isBuffer(t)||(t=l.from(t));for(var n=0|t.length/4,a=Array(n),r=0;r<n;r++)a[r]=t.readUInt32BE(4*r);return a}function o(t){for(var n=0;n<t.length;t++)t[n]=0}function s(t,n,a,r,o){for(var s=a[0],d=a[1],l=a[2],c=a[3],u=t[0]^n[0],f=t[1]^n[1],m=t[2]^n[2],h=t[3]^n[3],g=4,b=1,y,v,w,x;b<o;b++)y=s[u>>>24]^d[255&f>>>16]^l[255&m>>>8]^c[255&h]^n[g++],v=s[f>>>24]^d[255&m>>>16]^l[255&h>>>8]^c[255&u]^n[g++],w=s[m>>>24]^d[255&h>>>16]^l[255&u>>>8]^c[255&f]^n[g++],x=s[h>>>24]^d[255&u>>>16]^l[255&f>>>8]^c[255&m]^n[g++],u=y,f=v,m=w,h=x;return y=(r[u>>>24]<<24|r[255&f>>>16]<<16|r[255&m>>>8]<<8|r[255&h])^n[g++],v=(r[f>>>24]<<24|r[255&m>>>16]<<16|r[255&h>>>8]<<8|r[255&u])^n[g++],w=(r[m>>>24]<<24|r[255&h>>>16]<<16|r[255&u>>>8]<<8|r[255&f])^n[g++],x=(r[h>>>24]<<24|r[255&u>>>16]<<16|r[255&f>>>8]<<8|r[255&m])^n[g++],y>>>=0,v>>>=0,w>>>=0,x>>>=0,[y,v,w,x]}function d(t){this._key=r(t),this._reset()}var l=a(4).Buffer,c=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var n=Array(256),a=0;256>a;a++)n[a]=128>a?a<<1:283^a<<1;for(var r=[],o=[],s=[[],[],[],[]],d=[[],[],[],[]],l=0,c=0,u=0,f;256>u;++u){f=c^c<<1^c<<2^c<<3^c<<4,f=99^(f>>>8^255&f),r[l]=f,o[f]=l;var m=n[l],h=n[m],g=n[h],b=257*n[f]^16843008*f;s[0][l]=b<<24|b>>>8,s[1][l]=b<<16|b>>>16,s[2][l]=b<<8|b>>>24,s[3][l]=b,b=16843009*g^65537*h^257*m^16843008*l,d[0][f]=b<<24|b>>>8,d[1][f]=b<<16|b>>>16,d[2][f]=b<<8|b>>>24,d[3][f]=b,0==l?l=c=1:(l=m^n[n[n[g^m]]],c^=n[n[c]])}return{SBOX:r,INV_SBOX:o,SUB_MIX:s,INV_SUB_MIX:d}}();d.blockSize=16,d.keySize=32,d.prototype.blockSize=d.blockSize,d.prototype.keySize=d.keySize,d.prototype._reset=function(){for(var n=this._key,a=n.length,r=a+6,o=4*(r+1),s=[],d=0;d<a;d++)s[d]=n[d];for(d=a;d<o;d++){var l=s[d-1];0==d%a?(l=l<<8|l>>>24,l=u.SBOX[l>>>24]<<24|u.SBOX[255&l>>>16]<<16|u.SBOX[255&l>>>8]<<8|u.SBOX[255&l],l^=c[0|d/a]<<24):6<a&&4==d%a&&(l=u.SBOX[l>>>24]<<24|u.SBOX[255&l>>>16]<<16|u.SBOX[255&l>>>8]<<8|u.SBOX[255&l]),s[d]=s[d-a]^l}for(var t=[],f=0;f<o;f++){var m=o-f,h=s[m-(f%4?0:4)];t[f]=4>f||4>=m?h:u.INV_SUB_MIX[0][u.SBOX[h>>>24]]^u.INV_SUB_MIX[1][u.SBOX[255&h>>>16]]^u.INV_SUB_MIX[2][u.SBOX[255&h>>>8]]^u.INV_SUB_MIX[3][u.SBOX[255&h]]}this._nRounds=r,this._keySchedule=s,this._invKeySchedule=t},d.prototype.encryptBlockRaw=function(t){return t=r(t),s(t,this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},d.prototype.encryptBlock=function(t){var n=this.encryptBlockRaw(t),a=l.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[1],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[3],12),a},d.prototype.decryptBlock=function(t){t=r(t);var n=t[1];t[1]=t[3],t[3]=n;var a=s(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=l.allocUnsafe(16);return o.writeUInt32BE(a[0],0),o.writeUInt32BE(a[3],4),o.writeUInt32BE(a[2],8),o.writeUInt32BE(a[1],12),o},d.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=d},function(t,n,a){'use strict';var r=n;r.base=a(298),r.short=a(299),r.mont=a(300),r.edwards=a(301)},function(t,n,a){(function(n){function r(t){var a;'object'!=typeof t||n.isBuffer(t)||(a=t.passphrase,t=t.key),'string'==typeof t&&(t=new n(t));var r=l(t,a),d=r.tag,c=r.data,u,f;switch(d){case'CERTIFICATE':f=s.certificate.decode(c,'der').tbsCertificate.subjectPublicKeyInfo;case'PUBLIC KEY':switch(f||(f=s.PublicKey.decode(c,'der')),u=f.algorithm.algorithm.join('.'),u){case'1.2.840.113549.1.1.1':return s.RSAPublicKey.decode(f.subjectPublicKey.data,'der');case'1.2.840.10045.2.1':return f.subjectPrivateKey=f.subjectPublicKey,{type:'ec',data:f};case'1.2.840.10040.4.1':return f.algorithm.params.pub_key=s.DSAparam.decode(f.subjectPublicKey.data,'der'),{type:'dsa',data:f.algorithm.params};default:throw new Error('unknown key id '+u);}throw new Error('unknown key type '+d);case'ENCRYPTED PRIVATE KEY':c=s.EncryptedPrivateKey.decode(c,'der'),c=o(c,a);case'PRIVATE KEY':switch(f=s.PrivateKey.decode(c,'der'),u=f.algorithm.algorithm.join('.'),u){case'1.2.840.113549.1.1.1':return s.RSAPrivateKey.decode(f.subjectPrivateKey,'der');case'1.2.840.10045.2.1':return{curve:f.algorithm.curve,privateKey:s.ECPrivateKey.decode(f.subjectPrivateKey,'der').privateKey};case'1.2.840.10040.4.1':return f.algorithm.params.priv_key=s.DSAparam.decode(f.subjectPrivateKey,'der'),{type:'dsa',params:f.algorithm.params};default:throw new Error('unknown key id '+u);}throw new Error('unknown key type '+d);case'RSA PUBLIC KEY':return s.RSAPublicKey.decode(c,'der');case'RSA PRIVATE KEY':return s.RSAPrivateKey.decode(c,'der');case'DSA PRIVATE KEY':return{type:'dsa',params:s.DSAPrivateKey.decode(c,'der')};case'EC PRIVATE KEY':return c=s.ECPrivateKey.decode(c,'der'),{curve:c.parameters.value,privateKey:c.privateKey};default:throw new Error('unknown key type '+d);}}function o(t,a){var r=t.algorithm.decrypt.kde.kdeparams.salt,o=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),s=d[t.algorithm.decrypt.cipher.algo.join('.')],l=t.algorithm.decrypt.cipher.iv,f=t.subjectPrivateKey,m=parseInt(s.split('-')[1],10)/8,h=u.pbkdf2Sync(a,r,o,m),g=c.createDecipheriv(s,h,l),b=[];return b.push(g.update(f)),b.push(g.final()),n.concat(b)}var s=a(318),d=a(332),l=a(333),c=a(104),u=a(153);t.exports=r,r.signature=s.signature}).call(n,a(0).Buffer)},function(t){'use strict';t.exports.errorMessageBlock=function(t,n,a){var r=t.createElement('div');return r.setAttribute('style','margin: 0.1em; padding: 0.5em; border: 0.05em solid gray; background-color: '+(a||'#fee')+'; color:black;'),r.textContent=n,r}},function(t,n,a){'use strict';n.__esModule=!0;var r=a(360),o=function(t){return t&&t.__esModule?t:{default:t}}(r);n.default=o.default||function(t){for(var n=1,a;n<arguments.length;n++)for(var r in a=arguments[n],a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);return t}},function(t){t.exports=function(t){if('function'!=typeof t)throw TypeError(t+' is not a function!');return t}},function(t,n,a){var r=a(185),o=a(117);t.exports=Object.keys||function(t){return r(t,o)}},function(t){var n=0,a=Math.random();t.exports=function(t){return'Symbol('.concat(t===void 0?'':t,')_',(++n+a).toString(36))}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,a){t.exports={default:a(368),__esModule:!0}},function(t){t.exports=!0},function(t,n,a){var r=a(26).f,o=a(35),s=a(11)('toStringTag');t.exports=function(t,n,a){t&&!o(t=a?t:t.prototype,s)&&r(t,s,{configurable:!0,value:n})}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return{getItem:function(n){return d.default.resolve(t.getItem(n))},setItem:function(n,a){return d.default.resolve(t.setItem(n,a))},removeItem:function(n){return d.default.resolve(t.removeItem(n))}}}Object.defineProperty(n,'__esModule',{value:!0}),n.postMessageStorage=n.memStorage=n.updateStorage=n.getData=n.defaultStorage=n.NAMESPACE=void 0;var s=a(82),d=r(s),l=a(390),c=r(l),u=a(36),f=r(u),m=a(37),h=r(m),g=n.getData=function(){var t=(0,h.default)(f.default.mark(function t(n){var a,r;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=void 0,r=void 0,t.prev=2,t.next=5,n.getItem(v);case 5:a=t.sent,r=JSON.parse(a||'{}'),t.next=14;break;case 9:t.prev=9,t.t0=t['catch'](2),console.warn('Could not deserialize data:',a),console.error(t.t0),r={};case 14:return t.abrupt('return',r);case 15:case'end':return t.stop();}},t,this,[[2,9]])}));return function(){return t.apply(this,arguments)}}(),b=n.updateStorage=function(){var t=(0,h.default)(f.default.mark(function t(n,a){var r,o;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(n);case 2:return r=t.sent,o=a(r),n.setItem(v,(0,c.default)(o)),t.abrupt('return',o);case 6:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}();n.asyncStorage=o;var y=a(203),v=n.NAMESPACE='solid-auth-client',w=n.defaultStorage=function(){try{if(window&&window.localStorage)return o(window.localStorage)}catch(t){if(!(t instanceof ReferenceError))throw t}return console.warn('\'window.localStorage\' unavailable.  Creating a (not very useful) in-memory storage object as the default storage interface.'),o(x())},x=n.memStorage=function(){var t={};return{getItem:function(n){return'undefined'==typeof t[n]?null:t[n]},setItem:function(n,a){t[n]=a},removeItem:function(n){delete t[n]}}},_=n.postMessageStorage=function(t,n){var a=(0,y.client)(t,n);return{getItem:function(){var t=(0,h.default)(f.default.mark(function t(n){var r;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({method:'storage/getItem',args:[n]});case 2:if(r=t.sent,'string'==typeof r){t.next=5;break}throw new Error('expected postMessage call for \'storage/getItem\' to return a string, but got value '+r);case 5:return t.abrupt('return',r);case 6:case'end':return t.stop();}},t,void 0)}));return function(){return t.apply(this,arguments)}}(),setItem:function(t,n){return a({method:'storage/setItem',args:[t,n]})},removeItem:function(t){return a({method:'storage/removeItem',args:[t]})}}}},function(t){t.exports=a},function(t,n,a){'use strict';var r=a(17),o=r.JSONSchema,s=a(422),d=s.BASE64_REGEXP,l=new o({type:'object',properties:{kty:{type:'string',enum:['RSA','EC','oct']},use:{type:'string',enum:['sig','enc']},key_ops:{type:'array',items:{enum:['sign','verify','encrypt','decrypt','wrapKey','unwrapKey','deriveKey','deriveBits']}},alg:{type:'string',enum:['HS256','HS384','HS512','RS256','RS384','RS512','ES256','ES384','ES512','PS256','PS384','PS512','none']},kid:{type:'string'},x5u:{type:'string'},x5c:{type:'array'},x5t:{type:'string'}}});t.exports=l},function(t,n,a){'use strict';t.exports=function(t,n,a,s,d,l){function c(t,n){return d?void d(t,n):n}a=a||t.uri,l=l||{},s=s||'text/turtle';var u=null;try{var f=o(n);l.flags&&f.setFlags(l.flags);var m=n.statementsMatching(void 0,void 0,void 0,t),h;switch(f.suggestNamespaces(n.namespaces),f.setBase(a),s){case'application/rdf+xml':return u=f.statementsToXML(m),c(null,u);case'text/n3':case'application/n3':return u=f.statementsToN3(m),c(null,u);case'text/turtle':case'application/x-turtle':return f.setFlags('si'),u=f.statementsToN3(m),c(null,u);case'application/n-triples':return f.setFlags('deinprstux'),u=f.statementsToNTriples(m),c(null,u);case'application/ld+json':f.setFlags('deinprstux'),h=f.statementsToNTriples(m),r.convertToJson(h,d);break;case'application/n-quads':case'application/nquads':return f.setFlags('deinprstux q'),u=f.statementsToNTriples(m),c(null,u);break;default:throw new Error('Serialize: Content-type '+s+' not supported for data write.');}}catch(t){if(d)return d(t);throw t}};var r=a(133),o=a(97)},function(t,n,a){(function(n){function a(t){if(!(this instanceof a))return new a(t);if(t&&t.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var n=this;this._tokenize=this.tokenize,this.tokenize=function(t,a){this._tokenize(t,function(t,r){!t&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(r.type)?a&&a(t,r):a&&a(t||n._syntaxError(r.type,a=null))})}}}var r=x,o='function'==typeof n?n:function(t){setTimeout(t,0)},s=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,d={"\\":'\\',"'":'\'','"':'"',n:'\n',r:'\r',t:'\t',f:'\f',b:'\b',_:'_',"~":'~',".":'.',"-":'-',"!":'!',$:'$',"&":'&',"(":'(',")":')',"*":'*',"+":'+',",":',',";":';',"=":'=',"/":'/',"?":'?',"#":'#',"@":'@',"%":'%'},l=/[\x00-\x20<>\\"\{\}\|\^\`]/;a.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(t,n){function a(n){t(n._syntaxError(/^\S*/.exec(r)[0]))}for(var r=this._input;;){for(var o;o=this._newline.exec(r);)r=r.substr(o[0].length,r.length),this._line++;if((o=this._whitespace.exec(r))&&(r=r.substr(o[0].length,r.length)),this._endOfFile.test(r))return n&&t(r=null,{line:this._line,type:'eof',value:'',prefix:''}),this._input=r;var s=this._line,d='',c='',u='',f=r[0],m=null,h=0,g=!1,b;switch(f){case'^':if(1===r.length)break;else if('^'!==r[1])return a(this);if(this._prevTokenType='^',r=r.substr(2),'<'!==r[0]){g=!0;break}case'<':if(m=this._unescapedIri.exec(r))d='IRI',c=m[1];else if(m=this._iri.exec(r)){if(b=this._unescape(m[1]),null===b||l.test(b))return a(this);d='IRI',c=b}break;case'_':((m=this._blank.exec(r))||n&&(m=this._blank.exec(r+' ')))&&(d='prefixed',u='_',c=m[1]);break;case'"':case'\'':if(m=this._unescapedString.exec(r))d='literal',c=m[0];else if(m=this._singleQuotedString.exec(r)){if(b=this._unescape(m[0]),null===b)return a(this);d='literal',c=b.replace(/^'|'$/g,'"')}else if(m=this._tripleQuotedString.exec(r)){if(b=m[1]||m[2],this._line+=b.split(/\r\n|\r|\n/).length-1,b=this._unescape(b),null===b)return a(this);d='literal',c=b.replace(/^'|'$/g,'"')}break;case'@':'literal'===this._prevTokenType&&(m=this._langcode.exec(r))?(d='langcode',c=m[1]):(m=this._keyword.exec(r))&&(d=m[0]);break;case'.':if(1===r.length?n:'0'>r[1]||'9'<r[1]){d='.',h=1;break}case'0':case'1':case'2':case'3':case'4':case'5':case'6':case'7':case'8':case'9':case'+':case'-':(m=this._number.exec(r))&&(d='literal',c='"'+m[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(m[1]?'double':/^[+\-]?\d+$/.test(m[0])?'integer':'decimal'));break;case'B':case'b':case'p':case'P':case'G':case'g':(m=this._sparqlKeyword.exec(r))?d=m[0].toUpperCase():g=!0;break;case'f':case't':(m=this._boolean.exec(r))?(d='literal',c='"'+m[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):g=!0;break;case'a':(m=this._shortPredicates.exec(r))?(d='abbreviation',c='http://www.w3.org/1999/02/22-rdf-syntax-ns#type'):g=!0;break;case',':case';':case'[':case']':case'(':case')':case'{':case'}':h=1,d=f;break;default:g=!0;}if(g&&(('@prefix'===this._prevTokenType||'PREFIX'===this._prevTokenType)&&(m=this._prefix.exec(r))?(d='prefix',c=m[1]||''):((m=this._prefixed.exec(r))||n&&(m=this._prefixed.exec(r+' ')))&&(d='prefixed',u=m[1]||'',c=this._unescape(m[2]))),'^'===this._prevTokenType&&(d='IRI'===d||'prefixed'===d?'type':''),!d)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?a(this):this._input=r;t(null,{line:s,type:d,value:c,prefix:u}),this._prevTokenType=d,r=r.substr(h||m[0].length,r.length)}},_unescape:function(t){try{return t.replace(s,function(t,n,a,o){var s;if(n){if(s=parseInt(n,16),isNaN(s))throw new Error;return r(s)}if(a){if(s=parseInt(a,16),isNaN(s))throw new Error;return 65535>=s?r(s):r(55296+(s-=65536)/1024,56320+(1023&s))}var l=d[o];if(!l)throw new Error;return l})}catch(t){return null}},_syntaxError:function(t){return this._input=null,new Error('Syntax error: unexpected "'+t+'" on line '+this._line+'.')},tokenize:function(t,n){function a(t){null!==s._input&&(s._input+=t,s._tokenizeToEnd(n,!1))}function r(){null!==s._input&&s._tokenizeToEnd(n,!0)}var s=this;this._line=1,'string'==typeof t?(this._input=t,o(function(){s._tokenizeToEnd(n,!0)})):(this._input='',t&&'function'!=typeof t?('function'==typeof t.setEncoding&&t.setEncoding('utf8'),t.on('data',a),t.on('end',r)):(this.addChunk=a,this.end=r,!n&&(n=t)))}},t.exports=a}).call(n,a(48).setImmediate)},function(t,n,a){function r(t){if(!(this instanceof r))return new r(t);this._tripleStack=[],this._graph=null,t=t||{},this._setBase(t.documentIRI);var n='string'==typeof t.format&&t.format.match(/\w*$/)[0].toLowerCase(),a='turtle'===n,d=/triple/.test(n),l=/quad/.test(n),c=d||l;(this._supportsNamedGraphs=!a)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(a||'trig'===n||d),c&&(this._base='',this._resolveIRI=function(t){return this._error('Disallowed relative IRI',t),this._callback=o,this._subject=null}),this._blankNodePrefix='string'==typeof t.blankNodePrefix?'_:'+t.blankNodePrefix.replace(/^_:/,''):'',this._lexer=t.lexer||new s({lineMode:c})}function o(){}var s=a(89),d='http://www.w3.org/1999/02/22-rdf-syntax-ns#',l=d+'nil',c=d+'first',u=/^[a-z][a-z0-9+.-]*:/i,f=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,m=/(?:^|\/)\.\.?(?:$|[\/#?])/,h=0,g=0;r._resetBlankNodeIds=function(){h=g=0},r.prototype={_setBase:function(t){if(!t)t=null;else if(0<=t.indexOf('#'))throw new Error('Invalid base IRI '+t);(this._base=t)&&(this._basePath=t.replace(/[^\/?]*(?:\?.*)?$/,''),t=t.match(f),this._baseRoot=t[0],this._baseScheme=t[1])},_readInTopContext:function(t){switch(t.type){case'eof':return null===this._graph?(delete this._prefixes._,this._callback(null,null,this._prefixes)):this._error('Unclosed graph',t);case'@prefix':return this._sparqlStyle=!1,this._readPrefix;case'PREFIX':return this._sparqlStyle=!0,this._readPrefix;case'@base':return this._sparqlStyle=!1,this._readBaseIRI;case'BASE':return this._sparqlStyle=!0,this._readBaseIRI;case'{':if(this._supportsNamedGraphs)return this._graph='',this._subject=null,this._readSubject;case'GRAPH':if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t);}},_readSubject:function(t){switch(this._predicate=null,t.type){case'IRI':this._subject=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);break;case'prefixed':var n=this._prefixes[t.prefix];if(void 0===n)return this._error('Undefined prefix "'+t.prefix+':"',t);this._subject=n+t.value;break;case'[':return this._subject='_:b'+g++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:'blank'}),this._readBlankNodeHead;case'(':return this._tripleStack.push({subject:l,predicate:null,object:null,type:'list'}),this._subject=null,this._readListItem;case'}':return this._readPunctuation(t);default:return this._error('Expected subject but got '+t.type,t);}return this._readPredicateOrNamedGraph},_readPredicate:function(t){var n=t.type;switch(n){case'IRI':case'abbreviation':this._predicate=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);break;case'prefixed':if('_'===t.prefix)return this._error('Disallowed blank node as predicate',t);var a=this._prefixes[t.prefix];if(void 0===a)return this._error('Undefined prefix "'+t.prefix+':"',t);this._predicate=a+t.value;break;case'.':case']':case'}':return null===this._predicate?this._error('Unexpected '+n,t):(this._subject=null,']'===n?this._readBlankNodeTail(t):this._readPunctuation(t));case';':return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',t);}return this._readObject},_readObject:function(t){switch(t.type){case'IRI':this._object=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);break;case'prefixed':var n=this._prefixes[t.prefix];if(void 0===n)return this._error('Undefined prefix "'+t.prefix+':"',t);this._object=n+t.value;break;case'literal':return this._object=t.value,this._readDataTypeOrLang;case'[':var a='_:b'+g++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:a,type:'blank'}),this._subject=a,this._readBlankNodeHead;case'(':return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:l,type:'list'}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',t);}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(t){return'{'===t.type?this._readGraph(t):this._readPredicate(t)},_readGraph:function(t){return'{'===t.type?(this._graph=this._subject,this._subject=null,this._readSubject):this._error('Expected graph but got '+t.type,t)},_readBlankNodeHead:function(t){return']'===t.type?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))},_readBlankNodeTail:function(t){if(']'!==t.type)return this._readBlankNodePunctuation(t);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||''});var n=this._tripleStack.pop();return this._subject=n.subject,null===n.object?null===this._predicate?this._readPredicateOrNamedGraph:this._readPredicate:(this._predicate=n.predicate,this._object=n.object,this._getTripleEndReader())},_readDataTypeOrLang:function(t){switch(t.type){case'type':var n;if(''===t.prefix)n=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);else{var a=this._prefixes[t.prefix];if(void 0===a)return this._error('Undefined prefix "'+t.prefix+':"',t);n=a+t.value}return this._object+='^^'+n,this._getTripleEndReader();case'langcode':return this._object+='@'+t.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,t);}},_readListItem:function(t){var n=null,a=null,r=this._subject,o=this._tripleStack,s=o[o.length-1],f=this._readListItem;switch(t.type){case'IRI':n=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);break;case'prefixed':var m=this._prefixes[t.prefix];if(void 0===m)return this._error('Undefined prefix "'+t.prefix+':"',t);n=m+t.value;break;case'literal':n=t.value,f=this._readDataTypeOrLang;break;case'[':a='_:b'+g++,n='_:b'+g++,o.push({subject:a,predicate:c,object:n,type:'blank'}),this._subject=n,f=this._readBlankNodeHead;break;case'(':a='_:b'+g++,o.push({subject:a,predicate:c,object:l,type:'list'}),this._subject=null,f=this._readListItem;break;case')':if(o.pop(),0!==o.length&&'list'===o[o.length-1].type&&this._callback(null,{subject:s.subject,predicate:s.predicate,object:s.object,graph:this._graph||''}),this._subject=s.subject,null===s.predicate){if(f=this._readPredicate,s.subject===l)return f;}else if(this._predicate=s.predicate,this._object=s.object,f=this._getTripleEndReader(),s.object===l)return f;a=l;break;default:return this._error('Expected list item instead of "'+t.type+'"',t);}return null===a&&(this._subject=a='_:b'+g++),null===r?s.object===l?s.object=a:s.subject=a:this._callback(null,{subject:r,predicate:d+'rest',object:a,graph:this._graph||''}),null!==n&&this._callback(null,{subject:a,predicate:c,object:n,graph:this._graph||''}),f},_readPunctuation:function(t){var n=this._subject,a=this._graph,r;switch(t.type){case'}':if(null===this._graph)return this._error('Unexpected graph closing',t);this._graph=null;case'.':this._subject=null,r=this._readInTopContext;break;case';':r=this._readPredicate;break;case',':r=this._readObject;break;case'IRI':if(this._supportsQuads&&null===this._graph){a=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t),n=this._subject,r=this._readQuadPunctuation;break}case'prefixed':if(this._supportsQuads&&null===this._graph){var o=this._prefixes[t.prefix];if(void 0===o)return this._error('Undefined prefix "'+t.prefix+':"',t);a=o+t.value,r=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',t);}return null!==n&&this._callback(null,{subject:n,predicate:this._predicate,object:this._object,graph:a||''}),r},_readBlankNodePunctuation:function(t){var n;switch(t.type){case';':n=this._readPredicate;break;case',':n=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',t);}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||''}),n},_readQuadPunctuation:function(t){return'.'===t.type?this._readInTopContext:this._error('Expected dot to follow quad',t)},_readPrefix:function(t){return'prefix'===t.type?(this._prefix=t.value,this._readPrefixIRI):this._error('Expected prefix to follow @prefix',t)},_readPrefixIRI:function(t){if('IRI'!==t.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',t);var n;return n=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t),this._prefixes[this._prefix]=n,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation},_readBaseIRI:function(t){if('IRI'!==t.type)return this._error('Expected IRI to follow base declaration',t);try{this._setBase(null===this._base||u.test(t.value)?t.value:this._resolveIRI(t))}catch(n){this._error(n.message,t)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(t){switch(t.type){case'IRI':case'prefixed':return this._readSubject(t),this._readGraph;case'[':return this._readNamedGraphBlankLabel;default:return this._error('Invalid graph label',t);}},_readNamedGraphBlankLabel:function(t){return']'===t.type?(this._subject='_:b'+g++,this._readGraph):this._error('Invalid graph label',t)},_readDeclarationPunctuation:function(t){return this._sparqlStyle?this._readInTopContext(t):'.'===t.type?this._readInTopContext:this._error('Expected declaration to end with a dot',t)},_getTripleEndReader:function(){var t=this._tripleStack;if(0===t.length)return this._readPunctuation;switch(t[t.length-1].type){case'blank':return this._readBlankNodeTail;case'list':return this._readListItem;}},_error:function(t,n){this._callback(new Error(t+' at line '+n.line+'.'))},_resolveIRI:function(t){var n=t.value;switch(n[0]){case void 0:return this._base;case'#':return this._base+n;case'?':return this._base.replace(/(?:\?.*)?$/,n);case'/':return('/'===n[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(n);default:return this._removeDotSegments(this._basePath+n);}},_removeDotSegments:function(t){if(!m.test(t))return t;for(var n='',a=t.length,r=-1,o=-1,s=0,d='/';r<a;){switch(d){case':':if(0>o&&'/'===t[++r]&&'/'===t[++r])for(;(o=r+1)<a&&'/'!==t[o];)r=o;break;case'?':case'#':r=a;break;case'/':if('.'===t[r+1])switch(d=t[++r+1],d){case'/':n+=t.substring(s,r-1),s=r+1;break;case void 0:case'?':case'#':return n+t.substring(s,r)+t.substr(r+1);case'.':if(d=t[++r+1],void 0===d||'/'===d||'?'===d||'#'===d){if(n+=t.substring(s,r-2),(s=n.lastIndexOf('/'))>=o&&(n=n.substr(0,s)),'/'!==d)return n+'/'+t.substr(r+1);s=r+1}}}d=t[++r]}return n+t.substring(s)},parse:function(t,n,a){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||'_:b'+h++ +'_','function'==typeof t&&(a=n,n=t,t=null),this._callback=n||o,this._prefixCallback=a||o;var r=this;this._lexer.tokenize(t,function(t,n){null===t?r._readCallback!==void 0&&(r._readCallback=r._readCallback(n)):(r._callback(t),r._callback=o)}),t||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},t.exports=r},function(t){function n(t,n){for(var r in o)n?t.prototype[r]=a(o[r]):t[r]=o[r];return t}function a(t){return function(n){return t(this,n)}}var r='http://www.w3.org/2001/XMLSchema#',o={isIRI:function(t){if(!t)return t;var n=t[0];return'"'!==n&&'_'!==n},isLiteral:function(t){return t&&'"'===t[0]},isBlank:function(t){return t&&'_:'===t.substr(0,2)},getLiteralValue:function(t){var n=/^"([^]*)"/.exec(t);if(!n)throw new Error(t+' is not a literal');return n[1]},getLiteralType:function(t){var n=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(t);if(!n)throw new Error(t+' is not a literal');return n[1]||(n[2]?'http://www.w3.org/1999/02/22-rdf-syntax-ns#langString':r+'string')},getLiteralLanguage:function(t){var n=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(t);if(!n)throw new Error(t+' is not a literal');return n[1]?n[1].toLowerCase():''},isPrefixedName:function(t){return t&&/^[^:\/"']*:[^:\/"']+$/.test(t)},expandPrefixedName:function(t,n){var a=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(t),r,o,s;return a&&(r=a[1],o=n[r],s=a.index),void 0===o?t:0===s?o+t.substr(r.length+1):t.substr(0,s+3)+o+t.substr(s+r.length+4)},createIRI:function(t){return t&&'"'===t[0]?o.getLiteralValue(t):t},createLiteral:function(t,n){if(!n)switch(typeof t){case'boolean':n=r+'boolean';break;case'number':if(isFinite(t)){n=0==t%1?r+'integer':r+'decimal';break}default:return'"'+t+'"';}return'"'+t+(/^[a-z]+(-[a-z0-9]+)*$/i.test(n)?'"@'+n.toLowerCase():'"^^'+n)}};t.exports=n(n)},function(t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(t){return'function'==typeof t}function r(t){return'number'==typeof t}function o(t){return'object'==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError('n must be a positive number');return this._maxListeners=t,this},n.prototype.emit=function(t){var n,r,d,l,c,u;if(this._events||(this._events={}),'error'===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length))if(n=arguments[1],n instanceof Error)throw n;else{var f=new Error('Uncaught, unspecified "error" event. ('+n+')');throw f.context=n,f}if(r=this._events[t],s(r))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),r.apply(this,l);}else if(o(r))for(l=Array.prototype.slice.call(arguments,1),u=r.slice(),d=u.length,c=0;c<d;c++)u[c].apply(this,l);return!0},n.prototype.addListener=function(t,r){var d;if(!a(r))throw TypeError('listener must be a function');return this._events||(this._events={}),this._events.newListener&&this.emit('newListener',t,a(r.listener)?r.listener:r),this._events[t]?o(this._events[t])?this._events[t].push(r):this._events[t]=[this._events[t],r]:this._events[t]=r,o(this._events[t])&&!this._events[t].warned&&(d=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,d&&0<d&&this._events[t].length>d&&(this._events[t].warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',this._events[t].length),'function'==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,n){function r(){this.removeListener(t,r),o||(o=!0,n.apply(this,arguments))}if(!a(n))throw TypeError('listener must be a function');var o=!1;return r.listener=n,this.on(t,r),this},n.prototype.removeListener=function(t,n){var r,s,d,l;if(!a(n))throw TypeError('listener must be a function');if(!this._events||!this._events[t])return this;if(r=this._events[t],d=r.length,s=-1,r===n||a(r.listener)&&r.listener===n)delete this._events[t],this._events.removeListener&&this.emit('removeListener',t,n);else if(o(r)){for(l=d;0<l--;)if(r[l]===n||r[l].listener&&r[l].listener===n){s=l;break}if(0>s)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(s,1),this._events.removeListener&&this.emit('removeListener',t,n)}return this},n.prototype.removeAllListeners=function(t){var n,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(n in this._events)'removeListener'!==n&&this.removeAllListeners(n);return this.removeAllListeners('removeListener'),this._events={},this}if(r=this._events[t],a(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var n;return n=this._events&&this._events[t]?a(this._events[t])?[this._events[t]]:this._events[t].slice():[],n},n.prototype.listenerCount=function(t){if(this._events){var n=this._events[t];if(a(n))return 1;if(n)return n.length}return 0},n.listenerCount=function(t,n){return t.listenerCount(n)}},function(t,n,a){'use strict';(function(n,r,o){function s(t){var n=this;this.next=null,this.entry=null,this.finish=function(){j(n,t)}}function d(t){return B.from(t)}function l(t){return B.isBuffer(t)||t instanceof U}function c(){}function u(t,n){O=O||a(33),t=t||{},this.objectMode=!!t.objectMode,n instanceof O&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=w(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===t.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=t.defaultEncoding||'utf8',this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){_(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function f(t){return O=O||a(33),F.call(f,this)||this instanceof O?void(this._writableState=new u(t,this),this.writable=!0,t&&('function'==typeof t.write&&(this._write=t.write),'function'==typeof t.writev&&(this._writev=t.writev),'function'==typeof t.destroy&&(this._destroy=t.destroy),'function'==typeof t.final&&(this._final=t.final)),D.call(this)):new f(t)}function m(t,n){var a=new Error('write after end');t.emit('error',a),R(n,a)}function h(t,n,a,r){var o=!0,s=!1;return null===a?s=new TypeError('May not write null values to stream'):'string'!=typeof a&&void 0!==a&&!n.objectMode&&(s=new TypeError('Invalid non-string/buffer chunk')),s&&(t.emit('error',s),R(r,s),o=!1),o}function g(t,n,a){return t.objectMode||!1===t.decodeStrings||'string'!=typeof n||(n=B.from(n,a)),n}function b(t,n,a,r,o,s){if(!a){var d=g(n,r,o);r!==d&&(a=!0,o='buffer',r=d)}var l=n.objectMode?1:r.length;n.length+=l;var c=n.length<n.highWaterMark;if(c||(n.needDrain=!0),n.writing||n.corked){var u=n.lastBufferedRequest;n.lastBufferedRequest={chunk:r,encoding:o,isBuf:a,callback:s,next:null},u?u.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else y(t,n,!1,l,r,o,s);return c}function y(t,n,a,r,o,s,d){n.writelen=r,n.writecb=d,n.writing=!0,n.sync=!0,a?t._writev(o,n.onwrite):t._write(o,s,n.onwrite),n.sync=!1}function v(t,n,a,r,o){--n.pendingcb,a?(R(o,r),R(I,t,n),t._writableState.errorEmitted=!0,t.emit('error',r)):(o(r),t._writableState.errorEmitted=!0,t.emit('error',r),I(t,n))}function x(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function _(t,n){var a=t._writableState,r=a.sync,o=a.writecb;if(x(a),n)v(t,a,r,n,o);else{var s=E(a);s||a.corked||a.bufferProcessing||!a.bufferedRequest||T(t,a),r?L(k,t,a,s,o):k(t,a,s,o)}}function k(t,n,a,r){a||C(t,n),n.pendingcb--,r(),I(t,n)}function C(t,n){0===n.length&&n.needDrain&&(n.needDrain=!1,t.emit('drain'))}function T(t,n){n.bufferProcessing=!0;var a=n.bufferedRequest;if(t._writev&&a&&a.next){var r=n.bufferedRequestCount,o=Array(r),d=n.corkedRequestsFree;d.entry=a;for(var l=0,c=!0;a;)o[l]=a,a.isBuf||(c=!1),a=a.next,l+=1;o.allBuffers=c,y(t,n,!0,n.length,o,'',d.finish),n.pendingcb++,n.lastBufferedRequest=null,d.next?(n.corkedRequestsFree=d.next,d.next=null):n.corkedRequestsFree=new s(n)}else{for(;a;){var u=a.chunk,f=a.encoding,m=a.callback,h=n.objectMode?1:u.length;if(y(t,n,!1,h,u,f,m),a=a.next,n.writing)break}null===a&&(n.lastBufferedRequest=null)}n.bufferedRequestCount=0,n.bufferedRequest=a,n.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,n){t._final(function(a){n.pendingcb--,a&&t.emit('error',a),n.prefinished=!0,t.emit('prefinish'),I(t,n)})}function A(t,n){n.prefinished||n.finalCalled||('function'==typeof t._final?(n.pendingcb++,n.finalCalled=!0,R(S,t,n)):(n.prefinished=!0,t.emit('prefinish')))}function I(t,n){var a=E(n);return a&&(A(t,n),0===n.pendingcb&&(n.finished=!0,t.emit('finish'))),a}function N(t,n,a){n.ending=!0,I(t,n),a&&(n.finished?R(a):t.once('finish',a)),n.ended=!0,t.writable=!1}function j(t,n,a){var r=t.entry;for(t.entry=null;r;){var o=r.callback;n.pendingcb--,o(a),r=r.next}n.corkedRequestsFree?n.corkedRequestsFree.next=t:n.corkedRequestsFree=t}var R=a(66);t.exports=f;var L=!n.browser&&-1<['v0.10','v0.9.'].indexOf(n.version.slice(0,5))?r:R,O;f.WritableState=u;var P=a(50);P.inherits=a(1);var M={deprecate:a(238)},D=a(141),B=a(4).Buffer,U=o.Uint8Array||function(){},q=a(142);P.inherits(f,D),u.prototype.getBuffer=function(){for(var t=this.bufferedRequest,n=[];t;)n.push(t),t=t.next;return n},function(){try{Object.defineProperty(u.prototype,'buffer',{get:M.deprecate(function(){return this.getBuffer()},'_writableState.buffer is deprecated. Use _writableState.getBuffer instead.','DEP0003')})}catch(t){}}();var F;'function'==typeof Symbol&&Symbol.hasInstance&&'function'==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(t){return!!F.call(this,t)||t&&t._writableState instanceof u}})):F=function(t){return t instanceof this},f.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'))},f.prototype.write=function(t,n,a){var r=this._writableState,o=!1,s=l(t)&&!r.objectMode;return s&&!B.isBuffer(t)&&(t=d(t)),'function'==typeof n&&(a=n,n=null),s?n='buffer':!n&&(n=r.defaultEncoding),'function'!=typeof a&&(a=c),r.ended?m(this,a):(s||h(this,r,t,a))&&(r.pendingcb++,o=b(this,r,s,t,n,a)),o},f.prototype.cork=function(){var t=this._writableState;t.corked++},f.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&T(this,t))},f.prototype.setDefaultEncoding=function(t){if('string'==typeof t&&(t=t.toLowerCase()),!(-1<['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((t+'').toLowerCase())))throw new TypeError('Unknown encoding: '+t);return this._writableState.defaultEncoding=t,this},f.prototype._write=function(t,n,a){a(new Error('_write() is not implemented'))},f.prototype._writev=null,f.prototype.end=function(t,n,a){var r=this._writableState;'function'==typeof t?(a=t,t=null,n=null):'function'==typeof n&&(a=n,n=null),null!==t&&t!==void 0&&this.write(t,n),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||N(this,r,a)},Object.defineProperty(f.prototype,'destroyed',{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),f.prototype.destroy=q.destroy,f.prototype._undestroy=q.undestroy,f.prototype._destroy=function(t,n){this.end(),n(t)}}).call(n,a(5),a(48).setImmediate,a(3))},function(t,n,a){function r(t){if(t&&!c(t))throw new Error('Unknown encoding: '+t)}function o(t){return t.toString(this.encoding)}function s(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function d(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var l=a(0).Buffer,c=l.isEncoding||function(t){switch(t&&t.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return!0;default:return!1;}},u=n.StringDecoder=function(t){switch(this.encoding=(t||'utf8').toLowerCase().replace(/[-_]/,''),r(t),this.encoding){case'utf8':this.surrogateSize=3;break;case'ucs2':case'utf16le':this.surrogateSize=2,this.detectIncompleteChar=s;break;case'base64':this.surrogateSize=3,this.detectIncompleteChar=d;break;default:return void(this.write=o);}this.charBuffer=new l(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(t){for(var n='',a;this.charLength;){if(a=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length,t.copy(this.charBuffer,this.charReceived,0,a),this.charReceived+=a,this.charReceived<this.charLength)return'';t=t.slice(a,t.length),n=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r){this.charLength+=this.surrogateSize,n='';continue}if(this.charReceived=this.charLength=0,0===t.length)return n;break}this.detectIncompleteChar(t);var o=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,o),o-=this.charReceived),n+=t.toString(this.encoding,0,o);var o=n.length-1,r=n.charCodeAt(o);if(55296<=r&&56319>=r){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),n.substring(0,o)}return n},u.prototype.detectIncompleteChar=function(t){for(var n=3<=t.length?3:t.length;0<n;n--){var a=t[t.length-n];if(1==n&&6==a>>5){this.charLength=2;break}if(2>=n&&14==a>>4){this.charLength=3;break}if(3>=n&&30==a>>3){this.charLength=4;break}}this.charReceived=n},u.prototype.end=function(t){var n='';if(t&&t.length&&(n=this.write(t)),this.charReceived){var a=this.charReceived,r=this.charBuffer,o=this.encoding;n+=r.slice(0,a).toString(o)}return n}},function(t,a,n){(function(t,r){function o(t,n){var r={seen:[],stylize:d};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&a._extend(r,n),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),c(r,t,r.depth)}function s(t,n){var a=o.styles[n];return a?'\x1B['+o.colors[a][0]+'m'+t+'\x1B['+o.colors[a][1]+'m':t}function d(t){return t}function l(t){var n={};return t.forEach(function(t){n[t]=!0}),n}function c(t,r,o){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==a.inspect&&!(r.constructor&&r.constructor.prototype===r)){var s=r.inspect(o,t);return _(s)||(s=c(t,s,o)),s}var d=u(t,r);if(d)return d;var y=Object.keys(r),v=l(y);if(t.showHidden&&(y=Object.getOwnPropertyNames(r)),E(r)&&(0<=y.indexOf('message')||0<=y.indexOf('description')))return f(r);if(0===y.length){if(S(r)){var w=r.name?': '+r.name:'';return t.stylize('[Function'+w+']','special')}if(k(r))return t.stylize(RegExp.prototype.toString.call(r),'regexp');if(T(r))return t.stylize(Date.prototype.toString.call(r),'date');if(E(r))return f(r)}var x='',C=!1,A=['{','}'];if(b(r)&&(C=!0,A=['[',']']),S(r)){var I=r.name?': '+r.name:'';x=' [Function'+I+']'}if(k(r)&&(x=' '+RegExp.prototype.toString.call(r)),T(r)&&(x=' '+Date.prototype.toUTCString.call(r)),E(r)&&(x=' '+f(r)),0===y.length&&(!C||0==r.length))return A[0]+x+A[1];if(0>o)return k(r)?t.stylize(RegExp.prototype.toString.call(r),'regexp'):t.stylize('[Object]','special');t.seen.push(r);var n;return n=C?m(t,r,o,v,y):y.map(function(n){return h(t,r,o,v,n,C)}),t.seen.pop(),g(n,x,A)}function u(t,n){if(x(n))return t.stylize('undefined','undefined');if(_(n)){var a='\''+JSON.stringify(n).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return t.stylize(a,'string')}return w(n)?t.stylize(''+n,'number'):y(n)?t.stylize(''+n,'boolean'):v(n)?t.stylize('null','null'):void 0}function f(t){return'['+Error.prototype.toString.call(t)+']'}function m(t,n,a,r,o){for(var s=[],d=0,c=n.length;d<c;++d)j(n,d+'')?s.push(h(t,n,a,r,d+'',!0)):s.push('');return o.forEach(function(o){o.match(/^\d+$/)||s.push(h(t,n,a,r,o,!0))}),s}function h(t,n,a,r,o,s){var d,l,u;if(u=Object.getOwnPropertyDescriptor(n,o)||{value:n[o]},u.get?u.set?l=t.stylize('[Getter/Setter]','special'):l=t.stylize('[Getter]','special'):u.set&&(l=t.stylize('[Setter]','special')),j(r,o)||(d='['+o+']'),l||(0>t.seen.indexOf(u.value)?(l=v(a)?c(t,u.value,null):c(t,u.value,a-1),-1<l.indexOf('\n')&&(s?l=l.split('\n').map(function(t){return'  '+t}).join('\n').substr(2):l='\n'+l.split('\n').map(function(t){return'   '+t}).join('\n'))):l=t.stylize('[Circular]','special')),x(d)){if(s&&o.match(/^\d+$/))return l;d=JSON.stringify(''+o),d.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(d=d.substr(1,d.length-2),d=t.stylize(d,'name')):(d=d.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),d=t.stylize(d,'string'))}return d+': '+l}function g(t,n,a){var r=0,o=t.reduce(function(t,n){return r++,0<=n.indexOf('\n')&&r++,t+n.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<o?a[0]+(''===n?'':n+'\n ')+' '+t.join(',\n  ')+' '+a[1]:a[0]+n+' '+t.join(', ')+' '+a[1]}function b(t){return Array.isArray(t)}function y(t){return'boolean'==typeof t}function v(t){return null===t}function w(t){return'number'==typeof t}function _(t){return'string'==typeof t}function x(t){return void 0===t}function k(t){return C(t)&&'[object RegExp]'===A(t)}function C(t){return'object'==typeof t&&null!==t}function T(t){return C(t)&&'[object Date]'===A(t)}function E(t){return C(t)&&('[object Error]'===A(t)||t instanceof Error)}function S(t){return'function'==typeof t}function A(t){return Object.prototype.toString.call(t)}function I(t){return 10>t?'0'+t.toString(10):t.toString(10)}function N(){var t=new Date,n=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(':');return[t.getDate(),P[t.getMonth()],n].join(' ')}function j(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var R=/%[sdj%]/g;a.format=function(t){if(!_(t)){for(var n=[],a=0;a<arguments.length;a++)n.push(o(arguments[a]));return n.join(' ')}for(var a=1,r=arguments,s=r.length,d=(t+'').replace(R,function(t){if('%%'===t)return'%';if(a>=s)return t;switch(t){case'%s':return r[a++]+'';case'%d':return+r[a++];case'%j':try{return JSON.stringify(r[a++])}catch(t){return'[Circular]'}default:return t;}}),l=r[a];a<s;l=r[++a])d+=v(l)||!C(l)?' '+l:' '+o(l);return d},a.deprecate=function(n,o){if(x(t.process))return function(){return a.deprecate(n,o).apply(this,arguments)};if(!0===r.noDeprecation)return n;var s=!1;return function(){if(!s){if(r.throwDeprecation)throw new Error(o);else r.traceDeprecation?console.trace(o):console.error(o);s=!0}return n.apply(this,arguments)}};var L={},O;a.debuglog=function(t){if(x(O)&&(O=r.env.NODE_DEBUG||''),t=t.toUpperCase(),!L[t])if(new RegExp('\\b'+t+'\\b','i').test(O)){var n=r.pid;L[t]=function(){var r=a.format.apply(a,arguments);console.error('%s %d: %s',t,n,r)}}else L[t]=function(){};return L[t]},a.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey',null:'bold',string:'green',date:'magenta',regexp:'red'},a.isArray=b,a.isBoolean=y,a.isNull=v,a.isNullOrUndefined=function(t){return null==t},a.isNumber=w,a.isString=_,a.isSymbol=function(t){return'symbol'==typeof t},a.isUndefined=x,a.isRegExp=k,a.isObject=C,a.isDate=T,a.isError=E,a.isFunction=S,a.isPrimitive=function(t){return null===t||'boolean'==typeof t||'number'==typeof t||'string'==typeof t||'symbol'==typeof t||'undefined'==typeof t},a.isBuffer=n(244);var P=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];a.log=function(){console.log('%s - %s',N(),a.format.apply(a,arguments))},a.inherits=n(245),a._extend=function(t,n){if(!n||!C(n))return t;for(var a=Object.keys(n),r=a.length;r--;)t[a[r]]=n[a[r]];return t}}).call(a,n(3),n(5))},function(t){function n(t,a){if(!(this instanceof n))return new n(t,a);if(t&&'function'!=typeof t.write&&(a=t,t=null),a=a||{},!t){var r='';this._outputStream={write:function(t,n,a){r+=t,a&&a()},end:function(t){t&&t(null,r)}},this._endStream=!0}else this._outputStream=t,this._endStream=void 0===a.end||!!a.end;this._subject=null,/triple|quad/i.test(a.format)?this._writeTriple=this._writeTripleLine:(this._graph='',this._prefixIRIs=Object.create(null),a.prefixes&&this.addPrefixes(a.prefixes))}function a(t){var n=d[t];return void 0===n&&(1===t.length?(n=t.charCodeAt(0).toString(16),n='\\u0000'.substr(0,6-n.length)+n):(n=(1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)+9216).toString(16),n='\\U00000000'.substr(0,10-n.length)+n)),n}var r=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,o=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,s=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,d={"\\":'\\\\','"':'\\"',"	":'\\t',"\n":'\\n',"\r":'\\r',"":'\\b',"":'\\f'};n.prototype={_write:function(t,n){this._outputStream.write(t,'utf8',n)},_writeTriple:function(t,n,a,r,o){try{this._graph!==r&&(this._write((null===this._subject?'':this._graph?'\n}\n':'.\n')+(r?this._encodeIriOrBlankNode(r)+' {\n':'')),this._subject=null,this._graph='['===r[0]?']':r),this._subject===t?this._predicate===n?this._write(', '+this._encodeObject(a),o):this._write(';\n    '+this._encodePredicate(this._predicate=n)+' '+this._encodeObject(a),o):this._write((null===this._subject?'':'.\n')+this._encodeSubject(this._subject=t)+' '+this._encodePredicate(this._predicate=n)+' '+this._encodeObject(a),o)}catch(t){o&&o(t)}},_writeTripleLine:function(t,n,a,r,o){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(t)+' '+this._encodeIriOrBlankNode(n)+' '+this._encodeObject(a)+(r?' '+this._encodeIriOrBlankNode(r)+'.\n':'.\n'),o)}catch(t){o&&o(t)}},_encodeIriOrBlankNode:function(t){var n=t[0];if('['===n||'('===n||'_'===n&&':'===t[1])return t;o.test(t)&&(t=t.replace(s,a));var r=this._prefixRegex.exec(t);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:t:'<'+t+'>'},_encodeLiteral:function(t,n,r){return o.test(t)&&(t=t.replace(s,a)),r?'"'+t+'"@'+r:n?'"'+t+'"^^'+this._encodeIriOrBlankNode(n):'"'+t+'"'},_encodeSubject:function(t){if('"'===t[0])throw new Error('A literal as subject is not allowed: '+t);return'['===t[0]&&(this._subject=']'),this._encodeIriOrBlankNode(t)},_encodePredicate:function(t){if('"'===t[0])throw new Error('A literal as predicate is not allowed: '+t);return t==='http://www.w3.org/1999/02/22-rdf-syntax-ns#'+'type'?'a':this._encodeIriOrBlankNode(t)},_encodeObject:function(t){if('"'!==t[0])return this._encodeIriOrBlankNode(t);var n=r.exec(t);if(!n)throw new Error('Invalid literal: '+t);return this._encodeLiteral(n[1],n[2],n[3])},_blockedWrite:function(){throw new Error('Cannot write because the writer has been closed.')},addTriple:function(t,n,a,r,o){a===void 0?this._writeTriple(t.subject,t.predicate,t.object,t.graph||'',n):'string'==typeof r?this._writeTriple(t,n,a,r,o):this._writeTriple(t,n,a,'',r)},addTriples:function(t){for(var n=0;n<t.length;n++)this.addTriple(t[n])},addPrefix:function(t,n,a){var r={};r[t]=n,this.addPrefixes(r,a)},addPrefixes:function(t,n){var a=this._prefixIRIs,r=!1;for(var o in t){var s=t[o];/[#\/]$/.test(s)&&a[s]!==(o+=':')&&(r=!0,a[s]=o,null!==this._subject&&(this._write(this._graph?'\n}\n':'.\n'),this._subject=null,this._graph=''),this._write('@prefix '+o+' <'+s+'>.\n'))}if(r){var d='',l='';for(var c in a)d+=d?'|'+c:c,l+=(l?'|':'')+a[c];d=d.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,'\\$&'),this._prefixRegex=new RegExp('^(?:'+l+')[^/]*$|^('+d+')([a-zA-Z][\\-_a-zA-Z0-9]*)$')}this._write(r?'\n':'',n)},blank:function(t,n){var a=t,r,o;switch(void 0===t?a=[]:'string'==typeof t?a=[{predicate:t,object:n}]:!('length'in t)&&(a=[t]),o=a.length){case 0:return'[]';case 1:if(r=a[0],'['!==r.object[0])return'[ '+this._encodePredicate(r.predicate)+' '+this._encodeObject(r.object)+' ]';default:for(var s='[',d=0;d<o;d++)r=a[d],r.predicate===t?s+=', '+this._encodeObject(r.object):(s+=(d?';\n  ':'\n  ')+this._encodePredicate(r.predicate)+' '+this._encodeObject(r.object),t=r.predicate);return s+'\n]';}},list:function(t){for(var n=t&&t.length||0,a=Array(n),r=0;r<n;r++)a[r]=this._encodeObject(t[r]);return'('+a.join(' ')+')'},_prefixRegex:/$0^/,end:function(t){null!==this._subject&&(this._write(this._graph?'\n}\n':'.\n'),this._subject=null),this._write=this._blockedWrite;var n=t&&function(a,r){n=null,t(a,r)};if(this._endStream)try{return this._outputStream.end(n)}catch(t){}n&&n()}},t.exports=n},function(t,n,a){'use strict';var r=a(8),o=a(31),s=a(12),d=a(24),l=a(131),c=function(){function t(t){return encodeURI(t)}function n(t){for(var n='',a=0,r;a<t.length;a++)r=t.charCodeAt(a),n+=65535<r?'\\U'+('00000000'+r.toString(16)).slice(-8):126<r?'\\u'+('0000'+r.toString(16)).slice(-4):t[a];return n}var a=function(t){this.flags='',this.base=null,this.prefixes=[],this.namespaces=[],this.suggestPrefix('rdf','http://www.w3.org/1999/02/22-rdf-syntax-ns#'),this.suggestPrefix('xml','reserved:reservedForFutureUse'),this.namespacesUsed=[],this.keywords=['a'],this.prefixchars='abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',this.incoming=null,this.formulas=[],this.store=t};a.prototype.setBase=function(t){return this.base=t,this},a.prototype.setFlags=function(t){return this.flags=t||'',this},a.prototype.toStr=function(t){var n=t.toNT();return'Graph'===t.termType&&(this.formulas[n]=t),n},a.prototype.fromStr=function(t){if('{'===t[0]){var n=this.formulas[t];return n||console.log('No formula object for '+t),n}return this.store.fromNT(t)},a.prototype.suggestPrefix=function(t,n){'default'===t.slice(0,7)||'ns'===t.slice(0,2)||!t||!n||t in this.namespaces||n in this.prefixes||(this.prefixes[n]=t,this.namespaces[t]=n)},a.prototype.suggestNamespaces=function(t){for(var n in t)return this.suggestPrefix(n,t[n]),this},a.prototype.checkIntegrity=function(){var t,n;for(t in this.namespaces)if(this.prefixes[this.namespaces[t]]!==t)throw new Error('Serializer integity error 1: '+t+', '+this.namespaces[t]+', '+this.prefixes[this.namespaces[t]]+'!');for(n in this.prefixes)if(this.namespaces[this.prefixes[n]]!==n)throw new Error('Serializer integity error 2: '+n+', '+this.prefixs[n]+', '+this.namespaces[this.prefixes[n]]+'!')},a.prototype.makeUpPrefix=function(t){var n=t,r=function(n){return!!a.prototype.validPrefix.test(n)&&'ns'!==n&&!(n in this.namespaces)&&(this.prefixes[t]=n,this.namespaces[n]=t,n)}.bind(this);0<='#/'.indexOf(n[n.length-1])&&(n=n.slice(0,-1));var o=n.lastIndexOf('/');0<=o&&(n=n.slice(o+1));for(var s=0;s<n.length&&this.prefixchars.indexOf(n[s]);)s++;if(n=n.slice(0,s),6>n.length&&r(n))return n;if(r(n.slice(0,3)))return n.slice(0,3);if(r(n.slice(0,2)))return n.slice(0,2);if(r(n.slice(0,4)))return n.slice(0,4);if(r(n.slice(0,1)))return n.slice(0,1);if(r(n.slice(0,5)))return n.slice(0,5);a.prototype.validPrefix.test(n)||(n='n');for(var d=0;;d++)if(r(n.slice(0,3)+d))return n.slice(0,3)+d},a.prototype.rootSubjects=function(t){for(var n={},a={},r={},o=0;o<t.length;o++){var s=t[o],d=function(t){n.hasOwnProperty(t)||(n[t]=[]),n[t].push(s.subject)},l=[s.subject,s.predicate,s.object];l.map(function(t){'BlankNode'===t.termType?r[t.toNT()]=!0:'Collection'===t.termType&&t.elements.forEach(function(t){d(t)})}),d(t[o].object);var c=a[this.toStr(s.subject)];c||(c=[]),c.push(s),a[this.toStr(s.subject)]=c}var u=[];for(var f in a)if(a.hasOwnProperty(f)){var m=this.fromStr(f);if('BlankNode'!==m.termType||!n[m]||1!==n[m].length){u.push(m);continue}}this.incoming=n;for(var h={},g=0;g<u.length;g++)h[u[g].toNT()]=!0;return{roots:u,subjects:a,rootsHash:h,incoming:n}},a.prototype.toN3=function(t){return this.statementsToN3(t.statements)},a.prototype._notQNameChars='\t\r\n !"#$%&\'()*.,+/;<=>?@[\\]^`{|}~',a.prototype._notNameChars=a.prototype._notQNameChars+':',a.prototype.explicitURI=function(a){return a=0>this.flags.indexOf('r')&&this.base?s.refTo(this.base,a):0<=this.flags.indexOf('u')?n(a):t(a),'<'+a+'>'},a.prototype.statementsToNTriples=function(t){var n=t.slice();n.sort();for(var a='',r='http://www.w3.org/1999/02/22-rdf-syntax-ns#',d=this,l=this.store,c=function t(n){if('Collection'!==n.termType)return d.atomicTermToN3(n);for(var s=n.elements,c=l.sym(r+'nill'),u=s.length-1,f;0<=u;u--)f=new o,a+=t(f)+' '+t(l.sym(r+'first'))+' '+t(s[u])+'.\n',a+=t(f)+' '+t(l.sym(r+'rest'))+' '+t(c)+'.\n',c=f;return d.atomicTermToN3(c)},u=0;u<n.length;u++){var f=n[u],m='';m+=c(f.subject)+' ',m+=c(f.predicate)+' ',m+=c(f.object)+' ',0<=this.flags.indexOf('q')&&(m+=c(f.why)+' '),m+='.\n',a+=m}return a},a.prototype.statementsToN3=function(t){function n(t,n){return'BlankNode'!==t.termType||n.incoming[t]?[b(t,n)].concat([h(t,n)]).concat(['.']):g(t,n,!0).concat(['.'])}var r=4,o=80,s=this.store,l={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":'aaa:00'};t.sort(function(t,n){return d.heavyCompareSPO(t,n,s,l)}),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+'#');var c={};0>this.flags.indexOf('s')&&(c['http://www.w3.org/2002/07/owl#sameAs']='='),0>this.flags.indexOf('t')&&(c['http://www.w3.org/1999/02/22-rdf-syntax-ns#type']='a'),0>this.flags.indexOf('i')&&(c['http://www.w3.org/2000/10/swap/log#implies']='=>');var u=function(t){for(var n='',a=0;a<t;a++)n+=' ';return n},f=function t(n){for(var a='',r=0;r<n.length;r++){var o=n[r],s='string'==typeof o?o:t(o);if(0!==r){var d=a.slice(-1)||' ';','!==s&&';'!==s&&('.'!==s||'0123456789.'.includes(d))&&(a+=' ')}a+=s}return a},m=function(t){for(var a=this.rootSubjects(t),r=a.roots,o=[],s=0,d;s<r.length;s++)d=r[s],o.push(n(d,a));return o}.bind(this),h=function(t,n){var a=[],r=null,o=n.subjects[this.toStr(t)]||[];if('undefined'==typeof o)throw new Error('Cant find statements for '+t);for(var s=[],d=0,l;d<o.length;d++)l=o[d],l.predicate.uri===r?s.push(','):(r&&(a=a.concat([s]).concat([';']),s=[]),a.push(c[l.predicate.uri]?c[l.predicate.uri]:b(l.predicate,n))),r=l.predicate.uri,s.push(g(l.object,n));return a=a.concat([s]),a}.bind(this),g=function(t,n,a){return'BlankNode'===t.termType&&(a||void 0===n.rootsHash[t.toNT()])?n.subjects[this.toStr(t)]?['[',h(t,n),']']:'[]':b(t,n)}.bind(this);a.prototype.termToN3=b;var b=function(t,n){var a,r;switch(t.termType){case'Graph':return r=['{'],r=r.concat(m(t.statements)),r.concat(['}']);case'Collection':for(r=['('],a=0;a<t.elements.length;a++)r.push([g(t.elements[a],n)]);return r.push(')'),r;default:return this.atomicTermToN3(t);}}.bind(this),y=function(){var t='';for(var n in this.defaultNamespace&&(t+='@prefix : '+this.explicitURI(this.defaultNamespace)+'.\n'),this.prefixes)this.prefixes.hasOwnProperty(n)&&this.namespacesUsed[n]&&(t+='@prefix '+this.prefixes[n]+': '+this.explicitURI(n)+'.\n');return t+'\n'}.bind(this),v=m(t);return y()+function t(n,a){var s='',d=1e5;a===void 0&&(a=-1);for(var l=0,c;l<n.length;l++){if(c=n[l],'string'!=typeof c){var m=t(c,a+1);if(m.length<10*(o-r*a)&&0>m.indexOf('"""')){var h=f(c);h.length<o-r*a&&(c=h,m='')}m&&(d=1e4),s+=m}if('string'==typeof c){if(1===c.length&&'\n'===s.slice(-1)&&0<=',.;'.indexOf(c)){s=s.slice(0,-1)+c+'\n',d+=1;continue}if(d<r*a+4||d+c.length+1<o&&0>';.'.indexOf(s[s.length-2]))s=s.slice(0,-1)+' '+c+'\n',d+=c.length+1;else{var g=u(r*a)+c;s+=g+'\n',d=g.length,0>a&&(s+='\n',d=1e5)}}}return s}(v)},a.prototype.atomicTermToN3=function(t,n){switch(t.termType){case'BlankNode':case'Variable':return t.toNT();case'Literal':var a=t.value.toString();if(t.datatype&&0>this.flags.indexOf('x'))switch(t.datatype.uri){case'http://www.w3.org/2001/XMLSchema#integer':return a;case'http://www.w3.org/2001/XMLSchema#decimal':return 0>a.indexOf('.')&&(a+='.0'),a;case'http://www.w3.org/2001/XMLSchema#double':return 0>a.indexOf('.')&&(a+='.0'),0>a.indexOf('e')&&(a+='e0'),a;case'http://www.w3.org/2001/XMLSchema#boolean':return t.value?'true':'false';}var r=this.stringToN3(t.value);return t.language?r+='@'+t.language:!t.datatype.equals(l.string)&&(r+='^^'+this.atomicTermToN3(t.datatype,n)),r;case'NamedNode':return this.symbolToN3(t);default:throw new Error('Internal: atomicTermToN3 cannot handle '+t+' of termType: '+t.termType);}},a.prototype.validPrefix=new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/),a.prototype.forbidden1=new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm),a.prototype.forbidden3=new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm),a.prototype.stringToN3=function(t,n){n||(n='e');var r='',o,s,d,l,c;for(20<t.length&&'"'!==t.slice(-1)&&0>n.indexOf('n')&&(0<t.indexOf('\n')||0<t.indexOf('"'))?(l='"""',c=a.prototype.forbidden3):(l='"',c=a.prototype.forbidden1),o=0;o<t.length;){c.lastIndex=0;var u=c.exec(t.slice(o));if(null==u)break;s=o+c.lastIndex-1,r+=t.slice(o,s);var f=t[s];'"'===f&&'"""'===l&&'"""'!==t.slice(s,s+3)?r+=f:(d='\b\f\r\t\x0B\n\\"'.indexOf(f),r+=0<=d?'\\'+'bfrtvn\\"'[d]:0<=n.indexOf('e')?'\\u'+('000'+f.charCodeAt(0).toString(16).toLowerCase()).slice(-4):f),o=s+1}return l+r+t.slice(o)+l},a.prototype.symbolToN3=function(t){var n=t.uri,r=n.indexOf('#');if(0>r&&0>this.flags.indexOf('/')&&(r=n.lastIndexOf('/')),0<=r&&0>this.flags.indexOf('p')&&(0===n.indexOf('http')||0===n.indexOf('ws')||0===n.indexOf('file'))){for(var o=!0,s=r+1;s<n.length;s++)if(0<=a.prototype._notNameChars.indexOf(n[s])){o=!1;break}if(o){var d=n.slice(r+1),l=n.slice(0,r+1);if(this.defaultNamespace&&this.defaultNamespace===l&&0>this.flags.indexOf('d'))return 0<=this.flags.indexOf('k')&&0>this.keyords.indexOf(d)?d:':'+d;var c=this.prefixes[l];if(c||(c=this.makeUpPrefix(l)),c)return this.namespacesUsed[l]=!0,c+':'+d}}return this.explicitURI(n)},a.prototype.writeStore=function(t){var n=this.store,a=n.fetcher,r=a&&a.appNode,o=this.store.index[3];for(var d in o){var s=n.fromNT(d);r&&s.sameTerm(r)||t('\n'+this.atomicTermToN3(s)+' '+this.atomicTermToN3(n.sym('http://www.w3.org/2000/10/swap/log#semantics'))+' { '+this.statementsToN3(n.statementsMatching(void 0,void 0,void 0,s))+' }.\n')}n.statementsMatching(void 0,n.sym('http://www.w3.org/2007/ont/link#requestedURI')).map(function(a){t('\n<'+a.object.value+'> log:metadata {\n');var r=n.statementsMatching(void 0,void 0,void 0,a.subject);t(this.statementsToN3(this.statementsToN3(r))),t('}.\n')});var l=[];r&&l.push(r);var c=[];l.map(function(t){c=c.concat(n.statementsMatching(void 0,void 0,void 0,t))}),t(this.statementsToN3(c))},a.prototype.statementsToXML=function(t){function n(t){return'undefined'==typeof t?'@@@undefined@@@@':t.replace(/[&<"]/g,function(t){switch(t[0]){case'&':return'&amp;';case'<':return'&lt;';case'"':return'&quot;';}})}function o(t,n){for(var a=[],r=0;r<t.elements.length;r++)a.push(y(t.elements[r],n));return a}var s=4,c=80,u=[];u['http://www.w3.org/1999/02/22-rdf-syntax-ns#']=!0;var f='http://www.w3.org/1999/02/22-rdf-syntax-ns#_',m=function(t){for(var n='',a=0;a<t;a++)n+=' ';return n},h=function t(n){for(var a='',r=0;r<n.length;r++){var o=n[r],s='string'==typeof o?o:t(o);a+=s}return a},g=function(t){this.suggestPrefix('rdf','http://www.w3.org/1999/02/22-rdf-syntax-ns#');for(var n=this.rootSubjects(t),a=n.roots,r=[],o=0,s;o<a.length;o++)s=a[o],r.push(y(s,n));return r}.bind(this),b=function(t){return n(this.base?d.uri.refTo(this.base,t.uri):t.uri)}.bind(this),y=function(a,s){var d=[],c=s.subjects[this.toStr(a)],u,m,t,h;if('undefined'==typeof c)return v(a,s);c.sort(function(t,n){var a=t.predicate.uri,r=n.predicate.uri;if(a.substring(0,f.length)===f||r.substring(0,f.length)===f)return a.localeCompare(r);var o=a.substring(f.length),s=r.substring(f.length),d=parseInt(o,10),l=parseInt(s,10);return isNaN(d)||isNaN(l)||d!==o||l!==s?a.localeCompare(r):d-l});for(var g=0;g<c.length;g++){if(t=c[g],'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'===t.predicate.uri&&!u&&'symbol'===t.object.termType){u=t.object;continue}if(h=t.predicate,h.uri.substr(0,f.length)===f){var x=h.uri.substr(f.length),_=parseInt(x,10);x===_.toString()&&(h=new r('http://www.w3.org/1999/02/22-rdf-syntax-ns#li'))}switch(m=w(h),t.object.termType){case'BlankNode':d=1===s.incoming[t.object].length?d.concat(['<'+m+' rdf:parseType="Resource">',y(t.object,s),'</'+m+'>']):d.concat(['<'+m+' rdf:nodeID="'+t.object.toNT().slice(2)+'"/>']);break;case'NamedNode':d=d.concat(['<'+m+' rdf:resource="'+b(t.object)+'"/>']);break;case'Literal':d=d.concat(['<'+m+(t.object.datatype.equals(l.string)?'':' rdf:datatype="'+n(t.object.datatype.uri)+'"')+(t.object.language?' xml:lang="'+t.object.language+'"':'')+'>'+n(t.object.value)+'</'+m+'>']);break;case'Collection':d=d.concat(['<'+m+' rdf:parseType="Collection">',o(t.object,s),'</'+m+'>']);break;default:throw new Error('Can\'t serialize object of type '+t.object.termType+' into XML');}}var k=u?w(u):'rdf:Description',C='';return'BlankNode'===a.termType?(!s.incoming[a]||1!==s.incoming[a].length)&&(C=' rdf:nodeID="'+a.toNT().slice(2)+'"'):C=' rdf:about="'+b(a)+'"',['<'+k+C+'>'].concat([d]).concat(['</'+k+'>'])}.bind(this),v=function(t,a){var r=[],s=a.subjects[this.toStr(t)];if(!s)return r;s.sort();for(var d=0,c;d<s.length;d++)switch(c=s[d],c.object.termType){case'BlankNode':r=a.rootsHash[c.object.toNT()]?r.concat(['<'+w(c.predicate)+' rdf:nodeID="'+c.object.toNT().slice(2)+'">','</'+w(c.predicate)+'>']):r.concat(['<'+w(c.predicate)+' rdf:parseType="Resource">',v(c.object,a),'</'+w(c.predicate)+'>']);break;case'NamedNode':r=r.concat(['<'+w(c.predicate)+' rdf:resource="'+b(c.object)+'"/>']);break;case'Literal':r=r.concat(['<'+w(c.predicate)+(c.object.datatype.equals(l.string)?'':' rdf:datatype="'+n(c.object.datatype.value)+'"')+(c.object.language?' xml:lang="'+c.object.language+'"':'')+'>'+n(c.object.value)+'</'+w(c.predicate)+'>']);break;case'Collection':r=r.concat(['<'+w(c.predicate)+' rdf:parseType="Collection">',o(c.object,a),'</'+w(c.predicate)+'>']);break;default:throw new Error('Can\'t serialize object of type '+c.object.termType+' into XML');}return r}.bind(this),w=function(t){var n=t.uri,r=n.indexOf('#');if(0>r&&0>this.flags.indexOf('/')&&(r=n.lastIndexOf('/')),0>r)throw new Error('Cannot make qname out of <'+n+'>');for(var o=r+1;o<n.length;o++)if(0<=a.prototype._notNameChars.indexOf(n[o]))throw new Error('Invalid character "'+n[o]+'" cannot be in XML qname for URI: '+n);var s=n.slice(r+1),d=n.slice(0,r+1);if(this.defaultNamespace&&this.defaultNamespace===d&&0>this.flags.indexOf('d'))return s;var l=this.prefixes[d];return l||(l=this.makeUpPrefix(d)),u[d]=!0,l+':'+s}.bind(this),x=g(t),_='<rdf:RDF';for(var k in this.defaultNamespace&&(_+=' xmlns="'+n(this.defaultNamespace)+'"'),u)if(u.hasOwnProperty(k)){var C=this.base&&this.flags.includes('z')?d.uri.refTo(this.base,k):k;_+='\n xmlns:'+this.prefixes[k]+'="'+n(C)+'"'}_+='>';var T=[_,x,'</rdf:RDF>'];return function t(n,a){var r='',o=1e5,d;a||(a=0);for(var l=0,u;l<n.length;l++){if(u=n[l],'string'!=typeof u){var f=t(u,a+1);f.length<10*(c-s*a)&&0>f.indexOf('"""')&&(d=h(u),d.length<c-s*a&&(u='   '+d,f='')),f&&(o=1e4),r+=f}'string'==typeof u&&(o<s*a+4?(r=r.slice(0,-1)+' '+u+'\n',o+=u.length+1):(d=m(s*a)+u,r+=d+'\n',o=d.length))}return r}(T,-1)};return function(t){return new a(t)}}();t.exports=c},function(t,n,a){'use strict';function r(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function s(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(32),c=a(71),u=a(8),f=a(51),m=a(145),h=a(99).parseRDFaDOM,g=a(100),b=a(12),y=a(24),v=a(88),w={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},x={rdf:'application/rdf+xml',owl:'application/rdf+xml',n3:'text/n3',ttl:'text/turtle',nt:'text/n3',acl:'text/n3',html:'text/html',xml:'text/xml'},_={link:f('http://www.w3.org/2007/ont/link#'),http:f('http://www.w3.org/2007/ont/http#'),httph:f('http://www.w3.org/2007/ont/httph#'),rdf:f('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),rdfs:f('http://www.w3.org/2000/01/rdf-schema#'),dc:f('http://purl.org/dc/elements/1.1/'),ldp:f('http://www.w3.org/ns/ldp#')},k=function t(n,a){s(this,t),this.response=n,this.dom=a},C=function(t){function n(){return s(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),d(n,[{key:'parse',value:function(t,n,a){var r=t.store;this.dom||(this.dom=y.parseXML(n));var o=this.dom.documentElement;if('parsererror'===o.nodeName)return t.failFetch(a,'Badly formed XML in '+a.resource.uri,'parse_error');var s=new g(r);try{s.parse(this.dom,a.original.uri,a.original)}catch(n){return t.failFetch(a,'Syntax error parsing RDF/XML! '+n,'parse_error')}return a.noMeta||r.add(a.original,_.rdf('type'),_.link('RDFDocument'),t.appNode),t.doneFetch(a,this.response)}}],[{key:'toString',value:function(){return'RDFXMLHandler'}},{key:'register',value:function(t){t.mediatypes['application/rdf+xml']={q:0.9}}}]),n}(k);C.pattern=/application\/rdf\+xml/;var T=function(t){function n(){return s(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),d(n,[{key:'parse',value:function(t,n,a){var r,o;this.dom||(this.dom=y.parseXML(n));var s=t.store,d=this.dom.getElementsByTagName('title');0<d.length&&s.add(a.resource,_.dc('title'),s.literal(d[0].textContent),a.resource);for(var l=this.dom.getElementsByTagName('link'),c=l.length-1;0<=c;c--)r=l[c].getAttribute('rel'),o=!1,r||(r=l[c].getAttribute('rev'),o=!0),r&&t.linkData(a.original,r,l[c].getAttribute('href'),a.resource,o);for(var u=this.dom.getElementsByTagName('script'),f=0,g;f<u.length;f++)g=u[f].getAttribute('type'),w[g]&&m(u[f].textContent,s,a.original.uri,g);if(a.noMeta||s.add(a.resource,_.rdf('type'),_.link('WebPage'),t.appNode),!a.noRDFa&&h)try{h(this.dom,s,a.original.uri)}catch(n){var b='Error trying to parse '+a.resource+' as RDFa:\n'+n+':\n'+n.stack;return t.failFetch(a,b,'parse_error')}return t.doneFetch(a,this.response)}}],[{key:'toString',value:function(){return'XHTMLHandler'}},{key:'register',value:function(t){t.mediatypes['application/xhtml+xml']={}}}]),n}(k);T.pattern=/application\/xhtml/;var E=function(t){function n(){return s(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),d(n,[{key:'parse',value:function(t,n,a){for(var r=y.parseXML(n),o=0;o<r.childNodes.length;o++)if(1===r.childNodes[o].nodeType){var s=r.childNodes[o].namespaceURI;if(s&&s===s.rdf){t.addStatus(a.req,'Has XML root element in the RDF namespace, so assume RDF/XML.');var d=new C(this.response,r);return d.parse(t,n,a)}break}if(r.doctype&&'html'===r.doctype.name&&r.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&r.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){t.addStatus(a.req,'Has XHTML DOCTYPE. Switching to XHTML Handler.\n');var l=new T(this.response,r);return l.parse(t,n,a)}var c=r.getElementsByTagName('html')[0];if(c){var u=c.getAttribute('xmlns');if(u&&u.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){t.addStatus(a.req,'Has a default namespace for XHTML. Switching to XHTMLHandler.\n');var f=new T(this.response,r);return f.parse(t,n,a)}}return t.failFetch(a,'Unsupported dialect of XML: not RDF or XHTML namespace, etc.\n'+n.slice(0,80))}}],[{key:'toString',value:function(){return'XMLHandler'}},{key:'register',value:function(t){t.mediatypes['text/xml']={q:0.5},t.mediatypes['application/xml']={q:0.5}}}]),n}(k);E.pattern=/(text|application)\/(.*)xml/;var S=function(t){function n(){return s(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),d(n,[{key:'parse',value:function(t,n,a){var r=t.store;if(n.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)){t.addStatus(a.req,'Has an XML declaration. We\'ll assume it\'s XHTML as the content-type was text/html.\n');var o=new T(this.response);return o.parse(t,n,a)}if(n.match(/.*<!DOCTYPE\s+html[^<]+-\/\/W3C\/\/DTD XHTML[^<]+http:\/\/www.w3.org\/TR\/xhtml[^<]+>/)){t.addStatus(a.req,'Has XHTML DOCTYPE. Switching to XHTMLHandler.\n');var s=new T(this.response);return s.parse(t,n,a)}if(n.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/)){t.addStatus(a.req,'Has default namespace for XHTML, so switching to XHTMLHandler.\n');var d=new T(this.response);return d.parse(t,n,a)}var l=/<title>([\s\S]+?)<\/title>/im.exec(n);return l&&r.add(a.resource,_.dc('title'),r.literal(l[1]),a.resource),r.add(a.resource,_.rdf('type'),_.link('WebPage'),t.appNode),t.addStatus(a.req,'non-XML HTML document, not parsed for data.'),t.doneFetch(a,this.response)}}],[{key:'toString',value:function(){return'HTMLHandler'}},{key:'register',value:function(t){t.mediatypes['text/html']={q:0.9}}}]),n}(k);S.pattern=/text\/html/;var A=function(t){function n(){return s(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),d(n,[{key:'parse',value:function(t,n,a){if(n.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)){t.addStatus(a.req,'Warning: '+a.resource+' has an XML declaration. We\'ll assume it\'s XML but its content-type wasn\'t XML.\n');var r=new E(this.response);return r.parse(t,n,a)}if(n.slice(0,500).match(/xmlns:/)){t.addStatus(a.req,'May have an XML namespace. We\'ll assume it\'s XML but its content-type wasn\'t XML.\n');var o=new E(this.response);return o.parse(t,n,a)}return t.addStatus(a.req,'Plain text document, no known RDF semantics.'),t.doneFetch(a,this.response)}}],[{key:'toString',value:function(){return'TextHandler'}},{key:'register',value:function(t){t.mediatypes['text/plain']={q:0.5}}}]),n}(k);A.pattern=/text\/plain/;var I=function(t){function n(){return s(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),d(n,[{key:'parse',value:function(t,n,a){var r=t.store,o=c(r,r,a.original.uri,a.original.uri,null,null,'',null);try{o.loadBuf(n)}catch(n){var s='Error trying to parse '+a.resource+' as Notation3:\n'+n+':\n'+n.stack;return t.failFetch(a,s,'parse_error')}return t.addStatus(a.req,'N3 parsed: '+o.statementCount+' triples in '+o.lines+' lines.'),t.store.add(a.original,_.rdf('type'),_.link('RDFDocument'),t.appNode),t.doneFetch(a,this.response)}}],[{key:'toString',value:function(){return'N3Handler'}},{key:'register',value:function(t){t.mediatypes['text/n3']={q:'1.0'},t.mediatypes['text/turtle']={q:1}}}]),n}(k);I.pattern=/(application|text)\/(x-)?(rdf\+)?(n3|turtle)/;var N={RDFXMLHandler:C,XHTMLHandler:T,XMLHandler:E,HTMLHandler:S,TextHandler:A,N3Handler:I},j=function(){function t(n){var r=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};s(this,t),this.store=n,this.timeout=o.timeout||3e4,this._fetch=o.fetch,this._fetch||('undefined'==typeof window?this._fetch=a(44):this._fetch=window.fetch.bind(window)),this.appNode=this.store.bnode(),this.store.fetcher=this,this.requested={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:0.9},"*/*":{q:0.1}},y.callbackify(this,['request','fail','refresh','retract','done']),Object.keys(N).map(function(t){return r.addHandler(N[t])})}return d(t,[{key:'fetch',value:function(t){var n=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t instanceof Array)return Promise.all(t.map(function(t){return n.fetch(t,Object.assign({},a))}));var r=t.uri||t;return r=r.split('#')[0],a=this.initFetchOptions(r,a),this.pendingFetchPromise(r,a.baseURI,a)}},{key:'pendingFetchPromise',value:function(t,n,a){var r;return!a.force&&this.fetchQueue[n]?r=this.fetchQueue[n]:(r=Promise.race([this.setRequestTimeout(t,a),this.fetchUri(t,a)]),this.fetchQueue[n]=r,this.cleanupFetchRequest(n,a,this.timeout)),r}},{key:'cleanupFetchRequest',value:function(t,n,a){var r=this;setTimeout(function(){r.isPending(t)||delete r.fetchQueue[t]},a)}},{key:'load',value:function(t,n){return this.fetch(t,n)}},{key:'initFetchOptions',value:function(n,a){var r=this.store,o=!a.method||'GET'===a.method.toUpperCase();o||(a.force=!0),a.resource=r.sym(n),a.baseURI=a.baseURI||n,a.original=r.sym(a.baseURI),a.req=r.bnode(),a.headers=a.headers||{},a.contentType&&(a.headers['content-type']=a.contentType),a.force&&(a.cache='no-cache');var s=this.acceptString();a.headers.accept=s;var d=t.offlineOverride(n);a.requestedURI=d,t.withCredentials(d,a)&&(a.credentials='include');var l=t.proxyIfNecessary(d);return d!==l&&(a.proxyUsed=!0),a.actualProxyURI=l,a}},{key:'fetchUri',value:function(n,a){var r=this;if(!n)return Promise.reject(new Error('Cannot fetch an empty uri'));if(t.unsupportedProtocol(n))return this.failFetch(a,'Unsupported protocol','unsupported_protocol');var o=this.getState(n);if(!a.force){if('fetched'===o)return Promise.resolve(this.doneFetch(a,{status:200,ok:!0}));if('failed'===o)return this.failFetch(a,'Previously failed: '+this.requested[n],this.requested[n])}else delete this.nonexistent[n];this.fireCallbacks('request',[n]),this.requested[n]=!0,a.noMeta||this.saveRequestMetadata(n,a);var s=a.actualProxyURI;return this._fetch(s,a).then(function(t){return r.handleResponse(t,n,a)}).catch(function(t){return r.handleError(t,n,a)})}},{key:'nowOrWhenFetched',value:function(t,n,a){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};t=t.uri||t,'function'==typeof n?a=n:'undefined'==typeof n||(n instanceof u?r.referringTerm=n:r=n),this.fetch(t,r).then(function(t){a&&a(!0,null,t)}).catch(function(t){a(!1,t.message)})}},{key:'addStatus',value:function(t,n){var a=new Date;n='['+a.getHours()+':'+a.getMinutes()+':'+a.getSeconds()+'.'+a.getMilliseconds()+'] '+n;var r=this.store,o=r.the(t,_.link('status'));o&&o.append?o.append(r.literal(n)):l.warn('web.js: No list to add to: '+o+','+n)}},{key:'failFetch',value:function(t,n,a){this.addStatus(t.req,n),t.noMeta||this.store.add(t.original,_.link('error'),n),t.resource.sameTerm(t.original)?console.log('@@ Recording failure for '+t.original+': '+a):console.log('@@ Recording failure original '+t.original+'( as '+t.resource+') : '+a);var r=!t.method||'GET'===t.method.toUpperCase()||'HEAD'===t.method.toUpperCase();return r&&(this.requested[b.docpart(t.original.uri)]=a,this.fireCallbacks('fail',[t.original.uri,n])),Promise.resolve({ok:!1,error:n,status:a})}},{key:'linkData',value:function(t,n,a,r,o){if(a){var s=this.store,d=s.sym(b.join(a,t.uri)),l;if('alternate'===n||'seeAlso'===n||'meta'===n||'describedby'===n){if(d.uri===t.uri)return;l=_.rdfs('seeAlso')}else l='type'===n?s.sym('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'):s.sym(b.join(encodeURIComponent(n),'http://www.iana.org/assignments/link-relations/'));o?s.add(d,l,t,r):s.add(t,l,d,r)}}},{key:'parseLinkHeader',value:function(t,n,a){if(t)for(var r=/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,o=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,d=t.match(r),l=0;l<d.length;l++)for(var c=d[l].split('>'),u=c[0].substring(1),f=c[1],m=f.match(o),s=0;s<m.length;s++){var h=m[s],g=h.split('='),b=g[1].replace(/["']/g,'');this.linkData(n,b,u,a)}}},{key:'doneFetch',value:function(t,n){return this.addStatus(t.req,'Done.'),this.requested[t.original.uri]='done',this.fireCallbacks('done',[t.original.uri]),n.req=t.req,n}},{key:'nowKnownAs',value:function(t,n){this.lookedUp[t.uri]?!this.lookedUp[n.uri]&&this.lookUpThing(n,t):this.lookedUp[n.uri]&&!this.lookedUp[t.uri]&&this.lookUpThing(t,n)}},{key:'putBack',value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t=t.uri||t;var a=new u(t).doc();return n.data=v(a,this.store,a.uri,n.contentType||'text/turtle'),this.webOperation('PUT',t,n)}},{key:'webCopy',value:function(t,n,a){var r=this;return this.webOperation('GET',t).then(function(t){return r.webOperation('PUT',n,{data:t.responseText,contentType:a})})}},{key:'delete',value:function(t,n){var a=this;return this.webOperation('DELETE',t,n).then(function(n){return a.requested[t]=404,a.nonexistent[t]=!0,a.unload(a.store.sym(t)),n})}},{key:'createContainer',value:function(t,n,a){var r={"content-type":'text/turtle',link:_.ldp('BasicContainer')+'; rel="type"'};n&&(r.slug=n);var o={headers:r};return a&&(o.body=a),this.webOperation('POST',t,o)}},{key:'webOperation',value:function(t,n){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return a.method=t,a.body=a.data||a.body,a.force=!0,this.fetch(n,a)}},{key:'lookUpThing',value:function(t,n){var a=this,r=this.store.uris(t);return r=r.map(function(t){return b.docpart(t)}),r.forEach(function(t){a.lookedUp[t]=!0}),this.fetch(r,{referringTerm:n})}},{key:'getHeader',value:function(t,n){for(var a=this.store,o=a.each(void 0,_.link('requestedURI'),t.uri),s=0,r;s<o.length;s++)if(r=o[s],void 0!==r){var d=a.any(r,_.link('response'));if(void 0!==d){var l=a.each(d,_.httph(n.toLowerCase()));return l.length?l.map(function(t){return t.value}):[]}}}},{key:'saveRequestMetadata',value:function(t,n){var a=n.req,r=this.store,o=n.referringTerm;this.addStatus(n.req,'Accept: '+n.headers.accept),o&&o.uri&&r.add(t,_.link('requestedBy'),o.uri,this.appNode),n.original&&n.original.uri!==t&&r.add(a,_.link('orginalURI'),r.literal(n.original.uri),this.appNode);var s=new Date,d='['+s.getHours()+':'+s.getMinutes()+':'+s.getSeconds()+'] ';r.add(a,_.rdfs('label'),r.literal(d+' Request for '+t),this.appNode),r.add(a,_.link('requestedURI'),r.literal(t),this.appNode),r.add(a,_.link('status'),r.collection(),this.appNode)}},{key:'saveResponseMetadata',value:function(t,n){var a=this.store,r=a.bnode();return(a.add(n.req,_.link('response'),r),a.add(r,_.http('status'),a.literal(t.status),r),a.add(r,_.http('statusText'),a.literal(t.statusText),r),!n.resource.uri.startsWith('http'))?r:(t.headers.forEach(function(t,o){a.add(r,_.httph(o),t,r),'content-type'===o&&a.add(n.resource,_.rdf('type'),y.mediaTypeClass(t),r)}),r)}},{key:'objectRefresh',value:function(t){var n=this.store.uris(t);if('undefined'!=typeof n)for(var a=0;a<n.length;a++)this.refresh(this.store.sym(b.docpart(n[a])))}},{key:'refresh',value:function(t,n){this.fireCallbacks('refresh',arguments),this.nowOrWhenFetched(t,{force:!0,clearPreviousData:!0},n)}},{key:'retract',value:function(t){this.store.removeMany(void 0,void 0,void 0,t),t.uri&&delete this.requested[b.docpart(t.uri)],this.fireCallbacks('retract',arguments)}},{key:'getState',value:function(t){return'undefined'==typeof this.requested[t]?'unrequested':!0===this.requested[t]?'requested':'done'===this.requested[t]?'fetched':'redirected'===this.requested[t]?this.getState(this.redirectedTo[t]):'failed'}},{key:'isPending',value:function(t){return!0===this.requested[t]}},{key:'unload',value:function(t){this.store.removeDocument(t),delete this.requested[t.uri]}},{key:'addHandler',value:function(t){this.handlers.push(t),t.register(this)}},{key:'retryNoCredentials',value:function(t,n){console.log('web: Retrying with no credentials for '+n.resource),n.retriedWithNoCredentials=!0,delete this.requested[t];var a=Object.assign({},n,{withCredentials:!1});return this.addStatus(n.req,'Abort: Will retry with credentials SUPPRESSED to see if that helps'),this.fetch(t,a)}},{key:'isCrossSite',value:function(t){if('undefined'==typeof document||!document.location)return!1;var n=b.hostpart,a=''+document.location;return n(a)&&n(t)&&n(a)!==n(t)}},{key:'handleError',value:function(n,a,r){if(this.isCrossSite(a)){if(r.withCredentials&&!r.retriedWithNoCredentials)return this.retryNoCredentials(a,r);var o=t.crossSiteProxy(a);if(o&&!r.proxyUsed)return console.log('web: Direct failed so trying proxy '+o),this.redirectToProxy(o,r)}var s=n.message||n.status+' '+n.statusText;return this.failFetch(r,'Request failed: '+s,n.status)}},{key:'addType',value:function(t,n,a,r){var o=n;if(r){var s=a.any(o,_.link('requestedURI'));s&&s!==r&&a.add(a.sym(r),_.rdf('type'),t,this.appNode)}for(;;){var d=a.any(o,_.link('requestedURI'));if(d&&d.value&&a.add(a.sym(d.value),_.rdf('type'),t,this.appNode),o=a.any(void 0,a.sym('http://www.w3.org/2007/ont/link#redirectedRequest'),o),!o)break;var l=a.any(o,a.sym('http://www.w3.org/2007/ont/link#response'));if(!l)break;var c=a.any(l,a.sym('http://www.w3.org/2007/ont/http#status'));if(!c)break;if('301'!==c&&'302'!==c)break}}},{key:'handleResponse',value:function(t,n,a){var r=this,o=this.store,s=t.headers,d=a.req,l=this.saveResponseMetadata(t,a),c=this.normalizedContentType(a,s)||'',u=s.get('content-location');if(0===t.status)return console.log('Masked error - status 0 for '+n),this.handleError(t,n,a);if(400<=t.status)return 404===t.status&&(this.nonexistent[a.original.uri]=!0,this.nonexistent[n]=!0),this.saveErrorResponse(t,l).then(function(){var n='HTTP error for '+a.resource+': '+t.status+' '+t.statusText;return r.failFetch(a,n,t.status)});var f=null,m=null;if(u&&(m=b.join(u,n),m!==n&&(f=m)),200===t.status){this.addType(_.link('Document'),d,o,n),f&&this.addType(_.link('Document'),d,o,f),a.clearPreviousData&&o.removeDocument(a.resource);var h=c.includes('image/')||c.includes('application/pdf');c&&h&&(this.addType(o.sym('http://purl.org/dc/terms/Image'),d,o,n),f&&this.addType(o.sym('http://purl.org/dc/terms/Image'),d,o,f))}if(u){if(!a.force&&f&&'done'===this.requested[m])return this.doneFetch(a,t);this.requested[m]=!0}this.parseLinkHeader(s.get('link'),a.original,d);var g=this.handlerForContentType(c,t);return g?t.text().then(function(n){return t.responseText=n,g.parse(r,n,a)}):(this.addStatus(d,'Fetch over. No data handled.'),this.doneFetch(a,t))}},{key:'saveErrorResponse',value:function(t,n){var a=this.store;return t.text().then(function(t){10<t.length&&a.add(n,_.http('content'),a.literal(t),n)})}},{key:'handlerForContentType',value:function(t,n){if(!t)return null;var a=this.handlers.find(function(n){return t.match(n.pattern)});return a?new a(n):null}},{key:'guessContentType',value:function(t){return x[t.split('.').pop()]}},{key:'normalizedContentType',value:function(t,n){if(t.forceContentType)return t.forceContentType;var a=n.get('content-type');if(!a||a.includes('application/octet-stream')){var r=this.guessContentType(t.resource.uri);if(r)return r}var o=b.protocol(t.resource.uri);return!a&&['file','chrome'].includes(o)?'text/xml':a}},{key:'redirectToProxy',value:function(t,n){var a=this;this.addStatus(n.req,'BLOCKED -> Cross-site Proxy to <'+t+'>'),n.proxyUsed=!0;var r=this.store,o=n.req;n.noMeta||(r.add(o,_.link('redirectedTo'),r.sym(t),o),this.addStatus(o,'redirected to new request')),this.requested[n.resource.uri]='redirected',this.redirectedTo[n.resource.uri]=t;var s=Object.assign({},n);return s.baseURI=n.resource.uri,this.fetchUri(t,s).then(function(t){return s.noMeta||r.add(o,_.link('redirectedRequest'),s.req,a.appNode),t})}},{key:'setRequestTimeout',value:function(t,n){var a=this;return new Promise(function(r){setTimeout(function(){!a.isPending(t)||n.retriedWithNoCredentials||n.proxyUsed||r(a.failFetch(n,'Request to '+t+' timed out','timeout'))},a.timeout)})}},{key:'addFetchCallback',value:function(t,n){this.fetchCallbacks[t]?this.fetchCallbacks[t].push(n):this.fetchCallbacks[t]=[n]}},{key:'acceptString',value:function(){var t='';for(var n in this.mediatypes)for(var a in''!=t&&(t+=', '),t+=n,this.mediatypes[n])t+=';'+a+'='+this.mediatypes[n][a];return t}}],[{key:'crossSiteProxy',value:function(n){return t.crossSiteProxyTemplate?t.crossSiteProxyTemplate.replace('{uri}',encodeURIComponent(n)):void 0}},{key:'offlineOverride',value:function(t){var n=t;return'undefined'!=typeof tabulator&&tabulator.preferences.get('offlineModeUsingLocalhost')&&'http://'===n.slice(0,7)&&'localhost/'!==n.slice(7,17)&&(n='http://localhost/'+n.slice(7),l.warn('Localhost kludge for offline use: actually getting <'+n+'>')),n}},{key:'proxyIfNecessary',value:function(n){if('undefined'!=typeof tabulator&&tabulator.isExtension)return n;if('undefined'!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.localSiteMap){var a=n.split('/').slice(2),r=function t(n,a){var r=a[n.shift()];return r?'string'==typeof r?r+n.join('/'):n?t(n,r):null:null},o=r(a,$SolidTestEnvironment.localSiteMap);if(o)return o}return t.crossSiteProxyTemplate&&'undefined'!=typeof document&&document.location&&'https:'===(''+document.location).slice(0,6)&&'http:'===n.slice(0,5)?t.crossSiteProxyTemplate.replace('{uri}',encodeURIComponent(n)):n}},{key:'unsupportedProtocol',value:function(t){var n=b.protocol(t);return'tel'===n||'mailto'===n||'urn'===n}},{key:'withCredentials',value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.startsWith('https:');return void 0!==n.withCredentials&&(a=n.withCredentials),a}}]),t}();t.exports=j,t.exports.HANDLERS=N,t.exports.CONTENT_TYPE_BY_EXT=x},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(31),d=a(40),l=a(70),c=a(8),u=a(12),f=a(24);if('undefined'==typeof m)var m={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var h=function(){function t(n,a){r(this,t),this.options=a||{},this.kb=n,this.target=a.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:'br img input area base basefont col colgroup source wbr isindex link meta param hr'},this.theOne='_:'+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:'http://www.w3.org/XML/1998/namespace',localName:'lang'}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return o(t,[{key:'addTriple',value:function(t,n,a,r){var o,s,d,c;o='undefined'==typeof n?l.namedNode(this.options.base):this.toRDFNodeObject(n),d=this.toRDFNodeObject(a),s=this.toRDFNodeObject(r),c=l.namedNode(this.options.base),this.kb.add(o,d,s,c)}},{key:'ancestorPath',value:function(t){for(var n='';t&&t.nodeType!==m.DOCUMENT_NODE;)n='/'+t.localName+n,t=t.parentNode;return n}},{key:'copyMappings',value:function(t){var n={};for(var a in t)n[a]=t[a];return n}},{key:'copyProperties',value:function(){}},{key:'deriveDateTimeType',value:function(n){for(var a=0,r;a<t.dateTimeTypes.length;a++)if(r=t.dateTimeTypes[a].pattern.exec(n),r&&r[0].length===n.length)return t.dateTimeTypes[a].type;return null}},{key:'init',value:function(){}},{key:'newBlankNode',value:function(){return this.blankCounter++,'_:'+this.blankCounter}},{key:'newSubjectOrigin',value:function(){}},{key:'parseCURIE',value:function(n,a){var r=n.indexOf(':'),o;if(0<=r){var s=n.substring(0,r);if(''===s)return o=a[''],o?o+n.substring(r+1):null;if('_'===s)return'_:'+n.substring(r+1);if(t.NCNAME.test(s)&&(o=a[s],o))return o+n.substring(r+1)}return null}},{key:'parseCURIEOrURI',value:function(t,n,a){var r=this.parseCURIE(t,n,a);return r?r:this.resolveAndNormalize(a,t)}},{key:'parsePredicate',value:function(t,n,a,r,o,s){if(''===t)return null;var d=this.parseTermOrCURIEOrAbsURI(t,n,s?null:a,r,o);return d&&0===d.indexOf('_:')?null:d}},{key:'parsePrefixMappings',value:function(t,n){for(var a=this.tokenize(t),r=null,o=0;o<a.length;o++)':'===a[o][a[o].length-1]?r=a[o].substring(0,a[o].length-1):r&&(n[r]=this.options.base?u.join(a[o],this.options.base):a[o],r=null)}},{key:'parseSafeCURIEOrCURIEOrURI',value:function(t,n,a){return t=this.trim(t),'['===t.charAt(0)&&']'===t.charAt(t.length-1)?(t=t.substring(1,t.length-1),t=t.trim(t),0===t.length?null:'_:'===t?this.theOne:this.parseCURIE(t,n,a)):this.parseCURIEOrURI(t,n,a)}},{key:'parseTermOrCURIEOrAbsURI',value:function(t,n,a,r,o){t=this.trim(t);var s=this.parseCURIE(t,r,o);if(s)return s;if(a){if(n&&!this.absURIRE.exec(t))return n+t;var d=a[t];if(d)return d;var l=t.toLowerCase();if(d=a[l],d)return d}return this.absURIRE.exec(t)?this.resolveAndNormalize(o,t):null}},{key:'parseTermOrCURIEOrURI',value:function(t,n,a,r,o){t=this.trim(t);var s=this.parseCURIE(t,r,o);if(s)return s;var d=a[t];if(d)return d;var l=t.toLowerCase();return(d=a[l],d)?d:n&&!this.absURIRE.exec(t)?n+t:this.resolveAndNormalize(o,t)}},{key:'parseURI',value:function(t){return t}},{key:'process',value:function(n,a){var r;n.nodeType===m.DOCUMENT_NODE?(r=n.baseURI,n=n.documentElement,n.baseURI=r,this.setContext(n)):n.parentNode.nodeType===m.DOCUMENT_NODE&&this.setContext(n);var o=[],s=function(t){if(!t&&a&&a.baseURI)return a.baseURI;var n=t.indexOf('#');return 0<=n&&(t=t.substring(0,n)),a&&a.baseURIMap&&(t=a.baseURIMap(t)),t};for(o.push({current:n,context:this.push(null,s(n.baseURI))});0<o.length;){var d=o.shift();if(d.parent){if(d.context.parent&&d.context.parent.listMapping===d.listMapping)continue;for(var l in d.listMapping){var c=d.listMapping[l];if(0===c.length){this.addTriple(d.parent,d.subject,l,{type:t.objectURI,value:'http://www.w3.org/1999/02/22-rdf-syntax-ns#nil'});continue}for(var f=[],h=0;h<c.length;h++)f.push(this.newBlankNode());for(var g=0;g<f.length;g++)this.addTriple(d.parent,f[g],'http://www.w3.org/1999/02/22-rdf-syntax-ns#first',c[g]),this.addTriple(d.parent,f[g],'http://www.w3.org/1999/02/22-rdf-syntax-ns#rest',{type:t.objectURI,value:g+1<f.length?f[g+1]:'http://www.w3.org/1999/02/22-rdf-syntax-ns#nil'});this.addTriple(d.parent,d.subject,l,{type:t.objectURI,value:f[0]})}continue}var b=d.current,y=d.context,v=!1,w=null,x=null,_=null,k=y.prefixes,C=!1,T=[],E=y.listMapping,S=!y.parent,A=y.language,I=y.vocabulary;r=this.parseURI(s(b.baseURI)),b.item=null;var N=b.getAttributeNode('vocab');if(N){var j=this.trim(N.value);if(0<j.length){I=j;var R=r.spec;this.addTriple(b,R,'http://www.w3.org/ns/rdfa#usesVocabulary',{type:t.objectURI,value:I})}else I=this.vocabulary}for(var L=0,O;L<b.attributes.length;L++)if(O=b.attributes[L],'x'===O.nodeName.charAt(0)&&0===O.nodeName.indexOf('xmlns:')){C||(k=this.copyMappings(k),C=!0);var P=O.nodeName.substring(6),M=t.trim(O.value);k[P]=this.options.base?u.join(M,this.options.base):M}var D=b.getAttributeNode('prefix');D&&(!C&&(k=this.copyMappings(k),C=!0),this.parsePrefixMappings(D.value,k));for(var B=null,U=0;!B&&U<this.langAttributes.length;U++)B=b.getAttributeNodeNS(this.langAttributes[U].namespaceURI,this.langAttributes[U].localName);if(B){var q=t.trim(B.value);A=0<q.length?q:null}var F=b.getAttributeNode('rel'),z=b.getAttributeNode('rev'),H=b.getAttributeNode('typeof'),W=b.getAttributeNode('property'),V=b.getAttributeNode('datatype'),G=this.inHTMLMode?b.getAttributeNode('datetime'):null,K=b.getAttributeNode('content'),J=b.getAttributeNode('about'),X=b.getAttributeNode('src'),Z=b.getAttributeNode('resource'),Y=b.getAttributeNode('href'),Q=b.getAttributeNode('inlist'),ee=[],te,ne;if(F){ne=this.tokenize(F.value);for(var ae=0;ae<ne.length;ae++)te=this.parsePredicate(ne[ae],I,y.terms,k,r,this.inHTMLMode&&null!==W),te&&ee.push(te)}var re=[];if(z){ne=this.tokenize(z.value);for(var oe=0;oe<ne.length;oe++)te=this.parsePredicate(ne[oe],I,y.terms,k,r,this.inHTMLMode&&W),te&&re.push(te)}if(this.inHTMLMode&&(F||z)&&W&&(0===ee.length&&(F=null),0===re.length&&(z=null)),F||z?(J&&(w=this.parseSafeCURIEOrCURIEOrURI(J.value,k,r)),H&&(_=w),!w&&(b.parentNode.nodeType===m.DOCUMENT_NODE?w=s(b.baseURI):y.parentObject&&(w=s(b.parentNode.baseURI)===y.parentObject?s(b.baseURI):y.parentObject)),Z&&(x=this.parseSafeCURIEOrCURIEOrURI(Z.value,k,r)),!x&&(Y?x=this.resolveAndNormalize(r,encodeURI(Y.value)):X?x=this.resolveAndNormalize(r,encodeURI(X.value)):H&&!J&&!(this.inXHTMLMode&&('head'===b.localName||'body'===b.localName))&&(x=this.newBlankNode())),H&&!J&&this.inXHTMLMode&&('head'===b.localName||'body'===b.localName)?_=w:H&&!J&&(_=x)):!W||K||V?(J&&(w=this.parseSafeCURIEOrCURIEOrURI(J.value,k,r)),!w&&Z&&(w=this.parseSafeCURIEOrCURIEOrURI(Z.value,k,r)),!w&&Y&&(w=this.resolveAndNormalize(r,encodeURI(Y.value))),!w&&X&&(w=this.resolveAndNormalize(r,encodeURI(X.value))),!w&&(b.parentNode.nodeType===m.DOCUMENT_NODE?w=s(b.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&('head'===b.localName||'body'===b.localName)?w=s(b.parentNode.baseURI)===y.parentObject?s(b.baseURI):y.parentObject:H?w=this.newBlankNode():y.parentObject&&(w=s(b.parentNode.baseURI)===y.parentObject?s(b.baseURI):y.parentObject,!W&&(v=!0))),H&&(_=w)):(J&&(w=this.parseSafeCURIEOrCURIEOrURI(J.value,k,r),H&&(_=w)),w||b.parentNode.nodeType!==m.DOCUMENT_NODE?!w&&y.parentObject&&(w=s(b.parentNode.baseURI)===y.parentObject?s(b.baseURI):y.parentObject):(w=s(b.baseURI),H&&(_=w)),H&&!_&&(Z&&(_=this.parseSafeCURIEOrCURIEOrURI(Z.value,k,r)),!_&&Y&&(_=this.resolveAndNormalize(r,encodeURI(Y.value))),!_&&X&&(_=this.resolveAndNormalize(r,encodeURI(X.value))),!_&&(this.inXHTMLMode||this.inHTMLMode)&&('head'===b.localName||'body'===b.localName)&&(_=w),!_&&(_=this.newBlankNode()),x=_)),w&&(J||Z||_)){var ie=w;H&&!J&&!Z&&x&&(ie=x),this.newSubjectOrigin(b,ie)}if(_){ne=this.tokenize(H.value);for(var se=0,de;se<ne.length;se++)de=this.parseTermOrCURIEOrAbsURI(ne[se],I,y.terms,k,r),de&&this.addTriple(b,_,t.typeURI,{type:t.objectURI,value:de})}if(w&&w!==y.parentObject&&(E={},S=!0),x){if(F&&Q)for(var le=0,pe;le<ee.length;le++)pe=E[ee[le]],pe||(pe=[],E[ee[le]]=pe),pe.push({type:t.objectURI,value:x});else if(F)for(var ce=0;ce<ee.length;ce++)this.addTriple(b,w,ee[ce],{type:t.objectURI,value:x});if(z)for(var ue=0;ue<re.length;ue++)this.addTriple(b,x,re[ue],{type:t.objectURI,value:w})}else{if(w&&!x&&(F||z)&&(x=this.newBlankNode()),F&&Q)for(var fe=0,he;fe<ee.length;fe++)he=E[ee[fe]],he||(he=[],E[te]=he),T.push({predicate:ee[fe],list:he});else if(F)for(var ge=0;ge<ee.length;ge++)T.push({predicate:ee[ge],forward:!0});if(z)for(var be=0;be<re.length;be++)T.push({predicate:re[be],forward:!1})}if(W){var ye=null,ve=null;V?(ye=''===V.value?t.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(V.value,I,y.terms,k,r),ve=G&&!K?G.value:ye===t.XMLLiteralURI||ye===t.HTMLLiteralURI?null:K?K.value:b.textContent):K?(ye=t.PlainLiteralURI,ve=K.value):G?(ve=G.value,ye=t.deriveDateTimeType(ve),!ye&&(ye=t.PlainLiteralURI)):!F&&!z&&(Z&&(ve=this.parseSafeCURIEOrCURIEOrURI(Z.value,k,r)),!ve&&Y?ve=this.resolveAndNormalize(r,encodeURI(Y.value)):!ve&&X&&(ve=this.resolveAndNormalize(r,encodeURI(X.value))),ve&&(ye=t.objectURI)),ye||(H&&!J?(ye=t.objectURI,ve=_):(ve=b.textContent,this.inHTMLMode&&'time'===b.localName&&(ye=t.deriveDateTimeType(ve)),!ye&&(ye=t.PlainLiteralURI))),ne=this.tokenize(W.value);for(var we=0,xe;we<ne.length;we++)if(xe=this.parsePredicate(ne[we],I,y.terms,k,r),xe)if(Q){var _e=E[xe];_e||(_e=[],E[xe]=_e),_e.push(ye===t.XMLLiteralURI||ye===t.HTMLLiteralURI?{type:ye,value:b.childNodes}:{type:ye?ye:t.PlainLiteralURI,value:ve,language:A})}else ye===t.XMLLiteralURI||ye===t.HTMLLiteralURI?this.addTriple(b,w,xe,{type:ye,value:b.childNodes}):this.addTriple(b,w,xe,{type:ye?ye:t.PlainLiteralURI,value:ve,language:A})}if(w&&!v)for(var ke=0;ke<y.incomplete.length;ke++)y.incomplete[ke].list?y.incomplete[ke].list.push({type:t.objectURI,value:w}):y.incomplete[ke].forward?this.addTriple(b,y.subject,y.incomplete[ke].predicate,{type:t.objectURI,value:w}):this.addTriple(b,w,y.incomplete[ke].predicate,{type:t.objectURI,value:y.subject});var Ce=null,Te=w;v?(Ce=this.push(y,y.subject),Ce.parentObject=s(b.parentNode.baseURI)===y.parentObject?s(b.baseURI):y.parentObject,Ce.incomplete=y.incomplete,Ce.language=A,Ce.prefixes=k,Ce.vocabulary=I):(Ce=this.push(y,w),Ce.parentObject=x?x:w?w:y.subject,Ce.prefixes=k,Ce.incomplete=T,x&&(Te=x,E={},S=!0),Ce.listMapping=E,Ce.language=A,Ce.vocabulary=I),S&&o.unshift({parent:b,context:y,subject:Te,listMapping:E});for(var Ee=b.lastChild;Ee;Ee=Ee.previousSibling)Ee.nodeType===m.ELEMENT_NODE&&(Ee.baseURI=b.baseURI,o.unshift({current:Ee,context:Ce}))}this.inHTMLMode&&this.copyProperties();for(var Se=0;Se<this.finishedHandlers.length;Se++)this.finishedHandlers[Se](n)}},{key:'push',value:function(t,n){return{parent:t,subject:n?n:t?t.subject:null,parentObject:null,incomplete:[],listMapping:t?t.listMapping:{},language:t?t.language:this.language,prefixes:t?t.prefixes:this.target.graph.prefixes,terms:t?t.terms:this.target.graph.terms,vocabulary:t?t.vocabulary:this.vocabulary}}},{key:'resolveAndNormalize',value:function(t,n){return u.join(n,t)}},{key:'setContext',value:function(t){'html'===t.localName&&'XHTML+RDFa 1.1'===t.getAttribute('version')?this.setXHTMLContext():'html'===t.localName||'http://www.w3.org/1999/xhtml'===t.namespaceURI?'undefined'!=typeof document&&document.doctype?'-//W3C//DTD XHTML+RDFa 1.0//EN'===document.doctype.publicId&&'http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd'===document.doctype.systemId?(console.log('WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode.'),this.setHTMLContext()):'-//W3C//DTD XHTML+RDFa 1.1//EN'===document.doctype.publicId&&'http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd'===document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:'setHTMLContext',value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:'http://www.w3.org/XML/1998/namespace',localName:'lang'},{namespaceURI:null,localName:'lang'}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:'setInitialContext',value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:'http://www.w3.org/XML/1998/namespace',localName:'lang'}]}},{key:'setXHTMLContext',value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:'http://www.w3.org/XML/1998/namespace',localName:'lang'},{namespaceURI:null,localName:'lang'}],this.target.graph.terms.alternate='http://www.w3.org/1999/xhtml/vocab#alternate',this.target.graph.terms.appendix='http://www.w3.org/1999/xhtml/vocab#appendix',this.target.graph.terms.bookmark='http://www.w3.org/1999/xhtml/vocab#bookmark',this.target.graph.terms.cite='http://www.w3.org/1999/xhtml/vocab#cite',this.target.graph.terms.chapter='http://www.w3.org/1999/xhtml/vocab#chapter',this.target.graph.terms.contents='http://www.w3.org/1999/xhtml/vocab#contents',this.target.graph.terms.copyright='http://www.w3.org/1999/xhtml/vocab#copyright',this.target.graph.terms.first='http://www.w3.org/1999/xhtml/vocab#first',this.target.graph.terms.glossary='http://www.w3.org/1999/xhtml/vocab#glossary',this.target.graph.terms.help='http://www.w3.org/1999/xhtml/vocab#help',this.target.graph.terms.icon='http://www.w3.org/1999/xhtml/vocab#icon',this.target.graph.terms.index='http://www.w3.org/1999/xhtml/vocab#index',this.target.graph.terms.last='http://www.w3.org/1999/xhtml/vocab#last',this.target.graph.terms.license='http://www.w3.org/1999/xhtml/vocab#license',this.target.graph.terms.meta='http://www.w3.org/1999/xhtml/vocab#meta',this.target.graph.terms.next='http://www.w3.org/1999/xhtml/vocab#next',this.target.graph.terms.prev='http://www.w3.org/1999/xhtml/vocab#prev',this.target.graph.terms.previous='http://www.w3.org/1999/xhtml/vocab#previous',this.target.graph.terms.section='http://www.w3.org/1999/xhtml/vocab#section',this.target.graph.terms.stylesheet='http://www.w3.org/1999/xhtml/vocab#stylesheet',this.target.graph.terms.subsection='http://www.w3.org/1999/xhtml/vocab#subsection',this.target.graph.terms.start='http://www.w3.org/1999/xhtml/vocab#start',this.target.graph.terms.top='http://www.w3.org/1999/xhtml/vocab#top',this.target.graph.terms.up='http://www.w3.org/1999/xhtml/vocab#up',this.target.graph.terms.p3pv1='http://www.w3.org/1999/xhtml/vocab#p3pv1',this.target.graph.terms.related='http://www.w3.org/1999/xhtml/vocab#related',this.target.graph.terms.role='http://www.w3.org/1999/xhtml/vocab#role',this.target.graph.terms.transformation='http://www.w3.org/1999/xhtml/vocab#transformation'}},{key:'setXMLContext',value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:'tokenize',value:function(t){return this.trim(t).split(/\s+/)}},{key:'toRDFNodeObject',value:function(n){if('undefined'!=typeof n){if('string'==typeof n)return'_:'===n.substring(0,2)?('undefined'==typeof this.blankNodes[n.substring(2)]&&(this.blankNodes[n.substring(2)]=new s(n.substring(2))),this.blankNodes[n.substring(2)]):l.namedNode(n);switch(n.type){case t.objectURI:return'_:'===n.value.substring(0,2)?('undefined'==typeof this.blankNodes[n.value.substring(2)]&&(this.blankNodes[n.value.substring(2)]=new s(n.value.substring(2))),this.blankNodes[n.value.substring(2)]):l.namedNode(n.value);case t.PlainLiteralURI:return new d(n.value,n.language||'');case t.XMLLiteralURI:case t.HTMLLiteralURI:var a='';return Object.keys(n.value).forEach(function(t){a+=f.domToString(n.value[t],this.htmlOptions)}),new d(a,'',new c(n.type));default:return new d(n.value,'',new c(n.type));}}}},{key:'trim',value:function(t){return t.replace(/^\s\s*/,'').replace(/\s\s*$/,'')}}],[{key:'parseRDFaDOM',value:function(n,a,r){var o=new t(a,{base:r});n.baseURI=r,o.process(n)}}]),t}();h.XMLLiteralURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral',h.HTMLLiteralURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML',h.PlainLiteralURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral',h.objectURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#object',h.typeURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#type',h.nameChar='[-A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u10000-\uEFFFF.0-9\xB7\u0300-\u036F\u203F-\u2040]',h.nameStartChar='[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0100-\u0131\u0134-\u013E\u0141-\u0148\u014A-\u017E\u0180-\u01C3\u01CD-\u01F0\u01F4-\u01F5\u01FA-\u0217\u0250-\u02A8\u02BB-\u02C1\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03D6\u03DA\u03DC\u03DE\u03E0\u03E2-\u03F3\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E-\u0481\u0490-\u04C4\u04C7-\u04C8\u04CB-\u04CC\u04D0-\u04EB\u04EE-\u04F5\u04F8-\u04F9\u0531-\u0556\u0559\u0561-\u0586\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0641-\u064A\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D3\u06D5\u06E5-\u06E6\u0905-\u0939\u093D\u0958-\u0961\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8B\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AE0\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B36-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CDE\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60-\u0D61\u0E01-\u0E2E\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EAE\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0F40-\u0F47\u0F49-\u0F69\u10A0-\u10C5\u10D0-\u10F6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110B-\u110C\u110E-\u1112\u113C\u113E\u1140\u114C\u114E\u1150\u1154-\u1155\u1159\u115F-\u1161\u1163\u1165\u1167\u1169\u116D-\u116E\u1172-\u1173\u1175\u119E\u11A8\u11AB\u11AE-\u11AF\u11B7-\u11B8\u11BA\u11BC-\u11C2\u11EB\u11F0\u11F9\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2126\u212A-\u212B\u212E\u2180-\u2182\u3041-\u3094\u30A1-\u30FA\u3105-\u312C\uAC00-\uD7A3\u4E00-\u9FA5\u3007\u3021-\u3029_]',h.NCNAME=new RegExp('^'+h.nameStartChar+h.nameChar+'*$'),h.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:'http://www.w3.org/2001/XMLSchema#duration'},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:'http://www.w3.org/2001/XMLSchema#dateTime'},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:'http://www.w3.org/2001/XMLSchema#date'},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:'http://www.w3.org/2001/XMLSchema#time'},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:'http://www.w3.org/2001/XMLSchema#gYearMonth'},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:'http://www.w3.org/2001/XMLSchema#gYear'}],t.exports=h},function(t,n,a){'use strict';var r=a(12);t.exports=function(t){var n={};n.ns={RDF:'http://www.w3.org/1999/02/22-rdf-syntax-ns#',RDFS:'http://www.w3.org/2000/01/rdf-schema#'},n.nodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},this.frameFactory=function(t,a,o){return{NODE:1,ARC:2,parent:a,parser:t,store:t.store,element:o,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(t,n){n=r.join(n,this.base),this.node=this.store.sym(n),this.nodeType=t},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),null!=this.parent.rdfid){var t=this.store.sym(r.join('#'+this.parent.rdfid,this.base));this.store.add(t,this.store.sym(n.ns.RDF+'type'),this.store.sym(n.ns.RDF+'Statement'),this.parser.why),this.store.add(t,this.store.sym(n.ns.RDF+'subject'),this.parent.parent.node,this.parser.why),this.store.add(t,this.store.sym(n.ns.RDF+'predicate'),this.parent.node,this.parser.why),this.store.add(t,this.store.sym(n.ns.RDF+'object'),this.node,this.parser.why)}},isTripleToLoad:function(){return null!=this.parent&&null!=this.parent.parent&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(t){this.addSymbol(this.NODE,t),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(t){this.node=null==t?this.store.bnode():null==this.parser.bnodes[t]?this.parser.bnodes[t]=this.store.bnode():this.parser.bnodes[t],this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(t){t===n.ns.RDF+'li'&&(t=n.ns.RDF+'_'+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,t)},addLiteral:function(t){this.node=this.parent.datatype?this.store.literal(t,'',this.store.sym(this.parent.datatype)):this.store.literal(t,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}},this.getAttributeNodeNS=function(t,n,a){var r=null;if(t.getAttributeNodeNS)r=t.getAttributeNodeNS(n,a);else for(var o=t.attributes,s=0,d,l;s<o.length;++s)if(d=o[s],d.namespaceURI===n&&(l=d.prefix?d.prefix+':'+a:a,l===d.nodeName)){r=d;break}return r},this.store=t,this.bnodes={},this.why=null,this.reify=!1,this.parse=function(t,a,r){var o=t.childNodes;this.cleanParser();var s;if(t.nodeType===n.nodeType.DOCUMENT){for(var d=0;d<o.length;d++)if(o[d].nodeType===n.nodeType.ELEMENT){s=o[d];break}}else if(t.nodeType===n.nodeType.ELEMENT)s=t;else throw new Error('RDFParser: can\'t find root in '+a+'. Halting. ');this.why=r;var l=this.frameFactory(this);return this.base=a,l.base=a,l.lang=null,this.parseDOM(this.buildFrame(l,s)),!0},this.parseDOM=function(t){for(var a=function(t){var n='';if(null==t.namespaceURI)throw new Error('RDF/XML syntax error: No namespace for '+t.localName+' in '+this.base);return t.namespaceURI&&(n+=t.namespaceURI),t.localName?n+=t.localName:t.nodeName&&(0<=t.nodeName.indexOf(':')?n+=t.nodeName.split(':')[1]:n+=t.nodeName),n}.bind(this),o=!0,s;t.parent;){var d=t.element,l=d.attributes;if(d.nodeType===n.nodeType.TEXT||d.nodeType===n.nodeType.CDATA_SECTION)t.parent.nodeType===t.NODE&&(t.addArc(n.ns.RDF+'value'),t=this.buildFrame(t)),t.addLiteral(d.nodeValue);else if(a(d)!==n.ns.RDF+'RDF')if(t.parent&&t.parent.collection&&(t.addCollectionArc(),t=this.buildFrame(t,t.element),t.parent.element=null),!t.parent||!t.parent.nodeType||t.parent.nodeType===t.ARC){var c=this.getAttributeNodeNS(d,n.ns.RDF,'about');if(s=this.getAttributeNodeNS(d,n.ns.RDF,'ID'),c&&s)throw new Error('RDFParser: '+d.nodeName+' has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.');if(!c&&s)t.addNode('#'+s.nodeValue),d.removeAttributeNode(s);else if(null==c&&null==s){var u=this.getAttributeNodeNS(d,n.ns.RDF,'nodeID');u?(t.addBNode(u.nodeValue),d.removeAttributeNode(u)):t.addBNode()}else t.addNode(c.nodeValue),d.removeAttributeNode(c);var m=this.getAttributeNodeNS(d,n.ns.RDF,'type');n.ns.RDF+'Description'!==a(d)&&(m={nodeValue:a(d)}),null!=m&&(this.store.add(t.node,this.store.sym(n.ns.RDF+'type'),this.store.sym(r.join(m.nodeValue,t.base)),this.why),m.nodeName&&d.removeAttributeNode(m));for(var h=l.length-1;0<=h;h--)this.store.add(t.node,this.store.sym(a(l[h])),this.store.literal(l[h].nodeValue,t.lang),this.why)}else{t.addArc(a(d)),this.reify&&(s=this.getAttributeNodeNS(d,n.ns.RDF,'ID'),s&&(t.rdfid=s.nodeValue,d.removeAttributeNode(s)));var g=this.getAttributeNodeNS(d,n.ns.RDF,'parseType'),b=this.getAttributeNodeNS(d,n.ns.RDF,'datatype');if(b&&(t.datatype=b.nodeValue,d.removeAttributeNode(b)),g){var y=g.nodeValue;'Literal'===y?(t.datatype=n.ns.RDF+'XMLLiteral',t=this.buildFrame(t),t.addLiteral(d),o=!1):'Resource'===y?(t=this.buildFrame(t,t.element),t.parent.element=null,t.addBNode()):'Collection'===y&&(t=this.buildFrame(t,t.element),t.parent.element=null,t.addCollection()),d.removeAttributeNode(g)}if(0!==l.length){var v=this.getAttributeNodeNS(d,n.ns.RDF,'resource'),w=this.getAttributeNodeNS(d,n.ns.RDF,'nodeID');t=this.buildFrame(t),v?(t.addNode(v.nodeValue),d.removeAttributeNode(v)):w?(t.addBNode(w.nodeValue),d.removeAttributeNode(w)):t.addBNode();for(var x=l.length-1,_;0<=x;x--)_=this.buildFrame(t),_.addArc(a(l[x])),a(l[x])===n.ns.RDF+'type'?this.buildFrame(_).addNode(l[x].nodeValue):this.buildFrame(_).addLiteral(l[x].nodeValue)}else 0===d.childNodes.length&&this.buildFrame(t).addLiteral('')}for(d=t.element;t.parent;){for(var f=t;null==d;)t=t.parent,d=t.element;var k=d.childNodes&&d.childNodes[t.lastChild];if(!k||!o){if(t.terminateFrame(),!(t=t.parent))break;d=t.element,o=!0}else if(k.nodeType!==n.nodeType.ELEMENT&&k.nodeType!==n.nodeType.TEXT&&k.nodeType!==n.nodeType.CDATA_SECTION||(k.nodeType===n.nodeType.TEXT||k.nodeType===n.nodeType.CDATA_SECTION)&&1!==d.childNodes.length)t.lastChild++;else{t.lastChild++,t=this.buildFrame(f,d.childNodes[t.lastChild-1]);break}}}},this.cleanParser=function(){this.bnodes={},this.why=null},this.buildFrame=function(t,a){var o=this.frameFactory(this,t,a);if(t&&(o.base=t.base,o.lang=t.lang),!a||a.nodeType===n.nodeType.TEXT||a.nodeType===n.nodeType.CDATA_SECTION)return o;var s=a.attributes,d=a.getAttributeNode('xml:base');null!=d&&(o.base=d.nodeValue,a.removeAttribute('xml:base'));var l=a.getAttributeNode('xml:lang');null!=l&&(o.lang=l.nodeValue,a.removeAttribute('xml:lang'));for(var c=s.length-1;0<=c;c--)if('xml'===s[c].nodeName.substr(0,3)){if('xmlns:'===s[c].name.slice(0,6)){var u=s[c].nodeValue;this.base&&(u=r.join(u,this.base)),this.store.setPrefixForURI(s[c].name.slice(6),u)}a.removeAttributeNode(s[c])}return o}}},function(t,n,a){'use strict';function r(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;for(var r=1732584193,a=-271733879,o=-1732584194,c=271733878,d=0;d<t.length;d+=16){var h=r,g=a,b=o,y=c;r=s(r,a,o,c,t[d+0],7,-680876936),c=s(c,r,a,o,t[d+1],12,-389564586),o=s(o,c,r,a,t[d+2],17,606105819),a=s(a,o,c,r,t[d+3],22,-1044525330),r=s(r,a,o,c,t[d+4],7,-176418897),c=s(c,r,a,o,t[d+5],12,1200080426),o=s(o,c,r,a,t[d+6],17,-1473231341),a=s(a,o,c,r,t[d+7],22,-45705983),r=s(r,a,o,c,t[d+8],7,1770035416),c=s(c,r,a,o,t[d+9],12,-1958414417),o=s(o,c,r,a,t[d+10],17,-42063),a=s(a,o,c,r,t[d+11],22,-1990404162),r=s(r,a,o,c,t[d+12],7,1804603682),c=s(c,r,a,o,t[d+13],12,-40341101),o=s(o,c,r,a,t[d+14],17,-1502002290),a=s(a,o,c,r,t[d+15],22,1236535329),r=l(r,a,o,c,t[d+1],5,-165796510),c=l(c,r,a,o,t[d+6],9,-1069501632),o=l(o,c,r,a,t[d+11],14,643717713),a=l(a,o,c,r,t[d+0],20,-373897302),r=l(r,a,o,c,t[d+5],5,-701558691),c=l(c,r,a,o,t[d+10],9,38016083),o=l(o,c,r,a,t[d+15],14,-660478335),a=l(a,o,c,r,t[d+4],20,-405537848),r=l(r,a,o,c,t[d+9],5,568446438),c=l(c,r,a,o,t[d+14],9,-1019803690),o=l(o,c,r,a,t[d+3],14,-187363961),a=l(a,o,c,r,t[d+8],20,1163531501),r=l(r,a,o,c,t[d+13],5,-1444681467),c=l(c,r,a,o,t[d+2],9,-51403784),o=l(o,c,r,a,t[d+7],14,1735328473),a=l(a,o,c,r,t[d+12],20,-1926607734),r=u(r,a,o,c,t[d+5],4,-378558),c=u(c,r,a,o,t[d+8],11,-2022574463),o=u(o,c,r,a,t[d+11],16,1839030562),a=u(a,o,c,r,t[d+14],23,-35309556),r=u(r,a,o,c,t[d+1],4,-1530992060),c=u(c,r,a,o,t[d+4],11,1272893353),o=u(o,c,r,a,t[d+7],16,-155497632),a=u(a,o,c,r,t[d+10],23,-1094730640),r=u(r,a,o,c,t[d+13],4,681279174),c=u(c,r,a,o,t[d+0],11,-358537222),o=u(o,c,r,a,t[d+3],16,-722521979),a=u(a,o,c,r,t[d+6],23,76029189),r=u(r,a,o,c,t[d+9],4,-640364487),c=u(c,r,a,o,t[d+12],11,-421815835),o=u(o,c,r,a,t[d+15],16,530742520),a=u(a,o,c,r,t[d+2],23,-995338651),r=f(r,a,o,c,t[d+0],6,-198630844),c=f(c,r,a,o,t[d+7],10,1126891415),o=f(o,c,r,a,t[d+14],15,-1416354905),a=f(a,o,c,r,t[d+5],21,-57434055),r=f(r,a,o,c,t[d+12],6,1700485571),c=f(c,r,a,o,t[d+3],10,-1894986606),o=f(o,c,r,a,t[d+10],15,-1051523),a=f(a,o,c,r,t[d+1],21,-2054922799),r=f(r,a,o,c,t[d+8],6,1873313359),c=f(c,r,a,o,t[d+15],10,-30611744),o=f(o,c,r,a,t[d+6],15,-1560198380),a=f(a,o,c,r,t[d+13],21,1309151649),r=f(r,a,o,c,t[d+4],6,-145523070),c=f(c,r,a,o,t[d+11],10,-1120210379),o=f(o,c,r,a,t[d+2],15,718787259),a=f(a,o,c,r,t[d+9],21,-343485551),r=m(r,h),a=m(a,g),o=m(o,b),c=m(c,y)}return[r,a,o,c]}function o(n,r,a,o,l,s){return m(d(m(m(r,n),m(o,s)),l),a)}function s(n,a,r,l,d,c,s){return o(a&r|~a&l,n,a,d,c,s)}function l(n,a,r,l,c,u,s){return o(a&l|r&~l,n,a,c,u,s)}function u(n,a,r,l,d,c,s){return o(a^r^l,n,a,d,c,s)}function f(n,a,r,l,c,u,s){return o(r^(a|~l),n,a,c,u,s)}function m(t,n){var a=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(a>>16)<<16|65535&a}function d(t,n){return t<<n|t>>>32-n}var c=a(256);t.exports=function(t){return c(t,r)}},function(t,n,a){'use strict';(function(n){function r(){m.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function o(t,a){return t<<a|t>>>32-a}function s(t,n,a,r,d,l,c,u){return 0|o(0|t+(n^a^r)+l+c,u)+d}function d(t,n,a,r,d,l,c,u){return 0|o(0|t+(n&a|~n&r)+l+c,u)+d}function l(t,n,a,r,d,l,u,f){return 0|o(0|t+((n|~a)^r)+l+u,f)+d}function c(t,n,a,r,l,c,u,f){return 0|o(0|t+(n&r|a&~r)+c+u,f)+l}function u(t,n,a,r,l,c,u,f){return 0|o(0|t+(n^(a|~r))+c+u,f)+l}var f=a(1),m=a(257);f(r,m),r.prototype._update=function(){for(var n=Array(16),a=0;16>a;++a)n[a]=this._block.readInt32LE(4*a);var r=this._a,f=this._b,m=this._c,h=this._d,g=this._e;r=s(r,f,m,h,g,n[0],0,11),m=o(m,10),g=s(g,r,f,m,h,n[1],0,14),f=o(f,10),h=s(h,g,r,f,m,n[2],0,15),r=o(r,10),m=s(m,h,g,r,f,n[3],0,12),g=o(g,10),f=s(f,m,h,g,r,n[4],0,5),h=o(h,10),r=s(r,f,m,h,g,n[5],0,8),m=o(m,10),g=s(g,r,f,m,h,n[6],0,7),f=o(f,10),h=s(h,g,r,f,m,n[7],0,9),r=o(r,10),m=s(m,h,g,r,f,n[8],0,11),g=o(g,10),f=s(f,m,h,g,r,n[9],0,13),h=o(h,10),r=s(r,f,m,h,g,n[10],0,14),m=o(m,10),g=s(g,r,f,m,h,n[11],0,15),f=o(f,10),h=s(h,g,r,f,m,n[12],0,6),r=o(r,10),m=s(m,h,g,r,f,n[13],0,7),g=o(g,10),f=s(f,m,h,g,r,n[14],0,9),h=o(h,10),r=s(r,f,m,h,g,n[15],0,8),m=o(m,10),g=d(g,r,f,m,h,n[7],1518500249,7),f=o(f,10),h=d(h,g,r,f,m,n[4],1518500249,6),r=o(r,10),m=d(m,h,g,r,f,n[13],1518500249,8),g=o(g,10),f=d(f,m,h,g,r,n[1],1518500249,13),h=o(h,10),r=d(r,f,m,h,g,n[10],1518500249,11),m=o(m,10),g=d(g,r,f,m,h,n[6],1518500249,9),f=o(f,10),h=d(h,g,r,f,m,n[15],1518500249,7),r=o(r,10),m=d(m,h,g,r,f,n[3],1518500249,15),g=o(g,10),f=d(f,m,h,g,r,n[12],1518500249,7),h=o(h,10),r=d(r,f,m,h,g,n[0],1518500249,12),m=o(m,10),g=d(g,r,f,m,h,n[9],1518500249,15),f=o(f,10),h=d(h,g,r,f,m,n[5],1518500249,9),r=o(r,10),m=d(m,h,g,r,f,n[2],1518500249,11),g=o(g,10),f=d(f,m,h,g,r,n[14],1518500249,7),h=o(h,10),r=d(r,f,m,h,g,n[11],1518500249,13),m=o(m,10),g=d(g,r,f,m,h,n[8],1518500249,12),f=o(f,10),h=l(h,g,r,f,m,n[3],1859775393,11),r=o(r,10),m=l(m,h,g,r,f,n[10],1859775393,13),g=o(g,10),f=l(f,m,h,g,r,n[14],1859775393,6),h=o(h,10),r=l(r,f,m,h,g,n[4],1859775393,7),m=o(m,10),g=l(g,r,f,m,h,n[9],1859775393,14),f=o(f,10),h=l(h,g,r,f,m,n[15],1859775393,9),r=o(r,10),m=l(m,h,g,r,f,n[8],1859775393,13),g=o(g,10),f=l(f,m,h,g,r,n[1],1859775393,15),h=o(h,10),r=l(r,f,m,h,g,n[2],1859775393,14),m=o(m,10),g=l(g,r,f,m,h,n[7],1859775393,8),f=o(f,10),h=l(h,g,r,f,m,n[0],1859775393,13),r=o(r,10),m=l(m,h,g,r,f,n[6],1859775393,6),g=o(g,10),f=l(f,m,h,g,r,n[13],1859775393,5),h=o(h,10),r=l(r,f,m,h,g,n[11],1859775393,12),m=o(m,10),g=l(g,r,f,m,h,n[5],1859775393,7),f=o(f,10),h=l(h,g,r,f,m,n[12],1859775393,5),r=o(r,10),m=c(m,h,g,r,f,n[1],2400959708,11),g=o(g,10),f=c(f,m,h,g,r,n[9],2400959708,12),h=o(h,10),r=c(r,f,m,h,g,n[11],2400959708,14),m=o(m,10),g=c(g,r,f,m,h,n[10],2400959708,15),f=o(f,10),h=c(h,g,r,f,m,n[0],2400959708,14),r=o(r,10),m=c(m,h,g,r,f,n[8],2400959708,15),g=o(g,10),f=c(f,m,h,g,r,n[12],2400959708,9),h=o(h,10),r=c(r,f,m,h,g,n[4],2400959708,8),m=o(m,10),g=c(g,r,f,m,h,n[13],2400959708,9),f=o(f,10),h=c(h,g,r,f,m,n[3],2400959708,14),r=o(r,10),m=c(m,h,g,r,f,n[7],2400959708,5),g=o(g,10),f=c(f,m,h,g,r,n[15],2400959708,6),h=o(h,10),r=c(r,f,m,h,g,n[14],2400959708,8),m=o(m,10),g=c(g,r,f,m,h,n[5],2400959708,6),f=o(f,10),h=c(h,g,r,f,m,n[6],2400959708,5),r=o(r,10),m=c(m,h,g,r,f,n[2],2400959708,12),g=o(g,10),f=u(f,m,h,g,r,n[4],2840853838,9),h=o(h,10),r=u(r,f,m,h,g,n[0],2840853838,15),m=o(m,10),g=u(g,r,f,m,h,n[5],2840853838,5),f=o(f,10),h=u(h,g,r,f,m,n[9],2840853838,11),r=o(r,10),m=u(m,h,g,r,f,n[7],2840853838,6),g=o(g,10),f=u(f,m,h,g,r,n[12],2840853838,8),h=o(h,10),r=u(r,f,m,h,g,n[2],2840853838,13),m=o(m,10),g=u(g,r,f,m,h,n[10],2840853838,12),f=o(f,10),h=u(h,g,r,f,m,n[14],2840853838,5),r=o(r,10),m=u(m,h,g,r,f,n[1],2840853838,12),g=o(g,10),f=u(f,m,h,g,r,n[3],2840853838,13),h=o(h,10),r=u(r,f,m,h,g,n[8],2840853838,14),m=o(m,10),g=u(g,r,f,m,h,n[11],2840853838,11),f=o(f,10),h=u(h,g,r,f,m,n[6],2840853838,8),r=o(r,10),m=u(m,h,g,r,f,n[15],2840853838,5),g=o(g,10),f=u(f,m,h,g,r,n[13],2840853838,6),h=o(h,10);var b=this._a,y=this._b,v=this._c,w=this._d,x=this._e;b=u(b,y,v,w,x,n[5],1352829926,8),v=o(v,10),x=u(x,b,y,v,w,n[14],1352829926,9),y=o(y,10),w=u(w,x,b,y,v,n[7],1352829926,9),b=o(b,10),v=u(v,w,x,b,y,n[0],1352829926,11),x=o(x,10),y=u(y,v,w,x,b,n[9],1352829926,13),w=o(w,10),b=u(b,y,v,w,x,n[2],1352829926,15),v=o(v,10),x=u(x,b,y,v,w,n[11],1352829926,15),y=o(y,10),w=u(w,x,b,y,v,n[4],1352829926,5),b=o(b,10),v=u(v,w,x,b,y,n[13],1352829926,7),x=o(x,10),y=u(y,v,w,x,b,n[6],1352829926,7),w=o(w,10),b=u(b,y,v,w,x,n[15],1352829926,8),v=o(v,10),x=u(x,b,y,v,w,n[8],1352829926,11),y=o(y,10),w=u(w,x,b,y,v,n[1],1352829926,14),b=o(b,10),v=u(v,w,x,b,y,n[10],1352829926,14),x=o(x,10),y=u(y,v,w,x,b,n[3],1352829926,12),w=o(w,10),b=u(b,y,v,w,x,n[12],1352829926,6),v=o(v,10),x=c(x,b,y,v,w,n[6],1548603684,9),y=o(y,10),w=c(w,x,b,y,v,n[11],1548603684,13),b=o(b,10),v=c(v,w,x,b,y,n[3],1548603684,15),x=o(x,10),y=c(y,v,w,x,b,n[7],1548603684,7),w=o(w,10),b=c(b,y,v,w,x,n[0],1548603684,12),v=o(v,10),x=c(x,b,y,v,w,n[13],1548603684,8),y=o(y,10),w=c(w,x,b,y,v,n[5],1548603684,9),b=o(b,10),v=c(v,w,x,b,y,n[10],1548603684,11),x=o(x,10),y=c(y,v,w,x,b,n[14],1548603684,7),w=o(w,10),b=c(b,y,v,w,x,n[15],1548603684,7),v=o(v,10),x=c(x,b,y,v,w,n[8],1548603684,12),y=o(y,10),w=c(w,x,b,y,v,n[12],1548603684,7),b=o(b,10),v=c(v,w,x,b,y,n[4],1548603684,6),x=o(x,10),y=c(y,v,w,x,b,n[9],1548603684,15),w=o(w,10),b=c(b,y,v,w,x,n[1],1548603684,13),v=o(v,10),x=c(x,b,y,v,w,n[2],1548603684,11),y=o(y,10),w=l(w,x,b,y,v,n[15],1836072691,9),b=o(b,10),v=l(v,w,x,b,y,n[5],1836072691,7),x=o(x,10),y=l(y,v,w,x,b,n[1],1836072691,15),w=o(w,10),b=l(b,y,v,w,x,n[3],1836072691,11),v=o(v,10),x=l(x,b,y,v,w,n[7],1836072691,8),y=o(y,10),w=l(w,x,b,y,v,n[14],1836072691,6),b=o(b,10),v=l(v,w,x,b,y,n[6],1836072691,6),x=o(x,10),y=l(y,v,w,x,b,n[9],1836072691,14),w=o(w,10),b=l(b,y,v,w,x,n[11],1836072691,12),v=o(v,10),x=l(x,b,y,v,w,n[8],1836072691,13),y=o(y,10),w=l(w,x,b,y,v,n[12],1836072691,5),b=o(b,10),v=l(v,w,x,b,y,n[2],1836072691,14),x=o(x,10),y=l(y,v,w,x,b,n[10],1836072691,13),w=o(w,10),b=l(b,y,v,w,x,n[0],1836072691,13),v=o(v,10),x=l(x,b,y,v,w,n[4],1836072691,7),y=o(y,10),w=l(w,x,b,y,v,n[13],1836072691,5),b=o(b,10),v=d(v,w,x,b,y,n[8],2053994217,15),x=o(x,10),y=d(y,v,w,x,b,n[6],2053994217,5),w=o(w,10),b=d(b,y,v,w,x,n[4],2053994217,8),v=o(v,10),x=d(x,b,y,v,w,n[1],2053994217,11),y=o(y,10),w=d(w,x,b,y,v,n[3],2053994217,14),b=o(b,10),v=d(v,w,x,b,y,n[11],2053994217,14),x=o(x,10),y=d(y,v,w,x,b,n[15],2053994217,6),w=o(w,10),b=d(b,y,v,w,x,n[0],2053994217,14),v=o(v,10),x=d(x,b,y,v,w,n[5],2053994217,6),y=o(y,10),w=d(w,x,b,y,v,n[12],2053994217,9),b=o(b,10),v=d(v,w,x,b,y,n[2],2053994217,12),x=o(x,10),y=d(y,v,w,x,b,n[13],2053994217,9),w=o(w,10),b=d(b,y,v,w,x,n[9],2053994217,12),v=o(v,10),x=d(x,b,y,v,w,n[7],2053994217,5),y=o(y,10),w=d(w,x,b,y,v,n[10],2053994217,15),b=o(b,10),v=d(v,w,x,b,y,n[14],2053994217,8),x=o(x,10),y=s(y,v,w,x,b,n[12],0,8),w=o(w,10),b=s(b,y,v,w,x,n[15],0,5),v=o(v,10),x=s(x,b,y,v,w,n[10],0,12),y=o(y,10),w=s(w,x,b,y,v,n[4],0,9),b=o(b,10),v=s(v,w,x,b,y,n[1],0,12),x=o(x,10),y=s(y,v,w,x,b,n[5],0,5),w=o(w,10),b=s(b,y,v,w,x,n[8],0,14),v=o(v,10),x=s(x,b,y,v,w,n[7],0,6),y=o(y,10),w=s(w,x,b,y,v,n[6],0,8),b=o(b,10),v=s(v,w,x,b,y,n[2],0,13),x=o(x,10),y=s(y,v,w,x,b,n[13],0,6),w=o(w,10),b=s(b,y,v,w,x,n[14],0,5),v=o(v,10),x=s(x,b,y,v,w,n[0],0,15),y=o(y,10),w=s(w,x,b,y,v,n[3],0,13),b=o(b,10),v=s(v,w,x,b,y,n[9],0,11),x=o(x,10),y=s(y,v,w,x,b,n[11],0,11),w=o(w,10);var _=0|this._b+m+w;this._b=0|this._c+h+x,this._c=0|this._d+g+b,this._d=0|this._e+r+y,this._e=0|this._a+f+v,this._a=_},r.prototype._digest=function(){this._block[this._blockOffset++]=128,56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=new n(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=r}).call(n,a(0).Buffer)},function(t,n,a){var n=t.exports=function(t){t=t.toLowerCase();var a=n[t];if(!a)throw new Error(t+' is not supported (we accept pull requests)');return new a};n.sha=a(258),n.sha1=a(259),n.sha224=a(260),n.sha256=a(149),n.sha384=a(261),n.sha512=a(150)},function(t,n,a){var r=a(268),o=a(276),s=a(158);n.createCipher=n.Cipher=r.createCipher,n.createCipheriv=n.Cipheriv=r.createCipheriv,n.createDecipher=n.Decipher=o.createDecipher,n.createDecipheriv=n.Decipheriv=o.createDecipheriv,n.listCiphers=n.getCiphers=function(){return Object.keys(s)}},function(t,n,a){var r={ECB:a(269),CBC:a(270),CFB:a(271),CFB8:a(272),CFB1:a(273),OFB:a(274),CTR:a(157),GCM:a(157)},o=a(158);for(var s in o)o[s].module=r[o[s].mode];t.exports=o},function(t,n,a){'use strict';n.utils=a(278),n.Cipher=a(279),n.DES=a(280),n.CBC=a(281),n.EDE=a(282)},function(t,n,a){(function(n){function r(t){var n=s(t),a=n.toRed(d.mont(t.modulus)).redPow(new d(t.publicExponent)).fromRed();return{blinder:a,unblinder:n.invm(t.modulus)}}function o(t,a){var o=r(a),s=a.modulus.byteLength(),l=d.mont(a.modulus),c=new d(t).mul(o.blinder).umod(a.modulus),u=c.toRed(d.mont(a.prime1)),f=c.toRed(d.mont(a.prime2)),m=a.coefficient,g=a.prime1,b=a.prime2,y=u.redPow(a.exponent1),v=f.redPow(a.exponent2);y=y.fromRed(),v=v.fromRed();var w=y.isub(v).imul(m).umod(g);return w.imul(b),v.iadd(w),new n(v.imul(o.unblinder).umod(a.modulus).toArray(!1,s))}function s(t){for(var n=t.modulus.byteLength(),a=new d(l(n));0<=a.cmp(t.modulus)||!a.umod(t.prime1)||!a.umod(t.prime2);)a=new d(l(n));return a}var d=a(293),l=a(52);t.exports=o,o.getr=s}).call(n,a(0).Buffer)},function(t,n,a){var r=n;r.utils=a(22),r.common=a(55),r.sha=a(303),r.ripemd=a(307),r.hmac=a(308),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function v(t,n,a){return v.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_(t.length,a),s=n,d;s<r;s++)d=t.charCodeAt(s)-48,o<<=4,o|=49<=d&&54>=d?d-49+10:17<=d&&22>=d?d-17+10:15&d;return o}function l(t,n,a,o){for(var s=0,r=_(t.length,a),d=n,l;d<r;d++)l=t.charCodeAt(d)-48,s*=o,s+=49<=l?l-49+10:17<=l?l-17+10:l;return s}function u(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,o=a%26;n[a]=(t.words[r]&1<<o)>>>o}return n}function w(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_(u,n.length-1),g=y(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function x(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_(l,n.length-1),m=y(0,l-t.length+1);m<=f;m++){var h=l-m,g=0|t.words[h],a=0|n.words[m],b=g*a,r=67108863&b;c=0|c+(0|b/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function k(t,n,a){var r=new C;return r.mulp(t,n,a)}function C(t,n){this.x=t,this.y=n}function T(t,n){this.name=t,this.p=new v(n,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){T.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function S(){T.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function A(){T.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function I(){T.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function N(t){if('string'==typeof t){var n=v._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function j(t){N.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=v:n.BN=v,v.BN=v,v.wordSize=26;var R;try{R=a(340).Buffer}catch(t){}v.isBN=function(t){return!!(t instanceof v)||null!==t&&'object'==typeof t&&t.constructor.wordSize===v.wordSize&&Array.isArray(t.words)},v.max=function(t,n){return 0<t.cmp(n)?t:n},v.min=function(t,n){return 0>t.cmp(n)?t:n},v.prototype._init=function(t,n,a){if('number'==typeof t)return this._initNumber(t,n,a);if('object'==typeof t)return this._initArray(t,n,a);'hex'===n&&(n=16),o(n===(0|n)&&2<=n&&36>=n),t=t.toString().replace(/\s+/g,'');var r=0;'-'===t[0]&&r++,16===n?this._parseHex(t,r):this._parseBase(t,n,r),'-'===t[0]&&(this.negative=1),this.strip();'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initNumber=function(t,n,a){0>t&&(this.negative=1,t=-t),67108864>t?(this.words=[67108863&t],this.length=1):4503599627370496>t?(this.words=[67108863&t,67108863&t/67108864],this.length=2):(o(9007199254740992>t),this.words=[67108863&t,67108863&t/67108864,1],this.length=3);'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initArray=function(t,n,a){if(o('number'==typeof t.length),0>=t.length)return this.words=[0],this.length=1,this;this.length=b(t.length/3),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s=0,d,l;if('be'===a)for(r=t.length-1,d=0;0<=r;r-=3)l=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);else if('le'===a)for(r=0,d=0;r<t.length;r+=3)l=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);return this.strip()},v.prototype._parseHex=function(t,n){this.length=b((t.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r=0,o,d;for(a=t.length-6,o=0;a>=n;a-=6)d=s(t,a,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r,r+=24,26<=r&&(r-=26,o++);a+6!==n&&(d=s(t,n,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r),this.strip()},v.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var r=0,o=1;67108863>=o;o*=n)r++;r--,o=0|o/n;for(var s=t.length-a,d=s%r,c=_(s,s-d)+a,u=0,f=a;f<c;f+=r)u=l(t,f,f+r,n),this.imuln(o),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u);if(0!=d){var m=1;for(u=l(t,f,t.length,n),f=0;f<d;f++)m*=n;this.imuln(m),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u)}},v.prototype.copy=function(t){t.words=Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},v.prototype.clone=function(){var t=new v(null);return this.copy(t),t},v.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var L=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];v.prototype.toString=function(t,n){t=t||10,n=0|n||1;var a;if(16===t||'hex'===t){a='';for(var s=0,d=0,l=0;l<this.length;l++){var u=this.words[l],f=(16777215&(u<<s|d)).toString(16);d=16777215&u>>>24-s,a=0!=d||l!==this.length-1?L[6-f.length]+f+a:f+a,s+=2,26<=s&&(s-=26,l--)}for(0!=d&&(a=d.toString(16)+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}if(t===(0|t)&&2<=t&&36>=t){var m=O[t],h=P[t];a='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(t);g=g.idivn(h),a=g.isZero()?c+a:L[m-c.length]+c+a}for(this.isZero()&&(a='0'+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}o(!1,'Base should be between 2 and 36')},v.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?t:-t},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(t,n){return o('undefined'!=typeof R),this.toArrayLike(R,t,n)},v.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},v.prototype.toArrayLike=function(t,n,a){var r=this.byteLength(),s=a||y(1,r);o(r<=s,'byte array longer than desired length'),o(0<s,'Requested array length <= 0'),this.strip();var d=new t(s),l=this.clone(),c,u;if(!('le'===n)){for(u=0;u<s-r;u++)d[u]=0;for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[s-u-1]=c}else{for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[u]=c;for(;u<s;u++)d[u]=0}return d},v.prototype._countBits=g?function(t){return 32-g(t)}:function(n){var a=n,t=0;return 4096<=a&&(t+=13,a>>>=13),64<=a&&(t+=7,a>>>=7),8<=a&&(t+=4,a>>>=4),2<=a&&(t+=2,a>>>=2),t+a},v.prototype._zeroBits=function(n){if(0===n)return 26;var a=n,t=0;return 0==(8191&a)&&(t+=13,a>>>=13),0==(127&a)&&(t+=7,a>>>=7),0==(15&a)&&(t+=4,a>>>=4),0==(3&a)&&(t+=2,a>>>=2),0==(1&a)&&t++,t},v.prototype.bitLength=function(){var t=this.words[this.length-1],n=this._countBits(t);return 26*(this.length-1)+n},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0,a;n<this.length&&(a=this._zeroBits(this.words[n]),t+=a,26===a);n++);return t},v.prototype.byteLength=function(){return b(this.bitLength()/8)},v.prototype.toTwos=function(t){return 0===this.negative?this.clone():this.abs().inotn(t).iaddn(1)},v.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]|=t.words[n];return this.strip()},v.prototype.ior=function(t){return o(0==(this.negative|t.negative)),this.iuor(t)},v.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},v.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},v.prototype.iuand=function(t){var n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]&=t.words[a];return this.length=n.length,this.strip()},v.prototype.iand=function(t){return o(0==(this.negative|t.negative)),this.iuand(t)},v.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},v.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},v.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var r=0;r<a.length;r++)this.words[r]=n.words[r]^a.words[r];if(this!==n)for(;r<n.length;r++)this.words[r]=n.words[r];return this.length=n.length,this.strip()},v.prototype.ixor=function(t){return o(0==(this.negative|t.negative)),this.iuxor(t)},v.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},v.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},v.prototype.inotn=function(t){o('number'==typeof t&&0<=t);var n=0|b(t/26),a=t%26;this._expand(n),0<a&&n--;for(var r=0;r<n;r++)this.words[r]=67108863&~this.words[r];return 0<a&&(this.words[r]=~this.words[r]&67108863>>26-a),this.strip()},v.prototype.notn=function(t){return this.clone().inotn(t)},v.prototype.setn=function(t,n){o('number'==typeof t&&0<=t);var a=0|t/26,r=t%26;return this._expand(a+1),n?this.words[a]|=1<<r:this.words[a]&=~(1<<r),this.strip()},v.prototype.iadd=function(t){var n;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();var r,a;this.length>t.length?(r=this,a=t):(r=t,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|r.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!=o&&s<r.length;s++)n=(0|r.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=r.length,0!=o)this.words[this.length]=o,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},v.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},v.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var o,a;0<r?(o=this,a=t):(o=t,a=this);for(var s=0,d=0;d<a.length;d++)n=(0|o.words[d])-(0|a.words[d])+s,s=n>>26,this.words[d]=67108863&n;for(;0!=s&&d<o.length;d++)n=(0|o.words[d])+s,s=n>>26,this.words[d]=67108863&n;if(0==s&&d<o.length&&o!==this)for(;d<o.length;d++)this.words[d]=o.words[d];return this.length=y(this.length,d),o!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(t){return this.clone().isub(t)};var M=function(t,n,r){var s=t.words,a=n.words,d=r.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,g=f>>>13,b=0|s[2],y=8191&b,v=b>>>13,w=0|s[3],x=8191&w,_=w>>>13,k=0|s[4],C=8191&k,T=k>>>13,E=0|s[5],S=8191&E,A=E>>>13,I=0|s[6],N=8191&I,j=I>>>13,R=0|s[7],L=8191&R,O=R>>>13,P=0|s[8],M=8191&P,D=P>>>13,B=0|s[9],U=8191&B,q=B>>>13,F=0|a[0],z=8191&F,H=F>>>13,W=0|a[1],V=8191&W,G=W>>>13,K=0|a[2],J=8191&K,X=K>>>13,Z=0|a[3],Y=8191&Z,Q=Z>>>13,ee=0|a[4],te=8191&ee,ne=ee>>>13,ae=0|a[5],re=8191&ae,oe=ae>>>13,ie=0|a[6],se=8191&ie,de=ie>>>13,le=0|a[7],pe=8191&le,ce=le>>>13,ue=0|a[8],fe=8191&ue,he=ue>>>13,ge=0|a[9],be=8191&ge,ye=ge>>>13,ve,we,xe;r.negative=t.negative^n.negative,r.length=19,ve=h(c,z),we=h(c,H),we=0|we+h(u,z),xe=h(u,H);var _e=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(_e>>>26),_e&=67108863,ve=h(m,z),we=h(m,H),we=0|we+h(g,z),xe=h(g,H),ve=0|ve+h(c,V),we=0|we+h(c,G),we=0|we+h(u,V),xe=0|xe+h(u,G);var ke=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(ke>>>26),ke&=67108863,ve=h(y,z),we=h(y,H),we=0|we+h(v,z),xe=h(v,H),ve=0|ve+h(m,V),we=0|we+h(m,G),we=0|we+h(g,V),xe=0|xe+h(g,G),ve=0|ve+h(c,J),we=0|we+h(c,X),we=0|we+h(u,J),xe=0|xe+h(u,X);var Ce=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ce>>>26),Ce&=67108863,ve=h(x,z),we=h(x,H),we=0|we+h(_,z),xe=h(_,H),ve=0|ve+h(y,V),we=0|we+h(y,G),we=0|we+h(v,V),xe=0|xe+h(v,G),ve=0|ve+h(m,J),we=0|we+h(m,X),we=0|we+h(g,J),xe=0|xe+h(g,X),ve=0|ve+h(c,Y),we=0|we+h(c,Q),we=0|we+h(u,Y),xe=0|xe+h(u,Q);var Te=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Te>>>26),Te&=67108863,ve=h(C,z),we=h(C,H),we=0|we+h(T,z),xe=h(T,H),ve=0|ve+h(x,V),we=0|we+h(x,G),we=0|we+h(_,V),xe=0|xe+h(_,G),ve=0|ve+h(y,J),we=0|we+h(y,X),we=0|we+h(v,J),xe=0|xe+h(v,X),ve=0|ve+h(m,Y),we=0|we+h(m,Q),we=0|we+h(g,Y),xe=0|xe+h(g,Q),ve=0|ve+h(c,te),we=0|we+h(c,ne),we=0|we+h(u,te),xe=0|xe+h(u,ne);var Ee=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ee>>>26),Ee&=67108863,ve=h(S,z),we=h(S,H),we=0|we+h(A,z),xe=h(A,H),ve=0|ve+h(C,V),we=0|we+h(C,G),we=0|we+h(T,V),xe=0|xe+h(T,G),ve=0|ve+h(x,J),we=0|we+h(x,X),we=0|we+h(_,J),xe=0|xe+h(_,X),ve=0|ve+h(y,Y),we=0|we+h(y,Q),we=0|we+h(v,Y),xe=0|xe+h(v,Q),ve=0|ve+h(m,te),we=0|we+h(m,ne),we=0|we+h(g,te),xe=0|xe+h(g,ne),ve=0|ve+h(c,re),we=0|we+h(c,oe),we=0|we+h(u,re),xe=0|xe+h(u,oe);var Se=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Se>>>26),Se&=67108863,ve=h(N,z),we=h(N,H),we=0|we+h(j,z),xe=h(j,H),ve=0|ve+h(S,V),we=0|we+h(S,G),we=0|we+h(A,V),xe=0|xe+h(A,G),ve=0|ve+h(C,J),we=0|we+h(C,X),we=0|we+h(T,J),xe=0|xe+h(T,X),ve=0|ve+h(x,Y),we=0|we+h(x,Q),we=0|we+h(_,Y),xe=0|xe+h(_,Q),ve=0|ve+h(y,te),we=0|we+h(y,ne),we=0|we+h(v,te),xe=0|xe+h(v,ne),ve=0|ve+h(m,re),we=0|we+h(m,oe),we=0|we+h(g,re),xe=0|xe+h(g,oe),ve=0|ve+h(c,se),we=0|we+h(c,de),we=0|we+h(u,se),xe=0|xe+h(u,de);var Ae=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ae>>>26),Ae&=67108863,ve=h(L,z),we=h(L,H),we=0|we+h(O,z),xe=h(O,H),ve=0|ve+h(N,V),we=0|we+h(N,G),we=0|we+h(j,V),xe=0|xe+h(j,G),ve=0|ve+h(S,J),we=0|we+h(S,X),we=0|we+h(A,J),xe=0|xe+h(A,X),ve=0|ve+h(C,Y),we=0|we+h(C,Q),we=0|we+h(T,Y),xe=0|xe+h(T,Q),ve=0|ve+h(x,te),we=0|we+h(x,ne),we=0|we+h(_,te),xe=0|xe+h(_,ne),ve=0|ve+h(y,re),we=0|we+h(y,oe),we=0|we+h(v,re),xe=0|xe+h(v,oe),ve=0|ve+h(m,se),we=0|we+h(m,de),we=0|we+h(g,se),xe=0|xe+h(g,de),ve=0|ve+h(c,pe),we=0|we+h(c,ce),we=0|we+h(u,pe),xe=0|xe+h(u,ce);var Ie=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ie>>>26),Ie&=67108863,ve=h(M,z),we=h(M,H),we=0|we+h(D,z),xe=h(D,H),ve=0|ve+h(L,V),we=0|we+h(L,G),we=0|we+h(O,V),xe=0|xe+h(O,G),ve=0|ve+h(N,J),we=0|we+h(N,X),we=0|we+h(j,J),xe=0|xe+h(j,X),ve=0|ve+h(S,Y),we=0|we+h(S,Q),we=0|we+h(A,Y),xe=0|xe+h(A,Q),ve=0|ve+h(C,te),we=0|we+h(C,ne),we=0|we+h(T,te),xe=0|xe+h(T,ne),ve=0|ve+h(x,re),we=0|we+h(x,oe),we=0|we+h(_,re),xe=0|xe+h(_,oe),ve=0|ve+h(y,se),we=0|we+h(y,de),we=0|we+h(v,se),xe=0|xe+h(v,de),ve=0|ve+h(m,pe),we=0|we+h(m,ce),we=0|we+h(g,pe),xe=0|xe+h(g,ce),ve=0|ve+h(c,fe),we=0|we+h(c,he),we=0|we+h(u,fe),xe=0|xe+h(u,he);var Ne=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ne>>>26),Ne&=67108863,ve=h(U,z),we=h(U,H),we=0|we+h(q,z),xe=h(q,H),ve=0|ve+h(M,V),we=0|we+h(M,G),we=0|we+h(D,V),xe=0|xe+h(D,G),ve=0|ve+h(L,J),we=0|we+h(L,X),we=0|we+h(O,J),xe=0|xe+h(O,X),ve=0|ve+h(N,Y),we=0|we+h(N,Q),we=0|we+h(j,Y),xe=0|xe+h(j,Q),ve=0|ve+h(S,te),we=0|we+h(S,ne),we=0|we+h(A,te),xe=0|xe+h(A,ne),ve=0|ve+h(C,re),we=0|we+h(C,oe),we=0|we+h(T,re),xe=0|xe+h(T,oe),ve=0|ve+h(x,se),we=0|we+h(x,de),we=0|we+h(_,se),xe=0|xe+h(_,de),ve=0|ve+h(y,pe),we=0|we+h(y,ce),we=0|we+h(v,pe),xe=0|xe+h(v,ce),ve=0|ve+h(m,fe),we=0|we+h(m,he),we=0|we+h(g,fe),xe=0|xe+h(g,he),ve=0|ve+h(c,be),we=0|we+h(c,ye),we=0|we+h(u,be),xe=0|xe+h(u,ye);var je=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(je>>>26),je&=67108863,ve=h(U,V),we=h(U,G),we=0|we+h(q,V),xe=h(q,G),ve=0|ve+h(M,J),we=0|we+h(M,X),we=0|we+h(D,J),xe=0|xe+h(D,X),ve=0|ve+h(L,Y),we=0|we+h(L,Q),we=0|we+h(O,Y),xe=0|xe+h(O,Q),ve=0|ve+h(N,te),we=0|we+h(N,ne),we=0|we+h(j,te),xe=0|xe+h(j,ne),ve=0|ve+h(S,re),we=0|we+h(S,oe),we=0|we+h(A,re),xe=0|xe+h(A,oe),ve=0|ve+h(C,se),we=0|we+h(C,de),we=0|we+h(T,se),xe=0|xe+h(T,de),ve=0|ve+h(x,pe),we=0|we+h(x,ce),we=0|we+h(_,pe),xe=0|xe+h(_,ce),ve=0|ve+h(y,fe),we=0|we+h(y,he),we=0|we+h(v,fe),xe=0|xe+h(v,he),ve=0|ve+h(m,be),we=0|we+h(m,ye),we=0|we+h(g,be),xe=0|xe+h(g,ye);var Re=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Re>>>26),Re&=67108863,ve=h(U,J),we=h(U,X),we=0|we+h(q,J),xe=h(q,X),ve=0|ve+h(M,Y),we=0|we+h(M,Q),we=0|we+h(D,Y),xe=0|xe+h(D,Q),ve=0|ve+h(L,te),we=0|we+h(L,ne),we=0|we+h(O,te),xe=0|xe+h(O,ne),ve=0|ve+h(N,re),we=0|we+h(N,oe),we=0|we+h(j,re),xe=0|xe+h(j,oe),ve=0|ve+h(S,se),we=0|we+h(S,de),we=0|we+h(A,se),xe=0|xe+h(A,de),ve=0|ve+h(C,pe),we=0|we+h(C,ce),we=0|we+h(T,pe),xe=0|xe+h(T,ce),ve=0|ve+h(x,fe),we=0|we+h(x,he),we=0|we+h(_,fe),xe=0|xe+h(_,he),ve=0|ve+h(y,be),we=0|we+h(y,ye),we=0|we+h(v,be),xe=0|xe+h(v,ye);var Le=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Le>>>26),Le&=67108863,ve=h(U,Y),we=h(U,Q),we=0|we+h(q,Y),xe=h(q,Q),ve=0|ve+h(M,te),we=0|we+h(M,ne),we=0|we+h(D,te),xe=0|xe+h(D,ne),ve=0|ve+h(L,re),we=0|we+h(L,oe),we=0|we+h(O,re),xe=0|xe+h(O,oe),ve=0|ve+h(N,se),we=0|we+h(N,de),we=0|we+h(j,se),xe=0|xe+h(j,de),ve=0|ve+h(S,pe),we=0|we+h(S,ce),we=0|we+h(A,pe),xe=0|xe+h(A,ce),ve=0|ve+h(C,fe),we=0|we+h(C,he),we=0|we+h(T,fe),xe=0|xe+h(T,he),ve=0|ve+h(x,be),we=0|we+h(x,ye),we=0|we+h(_,be),xe=0|xe+h(_,ye);var Oe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Oe>>>26),Oe&=67108863,ve=h(U,te),we=h(U,ne),we=0|we+h(q,te),xe=h(q,ne),ve=0|ve+h(M,re),we=0|we+h(M,oe),we=0|we+h(D,re),xe=0|xe+h(D,oe),ve=0|ve+h(L,se),we=0|we+h(L,de),we=0|we+h(O,se),xe=0|xe+h(O,de),ve=0|ve+h(N,pe),we=0|we+h(N,ce),we=0|we+h(j,pe),xe=0|xe+h(j,ce),ve=0|ve+h(S,fe),we=0|we+h(S,he),we=0|we+h(A,fe),xe=0|xe+h(A,he),ve=0|ve+h(C,be),we=0|we+h(C,ye),we=0|we+h(T,be),xe=0|xe+h(T,ye);var Pe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Pe>>>26),Pe&=67108863,ve=h(U,re),we=h(U,oe),we=0|we+h(q,re),xe=h(q,oe),ve=0|ve+h(M,se),we=0|we+h(M,de),we=0|we+h(D,se),xe=0|xe+h(D,de),ve=0|ve+h(L,pe),we=0|we+h(L,ce),we=0|we+h(O,pe),xe=0|xe+h(O,ce),ve=0|ve+h(N,fe),we=0|we+h(N,he),we=0|we+h(j,fe),xe=0|xe+h(j,he),ve=0|ve+h(S,be),we=0|we+h(S,ye),we=0|we+h(A,be),xe=0|xe+h(A,ye);var Me=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Me>>>26),Me&=67108863,ve=h(U,se),we=h(U,de),we=0|we+h(q,se),xe=h(q,de),ve=0|ve+h(M,pe),we=0|we+h(M,ce),we=0|we+h(D,pe),xe=0|xe+h(D,ce),ve=0|ve+h(L,fe),we=0|we+h(L,he),we=0|we+h(O,fe),xe=0|xe+h(O,he),ve=0|ve+h(N,be),we=0|we+h(N,ye),we=0|we+h(j,be),xe=0|xe+h(j,ye);var De=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(De>>>26),De&=67108863,ve=h(U,pe),we=h(U,ce),we=0|we+h(q,pe),xe=h(q,ce),ve=0|ve+h(M,fe),we=0|we+h(M,he),we=0|we+h(D,fe),xe=0|xe+h(D,he),ve=0|ve+h(L,be),we=0|we+h(L,ye),we=0|we+h(O,be),xe=0|xe+h(O,ye);var Be=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Be>>>26),Be&=67108863,ve=h(U,fe),we=h(U,he),we=0|we+h(q,fe),xe=h(q,he),ve=0|ve+h(M,be),we=0|we+h(M,ye),we=0|we+h(D,be),xe=0|xe+h(D,ye);var Ue=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ue>>>26),Ue&=67108863,ve=h(U,be),we=h(U,ye),we=0|we+h(q,be),xe=h(q,ye);var qe=0|(0|o+ve)+((8191&we)<<13);return o=0|(0|xe+(we>>>13))+(qe>>>26),qe&=67108863,d[0]=_e,d[1]=ke,d[2]=Ce,d[3]=Te,d[4]=Ee,d[5]=Se,d[6]=Ae,d[7]=Ie,d[8]=Ne,d[9]=je,d[10]=Re,d[11]=Le,d[12]=Oe,d[13]=Pe,d[14]=Me,d[15]=De,d[16]=Be,d[17]=Ue,d[18]=qe,0!=o&&(d[19]=o,r.length++),r};h||(M=w),v.prototype.mulTo=function(t,n){var a=this.length+t.length,r;return r=10===this.length&&10===t.length?M(this,t,n):63>a?w(this,t,n):1024>a?x(this,t,n):k(this,t,n),r},C.prototype.makeRBT=function(n){for(var a=Array(n),t=v.prototype._countBits(n)-1,r=0;r<n;r++)a[r]=this.revBin(r,t,n);return a},C.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var r=0,o=0;o<n;o++)r|=(1&t)<<n-o-1,t>>=1;return r},C.prototype.permute=function(t,n,a,r,o,s){for(var d=0;d<s;d++)r[d]=n[t[d]],o[d]=a[t[d]]},C.prototype.transform=function(t,n,a,r,o,d){this.permute(d,t,n,a,r,o);for(var u=1;u<o;u<<=1)for(var s=u<<1,l=f(2*m/s),h=c(2*m/s),g=0;g<o;g+=s)for(var b=l,y=h,v=0;v<u;v++){var w=a[g+v],x=r[g+v],_=a[g+v+u],k=r[g+v+u],C=b*_-y*k;k=b*k+y*_,_=C,a[g+v]=w+_,r[g+v]=x+k,a[g+v+u]=w-_,r[g+v+u]=x-k,v!==s&&(C=l*b-h*y,y=l*y+h*b,b=C)}},C.prototype.guessLen13b=function(t,n){var a=1|y(n,t),r=1&a,o=0;for(a=0|a/2;a;a>>>=1)o++;return 1<<o+1+r},C.prototype.conjugate=function(n,a,r){if(!(1>=r))for(var o=0,s;o<r/2;o++)s=n[o],n[o]=n[r-o-1],n[r-o-1]=s,s=a[o],a[o]=-a[r-o-1],a[r-o-1]=-s},C.prototype.normalize13b=function(t,n){for(var a=0,r=0,o;r<n/2;r++)o=8192*d(t[2*r+1]/n)+d(t[2*r]/n)+a,t[r]=67108863&o,a=67108864>o?0:0|o/67108864;return t},C.prototype.convert13b=function(t,n,a,r){for(var s=0,d=0;d<n;d++)s+=0|t[d],a[2*d]=8191&s,s>>>=13,a[2*d+1]=8191&s,s>>>=13;for(d=2*n;d<r;++d)a[d]=0;o(0==s),o(0==(-8192&s))},C.prototype.stub=function(t){for(var n=Array(t),a=0;a<t;a++)n[a]=0;return n},C.prototype.mulp=function(t,n,a){var r=2*this.guessLen13b(t.length,n.length),o=this.makeRBT(r),s=this.stub(r),d=Array(r),l=Array(r),c=Array(r),u=Array(r),f=Array(r),m=Array(r),h=a.words;h.length=r,this.convert13b(t.words,t.length,d,r),this.convert13b(n.words,n.length,u,r),this.transform(d,s,l,c,r,o),this.transform(u,s,f,m,r,o);for(var g=0,b;g<r;g++)b=l[g]*f[g]-c[g]*m[g],c[g]=l[g]*m[g]+c[g]*f[g],l[g]=b;return this.conjugate(l,c,r),this.transform(l,c,h,s,r,o),this.conjugate(h,s,r),this.normalize13b(h,r),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},v.prototype.mul=function(t){var n=new v(null);return n.words=Array(this.length+t.length),this.mulTo(t,n)},v.prototype.mulf=function(t){var n=new v(null);return n.words=Array(this.length+t.length),k(this,t,n)},v.prototype.imul=function(t){return this.clone().mulTo(t,this)},v.prototype.imuln=function(t){o('number'==typeof t),o(67108864>t);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*t,s=(67108863&r)+(67108863&n);n>>=26,n+=0|r/67108864,n+=s>>>26,this.words[a]=67108863&s}return 0!=n&&(this.words[a]=n,this.length++),this},v.prototype.muln=function(t){return this.clone().imuln(t)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(t){var n=u(t);if(0===n.length)return new v(1);for(var a=this,r=0;r<n.length&&!(0!==n[r]);r++,a=a.sqr());if(++r<n.length)for(var o=a.sqr();r<n.length;r++,o=o.sqr())0!==n[r]&&(a=a.mul(o));return a},v.prototype.iushln=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26,r;if(0!=n){var s=0;for(r=0;r<this.length;r++){var d=this.words[r]&67108863>>>26-n<<26-n,l=(0|this.words[r])-d<<n;this.words[r]=l|s,s=d>>>26-n}s&&(this.words[r]=s,this.length++)}if(0!=a){for(r=this.length-1;0<=r;r--)this.words[r+a]=this.words[r];for(r=0;r<a;r++)this.words[r]=0;this.length+=a}return this.strip()},v.prototype.ishln=function(t){return o(0===this.negative),this.iushln(t)},v.prototype.iushrn=function(t,n,a){o('number'==typeof t&&0<=t);var d=n?(n-n%26)/26:0;var l=t%26,r=_((t-l)/26,this.length),s=a;if(d-=r,d=y(0,d),s){for(var c=0;c<r;c++)s.words[c]=this.words[c];s.length=r}if(0===r);else if(this.length>r)for(this.length-=r,c=0;c<this.length;c++)this.words[c]=this.words[c+r];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!=u||c>=d);c--){var f=0|this.words[c];this.words[c]=u<<26-l|f>>>l,u=f&(67108863^67108863>>>l<<l)}return s&&0!=u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(t,n,a){return o(0===this.negative),this.iushrn(t,n,a)},v.prototype.shln=function(t){return this.clone().ishln(t)},v.prototype.ushln=function(t){return this.clone().iushln(t)},v.prototype.shrn=function(t){return this.clone().ishrn(t)},v.prototype.ushrn=function(t){return this.clone().iushrn(t)},v.prototype.testn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(this.length<=a)return!1;var r=this.words[a];return!!(r&1<<n)},v.prototype.imaskn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=a)return this;if(0!=n&&a++,this.length=_(a,this.length),0!=n){this.words[this.length-1]&=67108863^67108863>>>n<<n}return this.strip()},v.prototype.maskn=function(t){return this.clone().imaskn(t)},v.prototype.iaddn=function(t){return o('number'==typeof t),o(67108864>t),0>t?this.isubn(-t):0===this.negative?this._iaddn(t):1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this)},v.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&67108864<=this.words[n];n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=y(this.length,n+1),this},v.prototype.isubn=function(t){if(o('number'==typeof t),o(67108864>t),0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&0>this.words[n];n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},v.prototype.addn=function(t){return this.clone().iaddn(t)},v.prototype.subn=function(t){return this.clone().isubn(t)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(t,n,a){var r=t.length+a,s;this._expand(r);var d=0,l;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+d;var c=(0|t.words[s])*n;l-=67108863&c,d=(l>>26)-(0|c/67108864),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)l=(0|this.words[s+a])+d,d=l>>26,this.words[s+a]=67108863&l;if(0==d)return this.strip();for(o(-1==d),d=0,s=0;s<this.length;s++)l=-(0|this.words[s])+d,d=l>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},v.prototype._wordDiv=function(t,n){var r=this.length-t.length,o=this.clone(),s=t,d=0|s.words[s.length-1],l=this._countBits(d);r=26-l,0!=r&&(s=s.ushln(r),o.iushln(r),d=0|s.words[s.length-1]);var c=o.length-s.length,u;if('mod'!==n){u=new v(null),u.length=c+1,u.words=Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var m=o.clone()._ishlnsubmul(s,1,c);0===m.negative&&(o=m,u&&(u.words[c]=1));for(var h=c-1,g;0<=h;h--){for(g=67108864*(0|o.words[s.length+h])+(0|o.words[s.length+h-1]),g=_(0|g/d,67108863),o._ishlnsubmul(s,g,h);0!==o.negative;)g--,o.negative=0,o._ishlnsubmul(s,1,h),o.isZero()||(o.negative^=1);u&&(u.words[h]=g)}return u&&u.strip(),o.strip(),'div'!==n&&0!=r&&o.iushrn(r),{div:u||null,mod:o}},v.prototype.divmod=function(t,n,a){if(o(!t.isZero()),this.isZero())return{div:new v(0),mod:new v(0)};var r,s,d;return 0!==this.negative&&0===t.negative?(d=this.neg().divmod(t,n),'mod'!==n&&(r=d.div.neg()),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(d=this.divmod(t.neg(),n),'mod'!==n&&(r=d.div.neg()),{div:r,mod:d.mod}):0==(this.negative&t.negative)?t.length>this.length||0>this.cmp(t)?{div:new v(0),mod:this}:1===t.length?'div'===n?{div:this.divn(t.words[0]),mod:null}:'mod'===n?{div:null,mod:new v(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new v(this.modn(t.words[0]))}:this._wordDiv(t,n):(d=this.neg().divmod(t.neg(),n),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:d.div,mod:s})},v.prototype.div=function(t){return this.divmod(t,'div',!1).div},v.prototype.mod=function(t){return this.divmod(t,'mod',!1).mod},v.prototype.umod=function(t){return this.divmod(t,'mod',!0).mod},v.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0===n.div.negative?n.mod:n.mod.isub(t),r=t.ushrn(1),o=t.andln(1),s=a.cmp(r);return 0>s||1===o&&0===s?n.div:0===n.div.negative?n.div.iaddn(1):n.div.isubn(1)},v.prototype.modn=function(t){o(67108863>=t);for(var n=0,a=this.length-1;0<=a;a--)n=(67108864%t*n+(0|this.words[a]))%t;return n},v.prototype.idivn=function(t){o(67108863>=t);for(var n=0,a=this.length-1,r;0<=a;a--)r=(0|this.words[a])+67108864*n,this.words[a]=0|r/t,n=r%t;return this.strip()},v.prototype.divn=function(t){return this.clone().idivn(t)},v.prototype.egcd=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=new v(0),l=new v(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var u=a.clone(),f=n.clone();!n.isZero();){for(var m=0,h=1;0==(n.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(n.iushrn(m);0<m--;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(f)),r.iushrn(1),s.iushrn(1);for(var g=0,b=1;0==(a.words[0]&b)&&26>g;++g,b<<=1);if(0<g)for(a.iushrn(g);0<g--;)(d.isOdd()||l.isOdd())&&(d.iadd(u),l.isub(f)),d.iushrn(1),l.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(d),s.isub(l)):(a.isub(n),d.isub(r),l.isub(s))}return{a:d,b:l,gcd:a.iushln(c)}},v.prototype._invmp=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=a.clone();0<n.cmpn(1)&&0<a.cmpn(1);){for(var l=0,c=1;0==(n.words[0]&c)&&26>l;++l,c<<=1);if(0<l)for(n.iushrn(l);0<l--;)r.isOdd()&&r.iadd(d),r.iushrn(1);for(var u=0,f=1;0==(a.words[0]&f)&&26>u;++u,f<<=1);if(0<u)for(a.iushrn(u);0<u--;)s.isOdd()&&s.iadd(d),s.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(s)):(a.isub(n),s.isub(r))}var m;return m=0===n.cmpn(1)?r:s,0>m.cmpn(0)&&m.iadd(t),m},v.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var o=this.clone(),a=n.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},v.prototype.invm=function(t){return this.egcd(t).a.umod(t)},v.prototype.isEven=function(){return 0==(1&this.words[0])},v.prototype.isOdd=function(){return 1==(1&this.words[0])},v.prototype.andln=function(t){return this.words[0]&t},v.prototype.bincn=function(t){o('number'==typeof t);var n=t%26,a=(t-n)/26,r=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=r,this;for(var s=r,d=a,l;0!=s&&d<this.length;d++)l=0|this.words[d],l+=s,s=l>>>26,l&=67108863,this.words[d]=l;return 0!=s&&(this.words[d]=s,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(t){var n=0>t;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;this.strip();var a;if(1<this.length)a=1;else{n&&(t=-t),o(67108863>=t,'Number is too big');var r=0|this.words[0];a=r===t?0:r<t?-1:1}return 0===this.negative?a:0|-a},v.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0===this.negative?n:0|-n},v.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,r=this.length-1;0<=r;r--){var o=0|this.words[r],a=0|t.words[r];if(o!=a){o<a?n=-1:o>a&&(n=1);break}}return n},v.prototype.gtn=function(t){return 1===this.cmpn(t)},v.prototype.gt=function(t){return 1===this.cmp(t)},v.prototype.gten=function(t){return 0<=this.cmpn(t)},v.prototype.gte=function(t){return 0<=this.cmp(t)},v.prototype.ltn=function(t){return-1===this.cmpn(t)},v.prototype.lt=function(t){return-1===this.cmp(t)},v.prototype.lten=function(t){return 0>=this.cmpn(t)},v.prototype.lte=function(t){return 0>=this.cmp(t)},v.prototype.eqn=function(t){return 0===this.cmpn(t)},v.prototype.eq=function(t){return 0===this.cmp(t)},v.red=function(t){return new N(t)},v.prototype.toRed=function(t){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),t.convertTo(this)._forceRed(t)},v.prototype.fromRed=function(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},v.prototype._forceRed=function(t){return this.red=t,this},v.prototype.forceRed=function(t){return o(!this.red,'Already a number in reduction context'),this._forceRed(t)},v.prototype.redAdd=function(t){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,t)},v.prototype.redIAdd=function(t){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,t)},v.prototype.redSub=function(t){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,t)},v.prototype.redISub=function(t){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,t)},v.prototype.redShl=function(t){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,t)},v.prototype.redMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.mul(this,t)},v.prototype.redIMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.imul(this,t)},v.prototype.redSqr=function(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(t){return o(this.red&&!t.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,t)};var D={k256:null,p224:null,p192:null,p25519:null};T.prototype._tmp=function(){var t=new v(null);return t.words=Array(b(this.n/13)),t},T.prototype.ireduce=function(t){var n=t,a;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),a=n.bitLength();while(a>this.n);var r=a<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},T.prototype.split=function(t,n){t.iushrn(this.n,0,n)},T.prototype.imulK=function(t){return t.imul(this.k)},r(E,T),E.prototype.split=function(t,n){for(var a=4194303,r=_(t.length,9),o=0;o<r;o++)n.words[o]=t.words[o];if(n.length=r,9>=t.length)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(n.words[n.length++]=s&a,o=10;o<t.length;o++){var d=0|t.words[o];t.words[o-10]=(d&a)<<4|s>>>22,s=d}s>>>=22,t.words[o-10]=s,t.length-=0===s&&10<t.length?10:9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0,r;a<t.length;a++)r=0|t.words[a],n+=977*r,t.words[a]=67108863&n,n=64*r+(0|n/67108864);return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(S,T),r(A,T),r(I,T),I.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var r=19*(0|t.words[a])+n,o=67108863&r;r>>>=26,t.words[a]=o,n=r}return 0!=n&&(t.words[t.length++]=n),t},v._prime=function(t){if(D[t])return D[t];var n;if('k256'===t)n=new E;else if('p224'===t)n=new S;else if('p192'===t)n=new A;else if('p25519'===t)n=new I;else throw new Error('Unknown prime '+t);return D[t]=n,n},N.prototype._verify1=function(t){o(0===t.negative,'red works only with positives'),o(t.red,'red works only with red numbers')},N.prototype._verify2=function(t,n){o(0==(t.negative|n.negative),'red works only with positives'),o(t.red&&t.red===n.red,'red works only with red numbers')},N.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},N.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},N.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a._forceRed(this)},N.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a},N.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a._forceRed(this)},N.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a},N.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},N.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},N.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},N.prototype.isqr=function(t){return this.imul(t,t.clone())},N.prototype.sqr=function(t){return this.mul(t,t)},N.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var d=this.m.add(new v(1)).iushrn(2);return this.pow(n,d)}for(var l=this.m.subn(1),u=0;!l.isZero()&&0===l.andln(1);)u++,l.iushrn(1);o(!l.isZero());var s=new v(1).toRed(this),f=s.redNeg(),h=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new v(2*g*g).toRed(this);0!==this.pow(g,h).cmp(f);)g.redIAdd(f);for(var y=this.pow(g,l),c=this.pow(n,l.addn(1).iushrn(1)),r=this.pow(n,l),t=u;0!==r.cmp(s);){for(var m=r,w=0;0!==m.cmp(s);w++)m=m.redSqr();o(w<t);var x=this.pow(y,new v(1).iushln(t-w-1));c=c.redMul(x),y=x.redSqr(),r=r.redMul(y),t=w}return c},N.prototype.invm=function(t){var n=t._invmp(this.m);return 0===n.negative?this.imod(n):(n.negative=0,this.imod(n).redNeg())},N.prototype.pow=function(t,n){if(n.isZero())return new v(1).toRed(this);if(0===n.cmpn(1))return t.clone();var a=4,r=Array(1<<a);r[0]=new v(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var s=r[0],d=0,l=0,c=n.bitLength()%26;for(0==c&&(c=26),o=n.length-1;0<=o;o--){for(var u=n.words[o],f=c-1,m;0<=f;f--){if(m=1&u>>f,s!==r[0]&&(s=this.sqr(s)),0==m&&0==d){l=0;continue}d<<=1,d|=m,l++,l!=a&&(0!==o||0!==f)||(s=this.mul(s,r[d]),l=0,d=0)}c=26}return s},N.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},N.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},v.mont=function(t){return new j(t)},r(j,N),j.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},j.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},j.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new v(0)._forceRed(this);var r=n.mul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.invm=function(t){var n=this.imod(t._invmp(this.m).mul(this.r2));return n._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(7)(t))},function(t,n,a){var r=a(46),o=a(10).document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,n,a){var r=a(46);t.exports=function(t,n){if(!r(t))return t;var a,o;if(n&&'function'==typeof(a=t.toString)&&!r(o=a.call(t)))return o;if('function'==typeof(a=t.valueOf)&&!r(o=a.call(t)))return o;if(!n&&'function'==typeof(a=t.toString)&&!r(o=a.call(t)))return o;throw TypeError('Can\'t convert object to primitive value')}},function(t){t.exports=function(t){if(t==void 0)throw TypeError('Can\'t call method on  '+t);return t}},function(t,n,a){var r=a(114);t.exports=function(t){return 0<t?_(r(t),9007199254740991):0}},function(t){t.exports=function(t){return isNaN(t=+t)?0:(0<t?w:b)(t)}},function(t,n,a){var r=a(116)('keys'),o=a(80);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,a){var r=a(10),o='__core-js_shared__',s=r[o]||(r[o]={});t.exports=function(t){return s[t]||(s[t]={})}},function(t){t.exports=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf']},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,a){var r=a(112);t.exports=function(t){return Object(r(t))}},function(t,n,a){'use strict';var r=a(369)(!0);a(188)(String,'String',function(t){this._t=t+'',this._i=0},function(){var t=this._t,n=this._i,a;return n>=t.length?{value:void 0,done:!0}:(a=r(t,n),this._i+=a.length,{value:a,done:!1})})},function(t,n,a){'use strict';function r(t){var n,a;this.promise=new t(function(t,r){if(n!=void 0||a!=void 0)throw TypeError('Bad Promise constructor');n=t,a=r}),this.resolve=o(n),this.reject=o(a)}var o=a(78);t.exports.f=function(t){return new r(t)}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.clearSession=n.getSession=void 0;var o=a(77),s=r(o),d=a(36),l=r(d),c=a(37),u=r(c),f=n.getSession=function(){var t=(0,u.default)(l.default.mark(function t(n){var a;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.getData)(n);case 2:return a=t.sent,t.abrupt('return',a.session||null);case 4:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}(),m=n.clearSession=function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.updateStorage)(n,function(t){return(0,s.default)({},t,{session:null})});case 2:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}();n.saveSession=function(t){var n=this;return function(){var a=(0,u.default)(l.default.mark(function a(r){var o;return l.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,h.updateStorage)(t,function(t){return(0,s.default)({},t,{session:r})});case 2:return o=n.sent,n.abrupt('return',o.session);case 4:case'end':return n.stop();}},a,n)}));return function(){return a.apply(this,arguments)}}()};var h=a(85)},function(t,n,a){n.f=a(11)},function(t,n,a){var r=a(10),o=a(16),s=a(83),d=a(123),l=a(26).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=s?{}:r.Symbol||{});'_'==t.charAt(0)||t in n||l(n,t,{value:d.f(t)})}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.fetchWithCredentials=n.requiresAuth=n.getRegisteredRp=n.logout=n.currentSession=n.login=void 0;var o=a(77),s=r(o),d=a(36),l=r(d),c=a(37),u=r(c),f=function(){var t=(0,u.default)(l.default.mark(function t(n){var a,r;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_.getData)(n);case 2:if(a=t.sent,r=a.rpConfig,!r){t.next=9;break}return r.store=n,t.abrupt('return',y.default.from(r));case 9:return t.abrupt('return',null);case 10:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}(),m=function(){var t=(0,u.default)(l.default.mark(function t(n,a,r){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_.updateStorage)(n,function(t){return(0,s.default)({},t,{rpConfig:r})});case 2:return t.abrupt('return',r);case 3:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}();a(44);var h=a(205),g=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}(h),b=a(410),y=r(b),v=a(431),w=r(v),x=a(129),_=a(85),k=n.login=function(t,n){return E(t,n).then(function(t){return function(){return A(t,n)}}).catch(function(t){return console.warn('Error logging in with WebID-OIDC'),console.error(t),null})},C=n.currentSession=function(){var t=(0,u.default)(l.default.mark(function t(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:(0,_.defaultStorage)(),a,r,o,s,d,c,u,m,h;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(n);case 3:if(a=t.sent,a){t.next=6;break}return t.abrupt('return',null);case 6:if(r=(0,x.currentUrl)(),r&&r.includes('#')){t.next=9;break}return t.abrupt('return',null);case 9:return t.next=11,(0,_.getData)(n);case 11:return o=t.sent,t.next=14,a.validateResponse(r,o);case 14:if(s=t.sent,s){t.next=17;break}return t.abrupt('return',null);case 17:return(0,x.clearHashFragment)(),d=s.idp,c=s.idToken,u=s.accessToken,m=s.clientId,h=s.sessionKey,t.abrupt('return',{authType:'WebID-OIDC',webId:s.decoded.payload.sub,idp:d,idToken:c,accessToken:u,clientId:m,sessionKey:h});case 22:return t.prev=22,t.t0=t['catch'](0),console.warn('Error finding a WebID-OIDC session'),console.error(t.t0),t.abrupt('return',null);case 27:case'end':return t.stop();}},t,void 0,[[0,22]])}));return function(){return t.apply(this,arguments)}}(),T=n.logout=function(t){return f(t).then(function(t){return t?t.logout():void 0}).catch(function(t){console.warn('Error logging out of the WebID-OIDC session'),console.error(t)})},E=n.getRegisteredRp=function(t,n){return f(n.storage).then(function(a){return a&&a.provider.url===t?a:S(t,n).then(function(a){return m(n.storage,t,a)})})},S=function(t,n){var a=n.storage,r=n.callbackUri,o='id_token token';return y.default.register(t,{issuer:t,grant_types:['implicit'],redirect_uris:[r],response_types:[o],scope:'openid profile'},{defaults:{authenticate:{redirect_uri:r,response_type:o}},store:a})},A=function(){var t=(0,u.default)(l.default.mark(function t(n,a){var r=a.callbackUri,o=a.storage,s,d;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_.getData)(o);case 2:return s=t.sent,t.next=5,n.createRequest({redirect_uri:r},s);case 5:return d=t.sent,t.next=8,(0,_.updateStorage)(o,function(){return s});case 8:return t.abrupt('return',(0,x.navigateTo)(d));case 9:case'end':return t.stop();}},t,void 0)}));return function(){return t.apply(this,arguments)}}(),I=n.requiresAuth=function(t){if(401!==t.status)return!1;var n=t.headers.get('www-authenticate');if(!n)return!1;var a=g.parse(n);return'Bearer'===a.scheme&&a.params&&'openid webid'===a.params.scope},N=n.fetchWithCredentials=function(t){return function(){var n=(0,u.default)(l.default.mark(function n(a,r){var o,d;return l.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.default.issueFor(a,t);case 2:return o=n.sent,d=(0,s.default)({},r,{headers:(0,s.default)({},r&&r.headers?r.headers:{},{authorization:'Bearer '+o})}),n.abrupt('return',fetch(a,d));case 5:case'end':return n.stop();}},n,void 0)}));return function(){return n.apply(this,arguments)}}()}},function(t,n,a){'use strict';(function(n){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function r(t,n){if(t===n)return 0;for(var a=t.length,r=n.length,o=0,s=_(a,r);o<s;++o)if(t[o]!==n[o]){a=t[o],r=n[o];break}return a<r?-1:r<a?1:0}function o(t){return n.Buffer&&'function'==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(t):!!(null!=t&&t._isBuffer)}function s(t){return Object.prototype.toString.call(t)}function d(t){return!o(t)&&!('function'!=typeof n.ArrayBuffer)&&('function'==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(!!(t instanceof DataView)||t.buffer&&t.buffer instanceof ArrayBuffer))}function l(t){if(C.isFunction(t)){if(S)return t.name;var n=t.toString(),a=n.match(I);return a&&a[1]}}function c(t,a){return'string'==typeof t?t.length<a?t:t.slice(0,a):t}function u(t){if(S||!C.isFunction(t))return C.inspect(t);var n=l(t),a=n?': '+n:'';return'[Function'+a+']'}function f(t){return c(u(t.actual),128)+' '+t.operator+' '+c(u(t.expected),128)}function m(t,n,a,r,o){throw new A.AssertionError({message:a,actual:t,expected:n,operator:r,stackStartFunction:o})}function h(t,n){t||m(t,!0,n,'==',A.ok)}function g(t,n,a,l){if(t===n)return!0;if(o(t)&&o(n))return 0===r(t,n);if(C.isDate(t)&&C.isDate(n))return t.getTime()===n.getTime();if(C.isRegExp(t)&&C.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if((null===t||'object'!=typeof t)&&(null===n||'object'!=typeof n))return a?t==n:t==n;if(d(t)&&d(n)&&s(t)===s(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(o(t)!==o(n))return!1;l=l||{actual:[],expected:[]};var c=l.actual.indexOf(t);return-1!==c&&c===l.expected.indexOf(n)||(l.actual.push(t),l.expected.push(n),b(t,n,a,l))}function y(t){return'[object Arguments]'==Object.prototype.toString.call(t)}function b(t,n,a,r){if(null===t||t===void 0||null===n||n===void 0)return!1;if(C.isPrimitive(t)||C.isPrimitive(n))return t===n;if(a&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(n))return!1;var o=y(t),s=y(n);if(o&&!s||!o&&s)return!1;if(o)return t=E.call(t),n=E.call(n),g(t,n,a);var d=N(t),l=N(n),c,u;if(d.length!==l.length)return!1;for(d.sort(),l.sort(),u=d.length-1;0<=u;u--)if(d[u]!==l[u])return!1;for(u=d.length-1;0<=u;u--)if(c=d[u],!g(t[c],n[c],a,r))return!1;return!0}function v(t,n,a){g(t,n,!0)&&m(t,n,a,'notDeepStrictEqual',v)}function w(t,n){if(!t||!n)return!1;if('[object RegExp]'==Object.prototype.toString.call(n))return n.test(t);try{if(t instanceof n)return!0}catch(t){}return!Error.isPrototypeOf(n)&&!0===n.call({},t)}function x(t){var n;try{t()}catch(t){n=t}return n}function k(t,n,a,r){var o;if('function'!=typeof n)throw new TypeError('"block" argument must be a function');'string'==typeof a&&(r=a,a=null),o=x(n),r=(a&&a.name?' ('+a.name+').':'.')+(r?' '+r:'.'),t&&!o&&m(o,a,'Missing expected exception'+r);var s='string'==typeof r,d=!t&&C.isError(o),l=!t&&o&&!a;if((d&&s&&w(o,a)||l)&&m(o,a,'Got unwanted exception'+r),t&&o&&a&&!w(o,a)||!t&&o)throw o}var C=a(95),T=Object.prototype.hasOwnProperty,E=Array.prototype.slice,S=function(){return'foo'===function(){}.name}(),A=t.exports=h,I=/\s*function\s+([^\(\s]*)\s*/;A.AssertionError=function(t){this.name='AssertionError',this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var n=t.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var a=new Error;if(a.stack){var r=a.stack,o=l(n),s=r.indexOf('\n'+o);if(0<=s){var d=r.indexOf('\n',s+1);r=r.substring(d+1)}this.stack=r}}},C.inherits(A.AssertionError,Error),A.fail=m,A.ok=h,A.equal=function(t,n,a){t!=n&&m(t,n,a,'==',A.equal)},A.notEqual=function(t,n,a){t==n&&m(t,n,a,'!=',A.notEqual)},A.deepEqual=function(t,n,a){g(t,n,!1)||m(t,n,a,'deepEqual',A.deepEqual)},A.deepStrictEqual=function(t,n,a){g(t,n,!0)||m(t,n,a,'deepStrictEqual',A.deepStrictEqual)},A.notDeepEqual=function(t,n,a){g(t,n,!1)&&m(t,n,a,'notDeepEqual',A.notDeepEqual)},A.notDeepStrictEqual=v,A.strictEqual=function(t,n,a){t!==n&&m(t,n,a,'===',A.strictEqual)},A.notStrictEqual=function(t,n,a){t===n&&m(t,n,a,'!==',A.notStrictEqual)},A.throws=function(t,n,a){k(!0,t,n,a)},A.doesNotThrow=function(t,n,a){k(!1,t,n,a)},A.ifError=function(t){if(t)throw t};var N=Object.keys||function(t){var n=[];for(var a in t)T.call(t,a)&&n.push(a);return n}}).call(n,a(3))},function(t){'use strict';function n(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var a=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),r=0,o=function(){function t(a,o){n(this,t),this.expr=a,this.mode=o||r,this.tokens=a&&'#'===a.charAt(0)?this.parseURIFragmentIdentifier(a):this.parseJSONString(a)}return a(t,[{key:'escape',value:function(t){return t.replace(/~/g,'~0').replace(/\//g,'~1')}},{key:'unescape',value:function(t){return t.replace(/~1/g,'/').replace(/~0/g,'~')}},{key:'parseJSONString',value:function(t){if('string'!=typeof t)throw new Error('JSON Pointer must be a string');if(''===t)return[];if('/'!==t.charAt(0))throw new Error('Invalid JSON Pointer');return'/'===t?['']:t.substr(1).split('/').map(this.unescape)}},{key:'toJSONString',value:function(){return'/'+this.tokens.map(this.escape).join('/')}},{key:'parseURIFragmentIdentifier',value:function(t){if('string'!=typeof t)throw new Error('JSON Pointer must be a string');if('#'!==t.charAt(0))throw new Error('Invalid JSON Pointer URI Fragment Identifier');return this.parseJSONString(decodeURIComponent(t.substr(1)))}},{key:'toURIFragmentIdentifier',value:function(){var t=this,n=this.tokens.map(function(n){return encodeURIComponent(t.escape(n))}).join('/');return'#/'+n}},{key:'get',value:function(t){for(var n=t,a=this.tokens,o=0;o<a.length;o++){if(!n||void 0===n[a[o]]){if(this.mode!==r)return;throw new Error('Invalid JSON Pointer reference')}n=n[a[o]]}return n}},{key:'add',value:function(t,n){for(var a=this.tokens,o=t,s=0,d;s<a.length;s++)if(d=a[s],s===a.length-1)'-'===d?o.push(n):Array.isArray(o)?o.splice(d,0,n):void 0!==n&&(o[d]=n);else if(!o[d])switch(this.mode){case r:throw new Error('Invalid JSON Pointer reference');case 1:o=o[d]=parseInt(d)?[]:{};break;case 2:return;default:throw new Error('Invalid pointer mode');}else o=o[d]}},{key:'replace',value:function(t,n){for(var a=this.tokens,r=t,o=0,s;o<a.length;o++)s=a[o],o===a.length-1?r[s]=n:r[s]?r=r[s]:r=r[s]=parseInt(s)?[]:{}}},{key:'remove',value:function(t){for(var n=this.tokens,a=t,r=0,o;r<n.length;r++){if(o=n[r],void 0===a||void 0===a[o])return;if(Array.isArray(a))return void a.splice(o,1);r===n.length-1&&delete a[o],a=a[o]}}}],[{key:'parse',value:function(n){return new t(n)}}]),t}();t.exports=o},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(38),d=a(416),l=a(214),c=l.NotSupportedError,u=function(){function t(){r(this,t)}return o(t,null,[{key:'sign',value:function(t,n,a){var r=d.normalize('sign',t);return r instanceof Error?Promise.reject(new c(t)):r.sign(n,a)}},{key:'verify',value:function(t,n,a,r){var o=d.normalize('verify',t);return o instanceof Error?Promise.reject(new c(t)):o.verify(n,a,r)}},{key:'importKey',value:function(t){var n=d.normalize('importKey',t.alg);return n.importKey(t)}}]),t}();t.exports=u},function(t,n){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var a=n.currentUrl=function(){return window.location.href},r=n.currentUrlNoParams=function(){return window.location.origin+window.location.pathname},o=n.clearHashFragment=function(){return window.history.replaceState('',document.title,window.location.pathname+window.location.search)},s=n.navigateTo=function(t){window.location.href=t},d=n.originOf=function(t){return new URL(t).origin}},function(t,n,a){'use strict';/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */function r(t){if(!t||'string'!=typeof t)return!1;var n=d.exec(t),a=n&&o[n[1].toLowerCase()];return a&&a.charset?a.charset:n&&l.test(n[1])&&'UTF-8'}var o=a(450),s=a(452).extname,d=/^\s*([^;\s]*)(?:;|\s|$)/,l=/^text\//i;n.charset=r,n.charsets={lookup:r},n.contentType=function(t){if(!t||'string'!=typeof t)return!1;var a=-1===t.indexOf('/')?n.lookup(t):t;if(!a)return!1;if(-1===a.indexOf('charset')){var r=n.charset(a);r&&(a+='; charset='+r.toLowerCase())}return a},n.extension=function(t){if(!t||'string'!=typeof t)return!1;var a=d.exec(t),r=a&&n.extensions[a[1].toLowerCase()];return r&&r.length&&r[0]},n.extensions=Object.create(null),n.lookup=function(t){if(!t||'string'!=typeof t)return!1;var a=s('x.'+t).toLowerCase().substr(1);return!!a&&(n.types[a]||!1)},n.types=Object.create(null),function(t,n){var a=['nginx','apache',void 0,'iana'];Object.keys(o).forEach(function(r){var s=o[r],d=s.extensions;if(d&&d.length){t[r]=d;for(var l=0,c;l<d.length;l++){if(c=d[l],n[c]){var u=a.indexOf(o[n[c]].source),f=a.indexOf(s.source);if('application/octet-stream'!==n[c]&&(u>f||u===f&&'application/'===n[c].substr(0,12)))continue}n[c]=r}}})}(n.extensions,n.types)},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=a(8),s=function t(){r(this,t)};s.boolean=new o('http://www.w3.org/2001/XMLSchema#boolean'),s.dateTime=new o('http://www.w3.org/2001/XMLSchema#dateTime'),s.decimal=new o('http://www.w3.org/2001/XMLSchema#decimal'),s.double=new o('http://www.w3.org/2001/XMLSchema#double'),s.integer=new o('http://www.w3.org/2001/XMLSchema#integer'),s.langString=new o('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString'),s.string=new o('http://www.w3.org/2001/XMLSchema#string'),t.exports=s},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(31),c=a(39),u=a(65),f=a(40),m=a(32),h=a(8),g=a(13),b=a(88),y=a(67),v=a(68),w=function(t){function n(t,a,s,d){r(this,n);var l=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return l.termType=n.termType,l.statements=t||[],l.constraints=a||[],l.initBindings=s||[],l.optional=d||[],l}return s(n,t),d(n,[{key:'add',value:function(t,n,a,r){return this.statements.push(new y(t,n,a,r))}},{key:'addStatement',value:function(t){return this.statements.push(t)}},{key:'bnode',value:function(t){return new l(t)}},{key:'bottomTypeURIs',value:function(t){var n,a,r,o,s,d,l,c,u;for(s in n=[],t)if(t.hasOwnProperty(s)){for(u=t[s],c=this.each(void 0,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),this.sym(s)),a=!0,o=0,d=c.length;o<d;o++)if(r=c[o],l=r.uri,l in t){a=!1;break}a&&(n[s]=u)}return n}},{key:'collection',value:function(){return new u}},{key:'each',value:function(t,n,a,r){var o=[],s=this.statementsMatching(t,n,a,r,!1),d,c,u,l,f,m,h,g,b;if(null==t)for(c=0,m=s.length;c<m;c++)d=s[c],o.push(d.subject);else if(null==n)for(u=0,h=s.length;u<h;u++)d=s[u],o.push(d.predicate);else if(null==a)for(l=0,g=s.length;l<g;l++)d=s[l],o.push(d.object);else if(null==r)for(f=0,b=s.length;f<b;f++)d=s[f],o.push(d.why);return o}},{key:'equals',value:function(t){return!!t&&this.hashString()===t.hashString()}},{key:'findMembersNT',value:function(n){var a,r,o,s,d,l,c,f,m,h,g,b,y,v,w,x,_,k,C,T,t;for(T in k={},k[n.toNT()]=!0,m={},b=this.transitiveClosure(k,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),!0),b)if(b.hasOwnProperty(T)){for(y=this.statementsMatching(void 0,this.sym('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'),this.fromNT(T)),a=0,o=y.length;a<o;a++)C=y[a],m[C.subject.toNT()]=C;for(v=this.each(void 0,this.sym('http://www.w3.org/2000/01/rdf-schema#domain'),this.fromNT(T)),r=0,s=v.length;r<s;r++)for(h=v[r],w=this.statementsMatching(void 0,h),(f=0,d=w.length);f<d;f++)C=w[f],m[C.subject.toNT()]=C;for(x=this.each(void 0,this.sym('http://www.w3.org/2000/01/rdf-schema#range'),this.fromNT(T)),g=0,l=x.length;g<l;g++)for(h=x[g],_=this.statementsMatching(void 0,h),(t=0,c=_.length);t<c;t++)C=_[t],m[C.object.toNT()]=C}return m}},{key:'findMemberURIs',value:function(t){return this.NTtoURI(this.findMembersNT(t))}},{key:'findSubClassesNT',value:function(t){var n={};return n[t.toNT()]=!0,this.transitiveClosure(n,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),!0)}},{key:'findSuperClassesNT',value:function(t){var n={};return n[t.toNT()]=!0,this.transitiveClosure(n,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),!1)}},{key:'findTypesNT',value:function(t){var n,a,r,o,s,d,l,c,u,f,m,h,g,b,y,v,w;for(m='http://www.w3.org/1999/02/22-rdf-syntax-ns#type',w=[],h=this.statementsMatching(t,void 0,void 0),(a=0,o=h.length);a<o;a++)if(v=h[a],v.predicate.uri===m)w[v.object.toNT()]=v;else for(g=this.each(v.predicate,this.sym('http://www.w3.org/2000/01/rdf-schema#domain')),r=0,s=g.length;r<s;r++)f=g[r],w[f.toNT()]=v;for(b=this.statementsMatching(void 0,void 0,t),c=0,d=b.length;c<d;c++)for(v=b[c],y=this.each(v.predicate,this.sym('http://www.w3.org/2000/01/rdf-schema#range')),(u=0,l=y.length);u<l;u++)n=y[u],w[n.toNT()]=v;return this.transitiveClosure(w,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),!1)}},{key:'findTypeURIs',value:function(t){return this.NTtoURI(this.findTypesNT(t))}},{key:'connectedStatements',value:function(t,n,a){a=a||[];for(var r=[t],o=[],s=[],d=[],l=this,c=function(t){var c=function(t){'BlankNode'!==t.termType||o[t.value]||(o[t.value]=!0,r.push(t))},u=l.statementsMatching(null,null,t,n).concat(l.statementsMatching(t,null,null,n));u=u.filter(function(t){if(a[t.predicate.uri])return!1;var n=t.toNT();return!s[n]&&(s[n]=!0,!0)}),u.forEach(function(t){c(t.subject),c(t.object)}),d=d.concat(u)};r.length;)c(r.shift());return d}},{key:'formula',value:function(){return new n}},{key:'fromNT',value:function(t){var n,a,r;switch(t[0]){case'<':return this.sym(t.slice(1,-1));case'"':if(r=void 0,n=void 0,a=t.lastIndexOf('"'),a<t.length-1)if('@'===t[a+1])r=t.slice(a+2);else if('^^'===t.slice(a+1,a+3))n=this.fromNT(t.slice(a+3));else throw new Error('Can\'t convert string from NT: '+t);return t=t.slice(1,a),t=t.replace(/\\"/g,'"'),t=t.replace(/\\n/g,'\n'),t=t.replace(/\\\\/g,'\\'),this.literal(t,r,n);case'_':return new l(t.slice(2));case'?':return new v(t.slice(1));}throw new Error('Can\'t convert from NT: '+t)}},{key:'holds',value:function(t,n,a,r){var o;if(1===arguments.length){if(!t)return!0;if(t instanceof Array){for(o=0;o<t.length;o++)if(!this.holds(t[o]))return!1;return!0}if(t instanceof y)return this.holds(t.subject,t.predicate,t.object,t.why);if(t.statements)return this.holds(t.statements)}var d=this.anyStatementMatching(t,n,a,r);return null!=d}},{key:'holdsStatement',value:function(t){return this.holds(t.subject,t.predicate,t.object,t.why)}},{key:'list',value:function(t){var n=new u;return t.forEach(function(t){n.append(t)}),n}},{key:'literal',value:function(t,n,a){return new f(''+t,n,a)}},{key:'NTtoURI',value:function(n){var t={},a,r;for(a in n)n.hasOwnProperty(a)&&(r=n[a],'<'===a[0]&&(t[a.slice(1,-1)]=r));return t}},{key:'serialize',value:function(t,n,a){var r,o,s;switch(s=b(this),s.suggestNamespaces(this.namespaces),s.setBase(t),o=a?this.statementsMatching(void 0,void 0,void 0,a):this.statements,null==n?'text/n3':n){case'application/rdf+xml':r=s.statementsToXML(o);break;case'text/n3':case'text/turtle':r=s.statementsToN3(o);break;default:throw new Error('serialize: Content-type '+n+' not supported.');}return r}},{key:'substitute',value:function(t){var a=this.statements.map(function(n){return n.substitute(t)});console.log('Formula subs statmnts:'+a);var r=new n;return r.add(a),console.log('indexed-form subs formula:'+r),r}},{key:'sym',value:function(t,n){if(n)throw new Error('This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.');return new h(t)}},{key:'the',value:function(t,n,a,r){var o=this.any(t,n,a,r);return null==o&&m.error('No value found for the() {'+t+' '+n+' '+a+'}.'),o}},{key:'transitiveClosure',value:function(n,a,r){var o={},d,l,c,u,s,f;Object.assign(o,n);for(var t={};;){if(f=function(){for(var t in o)if(o.hasOwnProperty(t))return t}(),null==f)return t;for(s=r?this.each(void 0,a,this.fromNT(f)):this.each(this.fromNT(f),a),l=0,c=s.length;l<c;l++)(d=s[l],u=d.toNT(),!(u in t))&&(u in o||(o[u]=o[f]));t[f]=o[f],delete o[f]}}},{key:'topTypeURIs',value:function(t){var a,r,o,s,d,n,l,c;for(o in l=[],t)if(t.hasOwnProperty(o)){for(c=t[o],d=0,n=this.each(this.sym(o),this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf')),(a=0,s=n.length);a<s;a++)if(r=n[a],'http://www.w3.org/2000/01/rdf-schema#Resource'!==r.uri){d++;break}d||(l[o]=c)}return l['http://www.w3.org/2000/01/rdf-schema#Resource']&&delete l['http://www.w3.org/2000/01/rdf-schema#Resource'],l['http://www.w3.org/2002/07/owl#Thing']&&delete l['http://www.w3.org/2002/07/owl#Thing'],l}},{key:'toString',value:function(){return'{'+this.statements.join('\n')+'}'}},{key:'whether',value:function(t,n,a,r){return this.statementsMatching(t,n,a,r,!1).length}}]),n}(g);w.termType='Graph',w.prototype.classOrder=c.Graph,w.prototype.isVar=0,w.prototype.ns=a(51),w.prototype.variable=function(t){return new v(t)},t.exports=w},function(t,n,a){'use strict';t.exports.convertToJson=function(t,n){var a=s.Parser(),d=s.Writer({format:'N-Quads'}),l;r.waterfall([function(n){a.parse(t,n)},function(t,n,a){null!==t&&d.addTriple(t),'function'==typeof a&&d.end(a)},function(t,n){try{o.fromRDF(t,{format:'application/nquads'},n)}catch(t){n(t)}},function(t){l=JSON.stringify(t),n(null,l)}],function(t){n(t,l)})},t.exports.convertToNQuads=function(t,n){var a=s.Parser(),o=s.Writer({format:'N-Quads'}),d;r.waterfall([function(n){a.parse(t,n)},function(t,n,a){null!==t&&o.addTriple(t),'function'==typeof a&&o.end(a)},function(t){d=t,n(null,d)}],function(t){n(t,d)})};var r=a(229),o=a(134),s=a(136)},function(t,n,a){(function(r,o,s,d){var l,c;/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2015 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */(function(){var u='undefined'!=typeof r&&r.versions&&r.versions.node,f=!u&&('undefined'!=typeof window||'undefined'!=typeof self);f&&'undefined'==typeof o&&('undefined'==typeof window?'undefined'==typeof self?'undefined'!=typeof $&&(o=$):o=self:o=window);var m=function(t){function n(){}function l(t){for(var n=[],a=Object.keys(t).sort(),r=0;r<a.length;++r){var o=a[r],s=t[o];V(s)||(s=[s]);for(var d=0,l;d<s.length;++d)if(l=s[d],null!==l){if(!K(l))throw new Le('Invalid JSON-LD syntax; language map values must be strings.','jsonld.SyntaxError',{code:'invalid language map value',languageMap:t});n.push({"@value":l,"@language":o.toLowerCase()})}}return n}function c(t,n){if(V(n))for(var a=0;a<n.length;++a)n[a]=c(t,n[a]);else if(ae(n))n['@list']=c(t,n['@list']);else if(H(n)){re(n)&&(n['@id']=t.getId(n['@id']));for(var r=Object.keys(n).sort(),o=0,s;o<r.length;++o)s=r[o],'@id'!==s&&(n[s]=c(t,n[s]))}return n}function m(n,a,r){if(null===r||void 0===r)return null;var o=B(n,a,{vocab:!0});if('@id'===o)return B(n,r,{base:!0});if('@type'===o)return B(n,r,{vocab:!0,base:!0});var s=t.getContextValue(n,a,'@type');if('@id'===s||'@graph'===o&&K(r))return{"@id":B(n,r,{base:!0})};if('@vocab'===s)return{"@id":B(n,r,{vocab:!0,base:!0})};if(z(o))return r;var d={};if(null!==s)d['@type']=s;else if(K(r)){var l=t.getContextValue(n,a,'@language');null!==l&&(d['@language']=l)}return-1===['boolean','number','string'].indexOf(typeof r)&&(r=r.toString()),d['@value']=r,d}function h(t,n,a){for(var r=[],o=Object.keys(t).sort(),s=0;s<o.length;++s)for(var d=o[s],l=t[d],c=Object.keys(l).sort(),u=0;u<c.length;++u){var f=c[u],m=l[f];if('@type'===f)f=Ie;else if(z(f))continue;for(var h=0;h<m.length;++h){var y=m[h],v={};if(v.type=0===d.indexOf('_:')?'blank node':'IRI',v.value=d,!!oe(d)){var w={type:0===f.indexOf('_:')?'blank node':'IRI',value:f};if(oe(f)&&('blank node'!==w.type||a.produceGeneralizedRdf))if(ae(y))g(y['@list'],n,v,w,r);else{var x=b(y);x&&r.push({subject:v,predicate:w,object:x})}}}}return r}function g(t,n,a,r,o){for(var s={type:'IRI',value:Ee},d={type:'IRI',value:Se},l={type:'IRI',value:Ae},c=0;c<t.length;++c){var u=t[c],f={type:'blank node',value:n.getId()};o.push({subject:a,predicate:r,object:f}),a=f,r=s;var m=b(u);m&&o.push({subject:a,predicate:r,object:m}),r=d}o.push({subject:a,predicate:r,object:l})}function b(t){var n={};if(ne(t)){n.type='literal';var a=t['@value'],r=t['@type']||null;Y(a)?(n.value=a.toString(),n.datatype=r||xe):X(a)||r===_e?(!X(a)&&(a=parseFloat(a)),n.value=a.toExponential(15).replace(/(\d)0*e\+?/,'$1E'),n.datatype=r||_e):J(a)?(n.value=a.toFixed(0),n.datatype=r||ke):'@language'in t?(n.value=a,n.datatype=r||Ne,n.language=t['@language']):(n.value=a,n.datatype=r||Ce)}else{var o=H(t)?t['@id']:t;n.type=0===o.indexOf('_:')?'blank node':'IRI',n.value=o}return'IRI'!==n.type||oe(n.value)?n:null}function y(t,n){if('IRI'===t.type||'blank node'===t.type)return{"@id":t.value};var a={"@value":t.value};if(t.language)a['@language']=t.language;else{var r=t.datatype;if(r||(r=Ce),n){if(r===xe)'true'===a['@value']?a['@value']=!0:'false'===a['@value']&&(a['@value']=!1);else if(Z(a['@value']))if(r===ke){var o=parseInt(a['@value'],10);o.toFixed(0)===a['@value']&&(a['@value']=o)}else r===_e&&(a['@value']=parseFloat(a['@value']));-1===[xe,ke,_e,Ce].indexOf(r)&&(a['@type']=r)}else r!==Ce&&(a['@type']=r)}return a}function v(t,n){for(var a=['subject','predicate','object'],r=0,o;r<a.length;++r)if(o=a[r],t[o].type!==n[o].type||t[o].value!==n[o].value)return!1;return t.object.language===n.object.language&&t.object.datatype===n.object.datatype}function w(n,a,r,s,d,l){if(V(n)){for(var c=0;c<n.length;++c)w(n[c],a,r,s,void 0,l);return}if(!H(n))return void(l&&l.push(n));if(ne(n)){if('@type'in n){var u=n['@type'];0===u.indexOf('_:')&&(n['@type']=u=s.getId(u))}return void(l&&l.push(n))}if('@type'in n)for(var f=n['@type'],c=0,u;c<f.length;++c)u=f[c],0===u.indexOf('_:')&&s.getId(u);Q(d)&&(d=re(n)?s.getId(n['@id']):n['@id']),l&&l.push({"@id":d});var m=a[r],h=m[d]=m[d]||{};h['@id']=d;for(var b=Object.keys(n).sort(),y=0,v;y<b.length;++y)if(v=b[y],'@id'!==v){if('@reverse'===v){var x={"@id":d},_=n['@reverse'];for(var k in _)for(var C=_[k],T=0;T<C.length;++T){var E=C[T],S=E['@id'];re(E)&&(S=s.getId(S)),w(E,a,r,s,S),t.addValue(m[S],k,x,{propertyIsArray:!0,allowDuplicate:!1})}continue}if('@graph'===v){d in a||(a[d]={});var A='@merged'===r?r:d;w(n[v],a,A,s);continue}if('@type'!==v&&z(v)){if('@index'===v&&v in h&&(n[v]!==h[v]||n[v]['@id']!==h[v]['@id']))throw new Le('Invalid JSON-LD syntax; conflicting @index property detected.','jsonld.SyntaxError',{code:'conflicting indexes',subject:h});h[v]=n[v];continue}var g=n[v];if(0===v.indexOf('_:')&&(v=s.getId(v)),0===g.length){t.addValue(h,v,[],{propertyIsArray:!0});continue}for(var I=0,N;I<g.length;++I)if(N=g[I],'@type'===v&&(N=0===N.indexOf('_:')?s.getId(N):N),ee(N)||te(N)){var o=re(N)?s.getId(N['@id']):N['@id'];t.addValue(h,v,{"@id":o},{propertyIsArray:!0,allowDuplicate:!1}),w(N,a,r,s,o)}else if(ae(N)){var j=[];w(N['@list'],a,r,s,d,j),N={"@list":j},t.addValue(h,v,N,{propertyIsArray:!0,allowDuplicate:!1})}else w(N,a,r,s,d),t.addValue(h,v,N,{propertyIsArray:!0,allowDuplicate:!1})}}function _(t){for(var n=t['@default'],a=Object.keys(t).sort(),r=0,o;r<a.length;++r)if(o=a[r],'@default'!==o){var s=t[o],d=n[o];d?!('@graph'in d)&&(d['@graph']=[]):n[o]=d={"@id":o,"@graph":[]};for(var l=d['@graph'],c=Object.keys(s).sort(),u=0,f;u<c.length;++u)f=s[c[u]],te(f)||l.push(f)}return n}function k(t,a,r,s,d){S(r),r=r[0];for(var l=t.options,c={embed:E(r,l,'embed'),explicit:E(r,l,'explicit'),requireAll:E(r,l,'requireAll')},u=A(t,a,r,c),f=Object.keys(u).sort(),m=0;m<f.length;++m){var h=f[m],g=u[h];if('@link'===c.embed&&h in t.link){j(s,d,t.link[h]);continue}null===d&&(t.uniqueEmbeds={});var b={};if(b['@id']=h,t.link[h]=b,'@never'===c.embed||T(g,t.subjectStack)){j(s,d,b);continue}'@last'===c.embed&&(h in t.uniqueEmbeds&&N(t,h),t.uniqueEmbeds[h]={parent:s,property:d}),t.subjectStack.push(g);for(var y=Object.keys(g).sort(),v=0,w;v<y.length;v++){if(w=y[v],z(w)){b[w]=ie(g[w]);continue}if(!c.explicit||w in r)for(var x=g[w],_=0,I;_<x.length;++_){if(I=x[_],ae(I)){var o={"@list":[]};j(b,w,o);var R=I['@list'];for(var L in R)if(I=R[L],te(I)){var n=w in r?r[w][0]['@list']:C(c);k(t,[I['@id']],n,o,'@list')}else j(o,'@list',ie(I));continue}if(te(I)){var n=w in r?r[w]:C(c);k(t,[I['@id']],n,b,w)}else j(b,w,ie(I))}}for(var y=Object.keys(r).sort(),v=0,w;v<y.length;++v)if(w=y[v],!z(w)){var O=r[w][0],P=E(O,l,'omitDefault');if(!P&&!(w in b)){var M='@null';'@default'in O&&(M=ie(O['@default'])),V(M)||(M=[M]),b[w]=[{"@preserve":M}]}}j(s,d,b),t.subjectStack.pop()}}function C(t){var n={};for(var a in t)void 0!==t[a]&&(n['@'+a]=[t[a]]);return[n]}function T(t,n){for(var a=n.length-1;0<=a;--a)if(n[a]['@id']===t['@id'])return!0;return!1}function E(t,n,a){var r='@'+a,o=r in t?t[r][0]:n[a];return'embed'===a&&(!0===o?o='@last':!1===o?o='@never':'@always'!==o&&'@never'!==o&&'@link'!==o&&(o='@last')),o}function S(t){if(!V(t)||1!==t.length||!H(t[0]))throw new Le('Invalid JSON-LD syntax; a JSON-LD frame must be a single object.','jsonld.SyntaxError',{frame:t})}function A(t,n,a,r){for(var o={},s=0;s<n.length;++s){var d=n[s],l=t.subjects[d];I(l,a,r)&&(o[d]=l)}return o}function I(n,a,r){if('@type'in a&&!(1===a['@type'].length&&H(a['@type'][0]))){for(var o=a['@type'],s=0;s<o.length;++s)if(t.hasValue(n,'@type',o[s]))return!0;return!1}var d=!0,l=!1;for(var c in a){if(z(c)){if('@id'!=c&&'@type'!=c)continue;if(d=!1,'@id'==c&&K(a[c])){if(n[c]!==a[c])return!1;l=!0;continue}}if(d=!1,c in n){if(V(a[c])&&0===a[c].length&&void 0!==n[c])return!1;l=!0;continue}var u=V(a[c])&&H(a[c][0])&&'@default'in a[c][0];if(r.requireAll&&!u)return!1}return d||l}function N(n,a){var r=n.uniqueEmbeds,o=r[a],s=o.parent,d=o.property,l={"@id":a};if(V(s)){for(var c=0;c<s.length;++c)if(t.compareValues(s[c],l)){s[c]=l;break}}else{var u=V(s[d]);t.removeValue(s,d,l,{propertyIsArray:u}),t.addValue(s,d,l,{propertyIsArray:u})}var f=function(t){for(var n=Object.keys(r),a=0,o;a<n.length;++a)o=n[a],o in r&&H(r[o].parent)&&r[o].parent['@id']===t&&(delete r[o],f(o))};f(a)}function j(n,a,r){H(n)?t.addValue(n,a,r,{propertyIsArray:!0}):n.push(r)}/**
 * Removes the @preserve keywords as the last step of the framing algorithm.
 *
 * @param ctx the active context used to compact the input.
 * @param input the framed, compacted output.
 * @param options the compaction options used.
 *
 * @return the resulting output.
 */function R(n,a,r){if(V(a)){for(var o=[],s=0,d;s<a.length;++s)d=R(n,a[s],r),null!==d&&o.push(d);a=o}else if(H(a)){// remove @preserve
if('@preserve'in a)return'@null'===a['@preserve']?null:a['@preserve'];if(ne(a))return a;if(ae(a))return a['@list']=R(n,a['@list'],r),a;var l=P(n,'@id');if(l in a){var c=a[l];if(c in r.link){var u=r.link[c].indexOf(a);if(-1===u)r.link[c].push(a);else return r.link[c][u]}else r.link[c]=[a]}for(var f in a){var d=R(n,a[f],r),m=t.getContextValue(n,f,'@container');r.compactArrays&&V(d)&&1===d.length&&null===m&&(d=d[0]),a[f]=d}}return a}function L(t,n){return t.length<n.length?-1:n.length<t.length?1:t===n?0:t<n?-1:1}function O(t,n,a,r,o,s){null===s&&(s='@null');var d=[];if(('@id'===s||'@reverse'===s)&&te(a)){'@reverse'===s&&d.push('@reverse');var l=P(t,a['@id'],null,{vocab:!0});l in t.mappings&&t.mappings[l]&&t.mappings[l]['@id']===a['@id']?d.push.apply(d,['@vocab','@id']):d.push.apply(d,['@id','@vocab'])}else d.push(s);d.push('@none');for(var c=t.inverse[n],u=0,f;u<r.length;++u)if(f=r[u],!!(f in c))for(var m=c[f][o],h=0,g;h<d.length;++h)if(g=d[h],!!(g in m))return m[g];return null}function P(t,n,a,r,o){if(null===n)return n;Q(a)&&(a=null),Q(o)&&(o=!1),r=r||{};var s=t.getInverse();if(z(n))return n in s?s[n]['@none']['@type']['@none']:n;if(r.vocab&&n in s){var d=t['@language']||'@none',l=[];H(a)&&'@index'in a&&l.push('@index');var c='@language',u='@null';if(o)c='@type',u='@reverse',l.push('@set');else if(ae(a)){'@index'in a||l.push('@list');for(var f=a['@list'],m=0===f.length?d:null,h=null,g=0;g<f.length;++g){var b=f[g],y='@none',v='@none';if(ne(b)?'@language'in b?y=b['@language']:'@type'in b?v=b['@type']:y='@null':v='@id',null===m?m=y:y!==m&&ne(b)&&(m='@none'),null==h?h=v:v!==h&&(h='@none'),'@none'===m&&'@none'===h)break}m=m||'@none',h=h||'@none','@none'===h?u=m:(c='@type',u=h)}else ne(a)?'@language'in a&&!('@index'in a)?(l.push('@language'),u=a['@language']):'@type'in a&&(c='@type',u=a['@type']):(c='@type',u='@id'),l.push('@set');l.push('@none');var w=O(t,n,a,l,c,u);if(null!==w)return w}if(r.vocab&&'@vocab'in t){var x=t['@vocab'];if(0===n.indexOf(x)&&n!==x){var _=n.substr(x.length);if(!(_ in t.mappings))return _}}for(var k=null,C=0,T=[],E=t.fastCurieMap,S=n.length-1;C<S&&n[C]in E;++C)E=E[n[C]],''in E&&T.push(E[''][0]);for(var g=T.length-1;0<=g;--g)for(var A=T[g],I=A.terms,N=0;N<I.length;++N){var j=I[N]+':'+n.substr(A.iri.length),R=!(j in t.mappings)||null===a&&t.mappings[j]['@id']===n;R&&(null==k||0>L(j,k))&&(k=j)}return null===k?r.vocab?n:q(t['@base'],n):k}function M(n,a,r){if(ne(r)){var o=t.getContextValue(n,a,'@type'),s=t.getContextValue(n,a,'@language'),d=t.getContextValue(n,a,'@container'),l='@index'in r&&'@index'!==d;if(!l&&(r['@type']===o||r['@language']===s))return r['@value'];var c=Object.keys(r).length,u=K(r['@value']),f=n.mappings[a]&&null===n.mappings[a]['@language'];if((1===c||2===c&&'@index'in r&&!l)&&(!('@language'in n)||!u||f))return r['@value'];var m={};return l&&(m[P(n,'@index')]=r['@index']),'@type'in r?m[P(n,'@type')]=P(n,r['@type'],null,{vocab:!0}):'@language'in r&&(m[P(n,'@language')]=r['@language']),m[P(n,'@value')]=r['@value'],m}var h=B(n,a,{vocab:!0}),o=t.getContextValue(n,a,'@type'),g=P(n,r['@id'],null,{vocab:'@vocab'===o});if('@id'===o||'@vocab'===o||'@graph'===h)return g;var m={};return m[P(n,'@id')]=g,m}function D(t,n,a,r){if(a in r){if(r[a])return;throw new Le('Cyclical context definition detected.','jsonld.CyclicalContext',{code:'cyclic IRI mapping',context:n,term:a})}if(r[a]=!1,z(a))throw new Le('Invalid JSON-LD syntax; keywords cannot be overridden.','jsonld.SyntaxError',{code:'keyword redefinition',context:n,term:a});if(''===a)throw new Le('Invalid JSON-LD syntax; a term cannot be an empty string.','jsonld.SyntaxError',{code:'invalid term definition',context:n});t.mappings[a]&&delete t.mappings[a];var o=n[a];if(null===o||H(o)&&null===o['@id'])return t.mappings[a]=null,void(r[a]=!0);if(K(o)&&(o={"@id":o}),!H(o))throw new Le('Invalid JSON-LD syntax; @context property values must be strings or objects.','jsonld.SyntaxError',{code:'invalid term definition',context:n});var s=t.mappings[a]={};if(s.reverse=!1,'@reverse'in o){if('@id'in o)throw new Le('Invalid JSON-LD syntax; a @reverse term definition must not contain @id.','jsonld.SyntaxError',{code:'invalid reverse property',context:n});var d=o['@reverse'];if(!K(d))throw new Le('Invalid JSON-LD syntax; a @context @reverse value must be a string.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n});var l=B(t,d,{vocab:!0,base:!1},n,r);if(!oe(l))throw new Le('Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n});s['@id']=l,s.reverse=!0}else if('@id'in o){var l=o['@id'];if(!K(l))throw new Le('Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n});if(l!==a){if(l=B(t,l,{vocab:!0,base:!1},n,r),!oe(l)&&!z(l))throw new Le('Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n});s['@id']=l}}var c=a.indexOf(':');if(s._termHasColon=-1!==c,!('@id'in s))if(s._termHasColon){var u=a.substr(0,c);if(u in n&&D(t,n,u,r),t.mappings[u]){var f=a.substr(c+1);s['@id']=t.mappings[u]['@id']+f}else s['@id']=a}else{if(!('@vocab'in t))throw new Le('Invalid JSON-LD syntax; @context terms must define an @id.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n,term:a});s['@id']=t['@vocab']+a}if(r[a]=!0,'@type'in o){var m=o['@type'];if(!K(m))throw new Le('Invalid JSON-LD syntax; an @context @type values must be a string.','jsonld.SyntaxError',{code:'invalid type mapping',context:n});if('@id'!==m&&'@vocab'!==m){if(m=B(t,m,{vocab:!0,base:!1},n,r),!oe(m))throw new Le('Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.','jsonld.SyntaxError',{code:'invalid type mapping',context:n});if(0===m.indexOf('_:'))throw new Le('Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.','jsonld.SyntaxError',{code:'invalid type mapping',context:n})}s['@type']=m}if('@container'in o){var h=o['@container'];if('@list'!==h&&'@set'!==h&&'@index'!==h&&'@language'!==h)throw new Le('Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.','jsonld.SyntaxError',{code:'invalid container mapping',context:n});if(s.reverse&&'@index'!==h&&'@set'!==h&&null!==h)throw new Le('Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.','jsonld.SyntaxError',{code:'invalid reverse property',context:n});s['@container']=h}if('@language'in o&&!('@type'in o)){var g=o['@language'];if(null!==g&&!K(g))throw new Le('Invalid JSON-LD syntax; @context @language value must be a string or null.','jsonld.SyntaxError',{code:'invalid language mapping',context:n});null!==g&&(g=g.toLowerCase()),s['@language']=g}// disallow aliasing @context and @preserve
var l=s['@id'];if('@context'===l||'@preserve'===l)throw new Le('Invalid JSON-LD syntax; @context and @preserve cannot be aliased.','jsonld.SyntaxError',{code:'invalid keyword alias',context:n})}function B(n,a,r,o,s){if(null===a||z(a))return a;if(a+='',o&&a in o&&!0!==s[a]&&D(n,o,a,s),r=r||{},r.vocab){var d=n.mappings[a];if(null===d)return null;if(d)return d['@id']}var l=a.indexOf(':');if(-1!==l){var c=a.substr(0,l),u=a.substr(l+1);if('_'===c||0===u.indexOf('//'))return a;o&&c in o&&D(n,o,c,s);var d=n.mappings[c];return d?d['@id']+u:a}if(r.vocab&&'@vocab'in n)return n['@vocab']+a;var f=a;return r.base&&(f=t.prependBase(n['@base'],f)),f}function U(n,a){if(null===n)return a;if(-1!==a.indexOf(':'))return a;K(n)&&(n=t.url.parse(n||''));var r=t.url.parse(a),o={protocol:n.protocol||''};if(null!==r.authority)o.authority=r.authority,o.path=r.path,o.query=r.query;else if(o.authority=n.authority,''===r.path)o.path=n.path,o.query=null===r.query?n.query:r.query;else{if(0===r.path.indexOf('/'))o.path=r.path;else{var s=n.path;''!==r.path&&(s=s.substr(0,s.lastIndexOf('/')+1),0<s.length&&'/'!==s.substr(-1)&&(s+='/'),s+=r.path),o.path=s}o.query=r.query}o.path=fe(o.path,!!o.authority);var d=o.protocol;return null!==o.authority&&(d+='//'+o.authority),d+=o.path,null!==o.query&&(d+='?'+o.query),null!==r.fragment&&(d+='#'+r.fragment),''===d&&(d='./'),d}function q(n,a){if(null===n)return a;K(n)&&(n=t.url.parse(n||''));var r='';if(''===n.href?a.indexOf('//')&&(r+='//'):r+=(n.protocol||'')+'//'+(n.authority||''),0!==a.indexOf(r))return a;for(var o=t.url.parse(a.substr(r.length)),s=n.normalizedPath.split('/'),d=o.normalizedPath.split('/'),l=o.fragment||o.query?0:1;0<s.length&&d.length>l&&s[0]===d[0];)s.shift(),d.shift();var c='';if(0<s.length){s.pop();for(var u=0;u<s.length;++u)c+='../'}return c+=d.join('/'),null!==o.query&&(c+='?'+o.query),null!==o.fragment&&(c+='#'+o.fragment),''===c&&(c='./'),c}function F(n){function a(t,n,r){for(var o=t[n],s=t[n]={},d=0,l,c;d<o.length;++d)l=o[d].iri,c=r>=l.length?'':l[r],c in s?s[c].push(o[d]):s[c]=[o[d]];for(var n in s)''!==n&&a(s,n,r+1)}function r(t,n,a,r){r in a||(a[r]=n)}var o=t.url.parse(n.base||'');return{"@base":o,mappings:{},inverse:null,getInverse:function(){var t=this;if(t.inverse)return t.inverse;for(var n=t.inverse={},o=t.fastCurieMap={},s={},d=t['@language']||'@none',l=t.mappings,c=Object.keys(l).sort(L),u=0;u<c.length;++u){var f=c[u],m=l[f];if(null!==m){var h=m['@container']||'@none',g=m['@id'];V(g)||(g=[g]);for(var b=0;b<g.length;++b){var y=g[b],v=n[y],w=z(y);if(!!v)w||m._termHasColon||s[y].push(f);else if(n[y]=v={},!w&&!m._termHasColon){s[y]=[f];var x={iri:y,terms:s[y]};y[0]in o?o[y[0]].push(x):o[y[0]]=[x]}if(v[h]||(v[h]={"@language":{},"@type":{}}),v=v[h],m.reverse)r(m,f,v['@type'],'@reverse');else if('@type'in m)r(m,f,v['@type'],m['@type']);else if('@language'in m){var _=m['@language']||'@null';r(m,f,v['@language'],_)}else r(m,f,v['@language'],d),r(m,f,v['@type'],'@none'),r(m,f,v['@language'],'@none')}}}for(var k in o)a(o,k,1);return n},clone:function(){var t={};return t['@base']=this['@base'],t.mappings=ie(this.mappings),t.clone=this.clone,t.inverse=null,t.getInverse=this.getInverse,'@language'in this&&(t['@language']=this['@language']),'@vocab'in this&&(t['@vocab']=this['@vocab']),t}}}function z(t){return!!K(t)&&('@base'===t||'@context'===t||'@container'===t||'@default'===t||'@embed'===t||'@explicit'===t||'@graph'===t||'@id'===t||'@index'===t||'@language'===t||'@list'===t||'@omitDefault'===t||'@preserve'===t||'@requireAll'===t||'@reverse'===t||'@set'===t||'@type'===t||'@value'===t||'@vocab'===t)}function H(t){return'[object Object]'===Object.prototype.toString.call(t)}function W(t){return H(t)&&0===Object.keys(t).length}function V(t){return Array.isArray(t)}function G(t){if(!(K(t)||W(t))){var n=!1;if(V(t)){n=!0;for(var a=0;a<t.length;++a)if(!K(t[a])){n=!1;break}}if(!n)throw new Le('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.','jsonld.SyntaxError',{code:'invalid type value',value:t})}}function K(t){return'string'==typeof t||'[object String]'===Object.prototype.toString.call(t)}function J(t){return'number'==typeof t||'[object Number]'===Object.prototype.toString.call(t)}function X(t){return J(t)&&-1!==(t+'').indexOf('.')}function Z(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Y(t){return'boolean'==typeof t||'[object Boolean]'===Object.prototype.toString.call(t)}function Q(t){return'undefined'==typeof t}function ee(t){var n=!1;if(H(t)&&!('@value'in t||'@set'in t||'@list'in t)){var a=Object.keys(t).length;n=1<a||!('@id'in t)}return n}function te(t){return H(t)&&1===Object.keys(t).length&&'@id'in t}function ne(t){return H(t)&&'@value'in t}function ae(t){return H(t)&&'@list'in t}function re(t){var n=!1;return H(t)&&('@id'in t?n=0===t['@id'].indexOf('_:'):n=0===Object.keys(t).length||!('@value'in t||'@set'in t||'@list'in t)),n}function oe(t){return K(t)&&-1!==t.indexOf(':')}function ie(t){if(t&&'object'==typeof t){var n;if(V(t)){n=[];for(var a=0;a<t.length;++a)n[a]=ie(t[a])}else if(H(t))for(var r in n={},t)n[r]=ie(t[r]);else n=t.toString();return n}return t}function se(n,a,r,o){var s=Object.keys(a).length;if(V(n)){for(var d=0;d<n.length;++d)se(n[d],a,r,o);return s<Object.keys(a).length}if(H(n)){for(var l in n){if('@context'!=l){se(n[l],a,r,o);continue}var c=n[l];if(V(c))for(var u=c.length,d=0,f;d<u;++d)f=c[d],K(f)&&(f=t.prependBase(o,f),r?(f=a[f],V(f)?(Array.prototype.splice.apply(c,[d,1].concat(f)),d+=f.length-1,u=c.length):c[d]=f):!(f in a)&&(a[f]=!1));else K(c)&&(c=t.prependBase(o,c),r?n[l]=a[c]:!(c in a)&&(a[c]=!1))}return s<Object.keys(a).length}return!1}function de(t,n,a){var r=null,o=n.documentLoader,s=function(t,n,a,o,d){if(Object.keys(n).length>Re)return r=new Le('Maximum number of @context URLs exceeded.','jsonld.ContextUrlError',{code:'loading remote context failed',max:Re}),d(r);var l={},c=function(){se(t,l,!0,o),d(null,t)};if(!se(t,l,!1,o))return c();var u=[];for(var f in l)!1===l[f]&&u.push(f);for(var m=u.length,h=0;h<u.length;++h)(function(t){if(t in n)return r=new Le('Cyclical @context URLs detected.','jsonld.ContextUrlError',{code:'recursive context inclusion',url:t}),d(r);var o=ie(n);o[t]=!0;var u=function(n,u){if(!r){var f=u?u.document:null;if(!n&&K(f))try{f=JSON.parse(f)}catch(t){n=t}return n?n=new Le('Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.','jsonld.InvalidUrl',{code:'loading remote context failed',url:t,cause:n}):!H(f)&&(n=new Le('Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.','jsonld.InvalidUrl',{code:'invalid remote context',url:t,cause:n})),n?(r=n,d(r)):void(f='@context'in f?{"@context":f['@context']}:{"@context":{}},u.contextUrl&&(!V(f['@context'])&&(f['@context']=[f['@context']]),f['@context'].push(u.contextUrl)),s(f,o,a,t,function(n,a){return n?d(n):void(l[t]=a['@context'],m-=1,0===m&&c())}))}},f=a(t,u);f&&'then'in f&&f.then(u.bind(null,null),u)})(u[h])};s(t,{},o,n.base,a)}function le(t){for(var n='(?:<([^:]+:[^>]*)>)',a='(_:(?:[A-Za-z0-9]+))',r='[ \\t]+',o='[ \\t]*',s=/(?:\r\n)|(?:\n)|(?:\r)/g,d=/^[ \t]*(?:#.*)?$/,l=/^[ \t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]+(?:<([^:]+:[^>]*)>)[ \t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\]*(?:\\.[^"\\]*)*)"(?:(?:\^\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \t]*(?:\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]*\.))[ \t]*(?:#.*)?$/,c={},u=t.split(s),f=0,m=0,h;m<u.length;++m)if(h=u[m],f++,!d.test(h)){var g=h.match(l);if(null===g)throw new Le('Error while parsing N-Quads; invalid quad.','jsonld.ParseError',{line:f});var b={};if(b.subject=Q(g[1])?{type:'blank node',value:g[2]}:{type:'IRI',value:g[1]},b.predicate={type:'IRI',value:g[3]},!Q(g[4]))b.object={type:'IRI',value:g[4]};else if(!Q(g[5]))b.object={type:'blank node',value:g[5]};else{b.object={type:'literal'},Q(g[7])?Q(g[8])?b.object.datatype=Ce:(b.object.datatype=Ne,b.object.language=g[8]):b.object.datatype=g[7];var y=g[6].replace(/\\"/g,'"').replace(/\\t/g,'\t').replace(/\\n/g,'\n').replace(/\\r/g,'\r').replace(/\\\\/g,'\\');b.object.value=y}var w='@default';if(Q(g[9])?!Q(g[10])&&(w=g[10]):w=g[9],!(w in c))c[w]=[b];else{for(var x=!0,_=c[w],k=0;x&&k<_.length;++k)v(_[k],b)&&(x=!1);x&&_.push(b)}}return c}function pe(t){var n=[];for(var a in t)for(var r=t[a],o=0,s;o<r.length;++o)s=r[o],'@default'==a&&(a=null),n.push(ce(s,a));return n.sort().join('')}function ce(t,n){var a=t.subject,r=t.predicate,s=t.object,o=n||null;'name'in t&&t.name&&(o=t.name.value);var d='';if(d+='IRI'===a.type?'<'+a.value+'>':a.value,d+=' ',d+='IRI'===r.type?'<'+r.value+'>':r.value,d+=' ','IRI'===s.type)d+='<'+s.value+'>';else if('blank node'===s.type)d+=s.value;else{var l=s.value.replace(/\\/g,'\\\\').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/\"/g,'\\"');d+='"'+l+'"',s.datatype===Ne?s.language&&(d+='@'+s.language):s.datatype!==Ce&&(d+='^^<'+s.datatype+'>')}return null!==o&&void 0!==o&&(0===o.indexOf('_:')?d+=' '+o:d+=' <'+o+'>'),d+=' .\n',d}function ue(t){this.prefix=t,this.counter=0,this.existing={}}function fe(t,n){var a='';0===t.indexOf('/')&&(a='/');for(var r=t.split('/'),o=[];0<r.length;){if('.'===r[0]||''===r[0]&&1<r.length){r.shift();continue}if('..'===r[0]){r.shift(),n||0<o.length&&'..'!==o[o.length-1]?o.pop():o.push('..');continue}o.push(r.shift())}return a+o.join('/')}t.compact=function(n,a,r,o){function s(t,n,r,s){if(t)return o(t);s.compactArrays&&!s.graph&&V(n)?1===n.length?n=n[0]:0===n.length&&(n={}):s.graph&&H(n)&&(n=[n]),H(a)&&'@context'in a&&(a=a['@context']),a=ie(a),V(a)||(a=[a]);var d=a;a=[];for(var l=0;l<d.length;++l)(!H(d[l])||0<Object.keys(d[l]).length)&&a.push(d[l]);var c=0<a.length;if(1===a.length&&(a=a[0]),V(n)){var u=P(r,'@graph'),f=n;n={},c&&(n['@context']=a),n[u]=f}else if(H(n)&&c){var f=n;for(var m in n={"@context":a},f)n[m]=f[m]}o(null,n,r)}if(2>arguments.length)return t.nextTick(function(){o(new TypeError('Could not compact, too few arguments.'))});if('function'==typeof r&&(o=r,r={}),r=r||{},null===a)return t.nextTick(function(){o(new Le('The compaction context must not be null.','jsonld.CompactError',{code:'invalid local context'}))});if(null===n)return t.nextTick(function(){o(null,null)});'base'in r||(r.base='string'==typeof n?n:''),'compactArrays'in r||(r.compactArrays=!0),'graph'in r||(r.graph=!1),'skipExpansion'in r||(r.skipExpansion=!1),'documentLoader'in r||(r.documentLoader=t.loadDocument),'link'in r||(r.link=!1),r.link&&(r.skipExpansion=!0);(function(n,a,r){return a.skipExpansion?t.nextTick(function(){r(null,n)}):void t.expand(n,a,r)})(n,r,function(n,d){if(n)return o(new Le('Could not expand input before compaction.','jsonld.CompactError',{cause:n}));var l=F(r);t.processContext(l,a,r,function(t,n){if(t)return o(new Le('Could not process context before compaction.','jsonld.CompactError',{cause:t}));var a;try{a=new Oe().compact(n,null,d,r)}catch(t){return o(t)}s(null,a,n,r)})})},t.expand=function(n,a,r){function o(t){'base'in a||(a.base=t.documentUrl||'');var n={document:ie(t.document),remoteContext:{"@context":t.contextUrl}};if('expandContext'in a){var o=ie(a.expandContext);n.expandContext='object'==typeof o&&'@context'in o?o:{"@context":o}}de(n,a,function(t,n){if(t)return r(t);var o;try{var s=new Oe,d=F(a),l=n.document,c=n.remoteContext['@context'];n.expandContext&&(d=s.processContext(d,n.expandContext['@context'],a)),c&&(d=s.processContext(d,c,a)),o=s.expand(d,null,l,a,!1),H(o)&&'@graph'in o&&1===Object.keys(o).length?o=o['@graph']:null===o&&(o=[]),V(o)||(o=[o])}catch(t){return r(t)}r(null,o)})}return 1>arguments.length?t.nextTick(function(){r(new TypeError('Could not expand, too few arguments.'))}):void('function'==typeof a&&(r=a,a={}),a=a||{},!('documentLoader'in a)&&(a.documentLoader=t.loadDocument),!('keepFreeFloatingNodes'in a)&&(a.keepFreeFloatingNodes=!1),t.nextTick(function(){if('string'==typeof n){var t=function(t,n){if(t)return r(t);try{if(!n.document)throw new Le('No remote document found at the given URL.','jsonld.NullRemoteDocument');'string'==typeof n.document&&(n.document=JSON.parse(n.document))}catch(t){return r(new Le('Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.','jsonld.LoadDocumentError',{code:'loading document failed',cause:t,remoteDoc:n}))}o(n)},s=a.documentLoader(n,t);return void(s&&'then'in s&&s.then(t.bind(null,null),t))}o({contextUrl:null,documentUrl:null,document:n})}))},t.flatten=function(n,a,r,o){return 1>arguments.length?t.nextTick(function(){o(new TypeError('Could not flatten, too few arguments.'))}):void('function'==typeof r?(o=r,r={}):'function'==typeof a&&(o=a,a=null,r={}),r=r||{},!('base'in r)&&(r.base='string'==typeof n?n:''),!('documentLoader'in r)&&(r.documentLoader=t.loadDocument),t.expand(n,r,function(n,s){if(n)return o(new Le('Could not expand input before flattening.','jsonld.FlattenError',{cause:n}));var d;try{d=new Oe().flatten(s)}catch(t){return o(t)}return null===a?o(null,d):void(r.graph=!0,r.skipExpansion=!0,t.compact(d,a,r,function(t,n){return t?o(new Le('Could not compact flattened output.','jsonld.FlattenError',{cause:t})):void o(null,n)}))}))},t.frame=function(n,a,r,o){function s(a){var s=a.document,d;s?(d=s['@context'],a.contextUrl?(d?V(d)?d.push(a.contextUrl):d=[d,a.contextUrl]:d=a.contextUrl,s['@context']=d):d=d||{}):d={},t.expand(n,r,function(n,a){if(n)return o(new Le('Could not expand input before framing.','jsonld.FrameError',{cause:n}));var l=ie(r);l.isFrame=!0,l.keepFreeFloatingNodes=!0,t.expand(s,l,function(n,r){if(n)return o(new Le('Could not expand frame before framing.','jsonld.FrameError',{cause:n}));var s;try{s=new Oe().frame(a,r,l)}catch(t){return o(t)}l.graph=!0,l.skipExpansion=!0,l.link={},t.compact(s,d,l,function(t,n,a){if(t)return o(new Le('Could not compact framed output.','jsonld.FrameError',{cause:t}));var r=P(a,'@graph');// remove @preserve from results
l.link={},n[r]=R(a,n[r],l),o(null,n)})})})}return 2>arguments.length?t.nextTick(function(){o(new TypeError('Could not frame, too few arguments.'))}):void('function'==typeof r&&(o=r,r={}),r=r||{},!('base'in r)&&(r.base='string'==typeof n?n:''),!('documentLoader'in r)&&(r.documentLoader=t.loadDocument),!('embed'in r)&&(r.embed='@last'),r.explicit=r.explicit||!1,!('requireAll'in r)&&(r.requireAll=!0),r.omitDefault=r.omitDefault||!1,t.nextTick(function(){if('string'==typeof a){var t=function(t,n){if(t)return o(t);try{if(!n.document)throw new Le('No remote document found at the given URL.','jsonld.NullRemoteDocument');'string'==typeof n.document&&(n.document=JSON.parse(n.document))}catch(t){return o(new Le('Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.','jsonld.LoadDocumentError',{code:'loading document failed',cause:t,remoteDoc:n}))}s(n)},n=r.documentLoader(a,t);return void(n&&'then'in n&&n.then(t.bind(null,null),t))}s({contextUrl:null,documentUrl:null,document:a})}))},t.link=function(n,a,r,o){var s={};a&&(s['@context']=a),s['@embed']='@link',t.frame(n,s,r,o)},t.objectify=function(n,a,r,o){'function'==typeof r&&(o=r,r={}),r=r||{},'base'in r||(r.base='string'==typeof n?n:''),'documentLoader'in r||(r.documentLoader=t.loadDocument),t.expand(n,r,function(n,s){if(n)return o(new Le('Could not expand input before linking.','jsonld.LinkError',{cause:n}));var d;try{d=new Oe().flatten(s)}catch(t){return o(t)}r.graph=!0,r.skipExpansion=!0,t.compact(d,a,r,function(n,a,r){if(n)return o(new Le('Could not compact flattened output before linking.','jsonld.LinkError',{cause:n}));var d=P(r,'@graph'),l=a[d][0],c=function(n){if(H(n)||V(n)){if(H(n)){if(c.visited[n['@id']])return;c.visited[n['@id']]=!0}for(var a in n){var o=n[a],s='@id'===t.getContextValue(r,a,'@type');if(V(o)||H(o)||s)if(K(o)&&s)n[a]=o=l[o],c(o);else if(V(o))for(var d=0;d<o.length;++d)K(o[d])&&s?o[d]=l[o[d]]:H(o[d])&&'@id'in o[d]&&(o[d]=l[o[d]['@id']]),c(o[d]);else if(H(o)){var u=o['@id'];n[a]=o=l[u],c(o)}}}};for(var u in c.visited={},c(l),a.of_type={},l)if('@type'in l[u]){var s=l[u]['@type'];V(s)||(s=[s]);for(var f=0;f<s.length;++f)s[f]in a.of_type||(a.of_type[s[f]]=[]),a.of_type[s[f]].push(l[u])}o(null,a)})})},t.normalize=function(n,a,r){if(1>arguments.length)return t.nextTick(function(){r(new TypeError('Could not normalize, too few arguments.'))});if('function'==typeof a&&(r=a,a={}),a=a||{},'algorithm'in a||(a.algorithm='URGNA2012'),'base'in a||(a.base='string'==typeof n?n:''),'documentLoader'in a||(a.documentLoader=t.loadDocument),'inputFormat'in a){if('application/nquads'!==a.inputFormat)return r(new Le('Unknown normalization input format.','jsonld.NormalizeError'));var o=le(n);new Oe().normalize(o,a,r)}else{var s=ie(a);delete s.format,s.produceGeneralizedRdf=!1,t.toRDF(n,s,function(t,n){return t?r(new Le('Could not convert input to RDF dataset before normalization.','jsonld.NormalizeError',{cause:t})):void new Oe().normalize(n,a,r)})}},t.fromRDF=function(n,a,r){return 1>arguments.length?t.nextTick(function(){r(new TypeError('Could not convert from RDF, too few arguments.'))}):void('function'==typeof a&&(r=a,a={}),a=a||{},!('useRdfType'in a)&&(a.useRdfType=!1),!('useNativeTypes'in a)&&(a.useNativeTypes=!1),!('format'in a)&&K(n)&&!('format'in a)&&(a.format='application/nquads'),t.nextTick(function(){function t(t,n,a){new Oe().fromRDF(t,n,a)}var o;if(!a.format)o=function(){return n};else if(o=a.rdfParser||ye[a.format],!o)return r(new Le('Unknown input format.','jsonld.UnknownFormat',{format:a.format}));var s=!1;try{n=o(n,function(n,o){return s=!0,n?r(n):void t(o,a,r)})}catch(t){if(!s)return r(t);throw t}if(n){if('then'in n)return n.then(function(n){t(n,a,r)},r);t(n,a,r)}}))},t.toRDF=function(n,a,r){return 1>arguments.length?t.nextTick(function(){r(new TypeError('Could not convert to RDF, too few arguments.'))}):void('function'==typeof a&&(r=a,a={}),a=a||{},!('base'in a)&&(a.base='string'==typeof n?n:''),!('documentLoader'in a)&&(a.documentLoader=t.loadDocument),t.expand(n,a,function(t,n){if(t)return r(new Le('Could not expand input before serialization to RDF.','jsonld.RdfError',{cause:t}));var o;try{if(o=Oe.prototype.toRDF(n,a),a.format){if('application/nquads'===a.format)return r(null,pe(o));throw new Le('Unknown output format.','jsonld.UnknownFormat',{format:a.format})}}catch(t){return r(t)}r(null,o)}))},t.createNodeMap=function(n,a,r){return 1>arguments.length?t.nextTick(function(){r(new TypeError('Could not create node map, too few arguments.'))}):void('function'==typeof a&&(r=a,a={}),a=a||{},!('base'in a)&&(a.base='string'==typeof n?n:''),!('documentLoader'in a)&&(a.documentLoader=t.loadDocument),t.expand(n,a,function(t,n){if(t)return r(new Le('Could not expand input before creating node map.','jsonld.CreateNodeMapError',{cause:t}));var o;try{o=new Oe().createNodeMap(n,a)}catch(t){return r(t)}r(null,o)}))},t.merge=function(n,a,r,o){function s(t,n){return c?void 0:t?(c=t,o(new Le('Could not expand input before flattening.','jsonld.FlattenError',{cause:t}))):void(l.push(n),0==--u&&d(l))}function d(n){var s=!0;'mergeNodes'in r&&(s=r.mergeNodes);var d=r.namer||r.issuer||new ue('_:b'),l={"@default":{}},c;try{for(var u=0,f;u<n.length;++u){f=n[u],f=t.relabelBlankNodes(f,{issuer:new ue('_:b'+u+'-')});var m=s||0===u?l:{"@default":{}};if(w(f,m,'@default',d),m!==l)for(var h in m){var g=m[h];if(!(h in l)){l[h]=g;continue}var b=l[h];for(var y in g)y in b||(b[y]=g[y])}}c=_(l)}catch(t){return o(t)}for(var v=[],x=Object.keys(c).sort(),k=0,C;k<x.length;++k)C=c[x[k]],te(C)||v.push(C);return null===a?o(null,v):void(r.graph=!0,r.skipExpansion=!0,t.compact(v,a,r,function(t,n){return t?o(new Le('Could not compact merged output.','jsonld.MergeError',{cause:t})):void o(null,n)}))}if(1>arguments.length)return t.nextTick(function(){o(new TypeError('Could not merge, too few arguments.'))});if(!V(n))return t.nextTick(function(){o(new TypeError('Could not merge, "docs" must be an array.'))});'function'==typeof r?(o=r,r={}):'function'==typeof a&&(o=a,a=null,r={}),r=r||{};for(var l=[],c=null,u=n.length,f=0,m;f<n.length;++f){for(var h in m={},r)m[h]=r[h];t.expand(n[f],m,s)}},t.relabelBlankNodes=function(t,n){n=n||{};var a=n.namer||n.issuer||new ue('_:b');return c(a,t)},t.prependBase=function(t,n){return U(t,n)},t.documentLoader=function(n,a){var r=new Le('Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.','jsonld.LoadDocumentError',{code:'loading document failed'});return u?a(r,{contextUrl:null,documentUrl:n,document:null}):t.promisify(function(t){t(r)})},t.loadDocument=function(n,a){var r=t.documentLoader(n,a);r&&'then'in r&&r.then(a.bind(null,null),a)},t.promises=function(n){n=n||{};var r=Array.prototype.slice,s=t.promisify,d=n.api||{},l=n.version||'jsonld.js';'string'==typeof n.api&&(!n.version&&(l=n.api),d={}),d.expand=function(){if(1>arguments.length)throw new TypeError('Could not expand, too few arguments.');return s.apply(null,[t.expand].concat(r.call(arguments)))},d.compact=function(){if(2>arguments.length)throw new TypeError('Could not compact, too few arguments.');return s.apply(null,[function(n,a,r,o){'function'==typeof r&&(o=r,r={}),r=r||{},t.compact(n,a,r,function(t,n){o(t,n)})}].concat(r.call(arguments)))},d.flatten=function(){if(1>arguments.length)throw new TypeError('Could not flatten, too few arguments.');return s.apply(null,[t.flatten].concat(r.call(arguments)))},d.frame=function(){if(2>arguments.length)throw new TypeError('Could not frame, too few arguments.');return s.apply(null,[t.frame].concat(r.call(arguments)))},d.fromRDF=function(){if(1>arguments.length)throw new TypeError('Could not convert from RDF, too few arguments.');return s.apply(null,[t.fromRDF].concat(r.call(arguments)))},d.toRDF=function(){if(1>arguments.length)throw new TypeError('Could not convert to RDF, too few arguments.');return s.apply(null,[t.toRDF].concat(r.call(arguments)))},d.normalize=function(){if(1>arguments.length)throw new TypeError('Could not normalize, too few arguments.');return s.apply(null,[t.normalize].concat(r.call(arguments)))},'jsonld.js'===l&&(d.link=function(){if(2>arguments.length)throw new TypeError('Could not link, too few arguments.');return s.apply(null,[t.link].concat(r.call(arguments)))},d.objectify=function(){return s.apply(null,[t.objectify].concat(r.call(arguments)))},d.createNodeMap=function(){return s.apply(null,[t.createNodeMap].concat(r.call(arguments)))},d.merge=function(){return s.apply(null,[t.merge].concat(r.call(arguments)))});try{t.Promise=o.Promise||a(135).Promise}catch(t){var c=function(){throw new Error('Unable to find a Promise implementation.')};for(var u in d)d[u]=c}return d},t.promisify=function(n){if(!t.Promise)try{t.Promise=o.Promise||a(135).Promise}catch(t){throw new Error('Unable to find a Promise implementation.')}var r=Array.prototype.slice.call(arguments,1);return new t.Promise(function(t,a){n.apply(null,r.concat(function(n,r){n?a(n):t(r)}))})},t.promises({api:t.promises}),n.prototype=t.promises({version:'json-ld-1.0'}),n.prototype.toString=function(){return this instanceof n?'[object JsonLdProcessor]':'[object JsonLdProcessorPrototype]'},t.JsonLdProcessor=n;var he=!!Object.defineProperty;if(he)try{Object.defineProperty({},'x',{})}catch(t){he=!1}he&&(Object.defineProperty(n,'prototype',{writable:!1,enumerable:!1}),Object.defineProperty(n.prototype,'constructor',{writable:!0,enumerable:!1,configurable:!0,value:n})),f&&'undefined'==typeof o.JsonLdProcessor&&(he?Object.defineProperty(o,'JsonLdProcessor',{writable:!0,enumerable:!1,configurable:!0,value:n}):o.JsonLdProcessor=n);var ge='function'==typeof s&&s,be=ge?function(t){ge(t)}:function(t){setTimeout(t,0)};t.nextTick='object'==typeof r&&'function'==typeof r.nextTick?r.nextTick:be,t.setImmediate=ge?be:t.nextTick,t.parseLinkHeader=function(t){for(var n={},a=t.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,o=0,s;o<a.length;++o)if(s=a[o].match(r),!!s){for(var d={target:s[1]},l=s[2],c=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;s=c.exec(l);)d[s[1]]=void 0===s[2]?s[3]:s[2];var u=d.rel||'';V(n[u])?n[u].push(d):u in n?n[u]=[n[u],d]:n[u]=d}return n},t.RequestQueue=function(){this._requests={}},t.RequestQueue.prototype.wrapLoader=function(t){return this._loader=t,this._usePromise=1===t.length,this.add.bind(this)},t.RequestQueue.prototype.add=function(n,a){var r=this;if(!a&&!r._usePromise)throw new Error('callback must be specified.');return r._usePromise?new t.Promise(function(t,a){var o=r._requests[n];o||(o=r._requests[n]=r._loader(n).then(function(t){return delete r._requests[n],t}).catch(function(t){throw delete r._requests[n],t})),o.then(function(n){t(n)}).catch(function(t){a(t)})}):void(n in r._requests?r._requests[n].push(a):(r._requests[n]=[a],r._loader(n,function(t,a){var o=r._requests[n];delete r._requests[n];for(var s=0;s<o.length;++s)o[s](t,a)})))},t.DocumentCache=function(t){this.order=[],this.cache={},this.size=t||50,this.expires=30000},t.DocumentCache.prototype.get=function(t){if(t in this.cache){var n=this.cache[t];if(n.expires>=+new Date)return n.ctx;delete this.cache[t],this.order.splice(this.order.indexOf(t),1)}return null},t.DocumentCache.prototype.set=function(t,n){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(t),this.cache[t]={ctx:n,expires:+new Date+this.expires}},t.ActiveContextCache=function(t){this.order=[],this.cache={},this.size=t||100},t.ActiveContextCache.prototype.get=function(t,n){var a=JSON.stringify(t),r=JSON.stringify(n),o=this.cache[a];return o&&r in o?o[r]:null},t.ActiveContextCache.prototype.set=function(t,n,a){if(this.order.length===this.size){var r=this.order.shift();delete this.cache[r.activeCtx][r.localCtx]}var o=JSON.stringify(t),s=JSON.stringify(n);this.order.push({activeCtx:o,localCtx:s}),o in this.cache||(this.cache[o]={}),this.cache[o][s]=ie(a)},t.cache={activeCtx:new t.ActiveContextCache},t.documentLoaders={},t.documentLoaders.jquery=function(n,a){function r(r,o){return 0!==r.indexOf('http:')&&0!==r.indexOf('https:')?o(new Le('URL could not be dereferenced; only "http" and "https" URLs are supported.','jsonld.InvalidUrl',{code:'loading document failed',url:r}),{contextUrl:null,documentUrl:r,document:null}):a.secure&&0!==r.indexOf('https')?o(new Le('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".','jsonld.InvalidUrl',{code:'loading document failed',url:r}),{contextUrl:null,documentUrl:r,document:null}):void n.ajax({url:r,accepts:{json:'application/ld+json, application/json'},headers:{Accept:'application/ld+json, application/json'},dataType:'json',crossDomain:!0,success:function(n,a,s){var d={contextUrl:null,documentUrl:r,document:n},l=s.getResponseHeader('Content-Type'),c=s.getResponseHeader('Link');if(c&&'application/ld+json'!==l){if(c=t.parseLinkHeader(c)[je],V(c))return o(new Le('URL could not be dereferenced, it has more than one associated HTTP Link Header.','jsonld.InvalidUrl',{code:'multiple context link headers',url:r}),d);c&&(d.contextUrl=c.target)}o(null,d)},error:function(t,n,a){o(new Le('URL could not be dereferenced, an error occurred.','jsonld.LoadDocumentError',{code:'loading document failed',url:r,cause:a}),{contextUrl:null,documentUrl:r,document:null})}})}a=a||{};var o=new t.RequestQueue,s='usePromise'in a?a.usePromise:'undefined'!=typeof Promise;return s?o.wrapLoader(function(n){return t.promisify(r,n)}):o.wrapLoader(r)},t.documentLoaders.node=function(n){function r(a,u,f){if(0!==a.indexOf('http:')&&0!==a.indexOf('https:'))return f(new Le('URL could not be dereferenced; only "http" and "https" URLs are supported.','jsonld.InvalidUrl',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null});if(n.secure&&0!==a.indexOf('https'))return f(new Le('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".','jsonld.InvalidUrl',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null});var m=null;if(null!=m)return f(null,m);var h={Accept:l};for(var g in n.headers)h[g]=n.headers[g];d({url:a,headers:h,strictSSL:o,followRedirect:!1},function(n,o,d){if(m={contextUrl:null,documentUrl:a,document:d||null},n)return f(new Le('URL could not be dereferenced, an error occurred.','jsonld.LoadDocumentError',{code:'loading document failed',url:a,cause:n}),m);var l=c.STATUS_CODES[o.statusCode];if(400<=o.statusCode)return f(new Le('URL could not be dereferenced: '+l,'jsonld.InvalidUrl',{code:'loading document failed',url:a,httpStatusCode:o.statusCode}),m);if(o.headers.link&&'application/ld+json'!==o.headers['content-type']){var h=t.parseLinkHeader(o.headers.link)[je];if(V(h))return f(new Le('URL could not be dereferenced, it has more than one associated HTTP Link Header.','jsonld.InvalidUrl',{code:'multiple context link headers',url:a}),m);h&&(m.contextUrl=h.target)}return 300<=o.statusCode&&400>o.statusCode&&o.headers.location?u.length===s?f(new Le('URL could not be dereferenced; there were too many redirects.','jsonld.TooManyRedirects',{code:'loading document failed',url:a,httpStatusCode:o.statusCode,redirects:u}),m):-1===u.indexOf(a)?(u.push(a),r(o.headers.location,u,f)):f(new Le('URL could not be dereferenced; infinite redirection was detected.','jsonld.InfiniteRedirectDetected',{code:'recursive context inclusion',url:a,httpStatusCode:o.statusCode,redirects:u}),m):void(u.push(a),f(n,m))})}n=n||{};var o=!('strictSSL'in n)||n.strictSSL,s='maxRedirects'in n?n.maxRedirects:-1,d='request'in n?n.request:a(42),l='application/ld+json, application/json',c=a(42),u=new t.RequestQueue;if(n.usePromise)return u.wrapLoader(function(n){return t.promisify(r,n,[])});var f=n.headers||{};if('Accept'in f||'accept'in f)throw new RangeError('Accept header may not be specified as an option; only "'+l+'" is supported.');return u.wrapLoader(function(t,n){r(t,[],n)})},t.documentLoaders.xhr=function(n){function a(a,o){if(0!==a.indexOf('http:')&&0!==a.indexOf('https:'))return o(new Le('URL could not be dereferenced; only "http" and "https" URLs are supported.','jsonld.InvalidUrl',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null});if(n.secure&&0!==a.indexOf('https'))return o(new Le('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".','jsonld.InvalidUrl',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null});var s=n.xhr||XMLHttpRequest,d=new s;d.onload=function(){if(400<=d.status)return o(new Le('URL could not be dereferenced: '+d.statusText,'jsonld.LoadDocumentError',{code:'loading document failed',url:a,httpStatusCode:d.status}),{contextUrl:null,documentUrl:a,document:null});var n={contextUrl:null,documentUrl:a,document:d.response},s=d.getResponseHeader('Content-Type'),l;if(r.test(d.getAllResponseHeaders())&&(l=d.getResponseHeader('Link')),l&&'application/ld+json'!==s){if(l=t.parseLinkHeader(l)[je],V(l))return o(new Le('URL could not be dereferenced, it has more than one associated HTTP Link Header.','jsonld.InvalidUrl',{code:'multiple context link headers',url:a}),n);l&&(n.contextUrl=l.target)}o(null,n)},d.onerror=function(){o(new Le('URL could not be dereferenced, an error occurred.','jsonld.LoadDocumentError',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null})},d.open('GET',a,!0),d.setRequestHeader('Accept','application/ld+json, application/json'),d.send()}n=n||{};var r=/(^|(\r\n))link:/i,o=new t.RequestQueue,s='usePromise'in n?n.usePromise:'undefined'!=typeof Promise;return s?o.wrapLoader(function(n){return t.promisify(a,n)}):o.wrapLoader(a)},t.useDocumentLoader=function(n){if(!(n in t.documentLoaders))throw new Le('Unknown document loader type: "'+n+'"','jsonld.UnknownDocumentLoader',{type:n});t.documentLoader=t.documentLoaders[n].apply(t,Array.prototype.slice.call(arguments,1))},t.processContext=function(n,a){var r={},o=2;3<arguments.length&&(r=arguments[2]||{},o+=1);var s=arguments[o];return'base'in r||(r.base=''),'documentLoader'in r||(r.documentLoader=t.loadDocument),null===a?s(null,F(r)):void(a=ie(a),!(H(a)&&'@context'in a)&&(a={"@context":a}),de(a,r,function(t,a){if(t)return s(t);try{a=new Oe().processContext(n,a,r)}catch(t){return s(t)}s(null,a)}))},t.hasProperty=function(t,n){var a=!1;if(n in t){var r=t[n];a=!V(r)||0<r.length}return a},t.hasValue=function(n,a,r){var o=!1;if(t.hasProperty(n,a)){var s=n[a],d=ae(s);if(V(s)||d){d&&(s=s['@list']);for(var l=0;l<s.length;++l)if(t.compareValues(r,s[l])){o=!0;break}}else V(r)||(o=t.compareValues(r,s))}return o},t.addValue=function(n,a,r,o){if(o=o||{},'propertyIsArray'in o||(o.propertyIsArray=!1),'allowDuplicate'in o||(o.allowDuplicate=!0),V(r)){0===r.length&&o.propertyIsArray&&!(a in n)&&(n[a]=[]);for(var s=0;s<r.length;++s)t.addValue(n,a,r[s],o)}else if(a in n){var d=!o.allowDuplicate&&t.hasValue(n,a,r);V(n[a])||d&&!o.propertyIsArray||(n[a]=[n[a]]),d||n[a].push(r)}else n[a]=o.propertyIsArray?[r]:r},t.getValues=function(t,n){var a=t[n]||[];return V(a)||(a=[a]),a},t.removeProperty=function(t,n){delete t[n]},t.removeValue=function(n,a,r,o){o=o||{},'propertyIsArray'in o||(o.propertyIsArray=!1);var s=t.getValues(n,a).filter(function(n){return!t.compareValues(n,r)});0===s.length?t.removeProperty(n,a):1!==s.length||o.propertyIsArray?n[a]=s:n[a]=s[0]},t.compareValues=function(t,n){return t===n||ne(t)&&ne(n)&&t['@value']===n['@value']&&t['@type']===n['@type']&&t['@language']===n['@language']&&t['@index']===n['@index']||H(t)&&'@id'in t&&H(n)&&'@id'in n&&t['@id']===n['@id']},t.getContextValue=function(t,n,a){var r=null;if(null===n)return r;if('@language'===a&&a in t&&(r=t[a]),t.mappings[n]){var o=t.mappings[n];Q(a)?r=o:a in o&&(r=o[a])}return r};var ye={};if(t.registerRDFParser=function(t,n){ye[t]=n},t.unregisterRDFParser=function(t){delete ye[t]},u){if('undefined'==typeof ve)var ve=null;if('undefined'==typeof we)var we={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var xe='http://www.w3.org/2001/XMLSchema#boolean',_e='http://www.w3.org/2001/XMLSchema#double',ke='http://www.w3.org/2001/XMLSchema#integer',Ce='http://www.w3.org/2001/XMLSchema#string',Te='http://www.w3.org/1999/02/22-rdf-syntax-ns#',Ee=Te+'first',Se=Te+'rest',Ae=Te+'nil',Ie=Te+'type',Ne=Te+'langString',je='http://www.w3.org/ns/json-ld#context',Re=10,Le=function(t,n,a){u?(Error.call(this),Error.captureStackTrace(this,this.constructor)):'undefined'!=typeof Error&&(this.stack=new Error().stack),this.name=n||'jsonld.Error',this.message=t||'An unspecified JSON-LD error occurred.',this.details=a||{}};u?a(42).inherits(Le,Error):'undefined'!=typeof Error&&(Le.prototype=new Error);var Oe=function(){};Oe.prototype.compact=function(n,a,r,o){if(V(r)){for(var s=[],d=0,l;d<r.length;++d)l=this.compact(n,a,r[d],o),null!==l&&s.push(l);if(o.compactArrays&&1===s.length){var c=t.getContextValue(n,a,'@container');null===c&&(s=s[0])}return s}if(H(r)){if(o.link&&'@id'in r&&r['@id']in o.link)for(var u=o.link[r['@id']],d=0;d<u.length;++d)if(u[d].expanded===r)return u[d].compacted;if(ne(r)||te(r)){var s=M(n,a,r);return o.link&&te(r)&&(!(r['@id']in o.link)&&(o.link[r['@id']]=[]),o.link[r['@id']].push({expanded:r,compacted:s})),s}var f='@reverse'===a,s={};o.link&&'@id'in r&&(!(r['@id']in o.link)&&(o.link[r['@id']]=[]),o.link[r['@id']].push({expanded:r,compacted:s}));for(var m=Object.keys(r).sort(),h=0;h<m.length;++h){var g=m[h],b=r[g];if('@id'===g||'@type'===g){var y;if(K(b))y=P(n,b,null,{vocab:'@type'===g});else{y=[];for(var v=0;v<b.length;++v)y.push(P(n,b[v],null,{vocab:!0}))}var w=P(n,g),x=V(y)&&0===b.length;t.addValue(s,w,y,{propertyIsArray:x});continue}if('@reverse'===g){var y=this.compact(n,'@reverse',b,o);for(var _ in y)if(n.mappings[_]&&n.mappings[_].reverse){var k=y[_],c=t.getContextValue(n,_,'@container'),C='@set'===c||!o.compactArrays;t.addValue(s,_,k,{propertyIsArray:C}),delete y[_]}if(0<Object.keys(y).length){var w=P(n,g);t.addValue(s,w,y)}continue}if('@index'===g){var c=t.getContextValue(n,a,'@container');if('@index'===c)continue;var w=P(n,g);t.addValue(s,w,b);continue}if('@graph'!==g&&'@list'!==g&&z(g)){var w=P(n,g);t.addValue(s,w,b);continue}if(0===b.length){var T=P(n,g,b,{vocab:!0},f);t.addValue(s,T,b,{propertyIsArray:!0})}for(var v=0;v<b.length;++v){var E=b[v],T=P(n,g,E,{vocab:!0},f),c=t.getContextValue(n,T,'@container'),S=ae(E),A=null;S&&(A=E['@list']);var I=this.compact(n,T,S?A:E,o);if(S)if(V(I)||(I=[I]),'@list'!==c){var N={};N[P(n,'@list')]=I,I=N,'@index'in E&&(I[P(n,'@index')]=E['@index'])}else if(T in s)throw new Le('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.','jsonld.SyntaxError',{code:'compaction to list of lists'});if('@language'===c||'@index'===c){var j;T in s?j=s[T]:s[T]=j={},'@language'===c&&ne(I)&&(I=I['@value']),t.addValue(j,E[c],I)}else{var x=!o.compactArrays||'@set'===c||'@list'===c||V(I)&&0===I.length||'@list'===g||'@graph'===g;t.addValue(s,T,I,{propertyIsArray:x})}}}return s}return r},Oe.prototype.expand=function(n,a,r,o,s){var d=this;if(null===r||void 0===r)return null;if(!V(r)&&!H(r))return s||null!==a&&'@graph'!==B(n,a,{vocab:!0})?m(n,a,r):null;if(V(r)){var c=[],u=t.getContextValue(n,a,'@container');s=s||'@list'===u;for(var f=0,h;f<r.length;++f){if(h=d.expand(n,a,r[f],o),s&&(V(h)||ae(h)))throw new Le('Invalid JSON-LD syntax; lists of lists are not permitted.','jsonld.SyntaxError',{code:'list of lists'});null!==h&&(V(h)?c=c.concat(h):c.push(h))}return c}'@context'in r&&(n=d.processContext(n,r['@context'],o));for(var g=B(n,a,{vocab:!0}),c={},b=Object.keys(r).sort(),y=0;y<b.length;++y){var v=b[y],w=r[v],x;if('@context'!==v){var _=B(n,v,{vocab:!0});if(null!==_&&(oe(_)||z(_))){if(z(_)){if('@reverse'===g)throw new Le('Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.','jsonld.SyntaxError',{code:'invalid reverse property map',value:w});if(_ in c)throw new Le('Invalid JSON-LD syntax; colliding keywords detected.','jsonld.SyntaxError',{code:'colliding keywords',keyword:_})}if('@id'===_&&!K(w)){if(!o.isFrame)throw new Le('Invalid JSON-LD syntax; "@id" value must a string.','jsonld.SyntaxError',{code:'invalid @id value',value:w});if(!H(w))throw new Le('Invalid JSON-LD syntax; "@id" value must be a string or an object.','jsonld.SyntaxError',{code:'invalid @id value',value:w})}if('@type'===_&&G(w),'@graph'===_&&!(H(w)||V(w)))throw new Le('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.','jsonld.SyntaxError',{code:'invalid @graph value',value:w});if('@value'===_&&(H(w)||V(w)))throw new Le('Invalid JSON-LD syntax; "@value" value must not be an object or an array.','jsonld.SyntaxError',{code:'invalid value object value',value:w});if('@language'===_){if(null===w)continue;if(!K(w))throw new Le('Invalid JSON-LD syntax; "@language" value must be a string.','jsonld.SyntaxError',{code:'invalid language-tagged string',value:w});w=w.toLowerCase()}if('@index'===_&&!K(w))throw new Le('Invalid JSON-LD syntax; "@index" value must be a string.','jsonld.SyntaxError',{code:'invalid @index value',value:w});if('@reverse'===_){if(!H(w))throw new Le('Invalid JSON-LD syntax; "@reverse" value must be an object.','jsonld.SyntaxError',{code:'invalid @reverse value',value:w});if(x=d.expand(n,'@reverse',w,o),'@reverse'in x)for(var k in x['@reverse'])t.addValue(c,k,x['@reverse'][k],{propertyIsArray:!0});var C=c['@reverse']||null;for(var k in x)if('@reverse'!=k){null===C&&(C=c['@reverse']={}),t.addValue(C,k,[],{propertyIsArray:!0});for(var T=x[k],E=0,S;E<T.length;++E){if(S=T[E],ne(S)||ae(S))throw new Le('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.','jsonld.SyntaxError',{code:'invalid reverse property value',value:x});t.addValue(C,k,S,{propertyIsArray:!0})}}continue}var u=t.getContextValue(n,v,'@container');if('@language'===u&&H(w))x=l(w);else if('@index'===u&&H(w))x=function(t){for(var a=[],r=Object.keys(w).sort(),s=0;s<r.length;++s){var l=r[s],c=w[l];V(c)||(c=[c]),c=d.expand(n,t,c,o,!1);for(var u=0,f;u<c.length;++u)f=c[u],'@index'in f||(f['@index']=l),a.push(f)}return a}(v);else{var A='@list'===_;if(A||'@set'===_){var I=a;if(A&&'@graph'===g&&(I=null),x=d.expand(n,I,w,o,A),A&&ae(x))throw new Le('Invalid JSON-LD syntax; lists of lists are not permitted.','jsonld.SyntaxError',{code:'list of lists'})}else x=d.expand(n,v,w,o,!1)}if(null!==x||'@value'===_){if('@list'===_||ae(x)||'@list'!==u||(x=V(x)?x:[x],x={"@list":x}),n.mappings[v]&&n.mappings[v].reverse){var C=c['@reverse']=c['@reverse']||{};V(x)||(x=[x]);for(var E=0,S;E<x.length;++E){if(S=x[E],ne(S)||ae(S))throw new Le('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.','jsonld.SyntaxError',{code:'invalid reverse property value',value:x});t.addValue(C,_,S,{propertyIsArray:!0})}continue}var N=-1===['@index','@id','@type','@value','@language'].indexOf(_);t.addValue(c,_,x,{propertyIsArray:N})}}}}b=Object.keys(c);var j=b.length;if('@value'in c){if('@type'in c&&'@language'in c)throw new Le('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".','jsonld.SyntaxError',{code:'invalid value object',element:c});var R=j-1;if('@type'in c&&(R-=1),'@index'in c&&(R-=1),'@language'in c&&(R-=1),0!=R)throw new Le('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".','jsonld.SyntaxError',{code:'invalid value object',element:c});if(null===c['@value'])c=null;else if('@language'in c&&!K(c['@value']))throw new Le('Invalid JSON-LD syntax; only strings may be language-tagged.','jsonld.SyntaxError',{code:'invalid language-tagged value',element:c});else if('@type'in c&&(!oe(c['@type'])||0===c['@type'].indexOf('_:')))throw new Le('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".','jsonld.SyntaxError',{code:'invalid typed value',element:c})}else if('@type'in c&&!V(c['@type']))c['@type']=[c['@type']];else if('@set'in c||'@list'in c){if(1<j&&!(2===j&&'@index'in c))throw new Le('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".','jsonld.SyntaxError',{code:'invalid set or list object',element:c});'@set'in c&&(c=c['@set'],b=Object.keys(c),j=b.length)}else 1===j&&'@language'in c&&(c=null);return H(c)&&!o.keepFreeFloatingNodes&&!s&&(null===a||'@graph'===g)&&(0===j||'@value'in c||'@list'in c||1===j&&'@id'in c)&&(c=null),c},Oe.prototype.createNodeMap=function(t,n){n=n||{};var a=n.namer||n.issuer||new ue('_:b'),r={"@default":{}};return w(t,r,'@default',a),_(r)},Oe.prototype.flatten=function(t){for(var n=this.createNodeMap(t),a=[],r=Object.keys(n).sort(),o=0,s;o<r.length;++o)s=n[r[o]],te(s)||a.push(s);return a},Oe.prototype.frame=function(t,n,a){var r={options:a,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},o=new ue('_:b');w(t,r.graphs,'@merged',o),r.subjects=r.graphs['@merged'];var s=[];return k(r,Object.keys(r.subjects).sort(),n,s,null),s},Oe.prototype.normalize=function(t,n,a){return'URDNA2015'===n.algorithm?new Pe(n).main(t,a):'URGNA2012'===n.algorithm?new Me(n).main(t,a):void a(new Error('Invalid RDF Dataset Normalization algorithm: '+n.algorithm))},Oe.prototype.fromRDF=function(n,a,r){var d={},l={"@default":d},c={};for(var u in n){var f=n[u];u in l||(l[u]={}),'@default'==u||u in d||(d[u]={"@id":u});for(var m=l[u],h=0;h<f.length;++h){var g=f[h],b=g.subject.value,v=g.predicate.value,w=g.object;b in m||(m[b]={"@id":b});var o=m[b],x='IRI'===w.type||'blank node'===w.type;if(x&&!(w.value in m)&&(m[w.value]={"@id":w.value}),v===Ie&&!a.useRdfType&&x){t.addValue(o,'@type',w.value,{propertyIsArray:!0});continue}var _=y(w,a.useNativeTypes);if(t.addValue(o,v,_,{propertyIsArray:!0}),x)if(w.value===Ae){var k=m[w.value];'usages'in k||(k.usages=[]),k.usages.push({node:o,property:v,value:_})}else c[w.value]=!(w.value in c)&&{node:o,property:v,value:_}}}for(var u in l){var C=l[u];if(Ae in C){for(var T=C[Ae],E=0;E<T.usages.length;++E){for(var S=T.usages[E],o=S.node,A=S.property,I=S.value,N=[],R=[],L=Object.keys(o).length;A===Se&&H(c[o['@id']])&&V(o[Ee])&&1===o[Ee].length&&V(o[Se])&&1===o[Se].length&&(3===L||4===L&&V(o['@type'])&&1===o['@type'].length&&o['@type'][0]===Te+'List')&&(N.push(o[Ee][0]),R.push(o['@id']),S=c[o['@id']],o=S.node,A=S.property,I=S.value,L=Object.keys(o).length,0===o['@id'].indexOf('_:')););if(A===Ee){if(o['@id']===Ae)continue;I=C[I['@id']][Se][0],N.pop(),R.pop()}delete I['@id'],I['@list']=N.reverse();for(var O=0;O<R.length;++O)delete C[R[O]]}delete T.usages}}for(var j=[],P=Object.keys(d).sort(),E=0;E<P.length;++E){var M=P[E],o=d[M];if(M in l)for(var f=o['@graph']=[],C=l[M],D=Object.keys(C).sort(),B=0,U;B<D.length;++B)U=C[D[B]],te(U)||f.push(U);te(o)||j.push(o)}r(null,j)},Oe.prototype.toRDF=function(t,n){var a=new ue('_:b'),r={"@default":{}};w(t,r,'@default',a);for(var o={},s=Object.keys(r).sort(),d=0,l;d<s.length;++d)l=s[d],('@default'===l||oe(l))&&(o[l]=h(r[l],a,n));return o},Oe.prototype.processContext=function(n,a,r){H(a)&&'@context'in a&&V(a['@context'])&&(a=a['@context']);var o=V(a)?a:[a];if(0===o.length)return n.clone();for(var s=n,d=0,l;d<o.length;++d){if(l=o[d],null===l){s=n=F(r);continue}if(H(l)&&'@context'in l&&(l=l['@context']),!H(l))throw new Le('Invalid JSON-LD syntax; @context must be an object.','jsonld.SyntaxError',{code:'invalid local context',context:l});if(t.cache.activeCtx){var c=t.cache.activeCtx.get(n,l);if(c){s=n=c;continue}}n=s,s=s.clone();var u={};if('@base'in l){var f=l['@base'];if(null===f)f=null;else if(!K(f))throw new Le('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.','jsonld.SyntaxError',{code:'invalid base IRI',context:l});else if(''!==f&&!oe(f))throw new Le('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.','jsonld.SyntaxError',{code:'invalid base IRI',context:l});null!==f&&(f=t.url.parse(f||'')),s['@base']=f,u['@base']=!0}if('@vocab'in l){var m=l['@vocab'];if(null===m)delete s['@vocab'];else if(!K(m))throw new Le('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.','jsonld.SyntaxError',{code:'invalid vocab mapping',context:l});else if(!oe(m))throw new Le('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.','jsonld.SyntaxError',{code:'invalid vocab mapping',context:l});else s['@vocab']=m;u['@vocab']=!0}if('@language'in l){var m=l['@language'];if(null===m)delete s['@language'];else if(!K(m))throw new Le('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.','jsonld.SyntaxError',{code:'invalid default language',context:l});else s['@language']=m.toLowerCase();u['@language']=!0}for(var h in l)D(s,l,h,u);t.cache.activeCtx&&t.cache.activeCtx.set(n,l,s)}return s};var Pe=function(){var n={subject:'s',object:'o',name:'g'},a=function(t){t=t||{},this.name='URDNA2015',this.options=t,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new ue('_:c14n'),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH='maxCallStackDepth'in t?t.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH='maxTotalCallStackDepth'in t?t.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice='timeSlice'in t?t.timeSlice:10};return a.prototype.doWork=function(n,a){var r=this.schedule;return r.totalDepth>=r.MAX_TOTAL_DEPTH?a(new Error('Maximum total call stack depth exceeded; normalization aborting.')):void function o(){if(r.depth===r.MAX_DEPTH)return r.depth=0,r.running=!1,t.nextTick(o);var s=new Date().getTime();return r.running||(r.start=new Date().getTime(),r.deadline=r.start+r.timeSlice),s<r.deadline?(r.running=!0,r.depth++,r.totalDepth++,n(function(t,n){r.depth--,r.totalDepth--,a(t,n)})):void(r.depth=0,r.running=!1,t.setImmediate(o))}()},a.prototype.forEach=function(t,n,a){var r=this,o=0,s,d;if(V(t))d=t.length,s=function(){return o!==d&&(s.value=t[o++],s.key=o,!0)};else{var l=Object.keys(t);d=l.length,s=function(){return o!==d&&(s.key=l[o++],s.value=t[s.key],!0)}}(function t(o){return o?a(o):s()?r.doWork(function(){n(s.value,s.key,t)}):void a()})()},a.prototype.waterfall=function(t,n){var a=this;a.forEach(t,function(t,n,r){a.doWork(t,r)},n)},a.prototype.whilst=function(t,n,a){var r=this;(function o(s){return s?a(s):t()?void r.doWork(n,o):a()})()},a.prototype.main=function(t,n){var a=this;a.schedule.start=new Date().getTime();var r;if(a.options.format&&'application/nquads'!==a.options.format)return n(new Le('Unknown output format.','jsonld.UnknownFormat',{format:a.options.format}));var o={};a.waterfall([function(n){a.forEach(t,function(t,n,r){'@default'===n&&(n=null),a.forEach(t,function(t,r,s){null!==n&&(0===n.indexOf('_:')?t.name={type:'blank node',value:n}:t.name={type:'IRI',value:n}),a.quads.push(t),a.forEachComponent(t,function(n){if('blank node'===n.type){var r=n.value;r in a.blankNodeInfo?a.blankNodeInfo[r].quads.push(t):(o[r]=!0,a.blankNodeInfo[r]={quads:[t]})}}),s()},r)},n)},function(t){var n=!0;a.whilst(function(){return n},function(t){n=!1,a.hashToBlankNodes={},a.waterfall([function(t){a.forEach(o,function(t,n,r){a.hashFirstDegreeQuads(n,function(t,o){return t?r(t):void(o in a.hashToBlankNodes?a.hashToBlankNodes[o].push(n):a.hashToBlankNodes[o]=[n],r())})},t)},function(t){var r=Object.keys(a.hashToBlankNodes).sort();a.forEach(r,function(t,r,s){var d=a.hashToBlankNodes[t];if(1<d.length)return s();var l=d[0];a.canonicalIssuer.getId(l),delete o[l],delete a.hashToBlankNodes[t],n=!0,s()},t)}],t)},t)},function(t){var n=Object.keys(a.hashToBlankNodes).sort();a.forEach(n,function(t,n,r){var o=[],s=a.hashToBlankNodes[t];a.waterfall([function(t){a.forEach(s,function(t,n,r){if(a.canonicalIssuer.hasId(t))return r();var s=new ue('_:b');s.getId(t),a.hashNDegreeQuads(t,s,function(t,n){return t?r(t):void(o.push(n),r())})},t)},function(t){o.sort(function(t,n){return t.hash<n.hash?-1:t.hash>n.hash?1:0}),a.forEach(o,function(t,n,r){for(var o in t.issuer.existing)a.canonicalIssuer.getId(o);r()},t)}],r)},t)},function(t){var n=[];a.waterfall([function(t){a.forEach(a.quads,function(t,r,o){a.forEachComponent(t,function(t){'blank node'===t.type&&0!==t.value.indexOf(a.canonicalIssuer.prefix)&&(t.value=a.canonicalIssuer.getId(t.value))}),n.push(ce(t)),o()},t)},function(t){return n.sort(),'application/nquads'===a.options.format?(r=n.join(''),t()):void(r=le(n.join('')),t())}],t)}],function(t){n(t,r)})},a.prototype.hashFirstDegreeQuads=function(t,n){var a=this,r=a.blankNodeInfo[t];if('hash'in r)return n(null,r.hash);var o=[],s=r.quads;a.forEach(s,function(n,r,s){var d={predicate:n.predicate};a.forEachComponent(n,function(n,r){d[r]=a.modifyFirstDegreeComponent(t,n,r)}),o.push(ce(d)),s()},function(t){return t?n(t):void(o.sort(),r.hash=Be.hashNQuads(a.name,o),n(null,r.hash))})},a.prototype.modifyFirstDegreeComponent=function(t,n){return'blank node'===n.type?(n=ie(n),n.value=n.value===t?'_:a':'_:z',n):n},a.prototype.hashRelatedBlankNode=function(t,n,a,r,o){var s=this,d;s.waterfall([function(n){return s.canonicalIssuer.hasId(t)?(d=s.canonicalIssuer.getId(t),n()):a.hasId(t)?(d=a.getId(t),n()):void s.hashFirstDegreeQuads(t,function(t,a){return t?n(t):void(d=a,n())})}],function(t){if(t)return o(t);var a=new Be(s.name);return a.update(r),'g'!==r&&a.update(s.getRelatedPredicate(n)),a.update(d),o(null,a.digest())})},a.prototype.getRelatedPredicate=function(t){return'<'+t.predicate.value+'>'},a.prototype.hashNDegreeQuads=function(t,n,a){var r=this,o=new Be(r.name),s;r.waterfall([function(a){r.createHashToRelated(t,n,function(t,n){return t?a(t):void(s=n,a())})},function(t){var a=Object.keys(s).sort();r.forEach(a,function(t,a,d){o.update(t);var l='',c=new De(s[t]),u;r.whilst(function(){return c.hasNext()},function(t){var a=c.next(),o=n.clone(),s='',d=[];r.waterfall([function(n){r.forEach(a,function(n,a,c){return r.canonicalIssuer.hasId(n)?s+=r.canonicalIssuer.getId(n):(!o.hasId(n)&&d.push(n),s+=o.getId(n)),0!==l.length&&s.length>=l.length&&s>l?t():void c()},n)},function(n){r.forEach(d,function(n,a,d){r.hashNDegreeQuads(n,o,function(a,r){return a?d(a):(s+=o.getId(n),s+='<'+r.hash+'>',o=r.issuer,0!==l.length&&s.length>=l.length&&s>l?t():void d())})},n)},function(t){(0===l.length||s<l)&&(l=s,u=o),t()}],t)},function(t){return t?d(t):void(o.update(l),n=u,d())})},t)}],function(t){a(t,{hash:o.digest(),issuer:n})})},a.prototype.createHashToRelated=function(t,a,r){var o=this,s={},d=o.blankNodeInfo[t].quads;o.forEach(d,function(r,d,l){o.forEach(r,function(d,l,c){if('predicate'===l||'blank node'!==d.type||d.value===t)return c();var u=d.value,f=n[l];o.hashRelatedBlankNode(u,r,a,f,function(t,n){return t?c(t):void(n in s?s[n].push(u):s[n]=[u],c())})},l)},function(t){r(t,s)})},a.prototype.forEachComponent=function(t,n){for(var a in t)'predicate'!=a&&n(t[a],a,t)},a}(),Me=function(){var t=function(t){Pe.call(this,t),this.name='URGNA2012'};return t.prototype=new Pe,t.prototype.modifyFirstDegreeComponent=function(t,n,a){return'blank node'===n.type?(n=ie(n),n.value='name'===a?'_:g':n.value===t?'_:a':'_:z',n):n},t.prototype.getRelatedPredicate=function(t){return t.predicate.value},t.prototype.createHashToRelated=function(t,n,a){var r=this,o={},s=r.blankNodeInfo[t].quads;r.forEach(s,function(a,s,d){var l,c;if('blank node'===a.subject.type&&a.subject.value!==t)c=a.subject.value,l='p';else if('blank node'===a.object.type&&a.object.value!==t)c=a.object.value,l='r';else return d();r.hashRelatedBlankNode(c,a,n,l,function(t,n){n in o?o[n].push(c):o[n]=[c],d()})},function(t){a(t,o)})},t}();Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError('Object.keys called on non-object');var n=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.push(a);return n}),t.registerRDFParser('application/nquads',le),t.registerRDFParser('rdfa-api',function(t){for(var n={"@default":[]},a=t.getSubjects(),r=0,o;r<a.length;++r)if(o=a[r],null!==o){var s=t.getSubjectTriples(o);if(null!==s){var d=s.predicates;for(var l in d)for(var c=d[l].objects,u=0;u<c.length;++u){var f=c[u],m={};m.subject=0===o.indexOf('_:')?{type:'blank node',value:o}:{type:'IRI',value:o},m.predicate=0===l.indexOf('_:')?{type:'blank node',value:l}:{type:'IRI',value:l};var h=f.value;if(f.type===Te+'XMLLiteral'){ve||Ue();var g=new ve;h='';for(var b=0;b<f.value.length;b++)f.value[b].nodeType===we.ELEMENT_NODE?h+=g.serializeToString(f.value[b]):f.value[b].nodeType===we.TEXT_NODE&&(h+=f.value[b].nodeValue)}m.object={},f.type===Te+'object'?0===f.value.indexOf('_:')?m.object.type='blank node':m.object.type='IRI':(m.object.type='literal',f.type===Te+'PlainLiteral'?f.language?(m.object.datatype=Ne,m.object.language=f.language):m.object.datatype=Ce:m.object.datatype=f.type),m.object.value=h,n['@default'].push(m)}}}return n}),t.IdentifierIssuer=ue,t.UniqueNamer=ue,ue.prototype.clone=function(){var t=new ue(this.prefix);return t.counter=this.counter,t.existing=ie(this.existing),t},ue.prototype.getId=function(t){if(t&&t in this.existing)return this.existing[t];var n=this.prefix+this.counter;return this.counter+=1,t&&(this.existing[t]=n),n},ue.prototype.getName=ue.prototype.getName,ue.prototype.hasId=function(t){return t in this.existing},ue.prototype.isNamed=ue.prototype.hasId;var De=function(t){this.list=t.sort(),this.done=!1,this.left={};for(var n=0;n<t.length;++n)this.left[t[n]]=!0};De.prototype.hasNext=function(){return!this.done},De.prototype.next=function(){for(var t=this.list.slice(),n=null,a=0,r=this.list.length,o=0;o<r;++o){var s=this.list[o],d=this.left[s];(null==n||s>n)&&(d&&0<o&&s>this.list[o-1]||!d&&o<r-1&&s>this.list[o+1])&&(n=s,a=o)}if(null===n)this.done=!0;else{var l=this.left[n]?a-1:a+1;this.list[a]=this.list[l],this.list[l]=n;for(var o=0;o<r;++o)this.list[o]>n&&(this.left[this.list[o]]=!this.left[this.list[o]])}return t};var Be=function(t){if(!(this instanceof Be))return new Be(t);if(-1===['URDNA2015','URGNA2012'].indexOf(t))throw new Error('Invalid RDF Dataset Normalization algorithm: '+t);Be._init.call(this,t)};if(Be.hashNQuads=function(t,n){for(var a=new Be(t),r=0;r<n.length;++r)a.update(n[r]);return a.digest()},function(t){if(t){var n=a(42);return Be._init=function(t){t='URDNA2015'===t?'sha256':'sha1',this.md=n.createHash(t)},Be.prototype.update=function(t){return this.md.update(t,'utf8')},void(Be.prototype.digest=function(){return this.md.digest('hex')})}Be._init=function(t){t='URDNA2015'===t?new l.Algorithm:new o.Algorithm,this.md=new r(t)},Be.prototype.update=function(t){return this.md.update(t)},Be.prototype.digest=function(){return this.md.digest().toHex()};var r=function(t){if(!(this instanceof r))return new r(t);if(this._algorithm=t,!r._padding||r._padding.length<this._algorithm.blockSize){r._padding='\x80';for(var a='\0',o=64;0<o;)1&o&&(r._padding+=a),o>>>=1,0<o&&(a+=a)}this.start()};r.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var t=this._algorithm.messageLengthSize/4,n=0;n<t;++n)this.fullMessageLength.push(0);return this._input=new r.ByteBuffer,this.state=this._algorithm.start(),this},r.prototype.update=function(t){t=new r.ByteBuffer(unescape(encodeURIComponent(t))),this.messageLength+=t.length();var n=t.length();n=[n/4294967296>>>0,n>>>0];for(var a=this.fullMessageLength.length-1;0<=a;--a)this.fullMessageLength[a]+=n[1],n[1]=n[0]+(this.fullMessageLength[a]/4294967296>>>0),this.fullMessageLength[a]>>>=0,n[0]=n[1]/4294967296>>>0;for(this._input.putBytes(t.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(2048<this._input.read||0===this._input.length())&&this._input.compact(),this},r.prototype.digest=function(){var t=new r.ByteBuffer;t.putBytes(this._input.bytes());var n=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,a=n&this._algorithm.blockSize-1;t.putBytes(r._padding.substr(0,this._algorithm.blockSize-a));for(var o=new r.ByteBuffer,s=0;s<this.fullMessageLength.length;++s)o.putInt32(this.fullMessageLength[s]<<3|this.fullMessageLength[s+1]>>>28);this._algorithm.writeMessageLength(t,o);var d=this._algorithm.digest(this.state.copy(),t),l=new r.ByteBuffer;return d.write(l),l},r.ByteBuffer=function(t){this.data='string'==typeof t?t:'',this.read=0},r.ByteBuffer.prototype.putInt32=function(t){this.data+=x(255&t>>24)+x(255&t>>16)+x(255&t>>8)+x(255&t)},r.ByteBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},r.ByteBuffer.prototype.putBytes=function(t){this.data+=t},r.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},r.ByteBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},r.ByteBuffer.prototype.toHex=function(){for(var t='',n=this.read,a;n<this.data.length;++n)a=this.data.charCodeAt(n),16>a&&(t+='0'),t+=a.toString(16);return t};var o={_w:null};o.Algorithm=function(){this.name='sha1',this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},o.Algorithm.prototype.start=function(){return o._w||(o._w=Array(80)),o._createState()},o.Algorithm.prototype.writeMessageLength=function(t,n){t.putBytes(n.bytes())},o.Algorithm.prototype.digest=function(n,r){for(var s=r.length(),l=o._w,u,t,a,m,c,d,h,f;64<=s;){for(t=n.h0,a=n.h1,m=n.h2,c=n.h3,d=n.h4,f=0;16>f;++f)u=r.getInt32(),l[f]=u,h=c^a&(m^c),u=(t<<5|t>>>27)+h+d+1518500249+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;20>f;++f)u=l[f-3]^l[f-8]^l[f-14]^l[f-16],u=u<<1|u>>>31,l[f]=u,h=c^a&(m^c),u=(t<<5|t>>>27)+h+d+1518500249+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;32>f;++f)u=l[f-3]^l[f-8]^l[f-14]^l[f-16],u=u<<1|u>>>31,l[f]=u,h=a^m^c,u=(t<<5|t>>>27)+h+d+1859775393+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;40>f;++f)u=l[f-6]^l[f-16]^l[f-28]^l[f-32],u=u<<2|u>>>30,l[f]=u,h=a^m^c,u=(t<<5|t>>>27)+h+d+1859775393+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;60>f;++f)u=l[f-6]^l[f-16]^l[f-28]^l[f-32],u=u<<2|u>>>30,l[f]=u,h=a&m|c&(a^m),u=(t<<5|t>>>27)+h+d+2400959708+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;80>f;++f)u=l[f-6]^l[f-16]^l[f-28]^l[f-32],u=u<<2|u>>>30,l[f]=u,h=a^m^c,u=(t<<5|t>>>27)+h+d+3395469782+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;n.h0=0|n.h0+t,n.h1=0|n.h1+a,n.h2=0|n.h2+m,n.h3=0|n.h3+c,n.h4=0|n.h4+d,s-=64}return n},o._createState=function(){var t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return t.copy=function(){var n=o._createState();return n.h0=t.h0,n.h1=t.h1,n.h2=t.h2,n.h3=t.h3,n.h4=t.h4,n},t.write=function(n){n.putInt32(t.h0),n.putInt32(t.h1),n.putInt32(t.h2),n.putInt32(t.h3),n.putInt32(t.h4)},t};var l={_k:null,_w:null};l.Algorithm=function(){this.name='sha256',this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},l.Algorithm.prototype.start=function(){return l._k||l._init(),l._createState()},l.Algorithm.prototype.writeMessageLength=function(t,n){t.putBytes(n.bytes())},l.Algorithm.prototype.digest=function(t,n){for(var r=n.length(),o=l._k,s=l._w,u,m,y,v,w,x,_,k,a,b,c,d,C,f,g;64<=r;){for(_=0;16>_;++_)s[_]=n.getInt32();for(;64>_;++_)u=s[_-2],u=(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,m=s[_-15],m=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,s[_]=0|u+s[_-7]+m+s[_-16];for(k=t.h0,a=t.h1,b=t.h2,c=t.h3,d=t.h4,C=t.h5,f=t.h6,g=t.h7,_=0;64>_;++_)v=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),w=f^d&(C^f),y=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),x=k&a|b&(k^a),u=g+v+w+o[_]+s[_],m=y+x,g=f,f=C,C=d,d=0|c+u,c=b,b=a,a=k,k=0|u+m;t.h0=0|t.h0+k,t.h1=0|t.h1+a,t.h2=0|t.h2+b,t.h3=0|t.h3+c,t.h4=0|t.h4+d,t.h5=0|t.h5+C,t.h6=0|t.h6+f,t.h7=0|t.h7+g,r-=64}return t},l._createState=function(){var t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return t.copy=function(){var n=l._createState();return n.h0=t.h0,n.h1=t.h1,n.h2=t.h2,n.h3=t.h3,n.h4=t.h4,n.h5=t.h5,n.h6=t.h6,n.h7=t.h7,n},t.write=function(n){n.putInt32(t.h0),n.putInt32(t.h1),n.putInt32(t.h2),n.putInt32(t.h3),n.putInt32(t.h4),n.putInt32(t.h5),n.putInt32(t.h6),n.putInt32(t.h7)},t},l._init=function(){l._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l._w=Array(64)}}(u),!ve)var Ue=function(){ve=a(41).XMLSerializer};if(t.url={},t.url.parsers={simple:{keys:['href','scheme','authority','path','query','fragment'],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:['href','protocol','scheme','authority','auth','user','password','hostname','port','path','directory','file','query','fragment'],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},t.url.parse=function(n,a){for(var r={},s=t.url.parsers[a||'full'],o=s.regex.exec(n),d=s.keys.length;d--;)r[s.keys[d]]=void 0===o[d]?null:o[d];return r.normalizedPath=fe(r.path,!!r.authority),r},u?t.useDocumentLoader('node'):'undefined'!=typeof XMLHttpRequest&&t.useDocumentLoader('xhr'),u){t.use=function(n){switch(n){case'request':t.request=a(42);break;default:throw new Le('Unknown extension.','jsonld.UnknownExtension',{extension:n});}};var qe={exports:{},filename:d};a(42)(qe,'version'),t.version=qe.exports.version}return t},h=function(){return m(function(){return h()})};return!u&&a(232)?(l=[],c=function(){return m(h),h}.apply(n,l),!(void 0!==c&&(t.exports=c))):(m(h),'undefined'!=typeof t&&t.exports&&(t.exports=h),f&&('undefined'==typeof jsonld?jsonld=jsonldjs=h:jsonldjs=h)),h})()}).call(n,a(5),a(3),a(48).setImmediate,'/')},function(t,n,a){(function(r,o,s){var d,l;/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.3.0
 */(function(){'use strict';function d(t){return'function'==typeof t||'object'==typeof t&&null!==t}function c(t){return'function'==typeof t}function u(t){return'object'==typeof t&&null!==t}function f(){return function(){X(h)}}function m(){return function(){setTimeout(h,1)}}function h(){for(var t=0;t<q;t+=2){var n=J[t],a=J[t+1];n(a),J[t]=void 0,J[t+1]=void 0}q=0}function g(){}function b(){return new TypeError('You cannot resolve a promise with itself')}function y(){return new TypeError('A promises callback cannot return that same promise.')}function v(t){try{return t.then}catch(t){return te.error=t,te}}function w(t,n,a,r){try{t.call(n,a,r)}catch(t){return t}}function x(t,n,a){z(function(t){var r=!1,o=w(a,n,function(a){r||(r=!0,n===a?E(t,a):C(t,a))},function(n){r||(r=!0,S(t,n))},'Settle: '+(t._label||' unknown promise'));!r&&o&&(r=!0,S(t,o))},t)}function _(t,n){n._state===Q?E(t,n._result):n._state===ee?S(t,n._result):A(n,void 0,function(n){C(t,n)},function(n){S(t,n)})}function k(t,n){if(n.constructor===t.constructor)_(t,n);else{var a=v(n);a===te?S(t,te.error):a===void 0?E(t,n):c(a)?x(t,n,a):E(t,n)}}function C(t,n){t===n?S(t,b()):d(n)?k(t,n):E(t,n)}function T(t){t._onerror&&t._onerror(t._result),I(t)}function E(t,n){t._state!==ae||(t._result=n,t._state=Q,0!==t._subscribers.length&&z(I,t))}function S(t,n){t._state!==ae||(t._state=ee,t._result=n,z(T,t))}function A(t,n,a,r){var o=t._subscribers,s=o.length;t._onerror=null,o[s]=n,o[s+Q]=a,o[s+ee]=r,0===s&&t._state&&z(I,t)}function I(t){var n=t._subscribers,a=t._state;if(0!==n.length){for(var r=t._result,o=0,s,d;o<n.length;o+=3)s=n[o],d=n[o+a],s?R(a,s,d,r):d(r);t._subscribers.length=0}}function N(){this.error=null}function j(t,n){try{return t(n)}catch(t){return ne.error=t,ne}}function R(t,n,a,r){var o=c(a),s,d,l,u;if(!o)s=r,l=!0;else if(s=j(a,r),s===ne?(u=!0,d=s.error,s=null):l=!0,n===s)return void S(n,y());n._state!==ae||(o&&l?C(n,s):u?S(n,d):t===Q?E(n,s):t===ee&&S(n,s))}function L(t,n){try{n(function(n){C(t,n)},function(n){S(t,n)})}catch(n){S(t,n)}}function O(t,n){var a=this;a._instanceConstructor=t,a.promise=new t(g),a._validateInput(n)?(a._input=n,a.length=n.length,a._remaining=n.length,a._init(),0===a.length?E(a.promise,a._result):(a.length=a.length||0,a._enumerate(),0===a._remaining&&E(a.promise,a._result))):S(a.promise,a._validationError())}function P(){throw new TypeError('You must pass a resolver function as the first argument to the promise constructor')}function M(){throw new TypeError('Failed to construct \'Promise\': Please use the \'new\' operator, this object constructor cannot be called as a function.')}function D(t){this._id=re++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==t&&(!c(t)&&P(),!(this instanceof D)&&M(),L(this,t))}var B=Array.isArray?Array.isArray:function(t){return'[object Array]'===Object.prototype.toString.call(t)};var U=B,q=0,F={}.toString,z=function(t,n){J[q]=t,J[q+1]=n,q+=2,2==q&&(Z?Z(h):Y())},H='undefined'==typeof window?void 0:window,W=H||{},V=W.MutationObserver||W.WebKitMutationObserver,G='undefined'!=typeof r&&'[object process]'==={}.toString.call(r),K='undefined'!=typeof Uint8ClampedArray&&'undefined'!=typeof importScripts&&'undefined'!=typeof MessageChannel,J=Array(1e3),X,Z,Y;Y=G?function(){var t=r.nextTick,n=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&'0'===n[1]&&'10'===n[2]&&(t=o),function(){t(h)}}():V?function(){var t=0,n=new V(h),a=document.createTextNode('');return n.observe(a,{characterData:!0}),function(){a.data=t=++t%2}}():K?function(){var t=new MessageChannel;return t.port1.onmessage=h,function(){t.port2.postMessage(0)}}():void 0!==H||0?m():function(){try{var t=a(231);return X=t.runOnLoop||t.runOnContext,f()}catch(t){return m()}}();var Q=1,ee=2,te=new N,ne=new N,ae;O.prototype._validateInput=function(t){return U(t)},O.prototype._validationError=function(){return new Error('Array Methods must be provided an Array')},O.prototype._init=function(){this._result=Array(this.length)};O.prototype._enumerate=function(){for(var t=this,n=t.length,a=t.promise,r=t._input,o=0;a._state===ae&&o<n;o++)t._eachEntry(r[o],o)},O.prototype._eachEntry=function(t,n){var a=this,r=a._instanceConstructor;u(t)?t.constructor===r&&t._state!==ae?(t._onerror=null,a._settledAt(t._state,n,t._result)):a._willSettleAt(r.resolve(t),n):(a._remaining--,a._result[n]=t)},O.prototype._settledAt=function(t,n,a){var r=this,o=r.promise;o._state===ae&&(r._remaining--,t===ee?S(o,a):r._result[n]=a),0===r._remaining&&E(o,r._result)},O.prototype._willSettleAt=function(t,n){var a=this;A(t,void 0,function(t){a._settledAt(Q,n,t)},function(t){a._settledAt(ee,n,t)})};var re=0,oe=D;D.all=function(t){return new O(this,t).promise},D.race=function(t){function n(t){C(o,t)}function a(t){S(o,t)}var r=this,o=new r(g);if(!U(t))return S(o,new TypeError('You must pass an array to race.')),o;for(var s=t.length,d=0;o._state===ae&&d<s;d++)A(r.resolve(t[d]),void 0,n,a);return o},D.resolve=function(t){var n=this;if(t&&'object'==typeof t&&t.constructor===n)return t;var a=new n(g);return C(a,t),a},D.reject=function(t){var n=this,a=new n(g);return S(a,t),a},D._setScheduler=function(t){Z=t},D._setAsap=function(t){z=t},D._asap=z,D.prototype={constructor:D,then:function(t,n){var a=this,r=a._state;if(r===Q&&!t||r===ee&&!n)return this;var o=new this.constructor(g),s=a._result;if(r){var d=arguments[r-1];z(function(){R(r,o,d,s)})}else A(a,o,t,n);return o},catch:function(t){return this.then(null,t)}};var ie=function(){var t;if('undefined'!=typeof s)t=s;else if('undefined'!=typeof self)t=self;else try{t=Function('return this')()}catch(t){throw new Error('polyfill failed because global object is unavailable in this environment')}var n=t.Promise;n&&'[object Promise]'===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=oe)},se={Promise:oe,polyfill:ie};(l=function(){return se}.call(n,a,n,t),!(l!==void 0&&(t.exports=l))),ie()}).call(this)}).call(n,a(5),a(48).setImmediate,a(3))},function(t,n,a){var r,r;r=function(){};var n=t.exports={Lexer:r('./lib/N3Lexer'),Parser:r('./lib/N3Parser'),Writer:r('./lib/N3Writer'),Store:r('./lib/N3Store'),StreamParser:r('./lib/N3StreamParser'),StreamWriter:r('./lib/N3StreamWriter'),Util:r('./lib/N3Util')};Object.keys(n).forEach(function(t){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){return delete n[t],n[t]=a(233)('./N3'+t)}})})},function(t,n,a){function r(t,n){return this instanceof r?void(this._size=0,this._graphs=Object.create(null),this._entities=Object.create(null),this._entities['><']=0,this._entityCount=0,this._blankNodeIndex=0,!n&&t&&!t[0]&&(n=t,t=null),this._prefixes=Object.create(null),n&&n.prefixes&&this.addPrefixes(n.prefixes),t&&this.addTriples(t)):new r(t,n)}var o=a(91).expandPrefixedName;r.prototype={get size(){var t=this._size;if(null!==t)return t;var n=this._graphs,a,r;for(var o in n)for(var s in a=n[o].subjects)for(var d in r=a[s])t+=Object.keys(r[d]).length;return this._size=t},_addToIndex:function(t,n,a,r){var o=t[n]||(t[n]={}),s=o[a]||(o[a]={});s[r]=null},_removeFromIndex:function(t,n,a,r){var o=t[n],s=o[a],d;for(d in delete s[r],s)return;for(d in delete o[a],o)return;delete t[n]},_findInIndex:function(t,n,a,r,o,s,d,c){var u=[],f=Object.keys(this._entities),m,h,g;for(var b in n&&((m=t,t={})[n]=m[n]),t){var y=f[b];if(h=t[b])for(var v in a&&((m=h,h={})[a]=m[a]),h){var w=f[v];if(g=h[v])for(var x=r?(r in g)?[r]:[]:Object.keys(g),_=x.length-1,l;0<=_;_--)l={subject:'',predicate:'',object:'',graph:c},l[o]=y,l[s]=w,l[d]=f[x[_]],u.push(l)}}return u},_countInIndex:function(t,n,a,r){var o=0,s,d,l;for(var c in n&&((s=t,t={})[n]=s[n]),t)if(d=t[c])for(var u in a&&((s=d,d={})[a]=s[a]),d)(l=d[u])&&(r?r in l&&o++:o+=Object.keys(l).length);return o},addTriple:function(t,n,a,r){n||(r=t.graph,a=t.object,n=t.predicate,t=t.subject),r=r||'';var o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o));var s=this._entities;t=s[t]||(s[t]=++this._entityCount),n=s[n]||(s[n]=++this._entityCount),a=s[a]||(s[a]=++this._entityCount),this._addToIndex(o.subjects,t,n,a),this._addToIndex(o.predicates,n,a,t),this._addToIndex(o.objects,a,t,n),this._size=null},addTriples:function(t){for(var n=t.length-1;0<=n;n--)this.addTriple(t[n])},addPrefix:function(t,n){this._prefixes[t]=n},addPrefixes:function(t){for(var n in t)this.addPrefix(n,t[n])},removeTriple:function(t,n,a,r){n||(r=t.graph,a=t.object,n=t.predicate,t=t.subject),r=r||'';var o=this._entities,s=this._graphs,d;if((t=o[t])&&(n=o[n])&&(a=o[a])&&(d=s[r])){var l,c;if((l=d.subjects[t])&&(c=l[n])&&a in c){for(t in this._removeFromIndex(d.subjects,t,n,a),this._removeFromIndex(d.predicates,n,a,t),this._removeFromIndex(d.objects,a,t,n),null!==this._size&&this._size--,d.subjects)return;delete s[r]}}},removeTriples:function(t){for(var n=t.length-1;0<=n;n--)this.removeTriple(t[n])},find:function(t,n,a,r){var s=this._prefixes;return this.findByIRI(o(t,s),o(n,s),o(a,s),o(r,s))},findByIRI:function(t,n,a,r){r=r||'';var o=this._graphs[r],s=this._entities;return o?t&&!(t=s[t])?[]:n&&!(n=s[n])?[]:a&&!(a=s[a])?[]:t?a?this._findInIndex(o.objects,a,t,n,'object','subject','predicate',r):this._findInIndex(o.subjects,t,n,null,'subject','predicate','object',r):n?this._findInIndex(o.predicates,n,a,null,'predicate','object','subject',r):a?this._findInIndex(o.objects,a,null,null,'object','subject','predicate',r):this._findInIndex(o.subjects,null,null,null,'subject','predicate','object',r):[]},count:function(t,n,a,r){var s=this._prefixes;return this.countByIRI(o(t,s),o(n,s),o(a,s),o(r,s))},countByIRI:function(t,n,a,r){r=r||'';var o=this._graphs[r],s=this._entities;return o?t&&!(t=s[t])?0:n&&!(n=s[n])?0:a&&!(a=s[a])?0:t?a?this._countInIndex(o.objects,a,t,n):this._countInIndex(o.subjects,t,n,a):n?this._countInIndex(o.predicates,n,a,t):this._countInIndex(o.objects,a,t,n):0},createBlankNode:function(t){var n,a;if(t)for(n=t='_:'+t,a=1;this._entities[n];)n=t+a++;else do n='_:b'+this._blankNodeIndex++;while(this._entities[n]);return this._entities[n]=++this._entityCount,n}},t.exports=r},function(t,n,a){function r(t){if(!(this instanceof r))return new r(t);o.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var n=this,a=new d(t);a.parse(function(t,a){a&&n.push(a)||t&&n.emit('error',t)},this.emit.bind(this,'prefix')),this._transform=function(t,n,r){a.addChunk(t),r()},this._flush=function(t){a.end(),t()}}var o=a(43).Transform,s=a(95),d=a(90);s.inherits(r,o),t.exports=r},function(t,n,a){'use strict';(function(n,r){function o(t){return z.from(t)}function s(t){return z.isBuffer(t)||t instanceof H}function d(t,n,a){return'function'==typeof t.prependListener?t.prependListener(n,a):void(t._events&&t._events[n]?D(t._events[n])?t._events[n].unshift(a):t._events[n]=[a,t._events[n]]:t.on(n,a))}function l(t,n){B=B||a(33),t=t||{},this.objectMode=!!t.objectMode,n instanceof B&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=w(this.highWaterMark),this.buffer=new K,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||'utf8',this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!X&&(X=a(94).StringDecoder),this.decoder=new X(t.encoding),this.encoding=t.encoding)}function c(t){return B=B||a(33),this instanceof c?void(this._readableState=new l(t,this),this.readable=!0,t&&('function'==typeof t.read&&(this._read=t.read),'function'==typeof t.destroy&&(this._destroy=t.destroy)),F.call(this)):new c(t)}function u(t,n,a,r,s){var d=t._readableState;if(null===n)d.reading=!1,y(t,d);else{var l;s||(l=m(d,n)),l?t.emit('error',l):d.objectMode||n&&0<n.length?('string'!=typeof n&&!d.objectMode&&Object.getPrototypeOf(n)!==z.prototype&&(n=o(n)),r?d.endEmitted?t.emit('error',new Error('stream.unshift() after end event')):f(t,d,n,!0):d.ended?t.emit('error',new Error('stream.push() after EOF')):(d.reading=!1,d.decoder&&!a?(n=d.decoder.write(n),d.objectMode||0!==n.length?f(t,d,n,!1):_(t,d)):f(t,d,n,!1))):!r&&(d.reading=!1)}return h(d)}function f(t,n,a,r){n.flowing&&0===n.length&&!n.sync?(t.emit('data',a),t.read(0)):(n.length+=n.objectMode?1:a.length,r?n.buffer.unshift(a):n.buffer.push(a),n.needReadable&&v(t)),_(t,n)}function m(t,n){var a;return s(n)||'string'==typeof n||void 0===n||t.objectMode||(a=new TypeError('Invalid non-string/buffer chunk')),a}function h(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function g(t){return t>=Y?t=Y:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function b(t,n){return 0>=t||0===n.length&&n.ended?0:n.objectMode?1:t===t?(t>n.highWaterMark&&(n.highWaterMark=g(t)),t<=n.length?t:n.ended?n.length:(n.needReadable=!0,0)):n.flowing&&n.length?n.buffer.head.data.length:n.length}function y(t,n){if(!n.ended){if(n.decoder){var a=n.decoder.end();a&&a.length&&(n.buffer.push(a),n.length+=n.objectMode?1:a.length)}n.ended=!0,v(t)}}function v(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(G('emitReadable',n.flowing),n.emittedReadable=!0,n.sync?M(x,t):x(t))}function x(t){G('emit readable'),t.emit('readable'),A(t)}function _(t,n){n.readingMore||(n.readingMore=!0,M(k,t,n))}function k(t,n){for(var a=n.length;!n.reading&&!n.flowing&&!n.ended&&n.length<n.highWaterMark&&(G('maybeReadMore read 0'),t.read(0),a!==n.length);)a=n.length;n.readingMore=!1}function C(t){return function(){var n=t._readableState;G('pipeOnDrain',n.awaitDrain),n.awaitDrain&&n.awaitDrain--,0===n.awaitDrain&&q(t,'data')&&(n.flowing=!0,A(t))}}function T(t){G('readable nexttick read 0'),t.read(0)}function E(t,n){n.resumeScheduled||(n.resumeScheduled=!0,M(S,t,n))}function S(t,n){n.reading||(G('resume read 0'),t.read(0)),n.resumeScheduled=!1,n.awaitDrain=0,t.emit('resume'),A(t),n.flowing&&!n.reading&&t.read(0)}function A(t){var n=t._readableState;for(G('flow',n.flowing);n.flowing&&null!==t.read(););}function I(t,a){if(0===a.length)return null;var r;return a.objectMode?r=a.buffer.shift():!t||t>=a.length?(r=a.decoder?a.buffer.join(''):1===a.buffer.length?a.buffer.head.data:a.buffer.concat(a.length),a.buffer.clear()):r=N(t,a.buffer,a.decoder),r}function N(t,n,a){var r;return t<n.head.data.length?(r=n.head.data.slice(0,t),n.head.data=n.head.data.slice(t)):t===n.head.data.length?r=n.shift():r=a?j(t,n):R(t,n),r}function j(t,n){var a=n.head,r=1,o=a.data;for(t-=o.length;a=a.next;){var s=a.data,d=t>s.length?s.length:t;if(o+=d===s.length?s:s.slice(0,t),t-=d,0===t){d===s.length?(++r,n.head=a.next?a.next:n.tail=null):(n.head=a,a.data=s.slice(d));break}++r}return n.length-=r,o}function R(t,n){var a=z.allocUnsafe(t),r=n.head,o=1;for(r.data.copy(a),t-=r.data.length;r=r.next;){var s=r.data,d=t>s.length?s.length:t;if(s.copy(a,a.length-t,0,d),t-=d,0===t){d===s.length?(++o,n.head=r.next?r.next:n.tail=null):(n.head=r,r.data=s.slice(d));break}++o}return n.length-=o,a}function L(t){var n=t._readableState;if(0<n.length)throw new Error('"endReadable()" called on non-empty stream');n.endEmitted||(n.ended=!0,M(O,n,t))}function O(t,n){t.endEmitted||0!==t.length||(t.endEmitted=!0,n.readable=!1,n.emit('end'))}function P(t,n){for(var a=0,r=t.length;a<r;a++)if(t[a]===n)return a;return-1}var M=a(66);t.exports=c;var D=a(140),B;c.ReadableState=l;var U=a(92).EventEmitter,q=function(t,n){return t.listeners(n).length},F=a(141),z=a(4).Buffer,H=n.Uint8Array||function(){},W=a(50);W.inherits=a(1);var V=a(236),G;G=V&&V.debuglog?V.debuglog('stream'):function(){};var K=a(237),J=a(142),X;W.inherits(c,F);var Z=['error','close','destroy','pause','resume'];Object.defineProperty(c.prototype,'destroyed',{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),c.prototype.destroy=J.destroy,c.prototype._undestroy=J.undestroy,c.prototype._destroy=function(t,n){this.push(null),n(t)},c.prototype.push=function(t,n){var a=this._readableState,r;return a.objectMode?r=!0:'string'==typeof t&&(n=n||a.defaultEncoding,n!==a.encoding&&(t=z.from(t,n),n=''),r=!0),u(this,t,n,!1,r)},c.prototype.unshift=function(t){return u(this,t,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(t){return X||(X=a(94).StringDecoder),this._readableState.decoder=new X(t),this._readableState.encoding=t,this};var Y=8388608;c.prototype.read=function(t){G('read',t),t=parseInt(t,10);var n=this._readableState,a=t;if(0!==t&&(n.emittedReadable=!1),0===t&&n.needReadable&&(n.length>=n.highWaterMark||n.ended))return G('read: emitReadable',n.length,n.ended),0===n.length&&n.ended?L(this):v(this),null;if(t=b(t,n),0===t&&n.ended)return 0===n.length&&L(this),null;var r=n.needReadable;G('need readable',r),(0===n.length||n.length-t<n.highWaterMark)&&(r=!0,G('length less than watermark',r)),n.ended||n.reading?(r=!1,G('reading or ended',r)):r&&(G('do read'),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,!n.reading&&(t=b(a,n)));var o;return o=0<t?I(t,n):null,null===o?(n.needReadable=!0,t=0):n.length-=t,0===n.length&&(!n.ended&&(n.needReadable=!0),a!==t&&n.ended&&L(this)),null!==o&&this.emit('data',o),o},c.prototype._read=function(){this.emit('error',new Error('_read() is not implemented'))},c.prototype.pipe=function(t,n){function a(t,n){G('onunpipe'),t===h&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,s())}function o(){G('onend'),t.end()}function s(){G('cleanup'),t.removeListener('close',u),t.removeListener('finish',f),t.removeListener('drain',v),t.removeListener('error',c),t.removeListener('unpipe',a),h.removeListener('end',o),h.removeListener('end',m),h.removeListener('data',l),w=!0,g.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&v()}function l(n){G('ondata'),x=!1;var a=t.write(n);!1!==a||x||((1===g.pipesCount&&g.pipes===t||1<g.pipesCount&&-1!==P(g.pipes,t))&&!w&&(G('false write response, pause',h._readableState.awaitDrain),h._readableState.awaitDrain++,x=!0),h.pause())}function c(n){G('onerror',n),m(),t.removeListener('error',c),0===q(t,'error')&&t.emit('error',n)}function u(){t.removeListener('finish',f),m()}function f(){G('onfinish'),t.removeListener('close',u),m()}function m(){G('unpipe'),h.unpipe(t)}var h=this,g=this._readableState;switch(g.pipesCount){case 0:g.pipes=t;break;case 1:g.pipes=[g.pipes,t];break;default:g.pipes.push(t);}g.pipesCount+=1,G('pipe count=%d opts=%j',g.pipesCount,n);var b=(!n||!1!==n.end)&&t!==r.stdout&&t!==r.stderr,y=b?o:m;g.endEmitted?M(y):h.once('end',y),t.on('unpipe',a);var v=C(h);t.on('drain',v);var w=!1,x=!1;return h.on('data',l),d(t,'error',c),t.once('close',u),t.once('finish',f),t.emit('pipe',h),g.flowing||(G('pipe resume'),h.resume()),t},c.prototype.unpipe=function(t){var n=this._readableState,a={hasUnpiped:!1};if(0===n.pipesCount)return this;if(1===n.pipesCount)return t&&t!==n.pipes?this:(t||(t=n.pipes),n.pipes=null,n.pipesCount=0,n.flowing=!1,t&&t.emit('unpipe',this,a),this);if(!t){var r=n.pipes,o=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var s=0;s<o;s++)r[s].emit('unpipe',this,a);return this}var d=P(n.pipes,t);return-1===d?this:(n.pipes.splice(d,1),n.pipesCount-=1,1===n.pipesCount&&(n.pipes=n.pipes[0]),t.emit('unpipe',this,a),this)},c.prototype.on=function(t,n){var a=F.prototype.on.call(this,t,n);if('data'===t)!1!==this._readableState.flowing&&this.resume();else if('readable'===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&v(this):M(T,this))}return a},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){var t=this._readableState;return t.flowing||(G('resume'),t.flowing=!0,E(this,t)),this},c.prototype.pause=function(){return G('call pause flowing=%j',this._readableState.flowing),!1!==this._readableState.flowing&&(G('pause'),this._readableState.flowing=!1,this.emit('pause')),this},c.prototype.wrap=function(t){var a=this._readableState,r=!1,o=this;for(var s in t.on('end',function(){if(G('wrapped end'),a.decoder&&!a.ended){var t=a.decoder.end();t&&t.length&&o.push(t)}o.push(null)}),t.on('data',function(n){if((G('wrapped data'),a.decoder&&(n=a.decoder.write(n)),!(a.objectMode&&(null===n||void 0===n)))&&(a.objectMode||n&&n.length)){var s=o.push(n);s||(r=!0,t.pause())}}),t)void 0===this[s]&&'function'==typeof t[s]&&(this[s]=function(n){return function(){return t[n].apply(t,arguments)}}(s));for(var d=0;d<Z.length;d++)t.on(Z[d],o.emit.bind(o,Z[d]));return o._read=function(a){G('wrapped _read',a),r&&(r=!1,t.resume())},o},c._fromList=I}).call(n,a(3),a(5))},function(t){var n={}.toString;t.exports=Array.isArray||function(t){return'[object Array]'==n.call(t)}},function(t,n,a){t.exports=a(92).EventEmitter},function(t,n,a){'use strict';function r(t,n){t.emit('error',n)}var o=a(66);t.exports={destroy:function(t,n){var a=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?void(n?n(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&o(r,this,t)):void(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!n&&t?(o(r,a,t),a._writableState&&(a._writableState.errorEmitted=!0)):n&&n(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,n,a){'use strict';function r(t){this.afterTransform=function(n,a){return o(t,n,a)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(t,n,a){var r=t._transformState;r.transforming=!1;var o=r.writecb;if(!o)return t.emit('error',new Error('write callback called multiple times'));r.writechunk=null,r.writecb=null,null!==a&&a!==void 0&&t.push(a),o(n);var s=t._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t._read(s.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);l.call(this,t),this._transformState=new r(this);var n=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&('function'==typeof t.transform&&(this._transform=t.transform),'function'==typeof t.flush&&(this._flush=t.flush)),this.once('prefinish',function(){'function'==typeof this._flush?this._flush(function(t,a){d(n,t,a)}):d(n)})}function d(t,n,a){if(n)return t.emit('error',n);null!==a&&a!==void 0&&t.push(a);var r=t._writableState,o=t._transformState;if(r.length)throw new Error('Calling transform done when ws.length != 0');if(o.transforming)throw new Error('Calling transform done when still transforming');return t.push(null)}t.exports=s;var l=a(33),c=a(50);c.inherits=a(1),c.inherits(s,l),s.prototype.push=function(t,n){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,n)},s.prototype._transform=function(){throw new Error('_transform() is not implemented')},s.prototype._write=function(t,n,a){var r=this._transformState;if(r.writecb=a,r.writechunk=t,r.writeencoding=n,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},s.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(t,n){var a=this;l.prototype._destroy.call(this,t,function(t){n(t),a.emit('close')})}},function(t,n,a){function r(t){if(!(this instanceof r))return new r(t);o.call(this,{encoding:'utf8'}),this._writableState.objectMode=!0;var n=this,a=new d({write:function(t,a,r){n.push(t),r&&r()},end:function(t){n.push(null),t&&t()}},t);this._transform=function(t,n,r){a.addTriple(t,r)},this._flush=function(t){a.end(t)}}var o=a(43).Transform,s=a(95),d=a(96);s.inherits(r,o),t.exports=r},function(t,n,a){'use strict';t.exports=function(t,n,a,g,b){function y(){b&&b(null,n)}function v(t){if('application/ld+json'!==g||'application/nquads'!==g||'application/n-quads'!==g)if(b)b(t,n);else throw new Error('Error trying to parse <'+a+'> as '+g+':\n'+t+':\n'+t.stack)}function w(t,a){t&&b(t,n);try{E.parse(a,x)}catch(t){b(t,n)}}function x(t,a){if(t&&b(t,n),a)S.push(a);else{for(var r=0;r<S.length;r++)_(n,S[r]);b(null,n)}}function _(t,n){var a=k(n.subject),r=k(n.predicate),o=k(n.object),s=null;n.graph&&(s=k(n.graph)),t.add(a,r,o,s)}function k(t){var n;if(d.Util.isLiteral(t)){n=d.Util.getLiteralValue(t);var a=d.Util.getLiteralLanguage(t),o=new c(d.Util.getLiteralType(t));return new s(n,a,o)}return d.Util.isIRI(t)?new c(t):d.Util.isBlank(t)?(n=t.substring(2,t.length),new r(n)):null}g=g||'text/turtle';try{if('text/n3'===g||'text/turtle'===g){var C=l(n,n,a,a,null,null,'',null);C.loadBuf(t),y()}else if('application/rdf+xml'===g){var T=new f(n);T.parse(h.parseXML(t),a,n.sym(a)),y()}else if('application/xhtml+xml'===g)u(h.parseXML(t,{contentType:'application/xhtml+xml'}),n,a),y();else if('text/html'===g)u(h.parseXML(t,{contentType:'text/html'}),n,a),y();else if('application/sparql-update'===g)m(t,n,a),y();else if('application/ld+json'===g||'application/nquads'===g||'application/n-quads'===g){var E=d.Parser(),S=[];if('application/ld+json'===g){var A;try{A=JSON.parse(t)}catch(t){return b(t,null)}o.toRDF(A,{format:'application/nquads',base:a},w)}else w(null,t)}else throw new Error('Don\'t know how to parse '+g+' yet')}catch(t){v(t)}};var r=a(31),o=a(134),s=a(40),d=a(136),l=a(71),c=a(8),u=a(99).parseRDFaDOM,f=a(100),m=a(146),h=a(24)},function(t,n,a){'use strict';t.exports=function(t,n,a){var s=['INSERT','DELETE','WHERE'],d=o('http://www.w3.org/ns/pim/patch#'),l=r(n,n,a,a,null,null,'',null),c={},u=function(t,n,a,r,o){return'Line '+(n+1)+' of <'+t+'>: Bad syntax:\n   '+o+'\n   at: "'+a.slice(r,r+30)+'"'},f,m,h;f=0;var g=n.sym(a+'#query');for(c.query=g;;){if(m=l.skipSpace(t,f),0>m)return c;if(';'===t[m]){if(f=l.skipSpace(t,m+1),0>f)return c;m=f}var b=!1;for(h=0;h<s.length;h++){var y=s[h];if(t.slice(m,m+y.length)===y){if(f=l.skipSpace(t,m+y.length),0>f)throw u(l._thisDoc,l.lines,t,m+y.length,'found EOF, needed {...} after '+y);if(('INSERT'===y||'DELETE'===y)&&'DATA'===t.slice(f,f+4)){if(m=l.skipSpace(t,f+4),0>m)throw u(l._thisDoc,l.lines,t,f+4,'needed {...} after INSERT DATA '+y);f=m}var v=[];if(m=l.node(t,f,v),0>m)throw u(l._thisDoc,l.lines,t,f,'bad syntax or EOF in {...} after '+y);c[y.toLowerCase()]=v[0],n.add(g,d(y.toLowerCase()),v[0]),b=!0,f=m}}if(!b&&'@prefix'===t.slice(m,m+7)){if(f=l.directive(t,m),0>f)throw u(l._thisDoc,l.lines,t,f,'bad syntax or EOF after @prefix ');f=l.checkDot(t,f),b=!0}if(!b)throw u(l._thisDoc,l.lines,t,m,'Unknown syntax at start of statememt: \''+t.slice(m).slice(0,20)+'\'')}};var r=a(71),o=a(51)},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(70).namedNode,d=function(){function t(n,a){r(this,t),this.parent=n,this.via=a,this.connected=!1,this.pending={},this.subscribed={},this.socket={};try{this.socket=new WebSocket(a),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onmessage=this.onMessage,this.socket.onerror=this.onError}catch(t){this.onError(t)}}return o(t,[{key:'_decode',value:function(t){var n,a,o,s,r,d,l;for(a in s={},r=function(){var a,r,o,s;for(o=t.split('&'),s=[],(a=0,r=o.length);a<r;a++)n=o[a],s.push(n.split('='));return s}(),r)n=r[a],d=[decodeURIComponent(n[0]),decodeURIComponent(n[1])],o=d[0],l=d[1],null==s[o]&&(s[o]=[]),s[o].push(l);return s}},{key:'_send',value:function(t,n,a){var r,o;return o=[t,n,a].join(' '),'function'==typeof(r=this.socket).send?r.send(o):void 0}},{key:'_subscribe',value:function(t){return this._send('sub',t,''),this.subscribed[t]=!0,this.subscribed[t]}},{key:'onClose',value:function(){for(var t in this.connected=!1,this.subscribed)this.pending[t]=!0;return this.subscribed={},this.subscribed}},{key:'onError',value:function(t){throw new Error('onError'+t)}},{key:'onMessage',value:function(t){var n,a;return(a=t.data.split(' '),'ping'===a[0])?'function'==typeof(n=this.socket).send?n.send('pong '+a.slice(1).join(' ')):void 0:'pub'===a[0]?this.parent.onUpdate(a[1],this._decode(a[2])):void 0}},{key:'onOpen',value:function(){var t,n;for(n in this.connected=!0,t=[],this.pending)delete this.pending[n],t.push(this._subscribe(n));return t}},{key:'subscribe',value:function(t){return this.connected?this._subscribe(t):(this.pending[t]=!0,this.pending[t])}}]),t}(),l=function(){function t(n){r(this,t),this.fetcher=n,this.graph={},this.via={},this.fetcher.addCallback('headers',this.onHeaders)}return o(t,[{key:'onHeaders',value:function(t){var n,a,r;return null==t.headers||'undefined'==typeof WebSocket||null===WebSocket||(n=t.headers.etag,r=t.headers['updates-via'],a=t.uri,n&&r&&(this.graph[a]={etag:n,via:r},this.register(r,a)),!0)}},{key:'onUpdate',value:function(t){return this.fetcher.refresh(s(t))}},{key:'register',value:function(t,n){return null==this.via[t]&&(this.via[t]=new d(this,t)),this.via[t].subscribe(n)}}]),t}();t.exports.UpdatesSocket=d,t.exports.UpdatesVia=l},function(t,n,a){'use strict';var r=t.exports={},o={acl:r,icons:a(20),log:a(19),ns:a(9),store:a(14),widgets:a(21)},s=a(23),d=o.store;o.acl.adoptACLDefault=function(t,n,a,r){var s=o.store,d=o.ns.acl,l=o.ns,c='/'===t.uri.slice(-1),u=s.each(void 0,d('defaultForNew'),a,r),f=[];u.map(function(n){f=f.concat(s.statementsMatching(n,d('agent'),void 0,r)).concat(s.statementsMatching(n,d('agentClass'),void 0,r)).concat(s.statementsMatching(n,d('agentGroup'),void 0,r)).concat(s.statementsMatching(n,d('origin'),void 0,r)).concat(s.statementsMatching(n,d('originClass'),void 0,r)).concat(s.statementsMatching(n,d('mode'),void 0,r)),f.push($rdf.st(n,d('accessTo'),t,r)),c&&f.push($rdf.st(n,d('defaultForNew'),t,r))});var m=$rdf.graph();return f.map(function(t){var a=function(t){var a=r.uri.length;return $rdf.sym(t.uri.slice(0,a)==r.uri?n.uri+t.uri.slice(a):t.uri)};m.add(a(t.subject),a(t.predicate),a(t.object),$rdf.sym(n.uri))}),m},o.acl.readACL=function(t,n,r,a){var r=r||o.store,s=o.ns,d=a?s.acl('defaultForNew'):s.acl('accessTo'),l=o.ns.acl,c={agent:[],agentClass:[],agentGroup:[],origin:[],originClass:[]},u=r.each(void 0,d,t);for(var f in{agent:!0,agentClass:!0,agentGroup:!0,origin:!0,originClass:!0})u.map(function(t){r.each(t,l('mode')).map(function(n){r.each(t,l(f)).map(function(a){c[f][a.uri]||(c[f][a.uri]=[]),c[f][a.uri][n.uri]=t})})});return c},o.acl.sameACL=function(t,n){var a=function(t,n){for(var a in{agent:!0,agentClass:!0,agentGroup:!0,origin:!0,originClass:!0})if(t[a])for(var r in t[a])for(var o in t[a][r])if(!n[a][r]||!n[a][r][o])return!1;return!0};return a(t,n)&&a(n,t)},o.acl.ACLunion=function(t){for(var n=t[0],r=1,o,a;r<t.length;r++)['agent','agentClass','agentGroup','origin','originClass'].map(function(s){if(o=t[r],o[s])for(a in o[s])for(var d in o[s][a])n[s][a]||(n[s][a]=[]),n[s][a][d]=!0});return n},o.acl.loadUnionACL=function(t,n){var a=[];(function t(r){if(r.length){var s=r.shift().doc();o.acl.getACLorDefault(s,function(s,d,l,c,u,f){return s?void(a.push(!d?o.widgets.readACL(u,f):o.widgets.readACL(l,c)),t(r.slice(1))):n(s,c)})}else n(!0,o.widgets.ACLunion(a))})(t)},o.acl.ACLbyCombination=function(t){var n=[];return['agent','agentClass','agentGroup','origin','originClass'].map(function(a){for(var r in t[a]){var o=[];for(var s in t[a][r])o.push(s);o.sort(),o=o.join('\n'),n[o]||(n[o]=[]),n[o].push([a,r])}}),n},o.acl.makeACLGraph=function(t,n,a,r){var s=o.acl.ACLbyCombination(a);return o.acl.makeACLGraphbyCombo(t,n,s,r)},o.acl.makeACLGraphbyCombo=function(t,n,r,s,d,l){var c=o.ns.acl;for(var u in r){var f=u.split('\n'),m=f.map(function(t){return t.split('#')[1]}).join('');l&&!d&&(m+='Default');var h=t.sym(s.uri+'#'+m);t.add(h,o.ns.rdf('type'),c('Authorization'),s),d&&t.add(h,c('accessTo'),n,s),l&&t.add(h,c('defaultForNew'),n,s);for(var a=0;a<f.length;a++)t.add(h,c('mode'),t.sym(f[a]),s);var g=r[u];for(a=0;a<g.length;a++){var b=g[a][0],y=g[a][1];t.add(h,c(b),t.sym(y),s)}}},o.acl.ACLToString=function(t){return o.widgets.comboToString(o.widgets.ACLbyCombination(t))},o.acl.comboToString=function(t){var n='';for(var a in t){var r=a.split('\n'),d=r.map(function(t){return t.split('#')[1][0]}).join('');n+=d+':';for(var l=t[a],c=0;c<l.length;c++){var u=l[c][0],f=$rdf.sym(l[c][1]);n+='agent'===u?'@':'',n+=f.sameTerm(o.ns.foaf('Agent'))?'*':s.label(f),c<l.length-1&&(n+=',')}n+=';'}return'{'+n.slice(0,-1)+'}'},o.acl.makeACLString=function(t,n,a){var r=$rdf.graph();return o.widgets.makeACLGraph(r,t,n,a),$rdf.serialize(a,r,a.uri,'text/turtle')},o.acl.putACLObject=function(t,n,a,r,s){var d=o.widgets.ACLbyCombination(a);return o.widgets.putACLbyCombo(t,n,d,r,s)},o.acl.putACLbyCombo=function(t,n,a,r,s){var d=$rdf.graph();o.widgets.makeACLGraphbyCombo(d,n,a,r,!0),t.updater.put(r,d.statementsMatching(void 0,void 0,void 0,r),'text/turtle',function(d,l,c){l?(t.fetcher.unload(r),o.widgets.makeACLGraphbyCombo(t,n,a,r,!0),t.fetcher.requested[r.uri]='done',s(l)):s(l,c)})},o.acl.fixIndividualCardACL=function(t,n,a){var r=o.store.each(void 0,o.ns.vcard('hasMember'),t),s=t.doc();r?o.widgets.fixIndividualACL(t,r,n,a):(n('This card is in no groups'),a(!0))},o.acl.fixIndividualACL=function(t,n,a,r){a=a||console.log;var d=t.doc();o.acl.getACLorDefault(d,function(l,c,u,f,m,h){if(!l)return r(!1,f);var g=c?o.widgets.readACL(u,f):o.widgets.readACL(m,h);o.widgets.loadUnionACL(n,function(n,l){return n?void(o.widgets.sameACL(l,g)?a('Nice - same ACL. no change '+s.label(t)+' '+d):(a('Group ACLs differ for '+s.label(t)+' '+d),o.widgets.putACLObject(o.store,u,l,f,r))):r(!1,l)})})},o.acl.setACL=function(t,n,a){var r=d.any(d.sym(t),d.sym('http://www.iana.org/assignments/link-relations/acl'));r?d.fetcher.webOperation('PUT',r.uri,{data:n,contentType:'text/turtle'}).then(a):fetcher.nowOrWhenFetched(t,void 0,function(r,o){if(!r)return a(r,'Gettting headers for ACL: '+o);var s=d.any(d.sym(t),d.sym('http://www.iana.org/assignments/link-relations/acl'));s?d.fetcher.webOperation('PUT',s.uri,{data:n,contentType:'text/turtle'}).then(a):a(!1,'No Link rel=ACL header for '+t)})},o.acl.getACLorDefault=function(t,n){o.acl.getACL(t,function(a,r,s,d){var l=o.store,c=o.ns.acl;if(!a)return n(!1,!1,r,d);if(!a)return n(!1,!1,r,'Error accessing Access Control information for '+t+') '+d);return 404===r?void function a(r){'/'===r.slice(-1)&&(r=r.slice(0,-1));var d=r.lastIndexOf('/'),u=r.indexOf('/',r.indexOf('//')+2);r=r.slice(0,d+1);var f=$rdf.sym(r);o.acl.getACL(f,function(o,m,h){if(!o)return n(!1,!0,m,'( No ACL pointer '+r+' '+m+')'+h);if(403===m)return n(!1,!0,m,'( default ACL file FORBIDDEN. Stop.'+r+')');if(404===m){if(u>=d)return n(!1,!0,499,'Nothing to hold a default');a(r)}else{if(200!==m)return n(!1,!0,m,'Error status \''+m+'\' searching for default for '+f);var g=l.each(void 0,c('defaultForNew'),l.sym(r),h);if(!g.length)a(r);else{var b=l.sym(r);n(!0,!1,t,s,b,h)}}})}(t.uri):403===r?n(!1,!1,r,'(Sharing not available to you)'+d):200===r?n(!0,!0,t,s):n(!1,!1,r,'Error '+r+' accessing Access Control information for '+t+': '+d)})},o.acl.getACL=function(t,n){o.store.fetcher.nowOrWhenFetched(t,void 0,function(a,r){if(!a)return n(a,'Can\'t get headers to find ACL for '+t+': '+r);var s=o.store,d=s.any(t,s.sym('http://www.iana.org/assignments/link-relations/acl'));if(!d)n(!1,900,'No Link rel=ACL header for '+t);else{if(o.store.fetcher.nonexistent[d.uri])return n(!0,404,d,'ACL file '+d+' does not exist.');o.store.fetcher.nowOrWhenFetched(d,void 0,function(t,a,r){t?n(!0,200,d):n(!0,r.status,d,'Can\'t read Access Control File '+d+': '+a)})}})}},function(t,n,a){(function(n){function r(){this.init(),this._w=h,m.call(this,64,56)}function o(t,n,a){return a^t&(n^a)}function s(t,n,a){return t&n|a&(t|n)}function l(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function u(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function d(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function c(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}var f=a(1),m=a(45),y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=Array(64);f(r,m),r.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},r.prototype._update=function(t){for(var n=this._w,r=0|this._a,a=0|this._b,m=0|this._c,b=0|this._d,v=0|this._e,w=0|this._f,f=0|this._g,g=0|this._h,h=0;16>h;++h)n[h]=t.readInt32BE(4*h);for(;64>h;++h)n[h]=0|c(n[h-2])+n[h-7]+d(n[h-15])+n[h-16];for(var x=0;64>x;++x){var _=0|g+u(v)+o(v,w,f)+y[x]+n[x],k=0|l(r)+s(r,a,m);g=f,f=w,w=v,v=0|b+_,b=m,m=a,a=r,r=0|_+k}this._a=0|r+this._a,this._b=0|a+this._b,this._c=0|m+this._c,this._d=0|b+this._d,this._e=0|v+this._e,this._f=0|w+this._f,this._g=0|f+this._g,this._h=0|g+this._h},r.prototype._hash=function(){var t=new n(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=r}).call(n,a(0).Buffer)},function(t,n,a){(function(n){function r(){this.init(),this._w=v,b.call(this,128,112)}function o(t,n,a){return a^t&(n^a)}function s(t,n,a){return t&n|a&(t|n)}function d(t,n){return(t>>>28|n<<4)^(n>>>2|t<<30)^(n>>>7|t<<25)}function l(t,n){return(t>>>14|n<<18)^(t>>>18|n<<14)^(n>>>9|t<<23)}function c(t,n){return(t>>>1|n<<31)^(t>>>8|n<<24)^t>>>7}function u(t,n){return(t>>>1|n<<31)^(t>>>8|n<<24)^(t>>>7|n<<25)}function f(t,n){return(t>>>19|n<<13)^(n>>>29|t<<3)^t>>>6}function m(t,n){return(t>>>19|n<<13)^(n>>>29|t<<3)^(t>>>6|n<<26)}function h(t,n){return t>>>0<n>>>0?1:0}var g=a(1),b=a(45),y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],v=Array(160);g(r,b),r.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},r.prototype._update=function(t){for(var n=this._w,a=0|this._ah,r=0|this._bh,g=0|this._ch,b=0|this._dh,v=0|this._eh,w=0|this._fh,x=0|this._gh,_=0|this._hh,k=0|this._al,C=0|this._bl,T=0|this._cl,E=0|this._dl,S=0|this._el,A=0|this._fl,I=0|this._gl,N=0|this._hl,R=0;32>R;R+=2)n[R]=t.readInt32BE(4*R),n[R+1]=t.readInt32BE(4*R+4);for(;160>R;R+=2){var L=n[R-30],O=n[R-30+1],P=c(L,O),M=u(O,L);L=n[R-4],O=n[R-4+1];var D=f(L,O),B=m(O,L),U=n[R-14],q=n[R-14+1],F=n[R-32],z=n[R-32+1],H=0|M+q,W=0|P+U+h(H,M);H=0|H+B,W=0|W+D+h(H,B),H=0|H+z,W=0|W+F+h(H,z),n[R]=W,n[R+1]=H}for(var V=0;160>V;V+=2){W=n[V],H=n[V+1];var j=s(a,r,g),G=s(k,C,T),K=d(a,k),J=d(k,a),X=l(v,S),Z=l(S,v),Y=y[V],Q=y[V+1],ee=o(v,w,x),te=o(S,A,I),ne=0|N+Z,ae=0|_+X+h(ne,N);ne=0|ne+te,ae=0|ae+ee+h(ne,te),ne=0|ne+Q,ae=0|ae+Y+h(ne,Q),ne=0|ne+H,ae=0|ae+W+h(ne,H);var re=0|J+G,oe=0|K+j+h(re,J);_=x,N=I,x=w,I=A,w=v,A=S,S=0|E+ne,v=0|b+ae+h(S,E),b=g,E=T,g=r,T=C,r=a,C=k,k=0|ne+re,a=0|ae+oe+h(k,ne)}this._al=0|this._al+k,this._bl=0|this._bl+C,this._cl=0|this._cl+T,this._dl=0|this._dl+E,this._el=0|this._el+S,this._fl=0|this._fl+A,this._gl=0|this._gl+I,this._hl=0|this._hl+N,this._ah=0|this._ah+a+h(this._al,k),this._bh=0|this._bh+r+h(this._bl,C),this._ch=0|this._ch+g+h(this._cl,T),this._dh=0|this._dh+b+h(this._dl,E),this._eh=0|this._eh+v+h(this._el,S),this._fh=0|this._fh+w+h(this._fl,A),this._gh=0|this._gh+x+h(this._gl,I),this._hh=0|this._hh+_+h(this._hl,N)},r.prototype._hash=function(){function t(t,n,r){a.writeInt32BE(t,r),a.writeInt32BE(n,r+4)}var a=new n(64);return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),a},t.exports=r}).call(n,a(0).Buffer)},function(t,n,a){'use strict';function r(t,n){d.call(this,'digest'),'string'==typeof n&&(n=l.from(n));var a='sha512'===t||'sha384'===t?128:64;if(this._alg=t,this._key=n,n.length>a){var r='rmd160'===t?new u:f(t);n=r.update(n).digest()}else n.length<a&&(n=l.concat([n,m],a));for(var o=this._ipad=l.allocUnsafe(a),s=this._opad=l.allocUnsafe(a),c=0;c<a;c++)o[c]=54^n[c],s[c]=92^n[c];this._hash='rmd160'===t?new u:f(t),this._hash.update(o)}var o=a(1),s=a(262),d=a(27),l=a(4).Buffer,c=a(101),u=a(102),f=a(103),m=l.alloc(128);o(r,d),r.prototype._update=function(t){this._hash.update(t)},r.prototype._final=function(){var t=this._hash.digest(),n='rmd160'===this._alg?new u:f(this._alg);return n.update(this._opad).update(t).digest()},t.exports=function(t,n){return t=t.toLowerCase(),'rmd160'===t||'ripemd160'===t?new r('rmd160',n):'md5'===t?new s(c,n):new r(t,n)}},function(t){t.exports={sha224WithRSAEncryption:{sign:'rsa',hash:'sha224',id:'302d300d06096086480165030402040500041c'},"RSA-SHA224":{sign:'ecdsa/rsa',hash:'sha224',id:'302d300d06096086480165030402040500041c'},sha256WithRSAEncryption:{sign:'rsa',hash:'sha256',id:'3031300d060960864801650304020105000420'},"RSA-SHA256":{sign:'ecdsa/rsa',hash:'sha256',id:'3031300d060960864801650304020105000420'},sha384WithRSAEncryption:{sign:'rsa',hash:'sha384',id:'3041300d060960864801650304020205000430'},"RSA-SHA384":{sign:'ecdsa/rsa',hash:'sha384',id:'3041300d060960864801650304020205000430'},sha512WithRSAEncryption:{sign:'rsa',hash:'sha512',id:'3051300d060960864801650304020305000440'},"RSA-SHA512":{sign:'ecdsa/rsa',hash:'sha512',id:'3051300d060960864801650304020305000440'},"RSA-SHA1":{sign:'rsa',hash:'sha1',id:'3021300906052b0e03021a05000414'},"ecdsa-with-SHA1":{sign:'ecdsa',hash:'sha1',id:''},sha256:{sign:'ecdsa',hash:'sha256',id:''},sha224:{sign:'ecdsa',hash:'sha224',id:''},sha384:{sign:'ecdsa',hash:'sha384',id:''},sha512:{sign:'ecdsa',hash:'sha512',id:''},"DSA-SHA":{sign:'dsa',hash:'sha1',id:''},"DSA-SHA1":{sign:'dsa',hash:'sha1',id:''},DSA:{sign:'dsa',hash:'sha1',id:''},"DSA-WITH-SHA224":{sign:'dsa',hash:'sha224',id:''},"DSA-SHA224":{sign:'dsa',hash:'sha224',id:''},"DSA-WITH-SHA256":{sign:'dsa',hash:'sha256',id:''},"DSA-SHA256":{sign:'dsa',hash:'sha256',id:''},"DSA-WITH-SHA384":{sign:'dsa',hash:'sha384',id:''},"DSA-SHA384":{sign:'dsa',hash:'sha384',id:''},"DSA-WITH-SHA512":{sign:'dsa',hash:'sha512',id:''},"DSA-SHA512":{sign:'dsa',hash:'sha512',id:''},"DSA-RIPEMD160":{sign:'dsa',hash:'rmd160',id:''},ripemd160WithRSA:{sign:'rsa',hash:'rmd160',id:'3021300906052b2403020105000414'},"RSA-RIPEMD160":{sign:'rsa',hash:'rmd160',id:'3021300906052b2403020105000414'},md5WithRSAEncryption:{sign:'rsa',hash:'md5',id:'3020300c06082a864886f70d020505000410'},"RSA-MD5":{sign:'rsa',hash:'md5',id:'3020300c06082a864886f70d020505000410'}}},function(t,n,a){n.pbkdf2=a(264),n.pbkdf2Sync=a(156)},function(t){t.exports=function(t,n){if('number'!=typeof t)throw new TypeError('Iterations not a number');if(0>t)throw new TypeError('Bad iterations');if('number'!=typeof n)throw new TypeError('Key length not a number');if(0>n||n>1073741823||n!==n)throw new TypeError('Bad key length')}},function(t,n,a){(function(n){var a;if(n.browser)a='utf-8';else{var r=parseInt(n.version.split('.')[0].slice(1),10);a=6<=r?'utf-8':'binary'}t.exports=a}).call(n,a(5))},function(t,n,a){function r(t,n,a){var r=o(t),s='sha512'===t||'sha384'===t?128:64;n.length>s?n=r(n):n.length<s&&(n=f.concat([n,m],s));for(var d=f.allocUnsafe(s+h[t]),l=f.allocUnsafe(s+h[t]),c=0;c<s;c++)d[c]=54^n[c],l[c]=92^n[c];var u=f.allocUnsafe(s+a+4);d.copy(u,0,0,s),this.ipad1=u,this.ipad2=d,this.opad=l,this.alg=t,this.blocksize=s,this.hash=r,this.size=h[t]}function o(t){return'rmd160'===t||'ripemd160'===t?d:'md5'===t?s:function(n){return l(t).update(n).digest()}}var s=a(101),d=a(102),l=a(103),c=a(154),u=a(155),f=a(4).Buffer,m=f.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};r.prototype.run=function(t,n){t.copy(n,this.blocksize);var a=this.hash(n);return a.copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,n,a,o,s){f.isBuffer(t)||(t=f.from(t,u)),f.isBuffer(n)||(n=f.from(n,u)),c(a,o),s=s||'sha1';var d=new r(s,t,n.length),m=f.allocUnsafe(o),g=f.allocUnsafe(n.length+4);n.copy(g,0,0,n.length);for(var y=0,v=h[s],w=b(o/v),l=1;l<=w;l++){g.writeUInt32BE(l,n.length);for(var x=d.run(g,d.ipad1),_=x,C=1;C<a;C++){_=d.run(_,d.ipad2);for(var T=0;T<v;T++)x[T]^=_[T]}x.copy(m,y),y+=v}return m}},function(t,n,a){(function(t){function r(t){for(var n=t.length,a;n--;)if(a=t.readUInt8(n),255===a)t.writeUInt8(0,n);else{a++,t.writeUInt8(a,n);break}}function o(t){var n=t._cipher.encryptBlockRaw(t._prev);return r(t._prev),n}var s=a(54),d=16;n.encrypt=function(n,a){var r=b(a.length/d),l=n._cache.length;n._cache=t.concat([n._cache,t.allocUnsafe(r*d)]);for(var c=0;c<r;c++){var u=o(n),f=l+c*d;n._cache.writeUInt32BE(u[0],f+0),n._cache.writeUInt32BE(u[1],f+4),n._cache.writeUInt32BE(u[2],f+8),n._cache.writeUInt32BE(u[3],f+12)}var m=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),s(a,m)}}).call(n,a(0).Buffer)},function(t){t.exports={"aes-128-ecb":{cipher:'AES',key:128,iv:0,mode:'ECB',type:'block'},"aes-192-ecb":{cipher:'AES',key:192,iv:0,mode:'ECB',type:'block'},"aes-256-ecb":{cipher:'AES',key:256,iv:0,mode:'ECB',type:'block'},"aes-128-cbc":{cipher:'AES',key:128,iv:16,mode:'CBC',type:'block'},"aes-192-cbc":{cipher:'AES',key:192,iv:16,mode:'CBC',type:'block'},"aes-256-cbc":{cipher:'AES',key:256,iv:16,mode:'CBC',type:'block'},aes128:{cipher:'AES',key:128,iv:16,mode:'CBC',type:'block'},aes192:{cipher:'AES',key:192,iv:16,mode:'CBC',type:'block'},aes256:{cipher:'AES',key:256,iv:16,mode:'CBC',type:'block'},"aes-128-cfb":{cipher:'AES',key:128,iv:16,mode:'CFB',type:'stream'},"aes-192-cfb":{cipher:'AES',key:192,iv:16,mode:'CFB',type:'stream'},"aes-256-cfb":{cipher:'AES',key:256,iv:16,mode:'CFB',type:'stream'},"aes-128-cfb8":{cipher:'AES',key:128,iv:16,mode:'CFB8',type:'stream'},"aes-192-cfb8":{cipher:'AES',key:192,iv:16,mode:'CFB8',type:'stream'},"aes-256-cfb8":{cipher:'AES',key:256,iv:16,mode:'CFB8',type:'stream'},"aes-128-cfb1":{cipher:'AES',key:128,iv:16,mode:'CFB1',type:'stream'},"aes-192-cfb1":{cipher:'AES',key:192,iv:16,mode:'CFB1',type:'stream'},"aes-256-cfb1":{cipher:'AES',key:256,iv:16,mode:'CFB1',type:'stream'},"aes-128-ofb":{cipher:'AES',key:128,iv:16,mode:'OFB',type:'stream'},"aes-192-ofb":{cipher:'AES',key:192,iv:16,mode:'OFB',type:'stream'},"aes-256-ofb":{cipher:'AES',key:256,iv:16,mode:'OFB',type:'stream'},"aes-128-ctr":{cipher:'AES',key:128,iv:16,mode:'CTR',type:'stream'},"aes-192-ctr":{cipher:'AES',key:192,iv:16,mode:'CTR',type:'stream'},"aes-256-ctr":{cipher:'AES',key:256,iv:16,mode:'CTR',type:'stream'},"aes-128-gcm":{cipher:'AES',key:128,iv:12,mode:'GCM',type:'auth'},"aes-192-gcm":{cipher:'AES',key:192,iv:12,mode:'GCM',type:'auth'},"aes-256-gcm":{cipher:'AES',key:256,iv:12,mode:'GCM',type:'auth'}}},function(t,n,a){function r(t,n){var a=0;t.length!==n.length&&a++;for(var r=_(t.length,n.length),o=0;o<r;++o)a+=t[o]^n[o];return a}function o(t,n,a,r){l.call(this),this._finID=d.concat([a,d.from([0,0,0,1])]),a=d.concat([a,d.from([0,0,0,2])]),this._cipher=new s.AES(n),this._prev=d.from(a),this._cache=d.allocUnsafe(0),this._secCache=d.allocUnsafe(0),this._decrypt=r,this._alen=0,this._len=0,this._mode=t;var o=d.alloc(4,0);this._ghash=new u(this._cipher.encryptBlock(o)),this._authTag=null,this._called=!1}var s=a(73),d=a(4).Buffer,l=a(27),c=a(1),u=a(275),f=a(54);c(o,l),o.prototype._update=function(t){if(!this._called&&this._alen){var n=16-this._alen%16;16>n&&(n=d.alloc(n,0),this._ghash.update(n))}this._called=!0;var a=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(a),this._len+=t.length,a},o.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error('Unsupported state or unable to authenticate data');var t=f(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&r(t,this._authTag))throw new Error('Unsupported state or unable to authenticate data');this._authTag=t,this._cipher.scrub()},o.prototype.getAuthTag=function(){if(this._decrypt||!d.isBuffer(this._authTag))throw new Error('Attempting to get auth tag in unsupported state');return this._authTag},o.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error('Attempting to set auth tag in unsupported state');this._authTag=t},o.prototype.setAAD=function(t){if(this._called)throw new Error('Attempting to set AAD in unsupported state');this._ghash.update(t),this._alen+=t.length},t.exports=o},function(t,n,a){function r(t,n,a,r){d.call(this),this._cipher=new o.AES(n),this._prev=s.from(a),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=r,this._mode=t}var o=a(73),s=a(4).Buffer,d=a(27),l=a(1);l(r,d),r.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()},t.exports=r},function(t,n,a){function r(){if(null!=S)return S;var t=[];t[0]=2;for(var n=1,a=3,r;a<1048576;a+=2){r=b(Math.sqrt(a));for(var o=0;o<n&&t[o]<=r&&0!=a%t[o];o++);n!==o&&t[o]<=r||(t[n++]=a)}return S=t,t}function o(t){for(var n=r(),a=0;a<n.length;a++)if(0===t.modn(n[a]))return 0===t.cmpn(n[a]);return!0}function s(t){var n=c.mont(t);return 0===g.toRed(n).redPow(t.subn(1)).fromRed().cmpn(1)}function d(t,n){if(16>t)return 2===n||5===n?new c([140,123]):new c([140,39]);n=new c(n);for(var a,r;;){for(a=new c(l(b(t/8)));a.bitLength()>t;)a.ishrn(1);if(a.isEven()&&a.iadd(h),a.testn(1)||a.iadd(g),!n.cmp(g))for(;a.mod(u).cmp(C);)a.iadd(T);else if(!n.cmp(y))for(;a.mod(x).cmp(_);)a.iadd(T);if(r=a.shrn(1),o(r)&&o(a)&&s(r)&&s(a)&&m.test(r)&&m.test(a))return a}}var l=a(52);t.exports=d,d.simpleSieve=o,d.fermatTest=s;var c=a(162),u=new c(24),f=a(163),m=new f,h=new c(1),g=new c(2),y=new c(5),v=new c(16),w=new c(8),x=new c(10),_=new c(3),k=new c(7),C=new c(11),T=new c(4),E=new c(12),S=null},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function v(t,n,a){return v.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_(t.length,a),s=n,d;s<r;s++)d=t.charCodeAt(s)-48,o<<=4,o|=49<=d&&54>=d?d-49+10:17<=d&&22>=d?d-17+10:15&d;return o}function l(t,n,a,o){for(var s=0,r=_(t.length,a),d=n,l;d<r;d++)l=t.charCodeAt(d)-48,s*=o,s+=49<=l?l-49+10:17<=l?l-17+10:l;return s}function u(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,o=a%26;n[a]=(t.words[r]&1<<o)>>>o}return n}function w(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_(u,n.length-1),g=y(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function x(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_(l,n.length-1),m=y(0,l-t.length+1);m<=f;m++){var h=l-m,g=0|t.words[h],a=0|n.words[m],b=g*a,r=67108863&b;c=0|c+(0|b/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function k(t,n,a){var r=new C;return r.mulp(t,n,a)}function C(t,n){this.x=t,this.y=n}function T(t,n){this.name=t,this.p=new v(n,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){T.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function S(){T.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function A(){T.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function I(){T.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function N(t){if('string'==typeof t){var n=v._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function j(t){N.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=v:n.BN=v,v.BN=v,v.wordSize=26;var R;try{R=a(285).Buffer}catch(t){}v.isBN=function(t){return!!(t instanceof v)||null!==t&&'object'==typeof t&&t.constructor.wordSize===v.wordSize&&Array.isArray(t.words)},v.max=function(t,n){return 0<t.cmp(n)?t:n},v.min=function(t,n){return 0>t.cmp(n)?t:n},v.prototype._init=function(t,n,a){if('number'==typeof t)return this._initNumber(t,n,a);if('object'==typeof t)return this._initArray(t,n,a);'hex'===n&&(n=16),o(n===(0|n)&&2<=n&&36>=n),t=t.toString().replace(/\s+/g,'');var r=0;'-'===t[0]&&r++,16===n?this._parseHex(t,r):this._parseBase(t,n,r),'-'===t[0]&&(this.negative=1),this.strip();'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initNumber=function(t,n,a){0>t&&(this.negative=1,t=-t),67108864>t?(this.words=[67108863&t],this.length=1):4503599627370496>t?(this.words=[67108863&t,67108863&t/67108864],this.length=2):(o(9007199254740992>t),this.words=[67108863&t,67108863&t/67108864,1],this.length=3);'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initArray=function(t,n,a){if(o('number'==typeof t.length),0>=t.length)return this.words=[0],this.length=1,this;this.length=b(t.length/3),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s=0,d,l;if('be'===a)for(r=t.length-1,d=0;0<=r;r-=3)l=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);else if('le'===a)for(r=0,d=0;r<t.length;r+=3)l=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);return this.strip()},v.prototype._parseHex=function(t,n){this.length=b((t.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r=0,o,d;for(a=t.length-6,o=0;a>=n;a-=6)d=s(t,a,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r,r+=24,26<=r&&(r-=26,o++);a+6!==n&&(d=s(t,n,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r),this.strip()},v.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var r=0,o=1;67108863>=o;o*=n)r++;r--,o=0|o/n;for(var s=t.length-a,d=s%r,c=_(s,s-d)+a,u=0,f=a;f<c;f+=r)u=l(t,f,f+r,n),this.imuln(o),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u);if(0!=d){var m=1;for(u=l(t,f,t.length,n),f=0;f<d;f++)m*=n;this.imuln(m),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u)}},v.prototype.copy=function(t){t.words=Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},v.prototype.clone=function(){var t=new v(null);return this.copy(t),t},v.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var L=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];v.prototype.toString=function(t,n){t=t||10,n=0|n||1;var a;if(16===t||'hex'===t){a='';for(var s=0,d=0,l=0;l<this.length;l++){var u=this.words[l],f=(16777215&(u<<s|d)).toString(16);d=16777215&u>>>24-s,a=0!=d||l!==this.length-1?L[6-f.length]+f+a:f+a,s+=2,26<=s&&(s-=26,l--)}for(0!=d&&(a=d.toString(16)+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}if(t===(0|t)&&2<=t&&36>=t){var m=O[t],h=P[t];a='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(t);g=g.idivn(h),a=g.isZero()?c+a:L[m-c.length]+c+a}for(this.isZero()&&(a='0'+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}o(!1,'Base should be between 2 and 36')},v.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?t:-t},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(t,n){return o('undefined'!=typeof R),this.toArrayLike(R,t,n)},v.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},v.prototype.toArrayLike=function(t,n,a){var r=this.byteLength(),s=a||y(1,r);o(r<=s,'byte array longer than desired length'),o(0<s,'Requested array length <= 0'),this.strip();var d=new t(s),l=this.clone(),c,u;if(!('le'===n)){for(u=0;u<s-r;u++)d[u]=0;for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[s-u-1]=c}else{for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[u]=c;for(;u<s;u++)d[u]=0}return d},v.prototype._countBits=g?function(t){return 32-g(t)}:function(n){var a=n,t=0;return 4096<=a&&(t+=13,a>>>=13),64<=a&&(t+=7,a>>>=7),8<=a&&(t+=4,a>>>=4),2<=a&&(t+=2,a>>>=2),t+a},v.prototype._zeroBits=function(n){if(0===n)return 26;var a=n,t=0;return 0==(8191&a)&&(t+=13,a>>>=13),0==(127&a)&&(t+=7,a>>>=7),0==(15&a)&&(t+=4,a>>>=4),0==(3&a)&&(t+=2,a>>>=2),0==(1&a)&&t++,t},v.prototype.bitLength=function(){var t=this.words[this.length-1],n=this._countBits(t);return 26*(this.length-1)+n},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0,a;n<this.length&&(a=this._zeroBits(this.words[n]),t+=a,26===a);n++);return t},v.prototype.byteLength=function(){return b(this.bitLength()/8)},v.prototype.toTwos=function(t){return 0===this.negative?this.clone():this.abs().inotn(t).iaddn(1)},v.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]|=t.words[n];return this.strip()},v.prototype.ior=function(t){return o(0==(this.negative|t.negative)),this.iuor(t)},v.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},v.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},v.prototype.iuand=function(t){var n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]&=t.words[a];return this.length=n.length,this.strip()},v.prototype.iand=function(t){return o(0==(this.negative|t.negative)),this.iuand(t)},v.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},v.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},v.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var r=0;r<a.length;r++)this.words[r]=n.words[r]^a.words[r];if(this!==n)for(;r<n.length;r++)this.words[r]=n.words[r];return this.length=n.length,this.strip()},v.prototype.ixor=function(t){return o(0==(this.negative|t.negative)),this.iuxor(t)},v.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},v.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},v.prototype.inotn=function(t){o('number'==typeof t&&0<=t);var n=0|b(t/26),a=t%26;this._expand(n),0<a&&n--;for(var r=0;r<n;r++)this.words[r]=67108863&~this.words[r];return 0<a&&(this.words[r]=~this.words[r]&67108863>>26-a),this.strip()},v.prototype.notn=function(t){return this.clone().inotn(t)},v.prototype.setn=function(t,n){o('number'==typeof t&&0<=t);var a=0|t/26,r=t%26;return this._expand(a+1),n?this.words[a]|=1<<r:this.words[a]&=~(1<<r),this.strip()},v.prototype.iadd=function(t){var n;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();var r,a;this.length>t.length?(r=this,a=t):(r=t,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|r.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!=o&&s<r.length;s++)n=(0|r.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=r.length,0!=o)this.words[this.length]=o,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},v.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},v.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var o,a;0<r?(o=this,a=t):(o=t,a=this);for(var s=0,d=0;d<a.length;d++)n=(0|o.words[d])-(0|a.words[d])+s,s=n>>26,this.words[d]=67108863&n;for(;0!=s&&d<o.length;d++)n=(0|o.words[d])+s,s=n>>26,this.words[d]=67108863&n;if(0==s&&d<o.length&&o!==this)for(;d<o.length;d++)this.words[d]=o.words[d];return this.length=y(this.length,d),o!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(t){return this.clone().isub(t)};var M=function(t,n,r){var s=t.words,a=n.words,d=r.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,g=f>>>13,b=0|s[2],y=8191&b,v=b>>>13,w=0|s[3],x=8191&w,_=w>>>13,k=0|s[4],C=8191&k,T=k>>>13,E=0|s[5],S=8191&E,A=E>>>13,I=0|s[6],N=8191&I,j=I>>>13,R=0|s[7],L=8191&R,O=R>>>13,P=0|s[8],M=8191&P,D=P>>>13,B=0|s[9],U=8191&B,q=B>>>13,F=0|a[0],z=8191&F,H=F>>>13,W=0|a[1],V=8191&W,G=W>>>13,K=0|a[2],J=8191&K,X=K>>>13,Z=0|a[3],Y=8191&Z,Q=Z>>>13,ee=0|a[4],te=8191&ee,ne=ee>>>13,ae=0|a[5],re=8191&ae,oe=ae>>>13,ie=0|a[6],se=8191&ie,de=ie>>>13,le=0|a[7],pe=8191&le,ce=le>>>13,ue=0|a[8],fe=8191&ue,he=ue>>>13,ge=0|a[9],be=8191&ge,ye=ge>>>13,ve,we,xe;r.negative=t.negative^n.negative,r.length=19,ve=h(c,z),we=h(c,H),we=0|we+h(u,z),xe=h(u,H);var _e=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(_e>>>26),_e&=67108863,ve=h(m,z),we=h(m,H),we=0|we+h(g,z),xe=h(g,H),ve=0|ve+h(c,V),we=0|we+h(c,G),we=0|we+h(u,V),xe=0|xe+h(u,G);var ke=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(ke>>>26),ke&=67108863,ve=h(y,z),we=h(y,H),we=0|we+h(v,z),xe=h(v,H),ve=0|ve+h(m,V),we=0|we+h(m,G),we=0|we+h(g,V),xe=0|xe+h(g,G),ve=0|ve+h(c,J),we=0|we+h(c,X),we=0|we+h(u,J),xe=0|xe+h(u,X);var Ce=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ce>>>26),Ce&=67108863,ve=h(x,z),we=h(x,H),we=0|we+h(_,z),xe=h(_,H),ve=0|ve+h(y,V),we=0|we+h(y,G),we=0|we+h(v,V),xe=0|xe+h(v,G),ve=0|ve+h(m,J),we=0|we+h(m,X),we=0|we+h(g,J),xe=0|xe+h(g,X),ve=0|ve+h(c,Y),we=0|we+h(c,Q),we=0|we+h(u,Y),xe=0|xe+h(u,Q);var Te=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Te>>>26),Te&=67108863,ve=h(C,z),we=h(C,H),we=0|we+h(T,z),xe=h(T,H),ve=0|ve+h(x,V),we=0|we+h(x,G),we=0|we+h(_,V),xe=0|xe+h(_,G),ve=0|ve+h(y,J),we=0|we+h(y,X),we=0|we+h(v,J),xe=0|xe+h(v,X),ve=0|ve+h(m,Y),we=0|we+h(m,Q),we=0|we+h(g,Y),xe=0|xe+h(g,Q),ve=0|ve+h(c,te),we=0|we+h(c,ne),we=0|we+h(u,te),xe=0|xe+h(u,ne);var Ee=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ee>>>26),Ee&=67108863,ve=h(S,z),we=h(S,H),we=0|we+h(A,z),xe=h(A,H),ve=0|ve+h(C,V),we=0|we+h(C,G),we=0|we+h(T,V),xe=0|xe+h(T,G),ve=0|ve+h(x,J),we=0|we+h(x,X),we=0|we+h(_,J),xe=0|xe+h(_,X),ve=0|ve+h(y,Y),we=0|we+h(y,Q),we=0|we+h(v,Y),xe=0|xe+h(v,Q),ve=0|ve+h(m,te),we=0|we+h(m,ne),we=0|we+h(g,te),xe=0|xe+h(g,ne),ve=0|ve+h(c,re),we=0|we+h(c,oe),we=0|we+h(u,re),xe=0|xe+h(u,oe);var Se=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Se>>>26),Se&=67108863,ve=h(N,z),we=h(N,H),we=0|we+h(j,z),xe=h(j,H),ve=0|ve+h(S,V),we=0|we+h(S,G),we=0|we+h(A,V),xe=0|xe+h(A,G),ve=0|ve+h(C,J),we=0|we+h(C,X),we=0|we+h(T,J),xe=0|xe+h(T,X),ve=0|ve+h(x,Y),we=0|we+h(x,Q),we=0|we+h(_,Y),xe=0|xe+h(_,Q),ve=0|ve+h(y,te),we=0|we+h(y,ne),we=0|we+h(v,te),xe=0|xe+h(v,ne),ve=0|ve+h(m,re),we=0|we+h(m,oe),we=0|we+h(g,re),xe=0|xe+h(g,oe),ve=0|ve+h(c,se),we=0|we+h(c,de),we=0|we+h(u,se),xe=0|xe+h(u,de);var Ae=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ae>>>26),Ae&=67108863,ve=h(L,z),we=h(L,H),we=0|we+h(O,z),xe=h(O,H),ve=0|ve+h(N,V),we=0|we+h(N,G),we=0|we+h(j,V),xe=0|xe+h(j,G),ve=0|ve+h(S,J),we=0|we+h(S,X),we=0|we+h(A,J),xe=0|xe+h(A,X),ve=0|ve+h(C,Y),we=0|we+h(C,Q),we=0|we+h(T,Y),xe=0|xe+h(T,Q),ve=0|ve+h(x,te),we=0|we+h(x,ne),we=0|we+h(_,te),xe=0|xe+h(_,ne),ve=0|ve+h(y,re),we=0|we+h(y,oe),we=0|we+h(v,re),xe=0|xe+h(v,oe),ve=0|ve+h(m,se),we=0|we+h(m,de),we=0|we+h(g,se),xe=0|xe+h(g,de),ve=0|ve+h(c,pe),we=0|we+h(c,ce),we=0|we+h(u,pe),xe=0|xe+h(u,ce);var Ie=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ie>>>26),Ie&=67108863,ve=h(M,z),we=h(M,H),we=0|we+h(D,z),xe=h(D,H),ve=0|ve+h(L,V),we=0|we+h(L,G),we=0|we+h(O,V),xe=0|xe+h(O,G),ve=0|ve+h(N,J),we=0|we+h(N,X),we=0|we+h(j,J),xe=0|xe+h(j,X),ve=0|ve+h(S,Y),we=0|we+h(S,Q),we=0|we+h(A,Y),xe=0|xe+h(A,Q),ve=0|ve+h(C,te),we=0|we+h(C,ne),we=0|we+h(T,te),xe=0|xe+h(T,ne),ve=0|ve+h(x,re),we=0|we+h(x,oe),we=0|we+h(_,re),xe=0|xe+h(_,oe),ve=0|ve+h(y,se),we=0|we+h(y,de),we=0|we+h(v,se),xe=0|xe+h(v,de),ve=0|ve+h(m,pe),we=0|we+h(m,ce),we=0|we+h(g,pe),xe=0|xe+h(g,ce),ve=0|ve+h(c,fe),we=0|we+h(c,he),we=0|we+h(u,fe),xe=0|xe+h(u,he);var Ne=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ne>>>26),Ne&=67108863,ve=h(U,z),we=h(U,H),we=0|we+h(q,z),xe=h(q,H),ve=0|ve+h(M,V),we=0|we+h(M,G),we=0|we+h(D,V),xe=0|xe+h(D,G),ve=0|ve+h(L,J),we=0|we+h(L,X),we=0|we+h(O,J),xe=0|xe+h(O,X),ve=0|ve+h(N,Y),we=0|we+h(N,Q),we=0|we+h(j,Y),xe=0|xe+h(j,Q),ve=0|ve+h(S,te),we=0|we+h(S,ne),we=0|we+h(A,te),xe=0|xe+h(A,ne),ve=0|ve+h(C,re),we=0|we+h(C,oe),we=0|we+h(T,re),xe=0|xe+h(T,oe),ve=0|ve+h(x,se),we=0|we+h(x,de),we=0|we+h(_,se),xe=0|xe+h(_,de),ve=0|ve+h(y,pe),we=0|we+h(y,ce),we=0|we+h(v,pe),xe=0|xe+h(v,ce),ve=0|ve+h(m,fe),we=0|we+h(m,he),we=0|we+h(g,fe),xe=0|xe+h(g,he),ve=0|ve+h(c,be),we=0|we+h(c,ye),we=0|we+h(u,be),xe=0|xe+h(u,ye);var je=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(je>>>26),je&=67108863,ve=h(U,V),we=h(U,G),we=0|we+h(q,V),xe=h(q,G),ve=0|ve+h(M,J),we=0|we+h(M,X),we=0|we+h(D,J),xe=0|xe+h(D,X),ve=0|ve+h(L,Y),we=0|we+h(L,Q),we=0|we+h(O,Y),xe=0|xe+h(O,Q),ve=0|ve+h(N,te),we=0|we+h(N,ne),we=0|we+h(j,te),xe=0|xe+h(j,ne),ve=0|ve+h(S,re),we=0|we+h(S,oe),we=0|we+h(A,re),xe=0|xe+h(A,oe),ve=0|ve+h(C,se),we=0|we+h(C,de),we=0|we+h(T,se),xe=0|xe+h(T,de),ve=0|ve+h(x,pe),we=0|we+h(x,ce),we=0|we+h(_,pe),xe=0|xe+h(_,ce),ve=0|ve+h(y,fe),we=0|we+h(y,he),we=0|we+h(v,fe),xe=0|xe+h(v,he),ve=0|ve+h(m,be),we=0|we+h(m,ye),we=0|we+h(g,be),xe=0|xe+h(g,ye);var Re=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Re>>>26),Re&=67108863,ve=h(U,J),we=h(U,X),we=0|we+h(q,J),xe=h(q,X),ve=0|ve+h(M,Y),we=0|we+h(M,Q),we=0|we+h(D,Y),xe=0|xe+h(D,Q),ve=0|ve+h(L,te),we=0|we+h(L,ne),we=0|we+h(O,te),xe=0|xe+h(O,ne),ve=0|ve+h(N,re),we=0|we+h(N,oe),we=0|we+h(j,re),xe=0|xe+h(j,oe),ve=0|ve+h(S,se),we=0|we+h(S,de),we=0|we+h(A,se),xe=0|xe+h(A,de),ve=0|ve+h(C,pe),we=0|we+h(C,ce),we=0|we+h(T,pe),xe=0|xe+h(T,ce),ve=0|ve+h(x,fe),we=0|we+h(x,he),we=0|we+h(_,fe),xe=0|xe+h(_,he),ve=0|ve+h(y,be),we=0|we+h(y,ye),we=0|we+h(v,be),xe=0|xe+h(v,ye);var Le=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Le>>>26),Le&=67108863,ve=h(U,Y),we=h(U,Q),we=0|we+h(q,Y),xe=h(q,Q),ve=0|ve+h(M,te),we=0|we+h(M,ne),we=0|we+h(D,te),xe=0|xe+h(D,ne),ve=0|ve+h(L,re),we=0|we+h(L,oe),we=0|we+h(O,re),xe=0|xe+h(O,oe),ve=0|ve+h(N,se),we=0|we+h(N,de),we=0|we+h(j,se),xe=0|xe+h(j,de),ve=0|ve+h(S,pe),we=0|we+h(S,ce),we=0|we+h(A,pe),xe=0|xe+h(A,ce),ve=0|ve+h(C,fe),we=0|we+h(C,he),we=0|we+h(T,fe),xe=0|xe+h(T,he),ve=0|ve+h(x,be),we=0|we+h(x,ye),we=0|we+h(_,be),xe=0|xe+h(_,ye);var Oe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Oe>>>26),Oe&=67108863,ve=h(U,te),we=h(U,ne),we=0|we+h(q,te),xe=h(q,ne),ve=0|ve+h(M,re),we=0|we+h(M,oe),we=0|we+h(D,re),xe=0|xe+h(D,oe),ve=0|ve+h(L,se),we=0|we+h(L,de),we=0|we+h(O,se),xe=0|xe+h(O,de),ve=0|ve+h(N,pe),we=0|we+h(N,ce),we=0|we+h(j,pe),xe=0|xe+h(j,ce),ve=0|ve+h(S,fe),we=0|we+h(S,he),we=0|we+h(A,fe),xe=0|xe+h(A,he),ve=0|ve+h(C,be),we=0|we+h(C,ye),we=0|we+h(T,be),xe=0|xe+h(T,ye);var Pe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Pe>>>26),Pe&=67108863,ve=h(U,re),we=h(U,oe),we=0|we+h(q,re),xe=h(q,oe),ve=0|ve+h(M,se),we=0|we+h(M,de),we=0|we+h(D,se),xe=0|xe+h(D,de),ve=0|ve+h(L,pe),we=0|we+h(L,ce),we=0|we+h(O,pe),xe=0|xe+h(O,ce),ve=0|ve+h(N,fe),we=0|we+h(N,he),we=0|we+h(j,fe),xe=0|xe+h(j,he),ve=0|ve+h(S,be),we=0|we+h(S,ye),we=0|we+h(A,be),xe=0|xe+h(A,ye);var Me=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Me>>>26),Me&=67108863,ve=h(U,se),we=h(U,de),we=0|we+h(q,se),xe=h(q,de),ve=0|ve+h(M,pe),we=0|we+h(M,ce),we=0|we+h(D,pe),xe=0|xe+h(D,ce),ve=0|ve+h(L,fe),we=0|we+h(L,he),we=0|we+h(O,fe),xe=0|xe+h(O,he),ve=0|ve+h(N,be),we=0|we+h(N,ye),we=0|we+h(j,be),xe=0|xe+h(j,ye);var De=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(De>>>26),De&=67108863,ve=h(U,pe),we=h(U,ce),we=0|we+h(q,pe),xe=h(q,ce),ve=0|ve+h(M,fe),we=0|we+h(M,he),we=0|we+h(D,fe),xe=0|xe+h(D,he),ve=0|ve+h(L,be),we=0|we+h(L,ye),we=0|we+h(O,be),xe=0|xe+h(O,ye);var Be=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Be>>>26),Be&=67108863,ve=h(U,fe),we=h(U,he),we=0|we+h(q,fe),xe=h(q,he),ve=0|ve+h(M,be),we=0|we+h(M,ye),we=0|we+h(D,be),xe=0|xe+h(D,ye);var Ue=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ue>>>26),Ue&=67108863,ve=h(U,be),we=h(U,ye),we=0|we+h(q,be),xe=h(q,ye);var qe=0|(0|o+ve)+((8191&we)<<13);return o=0|(0|xe+(we>>>13))+(qe>>>26),qe&=67108863,d[0]=_e,d[1]=ke,d[2]=Ce,d[3]=Te,d[4]=Ee,d[5]=Se,d[6]=Ae,d[7]=Ie,d[8]=Ne,d[9]=je,d[10]=Re,d[11]=Le,d[12]=Oe,d[13]=Pe,d[14]=Me,d[15]=De,d[16]=Be,d[17]=Ue,d[18]=qe,0!=o&&(d[19]=o,r.length++),r};h||(M=w),v.prototype.mulTo=function(t,n){var a=this.length+t.length,r;return r=10===this.length&&10===t.length?M(this,t,n):63>a?w(this,t,n):1024>a?x(this,t,n):k(this,t,n),r},C.prototype.makeRBT=function(n){for(var a=Array(n),t=v.prototype._countBits(n)-1,r=0;r<n;r++)a[r]=this.revBin(r,t,n);return a},C.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var r=0,o=0;o<n;o++)r|=(1&t)<<n-o-1,t>>=1;return r},C.prototype.permute=function(t,n,a,r,o,s){for(var d=0;d<s;d++)r[d]=n[t[d]],o[d]=a[t[d]]},C.prototype.transform=function(t,n,a,r,o,d){this.permute(d,t,n,a,r,o);for(var u=1;u<o;u<<=1)for(var s=u<<1,l=f(2*m/s),h=c(2*m/s),g=0;g<o;g+=s)for(var b=l,y=h,v=0;v<u;v++){var w=a[g+v],x=r[g+v],_=a[g+v+u],k=r[g+v+u],C=b*_-y*k;k=b*k+y*_,_=C,a[g+v]=w+_,r[g+v]=x+k,a[g+v+u]=w-_,r[g+v+u]=x-k,v!==s&&(C=l*b-h*y,y=l*y+h*b,b=C)}},C.prototype.guessLen13b=function(t,n){var a=1|y(n,t),r=1&a,o=0;for(a=0|a/2;a;a>>>=1)o++;return 1<<o+1+r},C.prototype.conjugate=function(n,a,r){if(!(1>=r))for(var o=0,s;o<r/2;o++)s=n[o],n[o]=n[r-o-1],n[r-o-1]=s,s=a[o],a[o]=-a[r-o-1],a[r-o-1]=-s},C.prototype.normalize13b=function(t,n){for(var a=0,r=0,o;r<n/2;r++)o=8192*d(t[2*r+1]/n)+d(t[2*r]/n)+a,t[r]=67108863&o,a=67108864>o?0:0|o/67108864;return t},C.prototype.convert13b=function(t,n,a,r){for(var s=0,d=0;d<n;d++)s+=0|t[d],a[2*d]=8191&s,s>>>=13,a[2*d+1]=8191&s,s>>>=13;for(d=2*n;d<r;++d)a[d]=0;o(0==s),o(0==(-8192&s))},C.prototype.stub=function(t){for(var n=Array(t),a=0;a<t;a++)n[a]=0;return n},C.prototype.mulp=function(t,n,a){var r=2*this.guessLen13b(t.length,n.length),o=this.makeRBT(r),s=this.stub(r),d=Array(r),l=Array(r),c=Array(r),u=Array(r),f=Array(r),m=Array(r),h=a.words;h.length=r,this.convert13b(t.words,t.length,d,r),this.convert13b(n.words,n.length,u,r),this.transform(d,s,l,c,r,o),this.transform(u,s,f,m,r,o);for(var g=0,b;g<r;g++)b=l[g]*f[g]-c[g]*m[g],c[g]=l[g]*m[g]+c[g]*f[g],l[g]=b;return this.conjugate(l,c,r),this.transform(l,c,h,s,r,o),this.conjugate(h,s,r),this.normalize13b(h,r),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},v.prototype.mul=function(t){var n=new v(null);return n.words=Array(this.length+t.length),this.mulTo(t,n)},v.prototype.mulf=function(t){var n=new v(null);return n.words=Array(this.length+t.length),k(this,t,n)},v.prototype.imul=function(t){return this.clone().mulTo(t,this)},v.prototype.imuln=function(t){o('number'==typeof t),o(67108864>t);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*t,s=(67108863&r)+(67108863&n);n>>=26,n+=0|r/67108864,n+=s>>>26,this.words[a]=67108863&s}return 0!=n&&(this.words[a]=n,this.length++),this},v.prototype.muln=function(t){return this.clone().imuln(t)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(t){var n=u(t);if(0===n.length)return new v(1);for(var a=this,r=0;r<n.length&&!(0!==n[r]);r++,a=a.sqr());if(++r<n.length)for(var o=a.sqr();r<n.length;r++,o=o.sqr())0!==n[r]&&(a=a.mul(o));return a},v.prototype.iushln=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26,r;if(0!=n){var s=0;for(r=0;r<this.length;r++){var d=this.words[r]&67108863>>>26-n<<26-n,l=(0|this.words[r])-d<<n;this.words[r]=l|s,s=d>>>26-n}s&&(this.words[r]=s,this.length++)}if(0!=a){for(r=this.length-1;0<=r;r--)this.words[r+a]=this.words[r];for(r=0;r<a;r++)this.words[r]=0;this.length+=a}return this.strip()},v.prototype.ishln=function(t){return o(0===this.negative),this.iushln(t)},v.prototype.iushrn=function(t,n,a){o('number'==typeof t&&0<=t);var d=n?(n-n%26)/26:0;var l=t%26,r=_((t-l)/26,this.length),s=a;if(d-=r,d=y(0,d),s){for(var c=0;c<r;c++)s.words[c]=this.words[c];s.length=r}if(0===r);else if(this.length>r)for(this.length-=r,c=0;c<this.length;c++)this.words[c]=this.words[c+r];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!=u||c>=d);c--){var f=0|this.words[c];this.words[c]=u<<26-l|f>>>l,u=f&(67108863^67108863>>>l<<l)}return s&&0!=u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(t,n,a){return o(0===this.negative),this.iushrn(t,n,a)},v.prototype.shln=function(t){return this.clone().ishln(t)},v.prototype.ushln=function(t){return this.clone().iushln(t)},v.prototype.shrn=function(t){return this.clone().ishrn(t)},v.prototype.ushrn=function(t){return this.clone().iushrn(t)},v.prototype.testn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(this.length<=a)return!1;var r=this.words[a];return!!(r&1<<n)},v.prototype.imaskn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=a)return this;if(0!=n&&a++,this.length=_(a,this.length),0!=n){this.words[this.length-1]&=67108863^67108863>>>n<<n}return this.strip()},v.prototype.maskn=function(t){return this.clone().imaskn(t)},v.prototype.iaddn=function(t){return o('number'==typeof t),o(67108864>t),0>t?this.isubn(-t):0===this.negative?this._iaddn(t):1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this)},v.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&67108864<=this.words[n];n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=y(this.length,n+1),this},v.prototype.isubn=function(t){if(o('number'==typeof t),o(67108864>t),0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&0>this.words[n];n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},v.prototype.addn=function(t){return this.clone().iaddn(t)},v.prototype.subn=function(t){return this.clone().isubn(t)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(t,n,a){var r=t.length+a,s;this._expand(r);var d=0,l;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+d;var c=(0|t.words[s])*n;l-=67108863&c,d=(l>>26)-(0|c/67108864),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)l=(0|this.words[s+a])+d,d=l>>26,this.words[s+a]=67108863&l;if(0==d)return this.strip();for(o(-1==d),d=0,s=0;s<this.length;s++)l=-(0|this.words[s])+d,d=l>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},v.prototype._wordDiv=function(t,n){var r=this.length-t.length,o=this.clone(),s=t,d=0|s.words[s.length-1],l=this._countBits(d);r=26-l,0!=r&&(s=s.ushln(r),o.iushln(r),d=0|s.words[s.length-1]);var c=o.length-s.length,u;if('mod'!==n){u=new v(null),u.length=c+1,u.words=Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var m=o.clone()._ishlnsubmul(s,1,c);0===m.negative&&(o=m,u&&(u.words[c]=1));for(var h=c-1,g;0<=h;h--){for(g=67108864*(0|o.words[s.length+h])+(0|o.words[s.length+h-1]),g=_(0|g/d,67108863),o._ishlnsubmul(s,g,h);0!==o.negative;)g--,o.negative=0,o._ishlnsubmul(s,1,h),o.isZero()||(o.negative^=1);u&&(u.words[h]=g)}return u&&u.strip(),o.strip(),'div'!==n&&0!=r&&o.iushrn(r),{div:u||null,mod:o}},v.prototype.divmod=function(t,n,a){if(o(!t.isZero()),this.isZero())return{div:new v(0),mod:new v(0)};var r,s,d;return 0!==this.negative&&0===t.negative?(d=this.neg().divmod(t,n),'mod'!==n&&(r=d.div.neg()),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(d=this.divmod(t.neg(),n),'mod'!==n&&(r=d.div.neg()),{div:r,mod:d.mod}):0==(this.negative&t.negative)?t.length>this.length||0>this.cmp(t)?{div:new v(0),mod:this}:1===t.length?'div'===n?{div:this.divn(t.words[0]),mod:null}:'mod'===n?{div:null,mod:new v(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new v(this.modn(t.words[0]))}:this._wordDiv(t,n):(d=this.neg().divmod(t.neg(),n),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:d.div,mod:s})},v.prototype.div=function(t){return this.divmod(t,'div',!1).div},v.prototype.mod=function(t){return this.divmod(t,'mod',!1).mod},v.prototype.umod=function(t){return this.divmod(t,'mod',!0).mod},v.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0===n.div.negative?n.mod:n.mod.isub(t),r=t.ushrn(1),o=t.andln(1),s=a.cmp(r);return 0>s||1===o&&0===s?n.div:0===n.div.negative?n.div.iaddn(1):n.div.isubn(1)},v.prototype.modn=function(t){o(67108863>=t);for(var n=0,a=this.length-1;0<=a;a--)n=(67108864%t*n+(0|this.words[a]))%t;return n},v.prototype.idivn=function(t){o(67108863>=t);for(var n=0,a=this.length-1,r;0<=a;a--)r=(0|this.words[a])+67108864*n,this.words[a]=0|r/t,n=r%t;return this.strip()},v.prototype.divn=function(t){return this.clone().idivn(t)},v.prototype.egcd=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=new v(0),l=new v(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var u=a.clone(),f=n.clone();!n.isZero();){for(var m=0,h=1;0==(n.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(n.iushrn(m);0<m--;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(f)),r.iushrn(1),s.iushrn(1);for(var g=0,b=1;0==(a.words[0]&b)&&26>g;++g,b<<=1);if(0<g)for(a.iushrn(g);0<g--;)(d.isOdd()||l.isOdd())&&(d.iadd(u),l.isub(f)),d.iushrn(1),l.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(d),s.isub(l)):(a.isub(n),d.isub(r),l.isub(s))}return{a:d,b:l,gcd:a.iushln(c)}},v.prototype._invmp=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=a.clone();0<n.cmpn(1)&&0<a.cmpn(1);){for(var l=0,c=1;0==(n.words[0]&c)&&26>l;++l,c<<=1);if(0<l)for(n.iushrn(l);0<l--;)r.isOdd()&&r.iadd(d),r.iushrn(1);for(var u=0,f=1;0==(a.words[0]&f)&&26>u;++u,f<<=1);if(0<u)for(a.iushrn(u);0<u--;)s.isOdd()&&s.iadd(d),s.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(s)):(a.isub(n),s.isub(r))}var m;return m=0===n.cmpn(1)?r:s,0>m.cmpn(0)&&m.iadd(t),m},v.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var o=this.clone(),a=n.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},v.prototype.invm=function(t){return this.egcd(t).a.umod(t)},v.prototype.isEven=function(){return 0==(1&this.words[0])},v.prototype.isOdd=function(){return 1==(1&this.words[0])},v.prototype.andln=function(t){return this.words[0]&t},v.prototype.bincn=function(t){o('number'==typeof t);var n=t%26,a=(t-n)/26,r=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=r,this;for(var s=r,d=a,l;0!=s&&d<this.length;d++)l=0|this.words[d],l+=s,s=l>>>26,l&=67108863,this.words[d]=l;return 0!=s&&(this.words[d]=s,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(t){var n=0>t;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;this.strip();var a;if(1<this.length)a=1;else{n&&(t=-t),o(67108863>=t,'Number is too big');var r=0|this.words[0];a=r===t?0:r<t?-1:1}return 0===this.negative?a:0|-a},v.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0===this.negative?n:0|-n},v.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,r=this.length-1;0<=r;r--){var o=0|this.words[r],a=0|t.words[r];if(o!=a){o<a?n=-1:o>a&&(n=1);break}}return n},v.prototype.gtn=function(t){return 1===this.cmpn(t)},v.prototype.gt=function(t){return 1===this.cmp(t)},v.prototype.gten=function(t){return 0<=this.cmpn(t)},v.prototype.gte=function(t){return 0<=this.cmp(t)},v.prototype.ltn=function(t){return-1===this.cmpn(t)},v.prototype.lt=function(t){return-1===this.cmp(t)},v.prototype.lten=function(t){return 0>=this.cmpn(t)},v.prototype.lte=function(t){return 0>=this.cmp(t)},v.prototype.eqn=function(t){return 0===this.cmpn(t)},v.prototype.eq=function(t){return 0===this.cmp(t)},v.red=function(t){return new N(t)},v.prototype.toRed=function(t){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),t.convertTo(this)._forceRed(t)},v.prototype.fromRed=function(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},v.prototype._forceRed=function(t){return this.red=t,this},v.prototype.forceRed=function(t){return o(!this.red,'Already a number in reduction context'),this._forceRed(t)},v.prototype.redAdd=function(t){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,t)},v.prototype.redIAdd=function(t){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,t)},v.prototype.redSub=function(t){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,t)},v.prototype.redISub=function(t){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,t)},v.prototype.redShl=function(t){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,t)},v.prototype.redMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.mul(this,t)},v.prototype.redIMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.imul(this,t)},v.prototype.redSqr=function(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(t){return o(this.red&&!t.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,t)};var D={k256:null,p224:null,p192:null,p25519:null};T.prototype._tmp=function(){var t=new v(null);return t.words=Array(b(this.n/13)),t},T.prototype.ireduce=function(t){var n=t,a;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),a=n.bitLength();while(a>this.n);var r=a<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},T.prototype.split=function(t,n){t.iushrn(this.n,0,n)},T.prototype.imulK=function(t){return t.imul(this.k)},r(E,T),E.prototype.split=function(t,n){for(var a=4194303,r=_(t.length,9),o=0;o<r;o++)n.words[o]=t.words[o];if(n.length=r,9>=t.length)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(n.words[n.length++]=s&a,o=10;o<t.length;o++){var d=0|t.words[o];t.words[o-10]=(d&a)<<4|s>>>22,s=d}s>>>=22,t.words[o-10]=s,t.length-=0===s&&10<t.length?10:9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0,r;a<t.length;a++)r=0|t.words[a],n+=977*r,t.words[a]=67108863&n,n=64*r+(0|n/67108864);return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(S,T),r(A,T),r(I,T),I.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var r=19*(0|t.words[a])+n,o=67108863&r;r>>>=26,t.words[a]=o,n=r}return 0!=n&&(t.words[t.length++]=n),t},v._prime=function(t){if(D[t])return D[t];var n;if('k256'===t)n=new E;else if('p224'===t)n=new S;else if('p192'===t)n=new A;else if('p25519'===t)n=new I;else throw new Error('Unknown prime '+t);return D[t]=n,n},N.prototype._verify1=function(t){o(0===t.negative,'red works only with positives'),o(t.red,'red works only with red numbers')},N.prototype._verify2=function(t,n){o(0==(t.negative|n.negative),'red works only with positives'),o(t.red&&t.red===n.red,'red works only with red numbers')},N.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},N.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},N.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a._forceRed(this)},N.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a},N.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a._forceRed(this)},N.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a},N.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},N.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},N.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},N.prototype.isqr=function(t){return this.imul(t,t.clone())},N.prototype.sqr=function(t){return this.mul(t,t)},N.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var d=this.m.add(new v(1)).iushrn(2);return this.pow(n,d)}for(var l=this.m.subn(1),u=0;!l.isZero()&&0===l.andln(1);)u++,l.iushrn(1);o(!l.isZero());var s=new v(1).toRed(this),f=s.redNeg(),h=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new v(2*g*g).toRed(this);0!==this.pow(g,h).cmp(f);)g.redIAdd(f);for(var y=this.pow(g,l),c=this.pow(n,l.addn(1).iushrn(1)),r=this.pow(n,l),t=u;0!==r.cmp(s);){for(var m=r,w=0;0!==m.cmp(s);w++)m=m.redSqr();o(w<t);var x=this.pow(y,new v(1).iushln(t-w-1));c=c.redMul(x),y=x.redSqr(),r=r.redMul(y),t=w}return c},N.prototype.invm=function(t){var n=t._invmp(this.m);return 0===n.negative?this.imod(n):(n.negative=0,this.imod(n).redNeg())},N.prototype.pow=function(t,n){if(n.isZero())return new v(1).toRed(this);if(0===n.cmpn(1))return t.clone();var a=4,r=Array(1<<a);r[0]=new v(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var s=r[0],d=0,l=0,c=n.bitLength()%26;for(0==c&&(c=26),o=n.length-1;0<=o;o--){for(var u=n.words[o],f=c-1,m;0<=f;f--){if(m=1&u>>f,s!==r[0]&&(s=this.sqr(s)),0==m&&0==d){l=0;continue}d<<=1,d|=m,l++,l!=a&&(0!==o||0!==f)||(s=this.mul(s,r[d]),l=0,d=0)}c=26}return s},N.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},N.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},v.mont=function(t){return new j(t)},r(j,N),j.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},j.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},j.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new v(0)._forceRed(this);var r=n.mul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.invm=function(t){var n=this.imod(t._invmp(this.m).mul(this.r2));return n._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(7)(t))},function(t,n,a){function r(t){this.rand=t||new s.Rand}var o=a(286),s=a(164);t.exports=r,r.create=function(t){return new r(t)},r.prototype._rand=function(t){var n=t.bitLength(),a=this.rand.generate(b(n/8));a[0]|=3;var r=7&n;return 0!=r&&(a[a.length-1]>>=7-r),new o(a)},r.prototype.test=function(t,n,r){var l=t.bitLength(),c=o.mont(t),u=new o(1).toRed(c);n||(n=y(1,0|l/48));for(var f=t.subn(1),m=f.subn(1),h=0;!f.testn(h);h++);for(var s=t.shrn(h),d=f.toRed(c),g=!0;0<n;n--){var b=this._rand(m);r&&r(b);var a=b.toRed(c).redPow(s);if(0!==a.cmp(u)&&0!==a.cmp(d)){for(var v=1;v<h;v++){if(a=a.redSqr(),0===a.cmp(u))return!1;if(0===a.cmp(d))break}if(v===h)return!1}}return g},r.prototype.getDivisor=function(t,n){var r=t.bitLength(),l=o.mont(t),c=new o(1).toRed(l);n||(n=y(1,0|r/48));for(var u=t.subn(1),f=u.subn(1),m=0;!u.testn(m);m++);for(var s=t.shrn(m),d=u.toRed(l);0<n;n--){var h=this._rand(f),a=t.gcd(h);if(0!==a.cmpn(1))return a;var g=h.toRed(l).redPow(s);if(0!==g.cmp(c)&&0!==g.cmp(d)){for(var b=1;b<m;b++){if(g=g.redSqr(),0===g.cmp(c))return g.fromRed().subn(1).gcd(t);if(0===g.cmp(d))break}if(b===m)return g=g.redSqr(),g.fromRed().subn(1).gcd(t)}}return!1}},function(t,n,a){function o(t){this.rand=t}var s;if(t.exports=function(t){return s||(s=new o(null)),s.generate(t)},t.exports.Rand=o,o.prototype.generate=function(t){return this._rand(t)},o.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var n=new Uint8Array(t),a=0;a<n.length;a++)n[a]=this.rand.getByte();return n},'object'==typeof self)self.crypto&&self.crypto.getRandomValues?o.prototype._rand=function(t){var n=new Uint8Array(t);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?o.prototype._rand=function(t){var n=new Uint8Array(t);return self.msCrypto.getRandomValues(n),n}:'object'==typeof window&&(o.prototype._rand=function(){throw new Error('Not implemented yet')});else try{var r=a(288);if('function'!=typeof r.randomBytes)throw new Error('Not supported');o.prototype._rand=function(t){return r.randomBytes(t)}}catch(t){}},function(t,n){'use strict';function a(t){return 1===t.length?'0'+t:t}function r(t){for(var n='',r=0;r<t.length;r++)n+=a(t[r].toString(16));return n}var o=n;o.toArray=function(t,n){if(Array.isArray(t))return t.slice();if(!t)return[];var a=[];if('string'!=typeof t){for(var r=0;r<t.length;r++)a[r]=0|t[r];return a}if('hex'===n){t=t.replace(/[^a-z0-9]+/ig,''),0!=t.length%2&&(t='0'+t);for(var r=0;r<t.length;r+=2)a.push(parseInt(t[r]+t[r+1],16))}else for(var r=0;r<t.length;r++){var o=t.charCodeAt(r),s=o>>8,d=255&o;s?a.push(s,d):a.push(d)}return a},o.zero2=a,o.toHex=r,o.encode=function(t,n){return'hex'===n?r(t):t}},function(t,n,a){'use strict';function r(t,n,a){return t&n^~t&a}function o(t,n,a){return t&n^t&a^n&a}function d(t,n,a){return t^n^a}var s=a(22),l=s.rotr32;n.ft_1=function(t,n,a,s){return 0===t?r(n,a,s):1===t||3===t?d(n,a,s):2===t?o(n,a,s):void 0},n.ch32=r,n.maj32=o,n.p32=d,n.s0_256=function(t){return l(t,2)^l(t,13)^l(t,22)},n.s1_256=function(t){return l(t,6)^l(t,11)^l(t,25)},n.g0_256=function(t){return l(t,7)^l(t,18)^t>>>3},n.g1_256=function(t){return l(t,17)^l(t,19)^t>>>10}},function(t,n,a){'use strict';function r(){return this instanceof r?void(g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=Array(64)):new r}var o=a(22),s=a(55),d=a(166),l=a(15),u=o.sum32,c=o.sum32_4,m=o.sum32_5,y=d.ch32,v=d.maj32,w=d.s0_256,x=d.s1_256,f=d.g0_256,h=d.g1_256,g=s.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];o.inherits(r,g),t.exports=r,r.blockSize=512,r.outSize=256,r.hmacStrength=192,r.padLength=64,r.prototype._update=function(t,n){for(var r=this.W,o=0;16>o;o++)r[o]=t[n+o];for(;o<r.length;o++)r[o]=c(h(r[o-2]),r[o-7],f(r[o-15]),r[o-16]);var s=this.h[0],a=this.h[1],b=this.h[2],_=this.h[3],d=this.h[4],k=this.h[5],C=this.h[6],g=this.h[7];for(l(this.k.length===r.length),o=0;o<r.length;o++){var T=m(g,x(d),y(d,k,C),this.k[o],r[o]),E=u(w(s),v(s,a,b));g=C,C=k,k=d,d=u(_,T),_=b,b=a,a=s,s=u(T,E)}this.h[0]=u(this.h[0],s),this.h[1]=u(this.h[1],a),this.h[2]=u(this.h[2],b),this.h[3]=u(this.h[3],_),this.h[4]=u(this.h[4],d),this.h[5]=u(this.h[5],k),this.h[6]=u(this.h[6],C),this.h[7]=u(this.h[7],g)},r.prototype._digest=function(t){return'hex'===t?o.toHex32(this.h,'big'):o.split32(this.h,'big')}},function(t,n,a){'use strict';function r(){return this instanceof r?void(L.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=O,this.W=Array(160)):new r}function o(t,n,a,o,s){var d=t&a^~t&s;return 0>d&&(d+=4294967296),d}function s(t,n,a,o,s,d){var l=n&o^~n&d;return 0>l&&(l+=4294967296),l}function d(t,n,a,o,s){var d=t&a^t&s^a&s;return 0>d&&(d+=4294967296),d}function l(t,n,a,o,s,d){var l=n&o^n&d^o&d;return 0>l&&(l+=4294967296),l}function c(t,n){var a=_(t,n,28),o=_(n,t,2),s=_(n,t,7),d=a^o^s;return 0>d&&(d+=4294967296),d}function u(t,n){var a=k(t,n,28),o=k(n,t,2),s=k(n,t,7),d=a^o^s;return 0>d&&(d+=4294967296),d}function f(t,n){var a=_(t,n,14),o=_(t,n,18),s=_(n,t,9),d=a^o^s;return 0>d&&(d+=4294967296),d}function m(t,n){var a=k(t,n,14),o=k(t,n,18),s=k(n,t,9),d=a^o^s;return 0>d&&(d+=4294967296),d}function h(t,n){var a=_(t,n,1),o=_(t,n,8),s=C(t,n,7),d=a^o^s;return 0>d&&(d+=4294967296),d}function g(t,n){var a=k(t,n,1),o=k(t,n,8),s=T(t,n,7),d=a^o^s;return 0>d&&(d+=4294967296),d}function b(t,n){var a=_(t,n,19),o=_(n,t,29),s=C(t,n,6),d=a^o^s;return 0>d&&(d+=4294967296),d}function y(t,n){var a=k(t,n,19),o=k(n,t,29),s=T(t,n,6),d=a^o^s;return 0>d&&(d+=4294967296),d}var v=a(22),w=a(55),x=a(15),_=v.rotr64_hi,k=v.rotr64_lo,C=v.shr64_hi,T=v.shr64_lo,E=v.sum64,S=v.sum64_hi,A=v.sum64_lo,I=v.sum64_4_hi,N=v.sum64_4_lo,j=v.sum64_5_hi,R=v.sum64_5_lo,L=w.BlockHash,O=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];v.inherits(r,L),t.exports=r,r.blockSize=1024,r.outSize=512,r.hmacStrength=192,r.padLength=128,r.prototype._prepareBlock=function(t,n){for(var a=this.W,r=0;32>r;r++)a[r]=t[n+r];for(;r<a.length;r+=2){var o=b(a[r-4],a[r-3]),s=y(a[r-4],a[r-3]),d=a[r-14],l=a[r-13],c=h(a[r-30],a[r-29]),u=g(a[r-30],a[r-29]),f=a[r-32],m=a[r-31];a[r]=I(o,s,d,l,c,u,f,m),a[r+1]=N(o,s,d,l,c,u,f,m)}},r.prototype._update=function(t,n){this._prepareBlock(t,n);var a=this.W,r=this.h[0],h=this.h[1],g=this.h[2],b=this.h[3],y=this.h[4],v=this.h[5],w=this.h[6],_=this.h[7],k=this.h[8],C=this.h[9],T=this.h[10],I=this.h[11],N=this.h[12],L=this.h[13],O=this.h[14],P=this.h[15];x(this.k.length===a.length);for(var M=0;M<a.length;M+=2){var D=O,B=P,U=f(k,C),q=m(k,C),F=o(k,C,T,I,N,L),z=s(k,C,T,I,N,L),H=this.k[M],W=this.k[M+1],V=a[M],G=a[M+1],K=j(D,B,U,q,F,z,H,W,V,G),J=R(D,B,U,q,F,z,H,W,V,G);D=c(r,h),B=u(r,h),U=d(r,h,g,b,y,v),q=l(r,h,g,b,y,v);var X=S(D,B,U,q),Z=A(D,B,U,q);O=N,P=L,N=T,L=I,T=k,I=C,k=S(w,_,K,J),C=A(_,_,K,J),w=y,_=v,y=g,v=b,g=r,b=h,r=S(K,J,X,Z),h=A(K,J,X,Z)}E(this.h,0,r,h),E(this.h,2,g,b),E(this.h,4,y,v),E(this.h,6,w,_),E(this.h,8,k,C),E(this.h,10,T,I),E(this.h,12,N,L),E(this.h,14,O,P)},r.prototype._digest=function(t){return'hex'===t?v.toHex32(this.h,'big'):v.split32(this.h,'big')}},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function v(t,n,a){return v.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_(t.length,a),s=n,d;s<r;s++)d=t.charCodeAt(s)-48,o<<=4,o|=49<=d&&54>=d?d-49+10:17<=d&&22>=d?d-17+10:15&d;return o}function l(t,n,a,o){for(var s=0,r=_(t.length,a),d=n,l;d<r;d++)l=t.charCodeAt(d)-48,s*=o,s+=49<=l?l-49+10:17<=l?l-17+10:l;return s}function u(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,o=a%26;n[a]=(t.words[r]&1<<o)>>>o}return n}function w(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_(u,n.length-1),g=y(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function x(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_(l,n.length-1),m=y(0,l-t.length+1);m<=f;m++){var h=l-m,g=0|t.words[h],a=0|n.words[m],b=g*a,r=67108863&b;c=0|c+(0|b/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function k(t,n,a){var r=new C;return r.mulp(t,n,a)}function C(t,n){this.x=t,this.y=n}function T(t,n){this.name=t,this.p=new v(n,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){T.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function S(){T.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function A(){T.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function I(){T.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function N(t){if('string'==typeof t){var n=v._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function j(t){N.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=v:n.BN=v,v.BN=v,v.wordSize=26;var R;try{R=a(317).Buffer}catch(t){}v.isBN=function(t){return!!(t instanceof v)||null!==t&&'object'==typeof t&&t.constructor.wordSize===v.wordSize&&Array.isArray(t.words)},v.max=function(t,n){return 0<t.cmp(n)?t:n},v.min=function(t,n){return 0>t.cmp(n)?t:n},v.prototype._init=function(t,n,a){if('number'==typeof t)return this._initNumber(t,n,a);if('object'==typeof t)return this._initArray(t,n,a);'hex'===n&&(n=16),o(n===(0|n)&&2<=n&&36>=n),t=t.toString().replace(/\s+/g,'');var r=0;'-'===t[0]&&r++,16===n?this._parseHex(t,r):this._parseBase(t,n,r),'-'===t[0]&&(this.negative=1),this.strip();'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initNumber=function(t,n,a){0>t&&(this.negative=1,t=-t),67108864>t?(this.words=[67108863&t],this.length=1):4503599627370496>t?(this.words=[67108863&t,67108863&t/67108864],this.length=2):(o(9007199254740992>t),this.words=[67108863&t,67108863&t/67108864,1],this.length=3);'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initArray=function(t,n,a){if(o('number'==typeof t.length),0>=t.length)return this.words=[0],this.length=1,this;this.length=b(t.length/3),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s=0,d,l;if('be'===a)for(r=t.length-1,d=0;0<=r;r-=3)l=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);else if('le'===a)for(r=0,d=0;r<t.length;r+=3)l=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);return this.strip()},v.prototype._parseHex=function(t,n){this.length=b((t.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r=0,o,d;for(a=t.length-6,o=0;a>=n;a-=6)d=s(t,a,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r,r+=24,26<=r&&(r-=26,o++);a+6!==n&&(d=s(t,n,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r),this.strip()},v.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var r=0,o=1;67108863>=o;o*=n)r++;r--,o=0|o/n;for(var s=t.length-a,d=s%r,c=_(s,s-d)+a,u=0,f=a;f<c;f+=r)u=l(t,f,f+r,n),this.imuln(o),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u);if(0!=d){var m=1;for(u=l(t,f,t.length,n),f=0;f<d;f++)m*=n;this.imuln(m),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u)}},v.prototype.copy=function(t){t.words=Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},v.prototype.clone=function(){var t=new v(null);return this.copy(t),t},v.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var L=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];v.prototype.toString=function(t,n){t=t||10,n=0|n||1;var a;if(16===t||'hex'===t){a='';for(var s=0,d=0,l=0;l<this.length;l++){var u=this.words[l],f=(16777215&(u<<s|d)).toString(16);d=16777215&u>>>24-s,a=0!=d||l!==this.length-1?L[6-f.length]+f+a:f+a,s+=2,26<=s&&(s-=26,l--)}for(0!=d&&(a=d.toString(16)+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}if(t===(0|t)&&2<=t&&36>=t){var m=O[t],h=P[t];a='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(t);g=g.idivn(h),a=g.isZero()?c+a:L[m-c.length]+c+a}for(this.isZero()&&(a='0'+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}o(!1,'Base should be between 2 and 36')},v.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?t:-t},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(t,n){return o('undefined'!=typeof R),this.toArrayLike(R,t,n)},v.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},v.prototype.toArrayLike=function(t,n,a){var r=this.byteLength(),s=a||y(1,r);o(r<=s,'byte array longer than desired length'),o(0<s,'Requested array length <= 0'),this.strip();var d=new t(s),l=this.clone(),c,u;if(!('le'===n)){for(u=0;u<s-r;u++)d[u]=0;for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[s-u-1]=c}else{for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[u]=c;for(;u<s;u++)d[u]=0}return d},v.prototype._countBits=g?function(t){return 32-g(t)}:function(n){var a=n,t=0;return 4096<=a&&(t+=13,a>>>=13),64<=a&&(t+=7,a>>>=7),8<=a&&(t+=4,a>>>=4),2<=a&&(t+=2,a>>>=2),t+a},v.prototype._zeroBits=function(n){if(0===n)return 26;var a=n,t=0;return 0==(8191&a)&&(t+=13,a>>>=13),0==(127&a)&&(t+=7,a>>>=7),0==(15&a)&&(t+=4,a>>>=4),0==(3&a)&&(t+=2,a>>>=2),0==(1&a)&&t++,t},v.prototype.bitLength=function(){var t=this.words[this.length-1],n=this._countBits(t);return 26*(this.length-1)+n},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0,a;n<this.length&&(a=this._zeroBits(this.words[n]),t+=a,26===a);n++);return t},v.prototype.byteLength=function(){return b(this.bitLength()/8)},v.prototype.toTwos=function(t){return 0===this.negative?this.clone():this.abs().inotn(t).iaddn(1)},v.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]|=t.words[n];return this.strip()},v.prototype.ior=function(t){return o(0==(this.negative|t.negative)),this.iuor(t)},v.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},v.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},v.prototype.iuand=function(t){var n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]&=t.words[a];return this.length=n.length,this.strip()},v.prototype.iand=function(t){return o(0==(this.negative|t.negative)),this.iuand(t)},v.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},v.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},v.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var r=0;r<a.length;r++)this.words[r]=n.words[r]^a.words[r];if(this!==n)for(;r<n.length;r++)this.words[r]=n.words[r];return this.length=n.length,this.strip()},v.prototype.ixor=function(t){return o(0==(this.negative|t.negative)),this.iuxor(t)},v.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},v.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},v.prototype.inotn=function(t){o('number'==typeof t&&0<=t);var n=0|b(t/26),a=t%26;this._expand(n),0<a&&n--;for(var r=0;r<n;r++)this.words[r]=67108863&~this.words[r];return 0<a&&(this.words[r]=~this.words[r]&67108863>>26-a),this.strip()},v.prototype.notn=function(t){return this.clone().inotn(t)},v.prototype.setn=function(t,n){o('number'==typeof t&&0<=t);var a=0|t/26,r=t%26;return this._expand(a+1),n?this.words[a]|=1<<r:this.words[a]&=~(1<<r),this.strip()},v.prototype.iadd=function(t){var n;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();var r,a;this.length>t.length?(r=this,a=t):(r=t,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|r.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!=o&&s<r.length;s++)n=(0|r.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=r.length,0!=o)this.words[this.length]=o,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},v.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},v.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var o,a;0<r?(o=this,a=t):(o=t,a=this);for(var s=0,d=0;d<a.length;d++)n=(0|o.words[d])-(0|a.words[d])+s,s=n>>26,this.words[d]=67108863&n;for(;0!=s&&d<o.length;d++)n=(0|o.words[d])+s,s=n>>26,this.words[d]=67108863&n;if(0==s&&d<o.length&&o!==this)for(;d<o.length;d++)this.words[d]=o.words[d];return this.length=y(this.length,d),o!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(t){return this.clone().isub(t)};var M=function(t,n,r){var s=t.words,a=n.words,d=r.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,g=f>>>13,b=0|s[2],y=8191&b,v=b>>>13,w=0|s[3],x=8191&w,_=w>>>13,k=0|s[4],C=8191&k,T=k>>>13,E=0|s[5],S=8191&E,A=E>>>13,I=0|s[6],N=8191&I,j=I>>>13,R=0|s[7],L=8191&R,O=R>>>13,P=0|s[8],M=8191&P,D=P>>>13,B=0|s[9],U=8191&B,q=B>>>13,F=0|a[0],z=8191&F,H=F>>>13,W=0|a[1],V=8191&W,G=W>>>13,K=0|a[2],J=8191&K,X=K>>>13,Z=0|a[3],Y=8191&Z,Q=Z>>>13,ee=0|a[4],te=8191&ee,ne=ee>>>13,ae=0|a[5],re=8191&ae,oe=ae>>>13,ie=0|a[6],se=8191&ie,de=ie>>>13,le=0|a[7],pe=8191&le,ce=le>>>13,ue=0|a[8],fe=8191&ue,he=ue>>>13,ge=0|a[9],be=8191&ge,ye=ge>>>13,ve,we,xe;r.negative=t.negative^n.negative,r.length=19,ve=h(c,z),we=h(c,H),we=0|we+h(u,z),xe=h(u,H);var _e=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(_e>>>26),_e&=67108863,ve=h(m,z),we=h(m,H),we=0|we+h(g,z),xe=h(g,H),ve=0|ve+h(c,V),we=0|we+h(c,G),we=0|we+h(u,V),xe=0|xe+h(u,G);var ke=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(ke>>>26),ke&=67108863,ve=h(y,z),we=h(y,H),we=0|we+h(v,z),xe=h(v,H),ve=0|ve+h(m,V),we=0|we+h(m,G),we=0|we+h(g,V),xe=0|xe+h(g,G),ve=0|ve+h(c,J),we=0|we+h(c,X),we=0|we+h(u,J),xe=0|xe+h(u,X);var Ce=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ce>>>26),Ce&=67108863,ve=h(x,z),we=h(x,H),we=0|we+h(_,z),xe=h(_,H),ve=0|ve+h(y,V),we=0|we+h(y,G),we=0|we+h(v,V),xe=0|xe+h(v,G),ve=0|ve+h(m,J),we=0|we+h(m,X),we=0|we+h(g,J),xe=0|xe+h(g,X),ve=0|ve+h(c,Y),we=0|we+h(c,Q),we=0|we+h(u,Y),xe=0|xe+h(u,Q);var Te=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Te>>>26),Te&=67108863,ve=h(C,z),we=h(C,H),we=0|we+h(T,z),xe=h(T,H),ve=0|ve+h(x,V),we=0|we+h(x,G),we=0|we+h(_,V),xe=0|xe+h(_,G),ve=0|ve+h(y,J),we=0|we+h(y,X),we=0|we+h(v,J),xe=0|xe+h(v,X),ve=0|ve+h(m,Y),we=0|we+h(m,Q),we=0|we+h(g,Y),xe=0|xe+h(g,Q),ve=0|ve+h(c,te),we=0|we+h(c,ne),we=0|we+h(u,te),xe=0|xe+h(u,ne);var Ee=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ee>>>26),Ee&=67108863,ve=h(S,z),we=h(S,H),we=0|we+h(A,z),xe=h(A,H),ve=0|ve+h(C,V),we=0|we+h(C,G),we=0|we+h(T,V),xe=0|xe+h(T,G),ve=0|ve+h(x,J),we=0|we+h(x,X),we=0|we+h(_,J),xe=0|xe+h(_,X),ve=0|ve+h(y,Y),we=0|we+h(y,Q),we=0|we+h(v,Y),xe=0|xe+h(v,Q),ve=0|ve+h(m,te),we=0|we+h(m,ne),we=0|we+h(g,te),xe=0|xe+h(g,ne),ve=0|ve+h(c,re),we=0|we+h(c,oe),we=0|we+h(u,re),xe=0|xe+h(u,oe);var Se=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Se>>>26),Se&=67108863,ve=h(N,z),we=h(N,H),we=0|we+h(j,z),xe=h(j,H),ve=0|ve+h(S,V),we=0|we+h(S,G),we=0|we+h(A,V),xe=0|xe+h(A,G),ve=0|ve+h(C,J),we=0|we+h(C,X),we=0|we+h(T,J),xe=0|xe+h(T,X),ve=0|ve+h(x,Y),we=0|we+h(x,Q),we=0|we+h(_,Y),xe=0|xe+h(_,Q),ve=0|ve+h(y,te),we=0|we+h(y,ne),we=0|we+h(v,te),xe=0|xe+h(v,ne),ve=0|ve+h(m,re),we=0|we+h(m,oe),we=0|we+h(g,re),xe=0|xe+h(g,oe),ve=0|ve+h(c,se),we=0|we+h(c,de),we=0|we+h(u,se),xe=0|xe+h(u,de);var Ae=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ae>>>26),Ae&=67108863,ve=h(L,z),we=h(L,H),we=0|we+h(O,z),xe=h(O,H),ve=0|ve+h(N,V),we=0|we+h(N,G),we=0|we+h(j,V),xe=0|xe+h(j,G),ve=0|ve+h(S,J),we=0|we+h(S,X),we=0|we+h(A,J),xe=0|xe+h(A,X),ve=0|ve+h(C,Y),we=0|we+h(C,Q),we=0|we+h(T,Y),xe=0|xe+h(T,Q),ve=0|ve+h(x,te),we=0|we+h(x,ne),we=0|we+h(_,te),xe=0|xe+h(_,ne),ve=0|ve+h(y,re),we=0|we+h(y,oe),we=0|we+h(v,re),xe=0|xe+h(v,oe),ve=0|ve+h(m,se),we=0|we+h(m,de),we=0|we+h(g,se),xe=0|xe+h(g,de),ve=0|ve+h(c,pe),we=0|we+h(c,ce),we=0|we+h(u,pe),xe=0|xe+h(u,ce);var Ie=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ie>>>26),Ie&=67108863,ve=h(M,z),we=h(M,H),we=0|we+h(D,z),xe=h(D,H),ve=0|ve+h(L,V),we=0|we+h(L,G),we=0|we+h(O,V),xe=0|xe+h(O,G),ve=0|ve+h(N,J),we=0|we+h(N,X),we=0|we+h(j,J),xe=0|xe+h(j,X),ve=0|ve+h(S,Y),we=0|we+h(S,Q),we=0|we+h(A,Y),xe=0|xe+h(A,Q),ve=0|ve+h(C,te),we=0|we+h(C,ne),we=0|we+h(T,te),xe=0|xe+h(T,ne),ve=0|ve+h(x,re),we=0|we+h(x,oe),we=0|we+h(_,re),xe=0|xe+h(_,oe),ve=0|ve+h(y,se),we=0|we+h(y,de),we=0|we+h(v,se),xe=0|xe+h(v,de),ve=0|ve+h(m,pe),we=0|we+h(m,ce),we=0|we+h(g,pe),xe=0|xe+h(g,ce),ve=0|ve+h(c,fe),we=0|we+h(c,he),we=0|we+h(u,fe),xe=0|xe+h(u,he);var Ne=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ne>>>26),Ne&=67108863,ve=h(U,z),we=h(U,H),we=0|we+h(q,z),xe=h(q,H),ve=0|ve+h(M,V),we=0|we+h(M,G),we=0|we+h(D,V),xe=0|xe+h(D,G),ve=0|ve+h(L,J),we=0|we+h(L,X),we=0|we+h(O,J),xe=0|xe+h(O,X),ve=0|ve+h(N,Y),we=0|we+h(N,Q),we=0|we+h(j,Y),xe=0|xe+h(j,Q),ve=0|ve+h(S,te),we=0|we+h(S,ne),we=0|we+h(A,te),xe=0|xe+h(A,ne),ve=0|ve+h(C,re),we=0|we+h(C,oe),we=0|we+h(T,re),xe=0|xe+h(T,oe),ve=0|ve+h(x,se),we=0|we+h(x,de),we=0|we+h(_,se),xe=0|xe+h(_,de),ve=0|ve+h(y,pe),we=0|we+h(y,ce),we=0|we+h(v,pe),xe=0|xe+h(v,ce),ve=0|ve+h(m,fe),we=0|we+h(m,he),we=0|we+h(g,fe),xe=0|xe+h(g,he),ve=0|ve+h(c,be),we=0|we+h(c,ye),we=0|we+h(u,be),xe=0|xe+h(u,ye);var je=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(je>>>26),je&=67108863,ve=h(U,V),we=h(U,G),we=0|we+h(q,V),xe=h(q,G),ve=0|ve+h(M,J),we=0|we+h(M,X),we=0|we+h(D,J),xe=0|xe+h(D,X),ve=0|ve+h(L,Y),we=0|we+h(L,Q),we=0|we+h(O,Y),xe=0|xe+h(O,Q),ve=0|ve+h(N,te),we=0|we+h(N,ne),we=0|we+h(j,te),xe=0|xe+h(j,ne),ve=0|ve+h(S,re),we=0|we+h(S,oe),we=0|we+h(A,re),xe=0|xe+h(A,oe),ve=0|ve+h(C,se),we=0|we+h(C,de),we=0|we+h(T,se),xe=0|xe+h(T,de),ve=0|ve+h(x,pe),we=0|we+h(x,ce),we=0|we+h(_,pe),xe=0|xe+h(_,ce),ve=0|ve+h(y,fe),we=0|we+h(y,he),we=0|we+h(v,fe),xe=0|xe+h(v,he),ve=0|ve+h(m,be),we=0|we+h(m,ye),we=0|we+h(g,be),xe=0|xe+h(g,ye);var Re=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Re>>>26),Re&=67108863,ve=h(U,J),we=h(U,X),we=0|we+h(q,J),xe=h(q,X),ve=0|ve+h(M,Y),we=0|we+h(M,Q),we=0|we+h(D,Y),xe=0|xe+h(D,Q),ve=0|ve+h(L,te),we=0|we+h(L,ne),we=0|we+h(O,te),xe=0|xe+h(O,ne),ve=0|ve+h(N,re),we=0|we+h(N,oe),we=0|we+h(j,re),xe=0|xe+h(j,oe),ve=0|ve+h(S,se),we=0|we+h(S,de),we=0|we+h(A,se),xe=0|xe+h(A,de),ve=0|ve+h(C,pe),we=0|we+h(C,ce),we=0|we+h(T,pe),xe=0|xe+h(T,ce),ve=0|ve+h(x,fe),we=0|we+h(x,he),we=0|we+h(_,fe),xe=0|xe+h(_,he),ve=0|ve+h(y,be),we=0|we+h(y,ye),we=0|we+h(v,be),xe=0|xe+h(v,ye);var Le=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Le>>>26),Le&=67108863,ve=h(U,Y),we=h(U,Q),we=0|we+h(q,Y),xe=h(q,Q),ve=0|ve+h(M,te),we=0|we+h(M,ne),we=0|we+h(D,te),xe=0|xe+h(D,ne),ve=0|ve+h(L,re),we=0|we+h(L,oe),we=0|we+h(O,re),xe=0|xe+h(O,oe),ve=0|ve+h(N,se),we=0|we+h(N,de),we=0|we+h(j,se),xe=0|xe+h(j,de),ve=0|ve+h(S,pe),we=0|we+h(S,ce),we=0|we+h(A,pe),xe=0|xe+h(A,ce),ve=0|ve+h(C,fe),we=0|we+h(C,he),we=0|we+h(T,fe),xe=0|xe+h(T,he),ve=0|ve+h(x,be),we=0|we+h(x,ye),we=0|we+h(_,be),xe=0|xe+h(_,ye);var Oe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Oe>>>26),Oe&=67108863,ve=h(U,te),we=h(U,ne),we=0|we+h(q,te),xe=h(q,ne),ve=0|ve+h(M,re),we=0|we+h(M,oe),we=0|we+h(D,re),xe=0|xe+h(D,oe),ve=0|ve+h(L,se),we=0|we+h(L,de),we=0|we+h(O,se),xe=0|xe+h(O,de),ve=0|ve+h(N,pe),we=0|we+h(N,ce),we=0|we+h(j,pe),xe=0|xe+h(j,ce),ve=0|ve+h(S,fe),we=0|we+h(S,he),we=0|we+h(A,fe),xe=0|xe+h(A,he),ve=0|ve+h(C,be),we=0|we+h(C,ye),we=0|we+h(T,be),xe=0|xe+h(T,ye);var Pe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Pe>>>26),Pe&=67108863,ve=h(U,re),we=h(U,oe),we=0|we+h(q,re),xe=h(q,oe),ve=0|ve+h(M,se),we=0|we+h(M,de),we=0|we+h(D,se),xe=0|xe+h(D,de),ve=0|ve+h(L,pe),we=0|we+h(L,ce),we=0|we+h(O,pe),xe=0|xe+h(O,ce),ve=0|ve+h(N,fe),we=0|we+h(N,he),we=0|we+h(j,fe),xe=0|xe+h(j,he),ve=0|ve+h(S,be),we=0|we+h(S,ye),we=0|we+h(A,be),xe=0|xe+h(A,ye);var Me=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Me>>>26),Me&=67108863,ve=h(U,se),we=h(U,de),we=0|we+h(q,se),xe=h(q,de),ve=0|ve+h(M,pe),we=0|we+h(M,ce),we=0|we+h(D,pe),xe=0|xe+h(D,ce),ve=0|ve+h(L,fe),we=0|we+h(L,he),we=0|we+h(O,fe),xe=0|xe+h(O,he),ve=0|ve+h(N,be),we=0|we+h(N,ye),we=0|we+h(j,be),xe=0|xe+h(j,ye);var De=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(De>>>26),De&=67108863,ve=h(U,pe),we=h(U,ce),we=0|we+h(q,pe),xe=h(q,ce),ve=0|ve+h(M,fe),we=0|we+h(M,he),we=0|we+h(D,fe),xe=0|xe+h(D,he),ve=0|ve+h(L,be),we=0|we+h(L,ye),we=0|we+h(O,be),xe=0|xe+h(O,ye);var Be=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Be>>>26),Be&=67108863,ve=h(U,fe),we=h(U,he),we=0|we+h(q,fe),xe=h(q,he),ve=0|ve+h(M,be),we=0|we+h(M,ye),we=0|we+h(D,be),xe=0|xe+h(D,ye);var Ue=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ue>>>26),Ue&=67108863,ve=h(U,be),we=h(U,ye),we=0|we+h(q,be),xe=h(q,ye);var qe=0|(0|o+ve)+((8191&we)<<13);return o=0|(0|xe+(we>>>13))+(qe>>>26),qe&=67108863,d[0]=_e,d[1]=ke,d[2]=Ce,d[3]=Te,d[4]=Ee,d[5]=Se,d[6]=Ae,d[7]=Ie,d[8]=Ne,d[9]=je,d[10]=Re,d[11]=Le,d[12]=Oe,d[13]=Pe,d[14]=Me,d[15]=De,d[16]=Be,d[17]=Ue,d[18]=qe,0!=o&&(d[19]=o,r.length++),r};h||(M=w),v.prototype.mulTo=function(t,n){var a=this.length+t.length,r;return r=10===this.length&&10===t.length?M(this,t,n):63>a?w(this,t,n):1024>a?x(this,t,n):k(this,t,n),r},C.prototype.makeRBT=function(n){for(var a=Array(n),t=v.prototype._countBits(n)-1,r=0;r<n;r++)a[r]=this.revBin(r,t,n);return a},C.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var r=0,o=0;o<n;o++)r|=(1&t)<<n-o-1,t>>=1;return r},C.prototype.permute=function(t,n,a,r,o,s){for(var d=0;d<s;d++)r[d]=n[t[d]],o[d]=a[t[d]]},C.prototype.transform=function(t,n,a,r,o,d){this.permute(d,t,n,a,r,o);for(var u=1;u<o;u<<=1)for(var s=u<<1,l=f(2*m/s),h=c(2*m/s),g=0;g<o;g+=s)for(var b=l,y=h,v=0;v<u;v++){var w=a[g+v],x=r[g+v],_=a[g+v+u],k=r[g+v+u],C=b*_-y*k;k=b*k+y*_,_=C,a[g+v]=w+_,r[g+v]=x+k,a[g+v+u]=w-_,r[g+v+u]=x-k,v!==s&&(C=l*b-h*y,y=l*y+h*b,b=C)}},C.prototype.guessLen13b=function(t,n){var a=1|y(n,t),r=1&a,o=0;for(a=0|a/2;a;a>>>=1)o++;return 1<<o+1+r},C.prototype.conjugate=function(n,a,r){if(!(1>=r))for(var o=0,s;o<r/2;o++)s=n[o],n[o]=n[r-o-1],n[r-o-1]=s,s=a[o],a[o]=-a[r-o-1],a[r-o-1]=-s},C.prototype.normalize13b=function(t,n){for(var a=0,r=0,o;r<n/2;r++)o=8192*d(t[2*r+1]/n)+d(t[2*r]/n)+a,t[r]=67108863&o,a=67108864>o?0:0|o/67108864;return t},C.prototype.convert13b=function(t,n,a,r){for(var s=0,d=0;d<n;d++)s+=0|t[d],a[2*d]=8191&s,s>>>=13,a[2*d+1]=8191&s,s>>>=13;for(d=2*n;d<r;++d)a[d]=0;o(0==s),o(0==(-8192&s))},C.prototype.stub=function(t){for(var n=Array(t),a=0;a<t;a++)n[a]=0;return n},C.prototype.mulp=function(t,n,a){var r=2*this.guessLen13b(t.length,n.length),o=this.makeRBT(r),s=this.stub(r),d=Array(r),l=Array(r),c=Array(r),u=Array(r),f=Array(r),m=Array(r),h=a.words;h.length=r,this.convert13b(t.words,t.length,d,r),this.convert13b(n.words,n.length,u,r),this.transform(d,s,l,c,r,o),this.transform(u,s,f,m,r,o);for(var g=0,b;g<r;g++)b=l[g]*f[g]-c[g]*m[g],c[g]=l[g]*m[g]+c[g]*f[g],l[g]=b;return this.conjugate(l,c,r),this.transform(l,c,h,s,r,o),this.conjugate(h,s,r),this.normalize13b(h,r),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},v.prototype.mul=function(t){var n=new v(null);return n.words=Array(this.length+t.length),this.mulTo(t,n)},v.prototype.mulf=function(t){var n=new v(null);return n.words=Array(this.length+t.length),k(this,t,n)},v.prototype.imul=function(t){return this.clone().mulTo(t,this)},v.prototype.imuln=function(t){o('number'==typeof t),o(67108864>t);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*t,s=(67108863&r)+(67108863&n);n>>=26,n+=0|r/67108864,n+=s>>>26,this.words[a]=67108863&s}return 0!=n&&(this.words[a]=n,this.length++),this},v.prototype.muln=function(t){return this.clone().imuln(t)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(t){var n=u(t);if(0===n.length)return new v(1);for(var a=this,r=0;r<n.length&&!(0!==n[r]);r++,a=a.sqr());if(++r<n.length)for(var o=a.sqr();r<n.length;r++,o=o.sqr())0!==n[r]&&(a=a.mul(o));return a},v.prototype.iushln=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26,r;if(0!=n){var s=0;for(r=0;r<this.length;r++){var d=this.words[r]&67108863>>>26-n<<26-n,l=(0|this.words[r])-d<<n;this.words[r]=l|s,s=d>>>26-n}s&&(this.words[r]=s,this.length++)}if(0!=a){for(r=this.length-1;0<=r;r--)this.words[r+a]=this.words[r];for(r=0;r<a;r++)this.words[r]=0;this.length+=a}return this.strip()},v.prototype.ishln=function(t){return o(0===this.negative),this.iushln(t)},v.prototype.iushrn=function(t,n,a){o('number'==typeof t&&0<=t);var d=n?(n-n%26)/26:0;var l=t%26,r=_((t-l)/26,this.length),s=a;if(d-=r,d=y(0,d),s){for(var c=0;c<r;c++)s.words[c]=this.words[c];s.length=r}if(0===r);else if(this.length>r)for(this.length-=r,c=0;c<this.length;c++)this.words[c]=this.words[c+r];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!=u||c>=d);c--){var f=0|this.words[c];this.words[c]=u<<26-l|f>>>l,u=f&(67108863^67108863>>>l<<l)}return s&&0!=u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(t,n,a){return o(0===this.negative),this.iushrn(t,n,a)},v.prototype.shln=function(t){return this.clone().ishln(t)},v.prototype.ushln=function(t){return this.clone().iushln(t)},v.prototype.shrn=function(t){return this.clone().ishrn(t)},v.prototype.ushrn=function(t){return this.clone().iushrn(t)},v.prototype.testn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(this.length<=a)return!1;var r=this.words[a];return!!(r&1<<n)},v.prototype.imaskn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=a)return this;if(0!=n&&a++,this.length=_(a,this.length),0!=n){this.words[this.length-1]&=67108863^67108863>>>n<<n}return this.strip()},v.prototype.maskn=function(t){return this.clone().imaskn(t)},v.prototype.iaddn=function(t){return o('number'==typeof t),o(67108864>t),0>t?this.isubn(-t):0===this.negative?this._iaddn(t):1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this)},v.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&67108864<=this.words[n];n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=y(this.length,n+1),this},v.prototype.isubn=function(t){if(o('number'==typeof t),o(67108864>t),0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&0>this.words[n];n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},v.prototype.addn=function(t){return this.clone().iaddn(t)},v.prototype.subn=function(t){return this.clone().isubn(t)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(t,n,a){var r=t.length+a,s;this._expand(r);var d=0,l;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+d;var c=(0|t.words[s])*n;l-=67108863&c,d=(l>>26)-(0|c/67108864),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)l=(0|this.words[s+a])+d,d=l>>26,this.words[s+a]=67108863&l;if(0==d)return this.strip();for(o(-1==d),d=0,s=0;s<this.length;s++)l=-(0|this.words[s])+d,d=l>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},v.prototype._wordDiv=function(t,n){var r=this.length-t.length,o=this.clone(),s=t,d=0|s.words[s.length-1],l=this._countBits(d);r=26-l,0!=r&&(s=s.ushln(r),o.iushln(r),d=0|s.words[s.length-1]);var c=o.length-s.length,u;if('mod'!==n){u=new v(null),u.length=c+1,u.words=Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var m=o.clone()._ishlnsubmul(s,1,c);0===m.negative&&(o=m,u&&(u.words[c]=1));for(var h=c-1,g;0<=h;h--){for(g=67108864*(0|o.words[s.length+h])+(0|o.words[s.length+h-1]),g=_(0|g/d,67108863),o._ishlnsubmul(s,g,h);0!==o.negative;)g--,o.negative=0,o._ishlnsubmul(s,1,h),o.isZero()||(o.negative^=1);u&&(u.words[h]=g)}return u&&u.strip(),o.strip(),'div'!==n&&0!=r&&o.iushrn(r),{div:u||null,mod:o}},v.prototype.divmod=function(t,n,a){if(o(!t.isZero()),this.isZero())return{div:new v(0),mod:new v(0)};var r,s,d;return 0!==this.negative&&0===t.negative?(d=this.neg().divmod(t,n),'mod'!==n&&(r=d.div.neg()),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(d=this.divmod(t.neg(),n),'mod'!==n&&(r=d.div.neg()),{div:r,mod:d.mod}):0==(this.negative&t.negative)?t.length>this.length||0>this.cmp(t)?{div:new v(0),mod:this}:1===t.length?'div'===n?{div:this.divn(t.words[0]),mod:null}:'mod'===n?{div:null,mod:new v(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new v(this.modn(t.words[0]))}:this._wordDiv(t,n):(d=this.neg().divmod(t.neg(),n),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:d.div,mod:s})},v.prototype.div=function(t){return this.divmod(t,'div',!1).div},v.prototype.mod=function(t){return this.divmod(t,'mod',!1).mod},v.prototype.umod=function(t){return this.divmod(t,'mod',!0).mod},v.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0===n.div.negative?n.mod:n.mod.isub(t),r=t.ushrn(1),o=t.andln(1),s=a.cmp(r);return 0>s||1===o&&0===s?n.div:0===n.div.negative?n.div.iaddn(1):n.div.isubn(1)},v.prototype.modn=function(t){o(67108863>=t);for(var n=0,a=this.length-1;0<=a;a--)n=(67108864%t*n+(0|this.words[a]))%t;return n},v.prototype.idivn=function(t){o(67108863>=t);for(var n=0,a=this.length-1,r;0<=a;a--)r=(0|this.words[a])+67108864*n,this.words[a]=0|r/t,n=r%t;return this.strip()},v.prototype.divn=function(t){return this.clone().idivn(t)},v.prototype.egcd=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=new v(0),l=new v(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var u=a.clone(),f=n.clone();!n.isZero();){for(var m=0,h=1;0==(n.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(n.iushrn(m);0<m--;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(f)),r.iushrn(1),s.iushrn(1);for(var g=0,b=1;0==(a.words[0]&b)&&26>g;++g,b<<=1);if(0<g)for(a.iushrn(g);0<g--;)(d.isOdd()||l.isOdd())&&(d.iadd(u),l.isub(f)),d.iushrn(1),l.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(d),s.isub(l)):(a.isub(n),d.isub(r),l.isub(s))}return{a:d,b:l,gcd:a.iushln(c)}},v.prototype._invmp=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=a.clone();0<n.cmpn(1)&&0<a.cmpn(1);){for(var l=0,c=1;0==(n.words[0]&c)&&26>l;++l,c<<=1);if(0<l)for(n.iushrn(l);0<l--;)r.isOdd()&&r.iadd(d),r.iushrn(1);for(var u=0,f=1;0==(a.words[0]&f)&&26>u;++u,f<<=1);if(0<u)for(a.iushrn(u);0<u--;)s.isOdd()&&s.iadd(d),s.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(s)):(a.isub(n),s.isub(r))}var m;return m=0===n.cmpn(1)?r:s,0>m.cmpn(0)&&m.iadd(t),m},v.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var o=this.clone(),a=n.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},v.prototype.invm=function(t){return this.egcd(t).a.umod(t)},v.prototype.isEven=function(){return 0==(1&this.words[0])},v.prototype.isOdd=function(){return 1==(1&this.words[0])},v.prototype.andln=function(t){return this.words[0]&t},v.prototype.bincn=function(t){o('number'==typeof t);var n=t%26,a=(t-n)/26,r=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=r,this;for(var s=r,d=a,l;0!=s&&d<this.length;d++)l=0|this.words[d],l+=s,s=l>>>26,l&=67108863,this.words[d]=l;return 0!=s&&(this.words[d]=s,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(t){var n=0>t;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;this.strip();var a;if(1<this.length)a=1;else{n&&(t=-t),o(67108863>=t,'Number is too big');var r=0|this.words[0];a=r===t?0:r<t?-1:1}return 0===this.negative?a:0|-a},v.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0===this.negative?n:0|-n},v.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,r=this.length-1;0<=r;r--){var o=0|this.words[r],a=0|t.words[r];if(o!=a){o<a?n=-1:o>a&&(n=1);break}}return n},v.prototype.gtn=function(t){return 1===this.cmpn(t)},v.prototype.gt=function(t){return 1===this.cmp(t)},v.prototype.gten=function(t){return 0<=this.cmpn(t)},v.prototype.gte=function(t){return 0<=this.cmp(t)},v.prototype.ltn=function(t){return-1===this.cmpn(t)},v.prototype.lt=function(t){return-1===this.cmp(t)},v.prototype.lten=function(t){return 0>=this.cmpn(t)},v.prototype.lte=function(t){return 0>=this.cmp(t)},v.prototype.eqn=function(t){return 0===this.cmpn(t)},v.prototype.eq=function(t){return 0===this.cmp(t)},v.red=function(t){return new N(t)},v.prototype.toRed=function(t){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),t.convertTo(this)._forceRed(t)},v.prototype.fromRed=function(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},v.prototype._forceRed=function(t){return this.red=t,this},v.prototype.forceRed=function(t){return o(!this.red,'Already a number in reduction context'),this._forceRed(t)},v.prototype.redAdd=function(t){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,t)},v.prototype.redIAdd=function(t){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,t)},v.prototype.redSub=function(t){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,t)},v.prototype.redISub=function(t){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,t)},v.prototype.redShl=function(t){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,t)},v.prototype.redMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.mul(this,t)},v.prototype.redIMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.imul(this,t)},v.prototype.redSqr=function(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(t){return o(this.red&&!t.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,t)};var D={k256:null,p224:null,p192:null,p25519:null};T.prototype._tmp=function(){var t=new v(null);return t.words=Array(b(this.n/13)),t},T.prototype.ireduce=function(t){var n=t,a;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),a=n.bitLength();while(a>this.n);var r=a<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},T.prototype.split=function(t,n){t.iushrn(this.n,0,n)},T.prototype.imulK=function(t){return t.imul(this.k)},r(E,T),E.prototype.split=function(t,n){for(var a=4194303,r=_(t.length,9),o=0;o<r;o++)n.words[o]=t.words[o];if(n.length=r,9>=t.length)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(n.words[n.length++]=s&a,o=10;o<t.length;o++){var d=0|t.words[o];t.words[o-10]=(d&a)<<4|s>>>22,s=d}s>>>=22,t.words[o-10]=s,t.length-=0===s&&10<t.length?10:9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0,r;a<t.length;a++)r=0|t.words[a],n+=977*r,t.words[a]=67108863&n,n=64*r+(0|n/67108864);return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(S,T),r(A,T),r(I,T),I.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var r=19*(0|t.words[a])+n,o=67108863&r;r>>>=26,t.words[a]=o,n=r}return 0!=n&&(t.words[t.length++]=n),t},v._prime=function(t){if(D[t])return D[t];var n;if('k256'===t)n=new E;else if('p224'===t)n=new S;else if('p192'===t)n=new A;else if('p25519'===t)n=new I;else throw new Error('Unknown prime '+t);return D[t]=n,n},N.prototype._verify1=function(t){o(0===t.negative,'red works only with positives'),o(t.red,'red works only with red numbers')},N.prototype._verify2=function(t,n){o(0==(t.negative|n.negative),'red works only with positives'),o(t.red&&t.red===n.red,'red works only with red numbers')},N.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},N.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},N.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a._forceRed(this)},N.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a},N.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a._forceRed(this)},N.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a},N.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},N.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},N.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},N.prototype.isqr=function(t){return this.imul(t,t.clone())},N.prototype.sqr=function(t){return this.mul(t,t)},N.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var d=this.m.add(new v(1)).iushrn(2);return this.pow(n,d)}for(var l=this.m.subn(1),u=0;!l.isZero()&&0===l.andln(1);)u++,l.iushrn(1);o(!l.isZero());var s=new v(1).toRed(this),f=s.redNeg(),h=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new v(2*g*g).toRed(this);0!==this.pow(g,h).cmp(f);)g.redIAdd(f);for(var y=this.pow(g,l),c=this.pow(n,l.addn(1).iushrn(1)),r=this.pow(n,l),t=u;0!==r.cmp(s);){for(var m=r,w=0;0!==m.cmp(s);w++)m=m.redSqr();o(w<t);var x=this.pow(y,new v(1).iushln(t-w-1));c=c.redMul(x),y=x.redSqr(),r=r.redMul(y),t=w}return c},N.prototype.invm=function(t){var n=t._invmp(this.m);return 0===n.negative?this.imod(n):(n.negative=0,this.imod(n).redNeg())},N.prototype.pow=function(t,n){if(n.isZero())return new v(1).toRed(this);if(0===n.cmpn(1))return t.clone();var a=4,r=Array(1<<a);r[0]=new v(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var s=r[0],d=0,l=0,c=n.bitLength()%26;for(0==c&&(c=26),o=n.length-1;0<=o;o--){for(var u=n.words[o],f=c-1,m;0<=f;f--){if(m=1&u>>f,s!==r[0]&&(s=this.sqr(s)),0==m&&0==d){l=0;continue}d<<=1,d|=m,l++,l!=a&&(0!==o||0!==f)||(s=this.mul(s,r[d]),l=0,d=0)}c=26}return s},N.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},N.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},v.mont=function(t){return new j(t)},r(j,N),j.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},j.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},j.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new v(0)._forceRed(this);var r=n.mul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.invm=function(t){var n=this.imod(t._invmp(this.m).mul(this.r2));return n._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(7)(t))},function(t,n,a){function r(t,n){return d.call(this,n),l.isBuffer(t)?void(this.base=t,this.offset=0,this.length=t.length):void this.error('Input not Buffer')}function o(t,n){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof o||(t=new o(t,n)),this.length+=t.length,t},this);else if('number'==typeof t){if(!(0<=t&&255>=t))return n.error('non-byte EncoderBuffer value');this.value=t,this.length=1}else if('string'==typeof t)this.value=t,this.length=l.byteLength(t);else if(l.isBuffer(t))this.value=t,this.length=t.length;else return n.error('Unsupported type: '+typeof t)}var s=a(1),d=a(57).Reporter,l=a(0).Buffer;s(r,d),n.DecoderBuffer=r,r.prototype.save=function(){return{offset:this.offset,reporter:d.prototype.save.call(this)}},r.prototype.restore=function(t){var n=new r(this.base);return n.offset=t.offset,n.length=this.offset,this.offset=t.offset,d.prototype.restore.call(this,t.reporter),n},r.prototype.isEmpty=function(){return this.offset===this.length},r.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||'DecoderBuffer overrun')},r.prototype.skip=function(t,n){if(!(this.offset+t<=this.length))return this.error(n||'DecoderBuffer overrun');var a=new r(this.base);return a._reporterState=this._reporterState,a.offset=this.offset,a.length=this.offset+t,this.offset+=t,a},r.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},n.EncoderBuffer=o,o.prototype.join=function(t,n){return(t||(t=new l(this.length)),n||(n=0),0===this.length)?t:(Array.isArray(this.value)?this.value.forEach(function(a){a.join(t,n),n+=a.length}):('number'==typeof this.value?t[n]=this.value:'string'==typeof this.value?t.write(this.value,n):l.isBuffer(this.value)&&this.value.copy(t,n),n+=this.length),t)}},function(t,n,a){var r=n;r._reverse=function(t){var n={};return Object.keys(t).forEach(function(a){(0|a)==a&&(a|=0);var r=t[a];n[r]=a}),n},r.der=a(326)},function(t,n,a){function r(t){this.enc='der',this.name=t.name,this.entity=t,this.tree=new o,this.tree._init(t.body)}function o(t){u.Node.call(this,'der',t)}function s(t,n){var a=t.readUInt8(n);if(t.isError(a))return a;var r=m.tagClass[a>>6],o=0==(32&a);if(31==(31&a)){var s=a;for(a=0;128==(128&s);){if(s=t.readUInt8(n),t.isError(s))return s;a<<=7,a|=127&s}}else a&=31;var d=m.tag[a];return{cls:r,primitive:o,tag:a,tagStr:d}}function d(t,n,a){var r=t.readUInt8(a);if(t.isError(r))return r;if(!n&&128===r)return null;if(0==(128&r))return r;var o=127&r;if(4<o)return t.error('length octect is too long');r=0;for(var s=0;s<o;s++){r<<=8;var d=t.readUInt8(a);if(t.isError(d))return d;r|=d}return r}var l=a(1),c=a(56),u=c.base,f=c.bignum,m=c.constants.der;t.exports=r,r.prototype.decode=function(t,n){return t instanceof u.DecoderBuffer||(t=new u.DecoderBuffer(t,n)),this.tree._decode(t,n)},l(o,u.Node),o.prototype._peekTag=function(t,n,a){if(t.isEmpty())return!1;var r=t.save(),o=s(t,'Failed to peek tag: "'+n+'"');return t.isError(o)?o:(t.restore(r),o.tag===n||o.tagStr===n||o.tagStr+'of'===n||a)},o.prototype._decodeTag=function(t,n,a){var r=s(t,'Failed to decode tag of "'+n+'"');if(t.isError(r))return r;var o=d(t,r.primitive,'Failed to get length of "'+n+'"');if(t.isError(o))return o;if(!a&&r.tag!==n&&r.tagStr!==n&&r.tagStr+'of'!==n)return t.error('Failed to match tag: "'+n+'"');if(r.primitive||null!==o)return t.skip(o,'Failed to match body of: "'+n+'"');var l=t.save(),c=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(c)?c:(o=t.offset-l.offset,t.restore(l),t.skip(o,'Failed to match body of: "'+n+'"'))},o.prototype._skipUntilEnd=function(t,n){for(;;){var a=s(t,n);if(t.isError(a))return a;var r=d(t,a.primitive,n);if(t.isError(r))return r;var o;if(o=a.primitive||null!==r?t.skip(r):this._skipUntilEnd(t,n),t.isError(o))return o;if('end'===a.tagStr)break}},o.prototype._decodeList=function(t,n,a,r){for(var o=[];!t.isEmpty();){var s=this._peekTag(t,'end');if(t.isError(s))return s;var d=a.decode(t,'der',r);if(t.isError(d)&&s)break;o.push(d)}return o},o.prototype._decodeStr=function(t,n){if('bitstr'===n){var a=t.readUInt8();return t.isError(a)?a:{unused:a,data:t.raw()}}if('bmpstr'===n){var r=t.raw();if(1==r.length%2)return t.error('Decoding of string type: bmpstr length mismatch');for(var o='',s=0;s<r.length/2;s++)o+=x(r.readUInt16BE(2*s));return o}if('numstr'===n){var d=t.raw().toString('ascii');return this._isNumstr(d)?d:t.error('Decoding of string type: numstr unsupported characters')}if('octstr'===n)return t.raw();if('objDesc'===n)return t.raw();if('printstr'===n){var l=t.raw().toString('ascii');return this._isPrintstr(l)?l:t.error('Decoding of string type: printstr unsupported characters')}return /str$/.test(n)?t.raw().toString():t.error('Decoding of string type: '+n+' unsupported')},o.prototype._decodeObjid=function(t,n,a){for(var r=[],o=0,s,d;!t.isEmpty();)d=t.readUInt8(),o<<=7,o|=127&d,0==(128&d)&&(r.push(o),o=0);128&d&&r.push(o);var l=0|r[0]/40,c=r[0]%40;if(s=a?r:[l,c].concat(r.slice(1)),n){var u=n[s.join(' ')];void 0===u&&(u=n[s.join('.')]),void 0!==u&&(s=u)}return s},o.prototype._decodeTime=function(t,n){var a=t.raw().toString();if('gentime'===n)var r=0|a.slice(0,4),o=0|a.slice(4,6),s=0|a.slice(6,8),d=0|a.slice(8,10),l=0|a.slice(10,12),c=0|a.slice(12,14);else if('utctime'===n){var r=0|a.slice(0,2),o=0|a.slice(2,4),s=0|a.slice(4,6),d=0|a.slice(6,8),l=0|a.slice(8,10),c=0|a.slice(10,12);r=70>r?2e3+r:1900+r}else return t.error('Decoding '+n+' time is not supported yet');return Date.UTC(r,o-1,s,d,l,c,0)},o.prototype._decodeNull=function(){return null},o.prototype._decodeBool=function(t){var n=t.readUInt8();return t.isError(n)?n:0!==n},o.prototype._decodeInt=function(t,n){var a=t.raw(),r=new f(a);return n&&(r=n[r.toString(10)]||r),r},o.prototype._use=function(t,n){return'function'==typeof t&&(t=t(n)),t._getDecoder('der').tree}},function(t,n,a){function r(t){this.enc='der',this.name=t.name,this.entity=t,this.tree=new o,this.tree._init(t.body)}function o(t){f.Node.call(this,'der',t)}function s(t){return 10>t?'0'+t:t}function d(t,n,a,r){var o;if('seqof'===t?t='seq':'setof'===t&&(t='set'),m.tagByName.hasOwnProperty(t))o=m.tagByName[t];else if('number'==typeof t&&(0|t)===t)o=t;else return r.error('Unknown tag: '+t);return 31<=o?r.error('Multi-octet tag encoding unsupported'):(n||(o|=32),o|=m.tagClassByName[a||'universal']<<6,o)}var l=a(1),c=a(0).Buffer,u=a(56),f=u.base,m=u.constants.der;t.exports=r,r.prototype.encode=function(t,n){return this.tree._encode(t,n).join()},l(o,f.Node),o.prototype._encodeComposite=function(t,n,a,r){var o=d(t,n,a,this.reporter);if(128>r.length){var s=new c(2);return s[0]=o,s[1]=r.length,this._createEncoderBuffer([s,r])}for(var l=1,u=r.length;256<=u;u>>=8)l++;var s=new c(2+l);s[0]=o,s[1]=128|l;for(var u=1+l,f=r.length;0<f;u--,f>>=8)s[u]=255&f;return this._createEncoderBuffer([s,r])},o.prototype._encodeStr=function(t,n){if('bitstr'===n)return this._createEncoderBuffer([0|t.unused,t.data]);if('bmpstr'===n){for(var a=new c(2*t.length),r=0;r<t.length;r++)a.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(a)}return'numstr'===n?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error('Encoding of string type: numstr supports only digits and space'):'printstr'===n?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error('Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark'):/str$/.test(n)?this._createEncoderBuffer(t):'objDesc'===n?this._createEncoderBuffer(t):this.reporter.error('Encoding of string type: '+n+' unsupported')},o.prototype._encodeObjid=function(t,n,a){if('string'==typeof t){if(!n)return this.reporter.error('string objid given, but no values map found');if(!n.hasOwnProperty(t))return this.reporter.error('objid not found in values map');t=n[t].split(/[\s\.]+/g);for(var r=0;r<t.length;r++)t[r]|=0}else if(Array.isArray(t)){t=t.slice();for(var r=0;r<t.length;r++)t[r]|=0}if(!Array.isArray(t))return this.reporter.error('objid() should be either array or string, got: '+JSON.stringify(t));if(!a){if(40<=t[1])return this.reporter.error('Second objid identifier OOB');t.splice(0,2,40*t[0]+t[1])}for(var o=0,r=0,s;r<t.length;r++)for(s=t[r],o++;128<=s;s>>=7)o++;for(var d=new c(o),l=d.length-1,r=t.length-1,s;0<=r;r--)for(s=t[r],d[l--]=127&s;0<(s>>=7);)d[l--]=128|127&s;return this._createEncoderBuffer(d)},o.prototype._encodeTime=function(t,n){var a=new Date(t),r;return'gentime'===n?r=[s(a.getFullYear()),s(a.getUTCMonth()+1),s(a.getUTCDate()),s(a.getUTCHours()),s(a.getUTCMinutes()),s(a.getUTCSeconds()),'Z'].join(''):'utctime'===n?r=[s(a.getFullYear()%100),s(a.getUTCMonth()+1),s(a.getUTCDate()),s(a.getUTCHours()),s(a.getUTCMinutes()),s(a.getUTCSeconds()),'Z'].join(''):this.reporter.error('Encoding '+n+' time is not supported yet'),this._encodeStr(r,'octstr')},o.prototype._encodeNull=function(){return this._createEncoderBuffer('')},o.prototype._encodeInt=function(t,n){if('string'==typeof t){if(!n)return this.reporter.error('String int or enum given, but no values map');if(!n.hasOwnProperty(t))return this.reporter.error('Values map doesn\'t contain: '+JSON.stringify(t));t=n[t]}if('number'!=typeof t&&!c.isBuffer(t)){var a=t.toArray();!t.sign&&128&a[0]&&a.unshift(0),t=new c(a)}if(c.isBuffer(t)){var r=t.length;0===t.length&&r++;var o=new c(r);return t.copy(o),0===t.length&&(o[0]=0),this._createEncoderBuffer(o)}if(128>t)return this._createEncoderBuffer(t);if(256>t)return this._createEncoderBuffer([0,t]);for(var r=1,s=t;256<=s;s>>=8)r++;for(var o=Array(r),s=o.length-1;0<=s;s--)o[s]=255&t,t>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(new c(o))},o.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},o.prototype._use=function(t,n){return'function'==typeof t&&(t=t(n)),t._getEncoder('der').tree},o.prototype._skipDefault=function(t,n,a){var r=this._baseState,o;if(null===r['default'])return!1;var s=t.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r['default'],n,a).join()),s.length!==r.defaultBuffer.length)return!1;for(o=0;o<s.length;o++)if(s[o]!==r.defaultBuffer[o])return!1;return!0}},function(t){t.exports={"1.3.132.0.10":'secp256k1',"1.3.132.0.33":'p224',"1.2.840.10045.3.1.1":'p192',"1.2.840.10045.3.1.7":'p256',"1.3.132.0.34":'p384',"1.3.132.0.35":'p521'}},function(t,n,a){(function(n){function r(t){var a=new n(4);return a.writeUInt32BE(t,0),a}var o=a(53);t.exports=function(a,s){for(var d=new n(''),t=0,l;d.length<s;)l=r(t++),d=n.concat([d,o('sha1').update(a).update(l).digest()]);return d.slice(0,s)}}).call(n,a(0).Buffer)},function(t){t.exports=function(t,n){for(var a=t.length,r=-1;++r<a;)t[r]^=n[r];return t}},function(t,n,a){(function(n){var r=a(109);t.exports=function(t,a){return new n(t.toRed(r.mont(a.modulus)).redPow(new r(a.publicExponent)).fromRed().toArray())}}).call(n,a(0).Buffer)},function(t){'use strict';t.exports={makeDropTarget:function(t,n,a){var r=function(t){t.preventDefault(),t.dataTransfer.dropEffect='copy'},o=function(t){console.log('dragenter event dropEffect: '+t.dataTransfer.dropEffect),this.style.backgroundColor='#ccc',t.dataTransfer.dropEffect='link',console.log('dragenter event dropEffect 2: '+t.dataTransfer.dropEffect)},s=function(t){console.log('dragleave event dropEffect: '+t.dataTransfer.dropEffect),this.style.backgroundColor='white'},d=function(r){r.preventDefault&&r.preventDefault(),console.log('Drop event. dropEffect: '+r.dataTransfer.dropEffect),console.log('Drop event. types: '+(r.dataTransfer.types?r.dataTransfer.types.join(', '):'NOPE'));var o=null,s=this,d;if(r.dataTransfer.types){for(var l=0,t;l<r.dataTransfer.types.length;l++)if(t=r.dataTransfer.types[l],'text/uri-list'===t)o=r.dataTransfer.getData(t).split('\n'),console.log('Dropped text/uri-list: '+o);else if('text/plain'===t)d=r.dataTransfer.getData(t);else if('Files'===t&&a){for(var c=r.dataTransfer.files,u=0,m;m=c[u];u++)console.log('Filename: '+m.name+', type: '+(m.type||'n/a')+' size: '+m.size+' bytes, last modified: '+(m.lastModifiedDate?m.lastModifiedDate.toLocaleDateString():'n/a'));a(c)}null===o&&d&&'http'===d.slice(0,4)&&(o=d,console.log('Waring: Poor man\'s drop: using text for URI'))}else o=[r.dataTransfer.getData('Text')],console.log('WARNING non-standard drop event: '+o[0]);return console.log('Dropped URI list (2): '+o),o&&n(o),this.style.backgroundColor='white',!1};(function(t){t||console.log('@@@ addTargetListeners: ele '+t),t.addEventListener('dragover',r),t.addEventListener('dragenter',o),t.addEventListener('dragleave',s),t.addEventListener('drop',d)})(t,n)},makeDraggable:function(t,n){t.setAttribute('draggable','true'),t.addEventListener('dragstart',function(a){t.style.fontWeight='bold',a.dataTransfer.setData('text/uri-list',n.uri),a.dataTransfer.setData('text/plain',n.uri),a.dataTransfer.setData('text/html',t.outerHTML),console.log('Dragstart: '+t+' -> '+n+'de: '+a.dataTransfer.dropEffect)},!1),t.addEventListener('drag',function(t){t.preventDefault(),t.stopPropagation()},!1),t.addEventListener('dragend',function(a){t.style.fontWeight='normal',console.log('Dragend dropeffect: '+a.dataTransfer.dropEffect),console.log('Dragend: '+t+' -> '+n)},!1)}}},function(t,n,a){'use strict';function r(t,n){n&&(n.me=_.namedNode(t));var a;return t&&(a=t.uri||t),tabulator.preferences.set('me',a||''),a?_.namedNode(a):null}function o(){var t=h();if(t)return t;var n=tabulator.preferences.get('me');return n?_.sym(n):null}function s(t){var n=o();return n?Promise.resolve({me:n}):new Promise(function(n){var a=v(t.dom,function(a){n({me:r(a,t)})});t.div.appendChild(a)})}function d(t){if(t.publicProfile)return Promise.resolve(t);var n=E.store.fetcher,a;return s(t).then(function(t){var r=t.me;if(!r)throw new Error('Could not log in');return a=r.doc(),n.fetch(a)}).then(function(n){if(!n.ok)throw new Error(n.error);return t.publicProfile=a,t}).catch(function(n){var r='Cannot load profile '+a+' : '+n;return t.div.appendChild(k.errorMessageBlock(t.dom,r)),t})}function l(t){if(t.preferencesFile)return Promise.resolve(t);var n=E.store,a=t.statusArea||t.div||null,r=n.any(t.me,E.ns.space('preferencesFile')),o;return Promise.resolve().then(function(){if(!r){var s='Can\'t find a preferences file for user: '+t.me;throw k.errorMessageBlock(t.dom,s),new Error(s)}return t.preferencesFile=r,a&&(o=k.errorMessageBlock(t.dom,'(loading preferences '+r+')','straw'),a.appendChild(o)),n.fetcher.fetch(r)}).then(function(){return o&&o.parentNode.removeChild(o),t}).catch(function(t){throw new Error('Error loading preferences file. '+t)})}function c(t){var n=E.ns,a=E.store;return d(t).then(l).then(function(t){var r=t.me;t.index=t.index||{},t.index.private=a.each(r,n.solid('privateTypeIndex'),void 0,t.preferencesFile),t.index.public=a.each(r,n.solid('publicTypeIndex'),void 0,t.publicProfile);var o=t.index.private.concat(t.index.public);return 0===o.length?t:a.fetcher.load(o)}).then(function(){return t}).catch(function(n){throw C.complain(t,n),new Error('Error loading type indexes: '+n)})}function u(t){return new Promise(function(n){return c(t).then(function(t){var a=E.ns,r=E.store,o=t.me,s=function(t,n){return new Promise(function(s,d){var c={private:t.preferencesFile,public:t.publicProfile}[n];if(0===t.index[n].length){l=_.sym(t.preferencesFile.dir().uri+n+'TypeIndex.ttl'),console.log('Linking to new fresh type index '+l);var u=[_.st(o,a.solid(n+'TypeIndex'),l,c)];E.store.updater.update([],u,function(a,o,c){return o?(t.index[n].push(l),console.log('Creating new fresh type index '+l),!window.confirm('Creating new list of things  '+l))?d(new Error('Cancelled by user: writing of '+l)):void r.fetcher.webOperation('PUT',l,{data:'# '+new Date+' Blank initial Type index\n'}).then(function(){s(t)}).catch(function(t){d(new Error('Creating new index file '+t))}):d(new Error('Error saving type index link saving back '+a+': '+c))})}else s(t)})},d=[s(t,'private'),s(t,'public')],l;return Promise.all(d).then(function(){n(t)})})})}function f(t){var n=E.store,a=n.fetcher;return a.fetch(t).then(function(a){if(!a.ok)throw new Error('While fetching:'+a.error);var r=n.any(n.sym(t),n.sym('http://www.iana.org/assignments/link-relations/acl'));if(!r)throw new Error('No Link rel=ACL header for '+t);return r})}function m(t,n,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=o.public||[],d=_.graph(),l=_.Namespace('http://www.w3.org/ns/auth/acl#'),c=d.sym(r+'#a1'),a=d.sym(r),u=d.sym(t);if(d.add(c,E.ns.rdf('type'),l('Authorization'),a),d.add(c,l('accessTo'),u,a),o.defaultForNew&&d.add(c,l('defaultForNew'),u,a),d.add(c,l('agent'),n,a),d.add(c,l('mode'),l('Read'),a),d.add(c,l('mode'),l('Write'),a),d.add(c,l('mode'),l('Control'),a),s.length){c=d.sym(r+'#a2'),d.add(c,E.ns.rdf('type'),l('Authorization'),a),d.add(c,l('accessTo'),u,a),d.add(c,l('agentClass'),E.ns.foaf('Agent'),a);for(var f=0;f<s.length;f++)d.add(c,l('mode'),l(s[f]),a)}return _.serialize(a,d,r,'text/turtle')}function h(){if('undefined'!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.username)return console.log('Assuming the user is '+$SolidTestEnvironment.username),_.sym($SolidTestEnvironment.username);if('webapp'===tabulator.mode&&'undefined'!=typeof document&&document.location&&'http://localhost'===(''+document.location).slice(0,16)){var t=document.getElementById('appTarget');if(!t)return null;var n=t.getAttribute('testID');return n?(console.log('Assuming user is '+n),_.sym(n)):null}return null}function g(t,n){var a=t.createElement('div'),r=t.createElement('p');a.appendChild(r),a.className='mildNotice',r.innerHTML='Enter your Web ID or pod uri',console.log('widgets.signInOrSignUpBox');var o=t.createElement('input');a.appendChild(o),o.setAttribute('type','text'),o.setAttribute('id','idpInput'),o.size=40;var s=t.createElement('input');a.appendChild(s),s.setAttribute('type','button'),s.setAttribute('value','Log in (old)'),s.setAttribute('style','padding: 1em; border-radius:0.5em; margin: 2em;'),s.addEventListener('click',function(){var t=h();if(t)return n(t.uri);var a=document.getElementById('idpInput');return a&&''!==a.value?T.login(a.value).then(b).then(function(t){return n(t)}):window&&window.location&&window.location.href?T.login(window.location.href).then(b).then(function(t){return n(t)}):void 0},!1);var d=t.createElement('input');a.appendChild(d),d.setAttribute('type','button'),d.setAttribute('value','Log in'),d.setAttribute('style','padding: 1em; border-radius:0.5em; margin: 2em;'),d.addEventListener('click',function(){var t=h();if(t)return n(t.uri);document.getElementById('idpInput');return T.popupLogin({popupUri:S.popupUri}).then(function(t){var a=t.webId;n(a)})},!1);var l=t.createElement('input');return a.appendChild(l),l.setAttribute('type','button'),l.setAttribute('value','Sign Up'),l.setAttribute('style','padding: 1em; border-radius:0.5em; margin: 2em;'),l.addEventListener('click',function(){var t=new x.Signup;t.signup().then(function(t){console.log('signInOrSignUpBox signed up '+t),n(t)})},!1),a}function b(t){var n=t?t.webId:null;return n&&r(n),n}function y(t){var n=o();return n?Promise.resolve(t?t(n):n):T.currentSession().then(b).catch(function(t){return console.log('Error fetching currentSession:',t),null}).then(function(n){var a=r(n);return a&&console.log('(Logged in as '+a+' by authentication)'),t?t(a):a})}function v(t,n){var a=o(),r=t.createElement('div'),s=function(t){if(t){var o=t.uri||t;tabulator.preferences.set('me',o),a=_.sym(o),r.refresh(),n&&n(a.uri)}},d=function(){tabulator.preferences.set('me','');var t='Your Web ID was '+a+'. It has been forgotten.';a=null;try{E.log.alert(t)}catch(n){try{window.alert(t)}catch(t){}}r.refresh(),n&&n(null)},l=function(n){var a='Web ID logout';if(n){var r=E.store.any(n,E.ns.foaf('nick'))||E.store.any(n,E.ns.foaf('name'));r&&(a='Logout '+r.value)}var o=t.createElement('input');return o.className='WebIDCancelButton',o.setAttribute('type','button'),o.setAttribute('value',a),o.addEventListener('click',d,!1),o};return r.refresh=function(){var n=o(),a=n?n.uri:'';r.me!==a&&(C.clearElement(r),n?r.appendChild(l(n)):r.appendChild(g(t,s))),r.me=a},r.me='99999',r.refresh(),r}function w(t,n,a){var r=n.noun,s=n.appPathSegment,c=o(),u=E.store,f=t.createElement('div'),m=function(n){f.appendChild(k.errorMessageBlock(t,n))},h=function(t){var n=u.any(t,E.ns.space('uriPrefix'));n=n?n.value:t.uri.split('#')[0],'/'!==n.slice(-1)&&(console.log(s+': No / at end of uriPrefix '+n),n+='/');var a=new Date;return n+=s+'/id'+a.getTime()+'/',n};return d({me:c,dom:t,div:f}).then(l).then(function(n){var o=n.me,s=n.preferencesFile,d=null,l=u.statementsMatching(o,E.ns.space('workspace'),void 0,s).map(function(t){return t.object}),c=u.each(o,E.ns.space('storage'));c.map(function(t){l=l.concat(u.each(t,E.ns.ldp('contains')))}),1===l.length?(m('Workspace used: '+l[0].uri),d=h(l[0])):0===l.length&&m('You don\'t seem to have any workspaces. You have '+c.length+' storages.');var g=t.createElement('table');g.setAttribute('style','border-collapse:separate; border-spacing: 0.5em;'),f.appendChild(g),f.appendChild(t.createElement('hr'));var b=f.appendChild(t.createElement('p'));b.textContent='Where would you like to store the data for the '+r+'?  Give the URL of the directory where you would like the data stored.';var y=f.appendChild(t.createElement('input'));y.setAttribute('type','text'),y.size=80,y.label='base URL',y.autocomplete='on',d&&(y.value=d),n.baseField=y,f.appendChild(t.createElement('br'));var v=f.appendChild(t.createElement('button'));v.textContent='Start new '+r+' at this URI',v.addEventListener('click',function(){var t=y.value;'/'!==t.slice(-1)&&(t+='/'),a(null,t)}),l=l.filter(function(t){return!u.holds(t,E.ns.rdf('type'),E.ns.space('MasterWorkspace'))});for(var w='height: 3em; margin: 1em; padding: 1em white; border-radius: 0.3em;',x=w+'border: 0px;',_=0,k,C,T,S,A,I,N;_<l.length;_++){if(A=l[_],S=t.createElement('tr'),0===_&&(k=t.createElement('td'),k.setAttribute('rowspan',''+l.length+1),k.textContent='Chose a workspace for this:',k.setAttribute('style','vertical-align:middle;'),S.appendChild(k)),C=t.createElement('td'),I=u.any(A,E.ns.ui('style')),I)I=I.value;else{var j=function(t){return t.split('').reduce(function(t,n){return t=(t<<5)-t+n.charCodeAt(0),t&t},0)},R='#'+(12632256|16777215&j(A.uri)).toString(16);I='color: black ; background-color: '+R+';'}C.setAttribute('style',x+I),S.target=A.uri;var L=u.any(A,E.ns.rdfs('label'));L||(L=A.uri.split('/').slice(-1)[0]||A.uri.split('/').slice(-2)[0]),C.textContent=L||'???',S.appendChild(C),0===_&&(T=t.createElement('td'),T.setAttribute('rowspan',''+l.length+1),T.setAttribute('style','width:50%;'),S.appendChild(T)),g.appendChild(S);var O=function(t,n,a,r){t.addEventListener('click',function(){T.textContent=n,T.setAttribute('style',a),T.appendChild(P(r))},!0)},P=function(n){var r=t.createElement('button');r.textContent='Continue';var o=h(n);return y.value=o,r.addEventListener('click',function(){r.disabled=!0,a(n,o),r.textContent='---->'},!0),r};N=u.any(A,E.ns.rdfs('comment')),N=N?N.value:'Use this workspace',O(C,N?N.value:'',x+I,A)}var M=t.createElement('tr');C=t.createElement('td'),C.setAttribute('style',w),C.textContent='+ Make a new workspace',M.appendChild(C),g.appendChild(M)}),f}var x=a(343),_=a(18),k=a(76),C=a(21),T=a(183),E={log:a(19),ns:a(9),store:a(14)},S=$SOLID_GLOBAL_config;t.exports={checkCurrentUser:function(){return y()},checkUser:y,currentUser:o,findAppInstances:function(t,n){var a=E.store,o=E.ns,s=E.store.fetcher,d=a.each(void 0,o.solid('forClass'),n),l=[],u=[];return c(t).then(function(){for(var t=0;t<d.length;t++)l=l.concat(a.each(n,o.solid('instance'))),u=u.concat(a.each(n,o.solid('instanceContainer')));return u.length?s.load(u).then(function(){for(var t=0,n;t<u.length;t++)n=u[t],l=l.concat(a.each(n,o.ldp('contains')))}):void 0}).then(function(){return t.instances=l,t.containers=u,t}).catch(function(t){throw new Error('Error looking for instances of '+n+': '+t)})},findOriginOwner:function(t){var n=t.uri||t,a=n.indexOf('://');if(0>a)return!1;var r=n.indexOf('/',a+3);if(0>r)return!1;var o=n.slice(0,r+1);return o},loadTypeIndexes:c,logIn:s,loginStatusBox:v,newAppInstance:function(t,n,a){var r=function(t,n){a(t,n)},o=t.createElement('div'),s=t.createElement('button');return s.setAttribute('type','button'),o.appendChild(s),s.innerHTML='Make new '+n.noun,s.addEventListener('click',function(){o.appendChild(w(t,n,r))},!1),o.appendChild(s),o},offlineTestID:h,registrationControl:function(t,n,a){var o=E.store,s=E.ns,r=t.dom,d=r.createElement('div');return t.div.appendChild(d),u(t).then(function(t){d.innerHTML='<table><tbody><tr></tr><tr></tr></tbody></table>',d.setAttribute('style','font-size: 120%; text-align: right; padding: 1em; border: solid gray 0.05em;');var r=d.children[0].children[0],l=o.bnode(),c=function(t){var r=o.each(void 0,s.solid('instance'),n).filter(function(t){return o.holds(t,s.solid('forClass'),a)}),d=r.length?r[0]:C.newThing(t);return[_.st(d,s.solid('instance'),n,t),_.st(d,s.solid('forClass'),a,t)]},u,f;return t.index.public&&0<t.index.public.length&&(u=t.index.public[0],f=c(u),r.children[0].appendChild(C.buildCheckboxForm(t.dom,E.store,'Public link to this '+t.noun,null,f,l,u))),t.index.private&&0<t.index.private.length&&(u=t.index.private[0],f=c(u),r.children[1].appendChild(C.buildCheckboxForm(t.dom,E.store,'Personal note of this '+t.noun,null,f,l,u))),t})},registrationList:function(t,n){var a=E.store,r=E.ns,o=t.dom,s=o.createElement('div');return t.div.appendChild(s),u(t).then(function(){s.innerHTML='<table><tbody></tbody></table>',s.setAttribute('style','font-size: 120%; text-align: right; padding: 1em; border: solid #eee 0.5em;');var d=s.firstChild,l=[],c=[];['private','public'].forEach(function(o){n[o]&&(l=l.concat(t.index[o][0]),c=c.concat(a.statementsMatching(void 0,r.solid('instance'),void 0,t.index[o][0])))});for(var u=0;u<c.length;u++){var f=c[u],m=f.object,h=function(){a.updater.update([f],[],function(t,n,a){n?console.log('Removed from index: '+f.subject):console.log('Error: Cannot delete '+f+': '+a)})},g=C.personTR(o,r.solid('instance'),m,{deleteFunction:h});d.appendChild(g)}return t})},selectWorkspace:w,setACLUserPublic:function(t,n,a){var r=E.store,o=r.any(r.sym(t),r.sym('http://www.iana.org/assignments/link-relations/acl'));return Promise.resolve().then(function(){return o?o:f(t).catch(function(n){throw new Error('Error fetching rel=ACL header for '+t+': '+n)})}).then(function(o){var s=m(t,n,o.uri,a);return r.fetcher.webOperation('PUT',o.uri,{data:s,contentType:'text/turtle'}).then(function(t){if(!t.ok)throw new Error('Error writing ACL text: '+t.error);return o})})},saveUser:r,solidAuthClient:T}},function(t){'use strict';t.exports={authEndpoint:'',fallbackAuthEndpoint:'https://databox.me/',signupEndpoint:'https://solid.github.io/solid-idps/',signupWindowHeight:600,signupWindowWidth:1024,key:'',cert:''}},function(t,n,a){(function(t){function a(){if(l!=void 0)return l;if(t.XMLHttpRequest){l=new t.XMLHttpRequest;try{l.open('GET',t.XDomainRequest?'/':'https://example.com')}catch(t){l=null}}else l=null;return l}function r(t){var n=a();if(!n)return!1;try{return n.responseType=t,n.responseType===t}catch(t){}return!1}function o(t){return'function'==typeof t}n.fetch=o(t.fetch)&&o(t.ReadableStream),n.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),n.blobConstructor=!0}catch(t){}var s='undefined'!=typeof t.ArrayBuffer,d=s&&o(t.ArrayBuffer.prototype.slice),l;n.arraybuffer=n.fetch||s&&r('arraybuffer'),n.msstream=!n.fetch&&d&&r('ms-stream'),n.mozchunkedarraybuffer=!n.fetch&&s&&r('moz-chunked-arraybuffer'),n.overrideMimeType=n.fetch||!!a()&&o(a().overrideMimeType),n.vbArray=o(t.VBArray),l=null}).call(n,a(3))},function(t,n,a){'use strict';function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,n,a){if(t&&d.isObject(t)&&t instanceof r)return t;var o=new r;return o.parse(t,n,a),o}var s=a(353),d=a(354);n.parse=o,n.resolve=function(t,n){return o(t,!1,!0).resolve(n)},n.resolveObject=function(t,n){return t?o(t,!1,!0).resolveObject(n):n},n.format=function(t){return d.isString(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)},n.Url=r;var c=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=['{','}','|','\\','^','`'].concat(['<','>','"','`',' ','\r','\n','\t']),m=['\''].concat(f),h=['%','/','?',';','#'].concat(m),g=['/','?','#'],b=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=a(355);r.prototype.parse=function(t,n,a){if(!d.isString(t))throw new TypeError('Parameter \'url\' must be a string, not '+typeof t);var r=t.indexOf('?'),o=-1!==r&&r<t.indexOf('#')?'?':'#',f=t.split(o),C=/\\/g;f[0]=f[0].replace(C,'/'),t=f.join(o);var T=t;if(T=T.trim(),!a&&1===t.split('#').length){var E=u.exec(T);if(E)return this.path=T,this.href=T,this.pathname=E[1],E[2]?(this.search=E[2],this.query=n?_.parse(this.search.substr(1)):this.search.substr(1)):n&&(this.search='',this.query={}),this}var S=c.exec(T);if(S){S=S[0];var A=S.toLowerCase();this.protocol=A,T=T.substr(S.length)}if(a||S||T.match(/^\/\/[^@\/]+@[^@\/]+/)){var I='//'===T.substr(0,2);I&&!(S&&w[S])&&(T=T.substr(2),this.slashes=!0)}if(!w[S]&&(I||S&&!x[S])){for(var N=-1,R=0,L;R<g.length;R++)L=T.indexOf(g[R]),-1!==L&&(-1==N||L<N)&&(N=L);var O,P;P=-1===N?T.lastIndexOf('@'):T.lastIndexOf('@',N),-1!==P&&(O=T.slice(0,P),T=T.slice(P+1),this.auth=decodeURIComponent(O)),N=-1;for(var R=0,L;R<h.length;R++)L=T.indexOf(h[R]),-1!==L&&(-1===N||L<N)&&(N=L);-1===N&&(N=T.length),this.host=T.slice(0,N),T=T.slice(N),this.parseHost(),this.hostname=this.hostname||'';var M='['===this.hostname[0]&&']'===this.hostname[this.hostname.length-1];if(!M)for(var D=this.hostname.split(/\./),R=0,B=D.length,l;R<B;R++)if(l=D[R],l&&!l.match(b)){for(var U='',q=0,j=l.length;q<j;q++)U+=127<l.charCodeAt(q)?'x':l[q];if(!U.match(b)){var k=D.slice(0,R),F=D.slice(R+1),z=l.match(y);z&&(k.push(z[1]),F.unshift(z[2])),F.length&&(T='/'+F.join('.')+T),this.hostname=k.join('.');break}}this.hostname=this.hostname.length>255?'':this.hostname.toLowerCase(),M||(this.hostname=s.toASCII(this.hostname));var H=this.port?':'+this.port:'',W=this.hostname||'';this.host=W+H,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),'/'!==T[0]&&(T='/'+T))}if(!v[A])for(var R=0,B=m.length,V;R<B;R++)if(V=m[R],-1!==T.indexOf(V)){var G=encodeURIComponent(V);G===V&&(G=escape(V)),T=T.split(V).join(G)}var K=T.indexOf('#');-1!==K&&(this.hash=T.substr(K),T=T.slice(0,K));var J=T.indexOf('?');if(-1===J?n&&(this.search='',this.query={}):(this.search=T.substr(J),this.query=T.substr(J+1),n&&(this.query=_.parse(this.query)),T=T.slice(0,J)),T&&(this.pathname=T),x[A]&&this.hostname&&!this.pathname&&(this.pathname='/'),this.pathname||this.search){var H=this.pathname||'',X=this.search||'';this.path=H+X}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||'';t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,':'),t+='@');var n=this.protocol||'',a=this.pathname||'',r=this.hash||'',o=!1,s='';this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(':')?this.hostname:'['+this.hostname+']'),this.port&&(o+=':'+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(s=_.stringify(this.query));var l=this.search||s&&'?'+s||'';return n&&':'!==n.substr(-1)&&(n+=':'),this.slashes||(!n||x[n])&&!1!==o?(o='//'+(o||''),a&&'/'!==a.charAt(0)&&(a='/'+a)):!o&&(o=''),r&&'#'!==r.charAt(0)&&(r='#'+r),l&&'?'!==l.charAt(0)&&(l='?'+l),a=a.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),l=l.replace('#','%23'),n+o+a+l+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(d.isString(t)){var n=new r;n.parse(t,!1,!0),t=n}for(var a=new r,o=Object.keys(this),l=0,c;l<o.length;l++)c=o[l],a[c]=this[c];if(a.hash=t.hash,''===t.href)return a.href=a.format(),a;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),f=0,m;f<u.length;f++)m=u[f],'protocol'!==m&&(a[m]=t[m]);return x[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname='/'),a.href=a.format(),a}if(t.protocol&&t.protocol!==a.protocol){if(!x[t.protocol]){for(var h=Object.keys(t),g=0,b;g<h.length;g++)b=h[g],a[b]=t[b];return a.href=a.format(),a}if(a.protocol=t.protocol,!t.host&&!w[t.protocol]){for(var y=(t.pathname||'').split('/');y.length&&!(t.host=y.shift()););t.host||(t.host=''),t.hostname||(t.hostname=''),''!==y[0]&&y.unshift(''),2>y.length&&y.unshift(''),a.pathname=y.join('/')}else a.pathname=t.pathname;if(a.search=t.search,a.query=t.query,a.host=t.host||'',a.auth=t.auth,a.hostname=t.hostname||t.host,a.port=t.port,a.pathname||a.search){var v=a.pathname||'',_=a.search||'';a.path=v+_}return a.slashes=a.slashes||t.slashes,a.href=a.format(),a}var s=a.pathname&&'/'===a.pathname.charAt(0),k=t.host||t.pathname&&'/'===t.pathname.charAt(0),C=k||s||a.host&&t.pathname,T=C,E=a.pathname&&a.pathname.split('/')||[],y=t.pathname&&t.pathname.split('/')||[],S=a.protocol&&!x[a.protocol];if(S&&(a.hostname='',a.port=null,a.host&&(''===E[0]?E[0]=a.host:E.unshift(a.host)),a.host='',t.protocol&&(t.hostname=null,t.port=null,t.host&&(''===y[0]?y[0]=t.host:y.unshift(t.host)),t.host=null),C=C&&(''===y[0]||''===E[0])),k)a.host=t.host||''===t.host?t.host:a.host,a.hostname=t.hostname||''===t.hostname?t.hostname:a.hostname,a.search=t.search,a.query=t.query,E=y;else if(y.length)E||(E=[]),E.pop(),E=E.concat(y),a.search=t.search,a.query=t.query;else if(!d.isNullOrUndefined(t.search)){if(S){a.hostname=a.host=E.shift();var A=a.host&&0<a.host.indexOf('@')&&a.host.split('@');A&&(a.auth=A.shift(),a.host=a.hostname=A.shift())}return a.search=t.search,a.query=t.query,d.isNull(a.pathname)&&d.isNull(a.search)||(a.path=(a.pathname?a.pathname:'')+(a.search?a.search:'')),a.href=a.format(),a}if(!E.length)return a.pathname=null,a.path=a.search?'/'+a.search:null,a.href=a.format(),a;for(var I=E.slice(-1)[0],N=(a.host||t.host||1<E.length)&&('.'===I||'..'===I)||''===I,j=0,R=E.length;0<=R;R--)I=E[R],'.'===I?E.splice(R,1):'..'===I?(E.splice(R,1),j++):j&&(E.splice(R,1),j--);if(!C&&!T)for(;j--;j)E.unshift('..');C&&''!==E[0]&&(!E[0]||'/'!==E[0].charAt(0))&&E.unshift(''),N&&'/'!==E.join('/').substr(-1)&&E.push('');var L=''===E[0]||E[0]&&'/'===E[0].charAt(0);if(S){a.hostname=a.host=L?'':E.length?E.shift():'';var A=a.host&&0<a.host.indexOf('@')&&a.host.split('@');A&&(a.auth=A.shift(),a.host=a.hostname=A.shift())}return C=C||a.host&&E.length,C&&!L&&E.unshift(''),E.length?a.pathname=E.join('/'):(a.pathname=null,a.path=null),d.isNull(a.pathname)&&d.isNull(a.search)||(a.path=(a.pathname?a.pathname:'')+(a.search?a.search:'')),a.auth=t.auth||a.auth,a.slashes=a.slashes||t.slashes,a.href=a.format(),a},r.prototype.parseHost=function(){var t=this.host,n=l.exec(t);n&&(n=n[0],':'!==n&&(this.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(this.hostname=t)}},function(t,n,a){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var r=a(359);Object.defineProperty(n,'login',{enumerable:!0,get:function(){return r.login}}),Object.defineProperty(n,'popupLogin',{enumerable:!0,get:function(){return r.popupLogin}}),Object.defineProperty(n,'currentSession',{enumerable:!0,get:function(){return r.currentSession}}),Object.defineProperty(n,'logout',{enumerable:!0,get:function(){return r.logout}}),Object.defineProperty(n,'fetch',{enumerable:!0,get:function(){return r.fetch}})},function(t,n,a){t.exports=!a(30)&&!a(59)(function(){return 7!=Object.defineProperty(a(110)('div'),'a',{get:function(){return 7}}).a})},function(t,n,a){var r=a(35),o=a(47),s=a(364)(!1),d=a(115)('IE_PROTO');t.exports=function(t,n){var a=o(t),l=0,c=[],u;for(u in a)u!=d&&r(a,u)&&c.push(u);for(;n.length>l;)r(a,u=n[l++])&&(~s(c,u)||c.push(u));return c}},function(t,n,a){var r=a(61);t.exports=Object('z').propertyIsEnumerable(0)?Object:function(t){return'String'==r(t)?t.split(''):Object(t)}},function(){},function(t,n,a){'use strict';var r=a(83),o=a(28),s=a(189),d=a(34),l=a(35),c=a(62),u=a(370),f=a(84),m=a(372),h=a(11)('iterator'),g=!([].keys&&'next'in[].keys()),b='keys',y='values',v=function(){return this};t.exports=function(t,n,a,w,x,_,k){u(a,n,w);var C=function(t){return!g&&t in A?A[t]:t===b?function(){return new a(this,t)}:t===y?function(){return new a(this,t)}:function(){return new a(this,t)}},T=n+' Iterator',E=x==y,S=!1,A=t.prototype,I=A[h]||A['@@iterator']||x&&A[x],N=I||C(x),j=x?E?C('entries'):N:void 0,R='Array'==n?A.entries||I:I,L,O,P;if(R&&(P=m(R.call(new t)),P!==Object.prototype&&P.next&&(f(P,T,!0),!r&&!l(P,h)&&d(P,h,v))),E&&I&&I.name!==y&&(S=!0,N=function(){return I.call(this)}),(!r||k)&&(g||S||!A[h])&&d(A,h,N),c[n]=N,c[T]=v,x)if(L={values:E?N:C(y),keys:_?N:C(b),entries:j},k)for(O in L)O in A||s(A,O,L[O]);else o(o.P+o.F*(g||S),n,L);return L}},function(t,n,a){t.exports=a(34)},function(t,n,a){var r=a(29),o=a(371),s=a(117),d=a(115)('IE_PROTO'),l=function(){},c='prototype',u=function(){var t=a(110)('iframe'),n=s.length,r='<',o='>',d;for(t.style.display='none',a(191).appendChild(t),t.src='javascript:',d=t.contentWindow.document,d.open(),d.write(r+'script'+o+'document.F=Object'+r+'/script'+o),d.close(),u=d.F;n--;)delete u[c][s[n]];return u()};t.exports=Object.create||function(t,n){var a;return null===t?a=u():(l[c]=r(t),a=new l,l[c]=null,a[d]=t),void 0===n?a:o(a,n)}},function(t,n,a){var r=a(10).document;t.exports=r&&r.documentElement},function(t,n,a){a(373);for(var r=a(10),o=a(34),s=a(62),d=a(11)('toStringTag'),l='CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList'.split(','),c=0;c<l.length;c++){var u=l[c],f=r[u],m=f&&f.prototype;m&&!m[d]&&o(m,d,u),s[u]=s.Array}},function(t,n,a){var r=a(61),o=a(11)('toStringTag'),s='Arguments'==r(function(){return arguments}()),d=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,a,l;return t===void 0?'Undefined':null===t?'Null':'string'==typeof(a=d(n=Object(t),o))?a:s?r(n):'Object'==(l=r(n))&&'function'==typeof n.callee?'Arguments':l}},function(t,n,a){var r=a(29);t.exports=function(t,n,a,o){try{return o?n(r(a)[0],a[1]):n(a)}catch(n){var s=t['return'];throw void 0!==s&&r(s.call(t)),n}}},function(t,n,a){var r=a(62),o=a(11)('iterator'),s=Array.prototype;t.exports=function(t){return t!==void 0&&(r.Array===t||s[o]===t)}},function(t,n,a){var r=a(193),o=a(11)('iterator'),s=a(62);t.exports=a(16).getIteratorMethod=function(t){if(t!=void 0)return t[o]||t['@@iterator']||s[r(t)]}},function(t,n,a){var r=a(29),o=a(78),s=a(11)('species');t.exports=function(t,n){var a=r(t).constructor,d;return a===void 0||(d=r(a)[s])==void 0?n:o(d)}},function(t,n,a){var r=a(58),o=a(379),s=a(191),d=a(110),l=a(10),c=l.process,u=l.setImmediate,f=l.clearImmediate,m=l.MessageChannel,h=l.Dispatch,g=0,b={},y='onreadystatechange',v=function(){var t=+this;if(b.hasOwnProperty(t)){var n=b[t];delete b[t],n()}},w=function(t){v.call(t.data)},x,_,k;u&&f||(u=function(t){for(var n=[],a=1;arguments.length>a;)n.push(arguments[a++]);return b[++g]=function(){o('function'==typeof t?t:Function(t),n)},x(g),g},f=function(t){delete b[t]},'process'==a(61)(c)?x=function(t){c.nextTick(r(v,t,1))}:h&&h.now?x=function(t){h.now(r(v,t,1))}:m?(_=new m,k=_.port2,_.port1.onmessage=w,x=r(k.postMessage,k,1)):l.addEventListener&&'function'==typeof postMessage&&!l.importScripts?(x=function(t){l.postMessage(t+'','*')},l.addEventListener('message',w,!1)):y in d('script')?x=function(t){s.appendChild(d('script'))[y]=function(){s.removeChild(this),v.call(t)}}:x=function(t){setTimeout(r(v,t,1),0)}),t.exports={set:u,clear:f}},function(t){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,a){var r=a(29),o=a(46),s=a(121);t.exports=function(t,n){if(r(t),o(n)&&n.constructor===t)return n;var a=s.f(t),d=a.resolve;return d(n),a.promise}},function(t,n,a){var r=a(11)('iterator'),o=!1;try{var s=[7][r]();s['return']=function(){o=!0},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var a=!1;try{var s=[7],d=s[r]();d.next=function(){return{done:a=!0}},s[r]=function(){return d},t(s)}catch(t){}return a}},function(t,n,a){'use strict';n.__esModule=!0;var r=a(387),o=function(t){return t&&t.__esModule?t:{default:t}}(r);n.default=function(t,n,a){return n in t?(0,o.default)(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.combineHandlers=n.server=n.client=void 0;var o=a(36),s=r(o),d=a(37),l=r(d),c=a(82),u=r(c),f=a(392),m=r(f),h=a(202),g=r(h),b=a(405),y=r(b),v='solid-auth-client',w=function(t){return(0,g.default)({},v,t)},x=function(t){if(!t||'object'!==('undefined'==typeof t?'undefined':(0,m.default)(t)))return null;var n=t[v];return n&&'object'===('undefined'==typeof n?'undefined':(0,m.default)(n))?n:null},_=function(t){var n=x(t);if(!n)return null;var a=n.id,r=n.ret;return null!=a&&'string'==typeof a&&n.hasOwnProperty('ret')?{id:a,ret:r}:null},k=function(t){var n=x(t);if(!n)return null;var a=n.id,r=n.method,o=n.args;return null!=a&&'string'==typeof a&&'string'==typeof r&&Array.isArray(o)?{id:a,method:r,args:o}:null},C=n.client=function(t,n){return function(a){return new u.default(function(r){var o=(0,y.default)();window.addEventListener('message',function t(a){var s=a.data,d=a.origin,l=_(s);d===n&&l&&l.id===o&&(r(l.ret),window.removeEventListener('message',t))}),t.postMessage({"solid-auth-client":{id:o,method:a.method,args:a.args}},n)})}},T=n.server=function(t,n){return function(a){var r=function(){var r=(0,l.default)(s.default.mark(function r(o){var d,l,c,u;return s.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(d=o.data,l=o.origin,c=k(d),c){r.next=4;break}return r.abrupt('return');case 4:if(l===n){r.next=7;break}return console.warn('SECURITY WARNING: solid-auth-client is listening for messages from '+n+','+(' but received a message from '+l+'.')),r.abrupt('return');case 7:return r.next=9,a(c);case 9:u=r.sent,u&&t.postMessage(w(u),n);case 11:case'end':return r.stop();}},r,void 0)}));return function(){return r.apply(this,arguments)}}(),o={start:function(){return window.addEventListener('message',r),o},stop:function(){return window.removeEventListener('message',r),o}};return o}},E=n.combineHandlers=function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return function(t){return n.map(function(n){return n(t)}).find(function(t){return null!==t})}}},function(t,n,a){var r=a(185),o=a(117).concat('length','prototype');n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.parse=n.format=void 0;var o=a(408),s=r(o),d=a(409),l=r(d);n.format=s.default,n.parse=l.default},function(t,n){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var a=/^[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+$/,r=n.isToken=function(t){return'string'==typeof t&&a.test(t)},o=n.isScheme=r,s=n.quote=function(t){return'"'+t.replace(/"/g,'\\"')+'"'},d=n.unquote=function(t){return t.substr(1,t.length-2).replace(/\\"/g,'"')}},function(t,n,a){(function(n){const r=a(126),o=a(44),{URL:s}=a(41),d=o.Headers?o.Headers:n.Headers,{JSONDocument:l}=a(17),{JWKSet:c}=a(63),u=a(425),f=a(426),m=a(430),h=a(224);class g extends l{static get schema(){return m}static from(t){let n=new g(t),a=n.validate();if(!a.valid)return Promise.reject(new Error(JSON.stringify(a)));let r=n.provider.jwks;return r?c.importKeys(r).then((t)=>(n.provider.jwks=t,n)):n.jwks().then(()=>n)}static register(t,n,a){let r=new g({provider:{url:t},defaults:Object.assign({},a.defaults),store:a.store});return Promise.resolve().then(()=>r.discover()).then(()=>r.jwks()).then(()=>r.register(n)).then(()=>r)}discover(){try{let t=this.provider.url;r(t,'RelyingParty provider must define "url"');let n=new s(t);return n.pathname='.well-known/openid-configuration',o(n.toString()).then(h('Error fetching openid configuration')).then((t)=>t.json().then((t)=>this.provider.configuration=t))}catch(t){return Promise.reject(t)}}register(t){try{let n=this.provider.configuration;r(n,'OpenID Configuration is not initialized.'),r(n.registration_endpoint,'OpenID Configuration is missing registration_endpoint.');let a=n.registration_endpoint,s=new d({"Content-Type":'application/json'}),l=this.defaults.register,c=JSON.stringify(Object.assign({},l,t));return o(a,{method:'post',headers:s,body:c}).then(h('Error registering client')).then((t)=>t.json().then((t)=>this.registration=t))}catch(t){return Promise.reject(t)}}serialize(){return JSON.stringify(this)}jwks(){try{let t=this.provider.configuration;r(t,'OpenID Configuration is not initialized.'),r(t.jwks_uri,'OpenID Configuration is missing jwks_uri.');let n=t.jwks_uri;return o(n).then(h('Error resolving provider keys')).then((t)=>t.json().then((t)=>c.importKeys(t)).then((t)=>this.provider.jwks=t))}catch(t){return Promise.reject(t)}}createRequest(t,n){return u.create(this,t,n||this.store)}validateResponse(t,n){return n=n||this.store,t=t.match(/^http(s?):\/\//)?{rp:this,redirect:t,session:n}:{rp:this,body:t,session:n},f.validateResponse(t)}userinfo(){try{let t=this.provider.configuration;r(t,'OpenID Configuration is not initialized.'),r(t.userinfo_endpoint,'OpenID Configuration is missing userinfo_endpoint.');let n=t.userinfo_endpoint,a=this.store.access_token;r(a,'Missing access token.');let s=new d({"Content-Type":'application/json',Authorization:`Bearer ${a}`});return o(n,{headers:s}).then(h('Error fetching userinfo')).then((t)=>t.json())}catch(t){return Promise.reject(t)}}logout(){let t;try{r(this.provider,'OpenID Configuration is not initialized.'),t=this.provider.configuration,r(t,'OpenID Configuration is not initialized.'),r(t.end_session_endpoint,'OpenID Configuration is missing end_session_endpoint.')}catch(t){return Promise.reject(t)}this.clearSession();let n=t.end_session_endpoint;return o(n,{method:'get'}).then(h('Error logging out'))}clearSession(){let t=this.store;t&&delete t[b]}popTokenFor(t,n){return PoPToken.issueFor(t,n,this)}}const b='oidc.session.privateKey';g.SESSION_PRIVATE_KEY=b,t.exports=g}).call(n,a(3))},function(t){'use strict';function n(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var a=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),r=/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,o=/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i,s=/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,d=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,l=/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,c=/^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i,u=function(){function t(){n(this,t)}return a(t,[{key:'register',value:function(t,n){if('string'!=typeof t)throw new Error('Format name must be a string');return'string'==typeof n&&(n=new RegExp(n)),this[t]=n}},{key:'resolve',value:function(t){var n=this[t];if(!n)throw new Error('Unknown JSON Schema format.');return n}},{key:'test',value:function(t,n){var a=this.resolve(t);return a.test(n)}}],[{key:'initialize',value:function(){var n=new t;return n.register('date-time',r),n.register('uri',o),n.register('email',s),n.register('ipv4',d),n.register('ipv6',l),n.register('hostname',c),n}}]),t}();t.exports=u.initialize()},function(t){'use strict';function n(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var a='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},r=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=function(){function t(a,r){n(this,t),Object.assign(this,r||{}),this.root=this.root||this,this.root.depth=this.root.depth||1,this.level>this.root.depth&&(this.root.depth=this.level),this.level=this.level||0,this.schema=a}return r(t,[{key:'compile',value:function(){var t=this.root,n=this.depth,a=this.level,r='',o='';if(o+=this.default(),o+=this.properties(),o+=this.items(),o+=this.member(),o+=this.item(),t===this){for(var s=1;s<=this.root.depth;s++)r+=this.declaration(s);return'\n        options = options || {}\n\n        if (options.filter === false) {\n          Object.assign(target, JSON.parse(JSON.stringify(source)))\n        }\n\n        '+r+'\n        '+o+'\n      '}return o}},{key:'declaration',value:function(t){return'\n      var target'+t+'\n      var source'+t+'\n      var count'+t+'\n    '}},{key:'default',value:function(){var t=this.schema,n=this.level,a=this.key,r=this.index,o=t.default,s='';return t.hasOwnProperty('default')&&(a&&(s+='\n          target'+n+'[\''+a+'\'] = '+JSON.stringify(o)+'\n        '),r&&(s+='\n          target'+n+'['+r+'] = '+JSON.stringify(o)+'\n        '),1<n&&(s+='\n          count'+n+'++\n        '),s='\n        if (options.defaults !== false) {\n          '+s+'\n        }\n      '),s}},{key:'member',value:function(){var t=this.schema,n=this.root,a=this.level,r=this.key,o=t.properties,s=t.additionalProperties,d=t.items,l=t.additionalItems,c='';return!r||o||s||d||l||(c+='\n        target'+a+'[\''+r+'\'] = source'+a+'[\''+r+'\']\n      ',1<a&&(c+='\n          count'+a+'++\n        '),c='\n        if (source'+a+'.hasOwnProperty(\''+r+'\')) {\n          '+c+'\n        }\n      '),c}},{key:'item',value:function(){var t=this.schema,n=this.root,a=this.level,r=this.index,o=t.properties,s=t.additionalProperties,d=t.items,l=t.additionalItems,c='';return!r||o||s||d||l||(c+='\n        target'+a+'['+r+'] = source'+a+'['+r+']\n      ',1<a&&(c+='\n          count'+a+'++\n        '),c='\n        if ('+r+' < len) {\n          '+c+'\n        }\n      '),c}},{key:'properties',value:function(){var n=this.schema,a=this.root,r=this.level,o=this.key,s=this.index,d=n.properties,l='';return d&&(Object.keys(d).forEach(function(n){var o=d[n],s=new t(o,{key:n,root:a,level:r+1});l+=s.compile()}),a===this?l='\n          if (typeof source === \'object\' && source !== null && !Array.isArray(source)) {\n            if (typeof target !== \'object\') {\n              throw new Error(\'?\')\n            }\n\n            source1 = source\n            target1 = target\n            count1 = 0\n\n            '+l+'\n          }\n        ':(s&&(l='\n            if ('+s+' < source'+r+'.length || typeof source'+r+'['+s+'] === \'object\') {\n\n              source'+(r+1)+' = source'+r+'['+s+'] || {}\n              count'+(r+1)+' = 0\n\n              if ('+s+' < target'+r+'.length || typeof target'+r+'['+s+'] !== \'object\') {\n                target'+(r+1)+' = {}\n                if ('+s+' < source'+r+'.length) {\n                  count'+(r+1)+'++\n                }\n              } else {\n                target'+(r+1)+' = target'+r+'['+s+']\n              }\n\n              '+l+'\n\n              if (count'+(r+1)+' > 0) {\n                target'+r+'['+s+'] = target'+(r+1)+'\n                count'+r+'++\n              }\n\n            } else {\n              target'+r+'['+s+'] = source'+r+'['+s+']\n              count'+r+'++\n            }\n          '),o&&(l='\n            if ((typeof source'+r+'[\''+o+'\'] === \'object\'\n                  && source'+r+'[\''+o+'\'] !== null\n                  && !Array.isArray(source'+r+'[\''+o+'\']))\n                || !source'+r+'.hasOwnProperty(\''+o+'\')) {\n\n              source'+(r+1)+' = source'+r+'[\''+o+'\'] || {}\n              count'+(r+1)+' = 0\n\n              if (!target'+r+'.hasOwnProperty(\''+o+'\')\n                  || typeof target'+r+'[\''+o+'\'] !== \'object\'\n                  || target'+r+'[\''+o+'\'] === null\n                  || Array.isArray(target'+r+'[\''+o+'\'])) {\n                target'+(r+1)+' = {}\n                if (source'+r+'.hasOwnProperty(\''+o+'\')) {\n                  count'+(r+1)+'++\n                }\n              } else {\n                target'+(r+1)+' = target'+r+'[\''+o+'\']\n                count'+(r+1)+'++\n              }\n\n              '+l+'\n\n              if (count'+(r+1)+' > 0) {\n                target'+r+'[\''+o+'\'] = target'+(r+1)+'\n                count'+r+'++\n              }\n\n            } else {\n              target'+r+'[\''+o+'\'] = source'+r+'[\''+o+'\']\n              count'+r+'++\n            }\n          '))),l}},{key:'additionalProperties',value:function(){}},{key:'items',value:function(){var n=this.schema,r=this.root,o=this.level,s=this.key,d=this.index,l=n.items,c='';if(l){if(Array.isArray(l));else if('object'===('undefined'==typeof l?'undefined':a(l))&&null!==l){var u='i'+(o+1),f=new t(l,{index:u,root:r,level:o+1});c+='\n          var sLen = source'+(o+1)+'.length || 0\n          var tLen = target'+(o+1)+'.length || 0\n          var len = 0\n\n          if (sLen > len) { len = sLen }\n          // THIS IS WRONG, CAUSED SIMPLE ARRAY INIT TO FAIL (OVERWRITE\n          // EXISTING TARGET VALUES WITH UNDEFINED WHEN SOURCE IS SHORTER THAN\n          // TARGET). LEAVING HERE UNTIL WE FINISH TESTING AND SEE WHY IT MIGHT\n          // HAVE BEEN HERE IN THE FIRST PLACE.\n          //\n          // if (tLen > len) { len = tLen }\n\n          for (var '+u+' = 0; '+u+' < len; '+u+'++) {\n            '+f.compile()+'\n          }\n        '}c=r===this?'\n          if (Array.isArray(source)) {\n            if (!Array.isArray(target)) {\n              throw new Error(\'?\')\n            }\n\n            source1 = source\n            target1 = target\n\n            '+c+'\n          }\n        ':'\n          if (Array.isArray(source'+o+'[\''+s+'\']) || !source'+o+'.hasOwnProperty(\''+s+'\')) {\n\n            source'+(o+1)+' = source'+o+'[\''+s+'\'] || []\n            count'+(o+1)+' = 0\n\n            if (!target'+o+'.hasOwnProperty(\''+s+'\') || !Array.isArray(target'+o+'[\''+s+'\'])) {\n              target'+(o+1)+' = []\n                if (source'+o+'.hasOwnProperty(\''+s+'\')) {\n                  count'+(o+1)+'++\n                }\n\n            } else {\n              target'+(o+1)+' = target'+o+'[\''+s+'\']\n              count'+(o+1)+'++\n            }\n\n            '+c+'\n\n            if (count'+(o+1)+' > 0) {\n              target'+o+'[\''+s+'\'] = target'+(o+1)+'\n              count'+o+'++\n            }\n\n          } else {\n            target'+o+'[\''+s+'\'] = source'+o+'[\''+s+'\']\n            count'+o+'++\n          }\n        '}return c}},{key:'additionalItems',value:function(){}}],[{key:'compile',value:function(n){var a=new t(n),r=a.compile();try{return new Function('target','source','options',r)}catch(t){console.log(t,t.stack)}}}]),t}();t.exports=o},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(127),l=['add','remove','replace','move','copy','test'],c=function(){function t(n){r(this,t),this.ops=n||[]}return s(t,[{key:'apply',value:function(t){var n=this;this.ops.forEach(function(a){var r=a.op;if(!r)throw new Error('Missing "op" in JSON Patch operation');if(-1===l.indexOf(r))throw new Error('Invalid "op" in JSON Patch operation');if(!a.path)throw new Error('Missing "path" in JSON Patch operation');n[r](a,t)})}},{key:'add',value:function(t,n){if(void 0===t.value)throw new Error('Missing "value" in JSON Patch add operation');var a=new d(t.path,2);a.add(n,t.value)}},{key:'remove',value:function(t,n){var a=new d(t.path);a.remove(n)}},{key:'replace',value:function(t,n){if(void 0===t.value)throw new Error('Missing "value" in JSON Patch replace operation');var a=new d(t.path);a.replace(n,t.value)}},{key:'move',value:function(t,n){if(void 0===t.from)throw new Error('Missing "from" in JSON Patch move operation');if(t.path.match(new RegExp('^'+t.from)))throw new Error('Invalid "from" in JSON Patch move operation');var a=new d(t.path),r=new d(t.from),o=r.get(n);r.remove(n),a.add(n,o)}},{key:'copy',value:function(t,n){if(void 0===t.from)throw new Error('Missing "from" in JSON Patch copy operation');var a=new d(t.path),r=new d(t.from),o=r.get(n);a.add(n,o)}},{key:'test',value:function(t,n){if(void 0===t.value)throw new Error('Missing "value" in JSON Patch test operation');var a=new d(t.path),r=a.get(n);switch(o(t.value)){default:if(r!==t.value)throw new Error('Mismatching JSON Patch test value');}}}]),t}();t.exports=c},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(208),l=0,c=function(){function t(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.schema=n,Object.assign(this,a),this.address||(this.address=''),!0!==this.require&&(this.require=!1)}return s(t,null,[{key:'compile',value:function(n){var a=new t(n),r='\n      // "cursor"\n      let value = data\n      let container\n      let stack = []\n      let top = -1\n\n      // error state\n      let valid = true\n      let errors = []\n\n      // complex schema state\n      let initialValidity\n      let anyValid\n      let notValid\n      let countOfValid\n      let initialErrorCount\n      let accumulatedErrorCount\n\n      // validation code\n      '+a.compile()+'\n\n      // validation result\n      return {\n        valid,\n        errors\n      }\n    ';return new Function('data',r)}},{key:'counter',get:function(){return l++}}]),s(t,[{key:'compile',value:function(){var t='';return this.require&&(t+=this.required()),t+=this.type(),t+=this.array(),t+=this.number(),t+=this.object(),t+=this.string(),t+=this.enum(),t+=this.anyOf(),t+=this.allOf(),t+=this.not(),t+=this.oneOf(),t}},{key:'push',value:function(){return'\n      stack.push(value)\n      container = value\n      top++\n    '}},{key:'pop',value:function(){return'\n      if (stack.length > 1) {\n        top--\n        stack.pop()\n      }\n\n      value = container = stack[top]\n    '}},{key:'type',value:function(){var t=this.schema.type,n=this.address,a='';if(t){var r=Array.isArray(t)?t:[t],o=r.map(function(t){return'array'===t?'!Array.isArray(value)':'boolean'===t?'typeof value !== \'boolean\'':'integer'===t?'!Number.isInteger(value)':'null'===t?'value !== null':'number'===t?'typeof value !== \'number\'':'object'===t?'(typeof value !== \'object\' || Array.isArray(value) || value === null)':'string'===t?'typeof value !== \'string\'':void 0}).join(' && ');a+='\n      // '+n+' type checking\n      if (value !== undefined && '+o+') {\n        valid = false\n        errors.push({\n          keyword: \'type\',\n          message: \'invalid type\'\n        })\n      }\n      '}return a}},{key:'array',value:function(){var t=this.validations(['additionalItems','items','minItems','maxItems','uniqueItems']),n='';return 0<t.length&&(n+='\n      /**\n       * Array validations\n       */\n      if (Array.isArray(value)) {\n      '+t+'\n      }\n      '),n}},{key:'number',value:function(){var t=this.validations(['minimum','maximum','multipleOf']),n='';return 0<t.length&&(n+='\n      /**\n       * Number validations\n       */\n      if (typeof value === \'number\') {\n      '+t+'\n      }\n      '),n}},{key:'object',value:function(){var t=this.validations(['maxProperties','minProperties','additionalProperties','properties','patternProperties','dependencies','schemaDependencies','propertyDependencies']),n='';return 0<t.length&&(n+='\n      /**\n       * Object validations\n       */\n      if (typeof value === \'object\' && value !== null && !Array.isArray(value)) {\n      '+t+'\n      }\n      '),n}},{key:'string',value:function(){var t=this.validations(['maxLength','minLength','pattern','format']),n='';return 0<t.length&&(n+='\n      /**\n       * String validations\n       */\n      if (typeof value === \'string\') {\n      '+t+'\n      }\n      '),n}},{key:'validations',value:function(t){var n=this,a=this.schema,r='',o=Object.keys(a).filter(function(n){return-1!==t.indexOf(n)});return o.forEach(function(t){r+=n[t]()}),r}},{key:'enum',value:function(){var t=this.schema.enum,n=this.address,a=['value !== undefined'],r='';return t&&(t.forEach(function(t){switch('undefined'==typeof t?'undefined':o(t)){case'boolean':a.push('value !== '+t);break;case'number':a.push('value !== '+t);break;case'string':a.push('value !== "'+t+'"');break;case'object':null===t?a.push('value !== null'):a.push('\''+JSON.stringify(t)+'\' !== JSON.stringify(value)');break;default:throw new Error('Things are not well in the land of enum');}}),r+='\n      /**\n       * Validate "'+n+'" enum\n       */\n      if ('+a.join(' && ')+') {\n        valid = false\n        errors.push({\n          keyword: \'enum\',\n          message: JSON.stringify(value) + \' is not an enumerated value\'\n        })\n      }\n      '),r}},{key:'anyOf',value:function(){var n=this.schema.anyOf,a=this.address,r='';return Array.isArray(n)&&(r+='\n        initialValidity = valid\n        initialErrorCount = errors.length\n        anyValid = false\n      ',n.forEach(function(n){var o=new t(n,{address:a});r+='\n        accumulatedErrorCount = errors.length\n        '+o.compile()+'\n        if (accumulatedErrorCount === errors.length) {\n          anyValid = true\n        }\n        '}),r+='\n          if (anyValid === true) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          }\n      '),r}},{key:'allOf',value:function(){var n=this.schema.allOf,a=this.address,r='';return Array.isArray(n)&&n.forEach(function(n){var o=new t(n,{address:a});r+='\n        '+o.compile()+'\n        '}),r}},{key:'oneOf',value:function(){var n=this.schema.oneOf,a=this.address,r='';return Array.isArray(n)&&(r+='\n        /**\n         * Validate '+a+' oneOf\n         */\n        initialValidity = valid\n        initialErrorCount = errors.length\n        countOfValid = 0\n      ',n.forEach(function(n){var o=new t(n,{address:a});r+='\n        accumulatedErrorCount = errors.length\n        '+o.compile()+'\n        if (accumulatedErrorCount === errors.length) {\n          countOfValid += 1\n        }\n        '}),r+='\n          if (countOfValid === 1) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          } else {\n            valid = false\n            errors.push({\n              keyword: \'oneOf\',\n              message: \'what is a reasonable error message for this case?\'\n            })\n          }\n      '),r}},{key:'not',value:function(){var n=this.schema.not,a=this.address,r='';if('object'===('undefined'==typeof n?'undefined':o(n))&&null!==n&&!Array.isArray(n)){var s=new t(n,{address:a});r+='\n        /**\n         * NOT\n         */\n        if (value !== undefined) {\n          initialValidity = valid\n          initialErrorCount = errors.length\n          notValid = true\n\n          accumulatedErrorCount = errors.length\n\n          '+s.compile()+'\n\n          if (accumulatedErrorCount === errors.length) {\n            notValid = false\n          }\n\n          if (notValid === true) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          } else {\n            valid = false\n            errors = errors.slice(0, initialErrorCount)\n            errors.push({\n              keyword: \'not\',\n              message: \'hmm...\'\n            })\n          }\n        }\n      '}return r}},{key:'properties',value:function(){var n=this.schema,a=this.address,r=n.properties,s=n.required,d=this.push();return s=Array.isArray(s)?s:[],'object'===('undefined'==typeof r?'undefined':o(r))&&Object.keys(r).forEach(function(n){var o=r[n],l=-1!==s.indexOf(n),c=[a,n].filter(function(t){return!!t}).join('.'),u=new t(o,{address:c,require:l});d+='\n        value = container[\''+n+'\']\n        ',d+=u.compile()}),d+=this.pop(),d}},{key:'otherProperties',value:function(){return'\n      /**\n       * Validate Other Properties\n       */\n      '+this.push()+'\n\n      for (let key in container) {\n        value = container[key]\n        matched = false\n\n        '+this.patternValidations()+'\n        '+this.additionalValidations()+'\n      }\n\n      '+this.pop()+'\n    '}},{key:'patternValidations',value:function(){var n=this.schema.patternProperties,a='';return'object'===('undefined'==typeof n?'undefined':o(n))&&Object.keys(n).forEach(function(r){var o=n[r],s=new t(o);a+='\n          if (key.match(\''+r+'\')) {\n            matched = true\n            '+s.compile()+'\n          }\n        '}),a}},{key:'additionalValidations',value:function(){var n=this.schema,a=n.properties,r=n.additionalProperties,s=this.address,d='',l=['matched !== true'];if(Object.keys(a||{}).forEach(function(t){l.push('key !== \''+t+'\'')}),'object'===('undefined'==typeof r?'undefined':o(r))){var c=new t(r,{address:s+'[APKey]'});d+='\n        // validate additional properties\n        if ('+l.join(' && ')+') {\n          '+c.compile()+'\n        }\n      '}return!1===r&&(d+='\n        // validate non-presence of additional properties\n        if ('+l.join(' && ')+') {\n          valid = false\n          errors.push({\n            keyword: \'additionalProperties\',\n            message: key + \' is not a defined property\'\n          })\n        }\n      '),d}},{key:'patternProperties',value:function(){var t='';return this.otherPropertiesCalled||(this.otherPropertiesCalled=!0,t+=this.otherProperties()),t}},{key:'additionalProperties',value:function(){var t='';return this.otherPropertiesCalled||(this.otherPropertiesCalled=!0,t+=this.otherProperties()),t}},{key:'minProperties',value:function(){var t=this.schema.minProperties,n=this.address;return'\n        // '+n+' min properties\n        if (Object.keys(value).length < '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'minProperties\',\n            message: \'too few properties\'\n          })\n        }\n    '}},{key:'maxProperties',value:function(){var t=this.schema.maxProperties,n=this.address;return'\n        // '+n+' max properties\n        if (Object.keys(value).length > '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'maxProperties\',\n            message: \'too many properties\'\n          })\n        }\n    '}},{key:'dependencies',value:function(){var n=this.schema.dependencies,a=this.address,r=this.push();return'object'===('undefined'==typeof n?'undefined':o(n))&&Object.keys(n).forEach(function(s){var d=n[s],l=[];if(Array.isArray(d))d.forEach(function(t){l.push('container[\''+t+'\'] === undefined')}),r+='\n            if (container[\''+s+'\'] !== undefined && ('+l.join(' || ')+')) {\n              valid = false\n              errors.push({\n                keyword: \'dependencies\',\n                message: \'unmet dependencies\'\n              })\n            }\n          ';else if('object'===('undefined'==typeof d?'undefined':o(d))){var c=new t(d,{address:a});r+='\n            if (container[\''+s+'\'] !== undefined) {\n              '+c.compile()+'\n            }\n          '}}),r+=this.pop(),r}},{key:'required',value:function(){var t=this.schema.properties,n=this.address,a='';return a+='\n      // validate '+n+' presence\n      if (value === undefined) {\n        valid = false\n        errors.push({\n          keyword: \'required\',\n          message: \'is required\'\n        })\n      }\n    ',a}},{key:'additionalItems',value:function(){var n=this.schema,a=n.items,r=n.additionalItems,s=this.address,d='';if(!1===r&&Array.isArray(a)&&(d+='\n        // don\'t allow additional items\n        if (value.length > '+a.length+') {\n          valid = false\n          errors.push({\n            keyword: \'additionalItems\',\n            message: \'additional items not allowed\'\n          })\n        }\n      '),'object'===('undefined'==typeof r?'undefined':o(r))&&null!==r&&Array.isArray(a)){var l=new t(r),c=t.counter;d+='\n        // additional items\n        '+this.push()+'\n\n        for (var i'+c+' = '+a.length+'; i'+c+' <= container.length; i'+c+'++) {\n          value = container[i'+c+']\n          '+l.compile()+'\n        }\n\n        '+this.pop()+'\n      '}return d}},{key:'items',value:function(){var n=this.schema.items,a=this.address,r='';if(Array.isArray(n))r+=this.push(),n.forEach(function(n,o){var s=new t(n,{address:a+'['+o+']'});r+='\n          // item #'+o+'\n          value = container['+o+']\n          '+s.compile()+'\n        '}),r+=this.pop();else if('object'===('undefined'==typeof n?'undefined':o(n))&&null!==n){var s=new t(n),d=t.counter;r+='\n        // items\n        '+this.push()+'\n\n        for (var i'+d+' = 0; i'+d+' < container.length; i'+d+'++) {\n          // read array element\n          value = container[i'+d+']\n          '+s.compile()+'\n        }\n\n        '+this.pop()+'\n      '}return r}},{key:'minItems',value:function(){var t=this.schema.minItems,n=this.address;return'\n        // '+n+' min items\n        if (value.length < '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'minItems\',\n            message: \'too few properties\'\n          })\n        }\n    '}},{key:'maxItems',value:function(){var t=this.schema.maxItems,n=this.address;return'\n        // '+n+' max items\n        if (value.length > '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'maxItems\',\n            message: \'too many properties\'\n          })\n        }\n    '}},{key:'uniqueItems',value:function(){var t=this.schema.uniqueItems,n=this.address,a='';return!0===t&&(a+='\n        // validate '+n+' unique items\n        let values = value.map(v => JSON.stringify(v)) // TODO: optimize\n        let set = new Set(values)\n        if (values.length !== set.size) {\n          valid = false\n          errors.push({\n            keyword: \'uniqueItems\',\n            message: \'items must be unique\'\n          })\n        }\n      '),a}},{key:'minLength',value:function(){var t=this.schema.minLength,n=this.address;return'\n        // '+n+' validate minLength\n        if (Array.from(value).length < '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'minLength\',\n            message: \'too short\'\n          })\n        }\n    '}},{key:'maxLength',value:function(){var t=this.schema.maxLength,n=this.address;return'\n        // '+n+' validate maxLength\n        if (Array.from(value).length > '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'maxLength\',\n            message: \'too long\'\n          })\n        }\n    '}},{key:'pattern',value:function(){var t=this.schema.pattern,n=this.address;if(t)return'\n          // '+n+' validate pattern\n          if (!value.match(new RegExp(\''+t+'\'))) {\n            valid = false\n            errors.push({\n              keyword: \'pattern\',\n              message: \'does not match the required pattern\'\n            })\n          }\n      '}},{key:'format',value:function(){var t=this.schema.format,n=this.address,a=d.resolve(t);if(a)return'\n      // '+n+' validate format\n      if (!value.match('+a+')) {\n        valid = false\n        errors.push({\n          keyword: \'format\',\n          message: \'is not "'+t+'" format\'\n        })\n      }\n      '}},{key:'minimum',value:function(){var t=this.schema,n=t.minimum,a=t.exclusiveMinimum,r=this.address,o=!0===a?'<=':'<';return'\n        // '+r+' validate minimum\n        if (value '+o+' '+n+') {\n          valid = false\n          errors.push({\n            keyword: \'minimum\',\n            message: \'too small\'\n          })\n        }\n    '}},{key:'maximum',value:function(){var t=this.schema,n=t.maximum,a=t.exclusiveMaximum,r=this.address,o=!0===a?'>=':'>';return'\n        // '+r+' validate maximum\n        if (value '+o+' '+n+') {\n          valid = false\n          errors.push({\n            keyword: \'maximum\',\n            message: \'too large\'\n          })\n        }\n    '}},{key:'multipleOf',value:function(){var t=this.schema.multipleOf,n='';if('number'==typeof t){var a=t.toString().length,r=a-t.toFixed(0).length-1,o=0<r?v(10,r):1,s;s=0<r?'(value * '+o+') % '+t*o+' !== 0':'value % '+t+' !== 0',n+='\n        if ('+s+') {\n          valid = false\n          errors.push({\n            keyword: \'multipleOf\',\n            message: \'must be a multiple of '+t+'\'\n          })\n        }\n      '}return n}}]),t}();t.exports=c},function(t,n,a){'use strict';(function(n){var r=n.TextEncoder?n.TextEncoder:a(419).TextEncoder;t.exports=r}).call(n,a(3))},function(t){'use strict';function n(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function a(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function r(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var o=function(t){function o(t){n(this,o);var r=a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return r.message=t+' is not a supported algorithm',r}return r(o,t),o}(Error);t.exports=o},function(t,n,a){'use strict';t.exports={DataError:a(215),NotSupportedError:a(213)}},function(t){'use strict';function n(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function a(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function r(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var o=function(t){function o(t){return n(this,o),a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t))}return r(o,t),o}(Error);t.exports=o},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(17),c=l.JSONDocument,u=a(87),f=a(128),m=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,t),d(n,null,[{key:'importKey',value:function(t){return f.importKey(t)}},{key:'schema',get:function(){return u}}]),n}(c);t.exports=m},function(t,n,a){'use strict';var r=a(17),o=r.JSONSchema,s=a(87),d=new o({type:'object',properties:{keys:{type:'array',items:s}}});t.exports=d},function(t,n,a){'use strict';var r=a(219),o=a(220),s=a(221),d=a(17),l=d.JSONSchema,c=new l({type:'object',properties:{type:{type:'string',enum:['JWS','JWE']},segments:{type:'array'},header:s,protected:s,unprotected:s,iv:r,aad:r,ciphertext:r,tag:r,recipients:{type:'array',items:{type:'object',properties:{header:s,encrypted_key:r}}},payload:o,signatures:{type:'array',items:{type:'object',properties:{protected:s,header:s,signature:r,key:{type:'object'}}}},signature:r,verified:{type:'boolean',default:!1},key:{type:'object'},serialization:{type:'string',enum:['compact','json','flattened'],default:'compact'}}});t.exports=c},function(t,n,a){'use strict';var r=a(17),o=r.JSONSchema,s=new o({type:'string',format:'base64url'});t.exports=s},function(t,n,a){'use strict';var r=a(17),o=r.JSONSchema,s=new o({properties:{iss:{type:'string',format:'StringOrURI'},sub:{type:'string',format:'StringOrURI'},aud:{type:['array','string'],format:'StringOrURI',items:{format:'StringOrURI'}},exp:{type:'number',format:'NumericDate'},nbf:{type:'number',format:'NumericDate'},iat:{type:'number',format:'NumericDate'},jti:{type:'string'}}});t.exports=s},function(t,n,a){'use strict';var r=a(87),o=a(17),s=o.JSONSchema,d=new s({type:'object',properties:{typ:{type:'string'},cty:{type:'string',enum:['JWT']},alg:{type:'string',format:'StringOrURI'},jku:{type:'string',format:'URI'},kid:{type:'string'},x5u:{type:'string',format:'URI'},x5c:{type:'array',items:{type:'string',format:'base64'}},x5t:{type:'string',format:'base64url'},crit:{type:'array',items:{type:'string'},minItems:1},enc:{type:'string',format:'StringOrURI'},zip:{type:'string'}}});t.exports=d},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){var a=[],r=!0,o=!1,s;try{for(var d=t[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(a.push(l.value),!(n&&a.length===n));r=!0);}catch(t){o=!0,s=t}finally{try{!r&&d['return']&&d['return']()}finally{if(o)throw s}}return a}return function(n,a){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,a);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(38),l=a(128),c=a(214),u=c.DataError,f=function(){function t(){r(this,t)}return s(t,null,[{key:'sign',value:function(t){var n=d(JSON.stringify(t.payload));if('compact'===t.serialization){var a=t.key,r=t.header.alg,o=d(JSON.stringify(t.header)),s=o+'.'+n;return l.sign(r,a,s).then(function(t){return s+'.'+t})}return'json'===t.serialization,'flattened'===t.serialization,Promise.reject(new u('Unsupported serialization'))}},{key:'verify',value:function(t){t.signatures;var n=t.key,a=t.signature,r=t.header.alg;if(t.signature){var s=o(t.segments,2),d=s[0],c=s[1];return'none'===r?Promise.reject(new u('Signature provided to verify with alg: none')):l.verify(r,n,a,d+'.'+c).then(function(n){return t.verified=n,n})}if('none'===r){if(!n&&!a)return t.verified=!0,Promise.resolve(!0);if(n)return Promise.reject(new u('Key provided to verify signature with alg: none'))}return Promise.reject(new u('Missing signature(s)'))}}]),t}();t.exports=f},function(t){t.exports=class{static encode(t){let n=[];return Object.keys(t).forEach(function(a){n.push(encodeURIComponent(a)+'='+encodeURIComponent(t[a]))}),n.join('&')}static decode(t){let n={};return t.split('&').forEach(function(t){let a=t.split('='),r=decodeURIComponent(a[0]),o=decodeURIComponent(a[1]);n[r]=o}),n}}},function(t){'use strict';t.exports=function(t='fetch error'){return(n)=>{if(200<=n.status&&300>n.status)return n;let a=`${t}: ${n.status} ${n.statusText}`,r=new Error(a);throw r.response=n,r.statusCode=n.status,r}}},function(t,n,a){'use strict';Object.defineProperty(n,'__esModule',{value:!0}),n.requiresAuth=n.login=void 0,a(44);var r=a(205),o=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}(r),s=n.login=function(t){return fetch(t,{method:'HEAD',credentials:'include'}).then(function(t){return t.headers.get('user')}).then(function(n){return n?{authType:'WebID-TLS',idp:t,webId:n}:null})},d=n.requiresAuth=function(t){if(401!==t.status)return!1;var n=t.headers.get('www-authenticate');if(!n)return!1;var a=o.parse(n);return'WebID-TLS'===a.scheme}},function(t,n,a){'use strict';(function(n){var r=a(445),o=a(446),s=a(447),d=a(2);t.exports=function(t){function a(){function t(a){var r=a.statements.length,n,o,s;for(n=0;n<r;n++)o=a.statements[n],s=o.tr,'undefined'!=typeof s&&(s.AJAR_pattern=null,s.AJAR_variable=null);for(var d in a.optional)t(a.optional[d])}var a=tabulator.qs,r=new d.rdf.Query,o=H.length,n,s,l,c;for(n=0;n<o;n++)s=H[n],c=s.parentNode,l=c.AJAR_statement,d.log.debug('Statement '+l),0<=s.getAttribute('class').indexOf('pred')&&(d.log.info('   We have a predicate'),d.utils.makeQueryRow(r,c)),0<=s.getAttribute('class').indexOf('obj')&&(d.log.info('   We have an object'),d.utils.makeQueryRow(r,c,!0));return a.addQuery(r),t(r.pat),r}function l(t){for(var n=[],a=arguments.length-1;0<a;a--)n[a-1]=arguments[a];var r=new Date().getTime(),o=t.apply(t,n),s=new Date().getTime();return d.log.info('BENCHMARK: kb delta: '+(W.statements.length-l.lastkbsize)+', time elapsed for '+t+' was '+(s-r)+'ms'),l.lastkbsize=W.statements.length,o}function c(t,n,a){var r=d.utils.AJARImage(o.src.icon_remove_node,'remove',void 0,D);return r.addEventListener('click',S),r.node=a,r.setAttribute('about',n.toNT()),r.style.marginLeft='5px',r.style.marginRight='10px',t.appendChild(r),r}function u(n,t,a){var r=D.createElement('tr');r.setAttribute('class','hoverControl');var o=r.appendChild(D.createElement('td'));o.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),o.setAttribute('notSelectable','false'),o.setAttribute('about',n.toNT()),o.setAttribute('colspan','2');var s=o.appendChild(d.utils.AJARImage(d.icons.originalIconBase+'tbl-collapse.png','collapse',void 0,D));s.addEventListener('click',k);var l=o.appendChild(D.createElement('strong'));l.appendChild(D.createTextNode(d.utils.label(n))),d.widgets.makeDraggable(l,n),r.firstPane=null;var c=0,u=[],m=[];t&&(r.firstPane=t);for(var h=0;h<d.panes.list.length;h++){var g=d.panes.list[h],b=g.label(n,D);b&&(u.push(g),g==t&&(c=u.length-1),m.push(b),!r.firstPane&&g.shouldGetFocus&&g.shouldGetFocus(n)&&(r.firstPane=g,c=u.length-1,d.log.info('the '+h+'th pane steals the focus')))}if(u.length||u.push(d.panes.internalPane),r.firstPane=r.firstPane||u[0],1!=u.length)for(var h=0;h<u.length;h++){var g=u[h],y=d.utils.AJARImage(g.icon,m[h],m[h],D);y.style.maxWidth='24px',y.style.maxHeight='24px';var v=function(r,s){r.addEventListener('click',function(l){for(var c=o;c.parentNode&&'TABLE'!=c.nodeName;c=c.parentNode);if('TABLE'!=c.nodeName)throw'outline: internal error: ';var t=function(t){for(var n=c.firstChild;n;n=n.nextSibling)'undefined'!=typeof n.pane&&(t&&n.pane!==t||(n.paneButton&&n.paneButton.setAttribute('class','paneHidden'),f(n),n.pane.requireQueryButton&&c.parentNode.className&&1==m&&D.getElementById('queryButton')&&D.getElementById('queryButton').setAttribute('style','display:none;')))},u=r.getAttribute('class');'paneHidden'===u?(!l.shiftKey&&t(),function(t){var o;if(d.log.info('outline: Rendering pane (2): '+t.name),d.no_catch_pane_errors)o=t.render(n,D,a);else try{o=t.render(n,D,a)}catch(t){o=D.createElement('div'),o.setAttribute('class','exceptionPane');var s=D.createElement('pre');o.appendChild(s),s.appendChild(D.createTextNode(d.utils.stackString(t)))}t.requireQueryButton&&D.getElementById('queryButton')&&D.getElementById('queryButton').removeAttribute('style');var l=c.firstChild.nextSibling;l?c.insertBefore(o,l):c.appendChild(o),o.pane=t,o.paneButton=r}(s),r.setAttribute('class','paneShown')):(t(s),r.setAttribute('class','paneHidden'));for(var u='paneShown',m=0,h=c.firstChild;h;h=h.nextSibling)h.pane&&h.pane.requireQueryButton&&m++},!1)};v(y,g),y.setAttribute('class',h==c?'paneShown':'paneHidden'),h===c&&(r.paneButton=y),r.firstChild.childNodes[1].appendChild(y)}return r.firstChild.tabulatorSelect=function(){w(this,!0)},r.firstChild.tabulatorDeselect=function(){w(this,!1)},r}function f(t){var n=t.parentNode,a=n.parentNode,r=D.createElement('table');a.replaceChild(r,n),n.removeChild(t),a.replaceChild(n,r)}function m(t,n,a){var r=t.createElement('TR');r.AJAR_statement=n,r.AJAR_inverse=a,r.setAttribute('predTR','true');var o=z.outline_predicateTD(n.predicate,r,a);return r.appendChild(o),r}function h(t,n){d.log.debug('Button callbacks for '+n+' added');var a=function(a){return function(r){return(0<=r.indexOf('#')&&console.log('@@ makeIconCallback: Not expecting # in URI whose state changed: '+r),!!t)&&!!F.ancestor(t,'DIV')&&(r==n&&(t.src=a,t.title=o.tooltips[a]),!0)}};V.addCallback('request',a(o.src.icon_requested)),V.addCallback('done',a(o.src.icon_fetched)),V.addCallback('fail',a(o.src.icon_failed))}function g(t){var n=t.getAttribute('class');return n&&0<=n.indexOf('selected')}function b(t){var n=z.targetOf(t),a=n.parentNode;X.replaceIcon(a.parentNode,o.termWidgets.optOn,o.termWidgets.optOff,y),a.parentNode.parentNode.removeAttribute('optional')}function y(t){var n=z.targetOf(t),a=n.parentNode;X.replaceIcon(a.parentNode,o.termWidgets.optOff,o.termWidgets.optOn,b),a.parentNode.parentNode.setAttribute('optional','true')}function v(t,a){for(var r=o.termWidgets.optOn,s=o.termWidgets.optOff,d=t;d.parentNode;d=d.parentNode)for(;;)if(d.getAttribute('predTR')){var n=d.getAttribute('parentOfSelected');n=n?parseInt(n):0,0==n&&0<a&&X.addIcon(d.childNodes[0],d.getAttribute('optional')?r:s,d.getAttribute('optional')?b:y),n+=a,d.setAttribute('parentOfSelected',n),0==n&&(d.removeAttribute('parentOfSelected'),X.removeIcon(d.childNodes[0],d.getAttribute('optional')?r:s));break}else if(d.previousSibling&&'TR'==d.previousSibling.nodeName)d=d.previousSibling;else break}function w(t,n){if('TD'!=t.nodeName)throw d.log.debug('down'+t.nodeName),'Expected TD in setSelected: '+t.nodeName+t.textContent;d.log.debug('pass');var a=t.getAttribute('class');if(a||(a=''),n){a+=' selected',(0<=a.indexOf('pred')||0<=a.indexOf('obj'))&&v(t,1),H.push(t);var r=d.utils.getTerm(t);z.showURI(r);var s=t.AJAR_statement;if('undefined'==typeof s&&(s=t.parentNode.AJAR_statement),s){var l=s.why,c=s.why,u=d.store.updater.editable(l.uri,W);u||(c=t.parentNode.AJAR_inverse?s.object:s.subject),u&&0<=a.indexOf('pred')&&X.addIcon(t,o.termWidgets.addTri)}}else d.log.debug('cla=$'+a+'$'),'selected'==a&&(a=''),a=a.replace(' selected',''),(0<=a.indexOf('pred')||0<=a.indexOf('obj'))&&v(t,-1),0<=a.indexOf('pred')&&X.removeIcon(t,o.termWidgets.addTri),H=H.filter(function(n){return n==t}),d.log.info('Deselecting '+t.textContent);'undefined'!=typeof sourceWidget&&z.showSource(),t.setAttribute('class',a)}function x(){var t=H.length,n;for(n=t-1;0<=n;n--)w(H[n],!1);H=[]}function _(t){var n=z.targetOf(t),a=n.parentNode,r=d.utils.getAbout(W,n),o=t.altKey?d.panes.internalPane:void 0;t.shiftKey?R(a,r,o):t.altKey?N(a,r,{pane:d.panes.internalPane,immediate:!0}):N(a,r)}function k(t){var n=z.targetOf(t),a=d.utils.getAbout(W,n),r=t.altKey?d.panes.internalPane:void 0,o=n.parentNode;j(o,a,r)}function C(t){var n=z.targetOf(t),a=n.getAttribute('uri');t.altKey?V.fetch(d.rdf.uri.docpart(a),{force:!0}):V.refresh(W.sym(d.rdf.uri.docpart(a)))}function T(t){var n=z.targetOf(t),a=n.getAttribute('uri');t.altKey?V.fetch(d.rdf.uri.docpart(a),{force:!0}):V.refresh(W.sym(d.rdf.uri.docpart(a)))}function E(t){var n=z.targetOf(t),a=n.getAttribute('uri');V.fetch(d.rdf.uri.docpart(a))}function S(t){var n=z.targetOf(t),a=n.node;1<a.childNodes.length&&(a=n.parentNode),f(a)}function A(t){if(z.UserInput._tabulatorMode)return z.UserInput.Click(t);var n=z.targetOf(t),a=n.parentNode,r;for(r=d.utils.ancestor(n,'TD');r&&'false'!==r.getAttribute('notSelectable');r=d.utils.ancestor(r.parentNode,'TD'));if(r){var o=g(r),s=r.getAttribute('class');if(d.log.debug('Was node selected before: '+o),t.altKey)w(r,!g(r));else if(t.shiftKey)w(r,!0);else{if(x(),z.UserInput.clearInputAndSave(t),w(r,!0),2==t.detail)return void t.stopPropagation();var l=r.parentNode.AJAR_statement;if(!l)return;var n=l.why,c=d.store.updater.editable(n.uri,W);o&&c&&z.UserInput.Click(t,H[0])}d.log.debug('Was node selected after: '+g(r)+', count='+H.length);var u=r.parentNode;if(u.AJAR_statement)u.AJAR_statement.why;t.stopPropagation()}}function I(t){d.log.info('@TabulatorMousedown, dom.location is now '+D.location);var n=z.targetOf(t);if(n){var a=n.tagName,r=n.parentNode,s=d.utils.getAbout(W,n);'INPUT'==a||'TEXTAREA'==a||(z.UserInput.clearMenu(),z.UserInput.lastModified&&z.UserInput.lastModified.parentNode.nextSibling&&z.UserInput.backOut(),(!n.src||n.src.slice(n.src.indexOf('/icons/')+1)!=o.src.icon_show_choices&&n.src.slice(n.src.indexOf('/icons/')+1)!=o.src.icon_add_triple)&&z.UserInput.clearInputAndSave(t),(!n.src||n.src.slice(n.src.indexOf('/icons/')+1)!=o.src.icon_show_choices)&&z.UserInput.clearMenu(),t&&t.stopPropagation())}}function N(t,n,a){function o(){if(f=W.canon(f),!t||!t.parentNode||!t.parentNode.parentNode)return!1;var n;if(d.log.info('@@ REPAINTING '),!c)n=J(f,void 0,l,a);else{for(d.log.info(' ... p is  '+t),n=t.firstChild;n.nextSibling&&(d.log.info(' ... checking node '+n),'table'!=n.nodeName);n=n.nextSibling);n=J(f,n,l,a)}c=!0,n.style.backgroundColor=d.utils.ancestor(t,'TABLE')&&'white'==d.utils.ancestor(t,'TABLE').style.backgroundColor?'#eee':'white';try{r.util.Event.off&&r.util.Event.off(t,'mousedown','dragMouseDown')}catch(t){console.log('YAHOO '+t)}d.utils.emptyNode(t).appendChild(n),z.focusTd=t,d.log.debug('expand: Node for '+f+' expanded');for(var o=W.each(f,d.ns.rdfs('seeAlso')),s=0;s<o.length;s++)25==s&&d.log.warn('expand: Warning: many ('+o.length+') seeAlso links for '+f),V.lookUpThing(o[s],f)}function s(t){if(arguments[3])return!0;var n=W.canon(f);d.log.info('@@ expand: relevant subject='+n+', uri='+t+', already='+c);var a=W.sym(t),r=W.sym(d.rdf.uri.docpart(t));if(0<=t.indexOf('#'))throw'Internal error: hash in '+t;return!function(){if(!n.uri)return!0;var a=W.uris(n);if(!a)return!1;for(var o=0;o<a.length;o++)for(var s=d.rdf.uri.docpart(a[o]);s;s=W.HTTPRedirects[s])if(t==s)return!0;return!!W.anyStatementMatching(n,void 0,void 0,r)}()||(d.log.success('@@ expand OK: relevant subject='+n+', uri='+t+', source='+c),o(),!1)}a=a||{};var l=a.pane,c=!!a.already,u=a.immediate;d.log.info('@outline_expand, dom is now '+D.location),V.removeCallback('done','expand'),V.removeCallback('fail','expand');var f=W.canon(n),m=f.uri?W.sym(d.rdf.uri.docpart(f.uri)):f;a.solo&&(D.title=d.utils.label(f)),d.log.debug('outline_expand: dereferencing '+f);var h=D.createElement('span');t.appendChild(h),V.addCallback('done',s),V.addCallback('fail',s);var g=[];if(f.uri&&'rdf'==f.uri.split(':')[0])return void o();for(var b=0;b<g.length;b++){var y;if(y=g[b](f))return o(),d.log.debug('outline 1815'),void(y[1]&&G.removeChild(G.lastChild))}!f.uri||u||d.widgets.isAudio(f)||d.widgets.isVideo(f)||W.holds(f,d.ns.rdf('type'),$rdf.Util.mediaTypeClass('application/pdf'))?o():V.nowOrWhenFetched(f.doc(),void 0,function(n,r){if(n)V.lookUpThing(f),o(),a.solo&&(D.title=d.utils.label(f));else{var s=D.createElement('pre');s.textContent=r,s.setAttribute('style','background-color: #fee;'),s.textContent='Unable to fetch '+f.doc()+': '+r,t.appendChild(s)}})}function j(t,n){var a=d.utils.ancestor(t,'TR');if(a=d.utils.ancestor(a.parentNode,'TR'),a)var r=a.AJAR_statement;var o;for(o=t.parentNode;'TD'!=o.tagName;o=o.parentNode)if('undefined'==typeof o)return void alert('Not enclosed in TD!');d.log.debug('Collapsing subject '+n);var s;if(r&&(d.log.debug('looking up pred '+r.predicate.uri+'in defaults'),s=Q.defaults[r.predicate.uri]),d.log.debug('view= '+s),'outline'==o.parentNode.parentNode.id)var l=o.parentNode;z.replaceTD(z.outline_objectTD(n,s,l,r),o)}function R(t,n){if(tabulator.isExtension&&'symbol'==n.termType&&0>n.uri.indexOf('#'))return void q.selectedBrowser.loadURI(n.uri);for(var a=null,r=t.parentNode;r;r=r.parentNode)d.log.debug('level '+r.tagName),'TD'==r.tagName&&(a=r);d.utils.emptyNode(a).appendChild(J(n)),D.title=d.utils.label(n),a.setAttribute('about',n.toNT())}function L(t){var n=W.sym(t);this.GotoSubject(n,!0)}function O(t,n,a){Q.properties[t]||(Q.properties[t]=[]),Q.properties[t].push(n),a&&(Q.defaults[t]=n)}function P(t){var n;if('Literal'==t.termType){n=D.createElement('span'),n.textContent=t.value;var a='';if(t.datatype&&t.datatype.uri){var r=d.ns.xsd('').uri;t.datatype.uri.slice(0,r.length)==r&&(a={integer:'text-align: right;',decimal:'text-align: \'.\';',double:'text-align: \'.\';'}[t.datatype.uri.slice(r.length)])}n.setAttribute('style',a?a:'white-space: pre-wrap;')}else if('NamedNode'==t.termType||'BlankNode'==t.termType){if(n=D.createElement('span'),n.setAttribute('about',t.toNT()),z.appendAccessIcons(W,n,t),'NamedNode'!=t.termType)n.appendChild(D.createTextNode(d.utils.label(t)));else if('tel:'==t.uri.slice(0,4)){var s=t.uri.slice(4),l=D.createElement('a');n.appendChild(D.createTextNode(s)),l.setAttribute('href',t.uri),l.appendChild(d.utils.AJARImage(o.src.icon_telephone,'phone','phone '+s,D)),n.appendChild(l),l.firstChild.setAttribute('class','phoneIcon')}else n.appendChild(D.createTextNode(d.utils.label(t))),d.widgets.makeDraggable(n,t);}else if('Collection'==t.termType){n=D.createElement('table'),n.setAttribute('about',t.toNT());for(var c=0;c<t.elements.length;c++){var u=t.elements[c],f=n.appendChild(D.createElement('tr')),m=f.appendChild(D.createElement('td'));m.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),m.setAttribute('notSelectable','false'),m.setAttribute('about',t.toNT()),m.innerHTML=c+1+')',f.appendChild(z.outline_objectTD(u))}}else'Graph'==t.termType?(n=d.panes.dataContentPane.statementsAsTables(t.statements,D),n.setAttribute('class','nestedFormula')):(d.log.error('Object '+t+' has unknown term type: '+t.termType),n=D.createTextNode('[unknownTermType:'+t.termType+']'));return d.log.debug('contents: '+n.innerHTML),n}function M(t){var n=d.utils.AJARImage(t.uri,d.utils.label(t),d.utils.label(t),D);return n.setAttribute('class','outlineImage'),n}var D;if('undefined'!=typeof tabulator&&tabulator.isExtension){var B=Components.classes['@mozilla.org/appshell/window-mediator;1'].getService(Components.interfaces.nsIWindowMediator),U=B.getMostRecentWindow('navigator:browser'),q=U.getBrowser();D=t||U.document}else D=t;this.document=t,this.outlineIcons=o;var F=this,z=this,H=[];this.selection=H,this.ancestor=d.utils.ancestor,this.sparql=d.rdf.UpdateManager,this.kb=d.store;var W=d.store,V=d.store.fetcher;D.outline=this,this.focusTd,this.UserInput=new s(this),this.clipboardAddress='tabulator:clipboard',this.UserInput.clipboardInit(this.clipboardAddress);var G=this.outlineElement;this.init=function(){var t=D.getElementById('outline');t.outline=this},this.viewAndSaveQuery=function(){var t=tabulator.qs;d.log.info('outline.doucment is now '+F.document.location);var n=a();if(tabulator.isExtension)tabulator.drawInBestView(n);else{var r;for(r=0;r<t.listeners.length;r++)t.listeners[r].getActiveView().view.drawQuery(n),t.listeners[r].updateQueryControls(t.listeners[r].getActiveView())}},l.lastkbsize=0,this.appendAccessIcons=function(t,n,a){if('NamedNode'==a.termType){var r=t.uris(a);r.sort();for(var o=null,s=0;s<r.length;s++)r[s]!=o&&(o=r[s],z.appendAccessIcon(n,o))}},this.appendAccessIcon=function(t,n){if(!n)return'';var a=d.rdf.uri.docpart(n);if('http:'!=a.slice(0,5))return'';var r=V.getState(a),s,l,c;'unrequested'===r?(s=o.src.icon_unrequested,l='fetch',c=E):'requested'===r?(s=o.src.icon_requested,l='fetching',c=C):'fetched'===r?(s=o.src.icon_fetched,c=T,l='loaded'):'failed'===r?(s=o.src.icon_failed,l='failed',c=C):'unpermitted'===r?(s=o.src.icon_failed,c=C,l='no perm'):'unfetchable'===r?(s=o.src.icon_failed,c=C,l='cannot fetch'):d.log.error('?? state = '+r);var u=d.utils.AJARImage(s,l,o.tooltips[s].replace(/[Tt]his resource/,a),D);return u.setAttribute('uri',n),u.addEventListener('click',c),h(u,a),t.appendChild(u),u},tabulator.options={},tabulator.options.references=[];var K;this.openCheckBox=function(){K=U.open(' ','NewWin','menubar=0,location=no,status=no,directories=no,toolbar=no,scrollbars=yes,height=200,width=200'),K.tabulator=tabulator,tabulator.options.names=['BY-NC-ND','BY-NC-SA','BY-NC','BY-ND','BY-SA','BY'];for(var t='<font face=\'arial\' size=\'2\'><form name =\'checkboxes\'>',n=tabulator.options.checkedLicenses,a=0;a<n.length;a++)t+='<input type=\'checkbox\' name = \'n'+a+'\' onClick = \'tabulator.options.submit()\''+(n[a]?'CHECKED':'')+' />CC: '+tabulator.options.names[a]+'<br />';t+='<br /> <a onclick=\'tabulator.options.selectAll()\'>[Select All] </a>',t+='<a onclick=\'tabulator.options.deselectAll()\'> [Deselect All]</a>',t+='</form></font>',K.document.write(t),K.document.close();var r;for(r=0;6>r;r++)tabulator.options.references[r]=K.document.checkboxes.elements[r]},tabulator.options.checkedLicenses=[],tabulator.options.selectAll=function(){var t;for(t=0;6>t;t++)K.document.checkboxes.elements[t].checked=!0,tabulator.options.references[t].checked=!0,tabulator.options.checkedLicenses[t]=!0},tabulator.options.deselectAll=function(){var t;for(t=0;6>t;t++)K.document.checkboxes.elements[t].checked=!1,tabulator.options.references[t].checked=!1,tabulator.options.checkedLicenses[t]=!1},tabulator.options.submit=function(){alert('tabulator.options.submit: checked='+tabulator.options.references[0].checked);for(var t=0;6>t;t++)tabulator.options.checkedLicenses[t]=!!tabulator.options.references[t].checked},this.outline_objectTD=function(t,n,a,s){var l=D.createElement('td');l.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),l.setAttribute('notSelectable','false');var u='obj';if(s){var f=W.each(s.why,W.sym('http://creativecommons.org/ns#license'));d.log.info('licenses:'+s.why+': '+f);for(var m=['http://creativecommons.org/licenses/by-nc-nd/3.0/','http://creativecommons.org/licenses/by-nc-sa/3.0/','http://creativecommons.org/licenses/by-nc/3.0/','http://creativecommons.org/licenses/by-nd/3.0/','http://creativecommons.org/licenses/by-sa/3.0/','http://creativecommons.org/licenses/by/3.0/'],h=0;h<f.length;h++)for(var g=0;g<tabulator.options.checkedLicenses.length;g++)if(tabulator.options.checkedLicenses[g]&&f[h].uri==m[g]){u+=' licOkay';break}}('NamedNode'==t.termType||'BlankNode'==t.termType||'Literal'==t.termType&&t.value.slice&&('ftp://'==t.value.slice(0,6)||'https://'==t.value.slice(0,8)||'http://'==t.value.slice(0,7)))&&(l.setAttribute('about',t.toNT()),l.appendChild(d.utils.AJARImage(d.icons.originalIconBase+'tbl-expand-trans.png','expand',void 0,D)).addEventListener('click',_)),l.setAttribute('class',u),W.whether(t,d.ns.rdf('type'),d.ns.link('Request'))&&(l.className='undetermined'),n||(n=P),l.appendChild(n(t)),a&&c(l,t,a);try{new r.util.DDExternalProxy(l)}catch(t){d.log.error('YAHOO Drag and drop not supported:\n'+t)}if(l.tabulatorSelect=function(){w(this,!0)},l.tabulatorDeselect=function(){w(this,!1)},s){var b=new d.rdf.IndexedFormula;b.statements.push(s);var y=W.each(b,W.sym('http://dig.csail.mit.edu/TAMI/2007/amord/tms#justification'));if(y.length){var v=D.createElement('span');1<y.length&&(v.innerHTML=' &times; '+y.length),v.setAttribute('class','inquiry'),v.insertBefore(d.utils.AJARImage(o.src.icon_display_reasons,'explain',void 0,D),v.firstChild),l.appendChild(v)}}return l.addEventListener('click',A),l},this.outline_predicateTD=function(t,n,a,s){var l=D.createElement('TD');switch(l.setAttribute('about',t.toNT()),l.setAttribute('class',s?'pred internal':'pred'),t.termType){case'BlankNode':l.className='undetermined';case'NamedNode':var c=d.utils.predicateLabelForXML(t,a);break;case'Collection':c=d.utils.predicateLabelForXML(t.elements[0],a);}c=c.slice(0,1).toUpperCase()+c.slice(1);var u=D.createElement('TD');for(var f in u.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),u.setAttribute('notSelectable','true'),u.appendChild(D.createTextNode(c)),l.appendChild(u),u.style.width='100%',l.appendChild(X.construct(D)),o.termWidgets){if(!n||!n.AJAR_statement)break;o.termWidgets[f].filter&&o.termWidgets[f].filter(n.AJAR_statement,'pred',a)&&X.addIcon(l,o.termWidgets[f])}try{new r.util.DDExternalProxy(l)}catch(t){d.log.error('drag and drop not supported')}return l.tabulatorSelect=function(){w(this,!0)},l.tabulatorDeselect=function(){w(this,!1)},l.addEventListener('click',A),l};var J=this.propertyTable=function(t,n,a,r){if(d.log.debug('Property table for: '+t),t=W.canon(t),!n){var n=D.createElement('table'),o=u(t,a,r);if(n.appendChild(o),o.firstPane){'undefined'==typeof tabulator&&alert('tabulator undefined');var s;try{d.log.info('outline: Rendering pane (1): '+o.firstPane.name),s=o.firstPane.render(t,D,r)}catch(t){s=D.createElement('div'),s.setAttribute('class','exceptionPane');var l=D.createElement('pre');s.appendChild(l),l.appendChild(D.createTextNode(d.utils.stackString(t)))}o.firstPane.requireQueryButton&&D.getElementById('queryButton')&&D.getElementById('queryButton').removeAttribute('style'),n.appendChild(s),s.pane=o.firstPane,s.paneButton=o.paneButton}return n}return d.log.info('Re-expand: '+n),n};this.propertyTR=m,this.appendPropertyTRs=function(t,n,a,r){if(d.log.debug('Property list length = '+n.length),0===n.length)return'';var o;a?(o=function(t){return t.subject},n=n.sort(d.utils.RDFComparePredicateSubject)):(o=function(t){return t.object},n=n.sort(d.utils.RDFComparePredicateObject));var l=n.length,c;for(c=0;c<l;c++){var u=n[c];if(!r||r(u.predicate,a)){var s=0,f=0,h=0,g;for(g=0;g+c<l&&n[c+g].predicate.sameTerm(u.predicate);g++)0<g&&o(n[c+g]).sameTerm(o(n[c+g-1]))&&s++,o(n[c+g]).lang&&'undefined'!=typeof tabulator&&tabulator.lb&&tabulator.lb.LanguagePreference&&(f+=1,0<=o(n[c+g]).lang.indexOf(tabulator.lb.LanguagePreference)&&h++);var b=m(D,u,a);t.appendChild(b);var y=b.firstChild,v=Q.defaults[u.predicate.uri];if(0<h&&f==s+1){for(g=c;g<=c+s;g++)if('undefined'!=typeof tabulator&&tabulator.lb&&tabulator.lb.LanguagePreference&&0<=o(n[g]).lang.indexOf(tabulator.lb.LanguagePreference)){b.appendChild(z.outline_objectTD(o(n[g]),v,void 0,u));break}c+=s;continue}b.appendChild(z.outline_objectTD(o(u),v,void 0,u)),b.showNobj=function(r){var f=g-s,m=2*r<f?r:f,h=[];if(1!=f){y.setAttribute('rowspan',m==f?f:r+1);var b;m<f&&1==m&&y.setAttribute('rowspan',2);var l=0;for(b=1;b<g;b++)if(!W.canon(o(n[c+b])).sameTerm(W.canon(o(n[c+b-1])))){l++,u=n[c+b],v=Q.defaults[u.predicate.uri];var w=D.createElement('tr');w.style.colspan='1',w.appendChild(z.outline_objectTD(o(n[c+b]),v,void 0,u)),w.AJAR_statement=u,w.AJAR_inverse=a,t.appendChild(w),l>=m&&(w.style.display='none',h.push(w))}else d.log.info('there are duplicates here: %s',n[c+b-1]);m==f&&y.setAttribute('rowspan',l+1)}if(m<f){var x=D.createElement('tr'),_=x.appendChild(D.createElement('td'));if(_.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),_.setAttribute('notSelectable','false'),f>r){var k=D.createElement('a');_.appendChild(k);var C=function(t){return t(y,g,s,r)}(function(t,a,r,o){return function(n){k.innerHTML='','none'==n?(k.appendChild(d.utils.AJARImage(d.icons.originalIconBase+'tbl-more-trans.png','more','See all',D)),k.appendChild(D.createTextNode(f-o+' more...')),t.setAttribute('rowspan',o+1)):(k.appendChild(d.utils.AJARImage(d.icons.originalIconBase+'tbl-shrink.png','(less)',void 0,D)),t.setAttribute('rowspan',f+1));for(var a=0,r;a<h.length;a++)r=h[a],r.style.display=n}}),T='none',E=function(t){return C(T),T='none'==T?'':'none',t&&t.stopPropagation(),!1};E(),k.addEventListener('click',E,!1)}t.appendChild(x)}},b.showAllobj=function(){b.showNobj(g-s)},b.showNobj(10),c+=g-1}}};var X={};n.termWidget=X,X.construct=function(t){t=t||document;var n=t.createElement('TD');return n.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),n.setAttribute('class','iconTD'),n.setAttribute('notSelectable','true'),n.style.width='0px',n},X.addIcon=function(t,n,a){var r=t.childNodes[1];if(r){var o=r.style.width,s=d.utils.AJARImage(n.src,n.alt,n.tooltip,D);o=parseInt(o),o+=n.width,r.style.width=o+'px',r.appendChild(s),a&&s.addEventListener('click',a)}},X.removeIcon=function(t,n){var a=t.childNodes[1];if(a){var r=a.style.width;r=parseInt(r),r-=n.width,a.style.width=r+'px';for(var o=0;o<a.childNodes.length;o++){var s=a.childNodes[o],l=s.src;try{var c=D.location.href.split('?')[0]}catch(t){console.log(t);var c=''}var u=d.rdf.uri.join(n.src,c);l==u&&a.removeChild(s)}}},X.replaceIcon=function(t,n,a,r){X.removeIcon(t,n),X.addIcon(t,a,r)};var Z=[],Y=Z[0]=new function(){this.pat=W.formula(),this.vars=[]};this.statusBarClick=function(t){var n=d.utils.getTarget(t);n.label&&(U.content.location=n.label)},this.showURI=function(t){if(t&&D.getElementById('UserURI'))D.getElementById('UserURI').value='NamedNode'==t.termType?t.uri:'';else if(t&&tabulator.isExtension){var n=q.ownerDocument.getElementById('tabulator-display');n.setAttribute('style','display:block'),n.label='NamedNode'==t.termType?t.uri:'',''==n.label?n.setAttribute('style','display:none'):n.addEventListener('click',this.statusBarClick,!1)}},this.showSource=function(){if('undefined'!=typeof sourceWidget){for(var t in sourceWidget.sources)sourceWidget.sources[t].setAttribute('class','');for(var n=0;n<H.length;n++){if(!H[n].parentNode){console.log('showSource: EH? no parentNode? '+H[n]+'\n');continue}var a=H[n].parentNode.AJAR_statement;if(a){var r=a.why;r&&r.uri?sourceWidget.highlight(r,!0):tabulator.isExtension&&'BlankNode'==r.termType&&sourceWidget.highlight(W.sym(tabulator.sourceURI),!0)}}}},this.getSelection=function(){return H},this.targetOf=function(t){var n;if(!t)var t=U.event;if(t.target)n=t.target;else if(t.srcElement)n=t.srcElement;else return d.log.error('can\'t get target for event '+t),!1;return 3==n.nodeType&&(n=n.parentNode),n},this.walk=function(t,n){var a=n||H[0],r;switch(t){case'down':try{r=a.parentNode.nextSibling.lastChild}catch(t){return void this.walk('up')}x(),w(r,!0);break;case'up':try{r=a.parentNode.previousSibling.lastChild}catch(t){return}x(),w(r,!0);break;case'right':if(x(),a.nextSibling||'strong'==a.lastChild.tagName)w(a.nextSibling,!0);else{var o=D.evaluate('table/div/tr/td[2]',a,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;w(o,!0)}break;case'left':if(x(),a.previousSibling&&'undetermined'==a.previousSibling.className)return w(a.previousSibling,!0),!0;w(d.utils.ancestor(a.parentNode,'TD'),!0);break;case'moveTo':x(),w(n,!0);}'down'!=t&&'up'!=t||r.tabulatorSelect||this.walk(t)},this.OutlinerKeypressPanel=function(t){function n(t){t&&D.getElementById('UserURI')&&(D.getElementById('UserURI').value='NamedNode'==t.termType?t.uri:'')}if((d.log.info('Key '+t.keyCode+' pressed'),'TEXTAREA'!=d.utils.getTarget(t).tagName)&&'UserURI'!=d.utils.getTarget(t).id&&!(1<H.length)){if(0==H.length)return void((13==t.keyCode||38==t.keyCode||40==t.keyCode||37==t.keyCode||39==t.keyCode)&&(this.walk('right',z.focusTd),n(d.utils.getAbout(W,H[0]))));var a=H[0];switch(V.removeCallback('done','setSelectedAfterward'),V.removeCallback('fail','setSelectedAfterward'),t.keyCode){case 13:if('HTML'==d.utils.getTarget(t).tagName){var r=d.utils.getAbout(W,a),o=a.parentNode.AJAR_statement.why,s=d.store.updater.editable(o.uri,W);r?F.GotoSubject(r,!0):s&&z.UserInput.Enter(a)}else{this.UserInput.Keypress(t);this.walk('down');t.stopPropagation()}return;case 38:this.walk('up'),t.stopPropagation(),t.preventDefault();break;case 40:this.walk('down'),t.stopPropagation(),t.preventDefault();}if('INPUT'!=d.utils.getTarget(t).tagName){switch(t.keyCode){case 46:case 8:var o=a.parentNode.AJAR_statement.why,s=d.store.updater.editable(o.uri,W);s&&(t.preventDefault(),this.UserInput.Delete(a));break;case 37:if(this.walk('left'))return;var l=d.utils.ancestor(a.parentNode,'TD');j(a,d.utils.getAbout(W,l));break;case 39:var c=d.utils.getAbout(W,a);if(c){var u=function(){return!!arguments[3]||(f('right',a),n(d.utils.getAbout(W,H[0])),!0)},f=this.walk;if(a.nextSibling)return void this.walk('right');'TABLE'!=a.firstChild.tagName&&(V.addCallback('done',u),V.addCallback('fail',u),N(a,c,{pane:d.panes.defaultPane})),u()}break;case 38:case 40:break;default:switch(t.charCode){case 99:if(t.ctrlKey){z.UserInput.copyToClipboard(z.clipboardAddress,a);break}case 118:case 112:if(t.ctrlKey){z.UserInput.pasteFromClipboard(z.clipboardAddress,a);break}default:'HTML'==d.utils.getTarget(t).tagName;}}if(n(d.utils.getAbout(W,H[0])),H[0]){var m=d.utils.findPos(H[0])[1];m+H[0].clientHeight>U.scrollY+U.innerHeight&&d.utils.getEyeFocus(H[0],!0,!0,U),m<U.scrollY+54&&d.utils.getEyeFocus(H[0],!0,void 0,U)}}}},this.OutlinerMouseclickPanel=function(t){switch(z.UserInput._tabulatorMode){case 0:I(t);break;case 1:z.UserInput.Click(t);break;default:}},this.replaceTD=function(t,n){var a;g(n)&&(a=!0);for(var r=H.length-1;-1<r;r--)for(var o=H[r];o.parentNode;o=o.parentNode)o===n&&w(H[r],!1);n.parentNode.replaceChild(t,n),a&&w(t,!0)},F.outline_refocus=R,this.GotoFormURI_enterKey=function(t){13==t.keyCode&&F.GotoFormURI(t)},this.GotoFormURI=function(){L(D.getElementById('UserURI').value)},this.GotoURIinit=function(t){var n=W.sym(t);this.GotoSubject(n)},this.GotoSubject=function(t,n,a,r,o,s){if(s||(s=D.getElementById('outline')),r&&d.utils.emptyNode(s),tabulator.isExtension)var l=function(t){var n=Components.interfaces.nsIURI,a=Components.classes['@mozilla.org/network/simple-uri;1'].createInstance(n);return a.spec=t,a};var c=function(){var n=D.createElement('TR');n.style.verticalAlign='top',s.appendChild(n);var a=z.outline_objectTD(t,void 0,n);return n.appendChild(a),a}();if(r&&(D.title=d.utils.label(t)),n){N(c,t,{pane:a,solo:r});var u=c.parentNode;d.utils.getEyeFocus(u,!1,void 0,U)}if(r&&tabulator.isExtension){var f=Components.classes['@mozilla.org/browser/global-history;2'].getService(Components.interfaces.nsIGlobalHistory2);f.addURI(l(t.uri),!1,!0,o)}return t},this.GotoURIAndOpen=function(t){L(t)};var Q={properties:[],defaults:[],classes:[]},ee=d.ns;O(ee.foaf('depiction').uri,M,!0),O(ee.foaf('img').uri,M,!0),O(ee.foaf('thumbnail').uri,M,!0),O(ee.foaf('logo').uri,M,!0),O(ee.foaf('mbox').uri,function(t){var n=D.createElement('a'),a='NamedNode'==t.termType?t.uri:t.value;if(!a)return P(t);var r=a.indexOf('mailto:');return a=0<=r?a.slice(r+7):a,n.setAttribute('href','mailto:'+a),n.appendChild(D.createTextNode(a)),n},!0);var z=this,te=function(){var t=0;return function(){return t+=1,t}}(),ne=function(t,n){r.util.Dom.addClass(n,'holiday')};return this.createTabURI=function(){D.getElementById('UserURI').value=D.URL+'?uri='+D.getElementById('UserURI').value},this.UserInput.setSelected=w,this.UserInput.deselectAll=x,this.UserInput.views=Q,this.outline_expand=N,tabulator.isExtension&&(U.addEventListener('unload',function(){var t=q.ownerDocument.getElementById('tabulator-display');t.label='',t.setAttribute('style','display:none')},!0),q.mPanelContainer.addEventListener('select',function(){var t=q.ownerDocument.getElementById('tabulator-display');t.label='',t.setAttribute('style','display:none')},!0)),this}}).call(n,a(3))},function(t,n,a){t.exports=a(228)},function(t,n,a){'use strict';(function(n){if(n.dump=function(t){console.log(t.slice(0,-1))},'undefined'==typeof r){var r={isExtension:!1};r.mode='webapp',r.preferences={value:[],get:function(t){return this.value[t]},set:function(t,n){if('string'!=typeof n)throw console.log('Non-string value of preference '+t+': '+n),new Error('Non-string value of preference '+t+': '+n);this.value[t]=n}},n.tabulator=r}var o=a(2),s=o.rdf;if(n.$rdf=s,'undefined'!=typeof window&&(window.UI=o),s.log=o.log,o.panes=a(444),o.OutlineObject=a(226),'undefined'!=typeof window){var d=window.document;d.outline=o.outline=new o.OutlineObject(d)}n.require=function(t){if('mashlib'===t)return o;throw new Error('Cannot require (this is a Mashlib-specific require stub)')},t.exports=o}).call(n,a(3))},function(t,n,a){(function(a,r){var o,s;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */(function(){function d(t){var n=!1;return function(){if(n)throw new Error('Callback was already called.');n=!0,t.apply(c,arguments)}}var l={},c,f;c=this,null!=c&&(f=c.async),l.noConflict=function(){return c.async=f,l};var m=Object.prototype.toString,h=Array.isArray||function(t){return'[object Array]'===m.call(t)},g=function(t,n){for(var a=0;a<t.length;a+=1)n(t[a],a,t)},b=function(t,n){if(t.map)return t.map(n);var r=[];return g(t,function(t,o,s){r.push(n(t,o,s))}),r},y=function(t,n,r){return t.reduce?t.reduce(n,r):(g(t,function(t,o,s){r=n(r,t,o,s)}),r)},v=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(a);return n};'undefined'!=typeof a&&a.nextTick?(l.nextTick=a.nextTick,l.setImmediate='undefined'==typeof r?l.nextTick:function(t){r(t)}):'function'==typeof r?(l.nextTick=function(t){r(t)},l.setImmediate=l.nextTick):(l.nextTick=function(t){setTimeout(t,0)},l.setImmediate=l.nextTick),l.each=function(t,n,a){function r(n){n?(a(n),a=function(){}):(o+=1,o>=t.length&&a())}if(a=a||function(){},!t.length)return a();var o=0;g(t,function(t){n(t,d(r))})},l.forEach=l.each,l.eachSeries=function(t,n,a){if(a=a||function(){},!t.length)return a();var r=0,o=function(){n(t[r],function(n){n?(a(n),a=function(){}):(r+=1,r>=t.length?a():o())})};o()},l.forEachSeries=l.eachSeries,l.eachLimit=function(t,n,a,r){var o=w(n);o.apply(null,[t,a,r])},l.forEachLimit=l.eachLimit;var w=function(t){return function(n,a,r){if(r=r||function(){},!n.length||0>=t)return r();var o=0,s=0,d=0;(function l(){if(o>=n.length)return r();for(;d<t&&s<n.length;)s+=1,d+=1,a(n[s-1],function(t){t?(r(t),r=function(){}):(o+=1,d-=1,o>=n.length?r():l())})})()}},x=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[l.each].concat(n))}},_=function(t,n){return function(){var a=Array.prototype.slice.call(arguments);return n.apply(null,[w(t)].concat(a))}},k=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[l.eachSeries].concat(n))}},C=function(t,n,a,r){if(n=b(n,function(t,n){return{index:n,value:t}}),!r)t(n,function(t,n){a(t.value,function(t){n(t)})});else{var o=[];t(n,function(t,n){a(t.value,function(a,r){o[t.index]=r,n(a)})},function(t){r(t,o)})}};l.map=x(C),l.mapSeries=k(C),l.mapLimit=function(t,n,a,r){return T(n)(t,a,r)};var T=function(t){return _(t,C)};l.reduce=function(t,n,a,r){l.eachSeries(t,function(t,r){a(n,t,function(t,a){n=a,r(t)})},function(t){r(t,n)})},l.inject=l.reduce,l.foldl=l.reduce,l.reduceRight=function(t,n,a,r){var o=b(t,function(t){return t}).reverse();l.reduce(o,n,a,r)},l.foldr=l.reduceRight;var E=function(t,n,a,r){var o=[];n=b(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){a(t.value,function(a){a&&o.push(t),n()})},function(){r(b(o.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};l.filter=x(E),l.filterSeries=k(E),l.select=l.filter,l.selectSeries=l.filterSeries;var S=function(t,n,a,r){var o=[];n=b(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){a(t.value,function(a){a||o.push(t),n()})},function(){r(b(o.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};l.reject=x(S),l.rejectSeries=k(S);var A=function(t,n,a,r){t(n,function(t,n){a(t,function(a){a?(r(t),r=function(){}):n()})},function(){r()})};l.detect=x(A),l.detectSeries=k(A),l.some=function(t,n,a){l.each(t,function(t,r){n(t,function(t){t&&(a(!0),a=function(){}),r()})},function(){a(!1)})},l.any=l.some,l.every=function(t,n,a){l.each(t,function(t,r){n(t,function(t){t||(a(!1),a=function(){}),r()})},function(){a(!0)})},l.all=l.every,l.sortBy=function(t,n,a){l.map(t,function(t,a){n(t,function(n,r){n?a(n):a(null,{value:t,criteria:r})})},function(t,n){if(t)return a(t);a(null,b(n.sort(function(t,n){var r=t.criteria,a=n.criteria;return r<a?-1:r>a?1:0}),function(t){return t.value}))})},l.auto=function(t,n){n=n||function(){};var a=v(t),r=a.length;if(!r)return n();var o={},s=[],d=function(t){s.unshift(t)},c=function(t){for(var n=0;n<s.length;n+=1)if(s[n]===t)return void s.splice(n,1)},f=function(){r--,g(s.slice(0),function(t){t()})};d(function(){if(!r){var t=n;n=function(){},t(null,o)}}),g(a,function(a){var r=h(t[a])?t[a]:[t[a]],s=function(t){var r=Array.prototype.slice.call(arguments,1);if(1>=r.length&&(r=r[0]),t){var s={};g(v(o),function(t){s[t]=o[t]}),s[a]=r,n(t,s),n=function(){}}else o[a]=r,l.setImmediate(f)},m=r.slice(0,u(r.length-1))||[],b=function(){return y(m,function(t,n){return t&&o.hasOwnProperty(n)},!0)&&!o.hasOwnProperty(a)};if(b())r[r.length-1](s,o);else{var w=function(){b()&&(c(w),r[r.length-1](s,o))};d(w)}})},l.retry=function(t,n,a){var r=5,o=[];'function'==typeof t&&(a=n,n=t,t=r),t=parseInt(t,10)||r;var s=function(r,s){for(var d=function(t,n){return function(a){t(function(t,r){a(!t||n,{err:t,result:r})},s)}};t;)o.push(d(n,!(t-=1)));l.series(o,function(t,n){n=n[n.length-1],(r||a)(n.err,n.result)})};return a?s():s},l.waterfall=function(t,n){if(n=n||function(){},!h(t)){var a=new Error('First argument to waterfall must be an array of functions');return n(a)}if(!t.length)return n();var r=function(t){return function(a){if(a)n.apply(null,arguments),n=function(){};else{var o=Array.prototype.slice.call(arguments,1),s=t.next();s?o.push(r(s)):o.push(n),l.setImmediate(function(){t.apply(null,o)})}}};r(l.iterator(t))()};var I=function(t,n,a){if(a=a||function(){},h(n))t.map(n,function(t,n){t&&t(function(t){var a=Array.prototype.slice.call(arguments,1);1>=a.length&&(a=a[0]),n.call(null,t,a)})},a);else{var r={};t.each(v(n),function(t,a){n[t](function(n){var o=Array.prototype.slice.call(arguments,1);1>=o.length&&(o=o[0]),r[t]=o,a(n)})},function(t){a(t,r)})}};l.parallel=function(t,n){I({map:l.map,each:l.each},t,n)},l.parallelLimit=function(t,n,a){I({map:T(n),each:w(n)},t,a)},l.series=function(t,n){if(n=n||function(){},h(t))l.mapSeries(t,function(t,n){t&&t(function(t){var a=Array.prototype.slice.call(arguments,1);1>=a.length&&(a=a[0]),n.call(null,t,a)})},n);else{var a={};l.eachSeries(v(t),function(n,r){t[n](function(t){var o=Array.prototype.slice.call(arguments,1);1>=o.length&&(o=o[0]),a[n]=o,r(t)})},function(t){n(t,a)})}},l.iterator=function(t){var n=function(a){var r=function(){return t.length&&t[a].apply(null,arguments),r.next()};return r.next=function(){return a<t.length-1?n(a+1):null},r};return n(0)},l.apply=function(t){var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var N=function(t,n,a,o){var s=[];t(n,function(t,n){a(t,function(t,a){s=s.concat(a||[]),n(t)})},function(t){o(t,s)})};l.concat=x(N),l.concatSeries=k(N),l.whilst=function(t,n,a){t()?n(function(r){return r?a(r):void l.whilst(t,n,a)}):a()},l.doWhilst=function(t,n,a){t(function(r){if(r)return a(r);var o=Array.prototype.slice.call(arguments,1);n.apply(null,o)?l.doWhilst(t,n,a):a()})},l.until=function(t,n,a){t()?a():n(function(r){return r?a(r):void l.until(t,n,a)})},l.doUntil=function(t,n,a){t(function(r){if(r)return a(r);var o=Array.prototype.slice.call(arguments,1);n.apply(null,o)?a():l.doUntil(t,n,a)})},l.queue=function(t,n){function a(t,n,a,r){return t.started||(t.started=!0),h(n)||(n=[n]),0==n.length?l.setImmediate(function(){t.drain&&t.drain()}):void g(n,function(n){var o={data:n,callback:'function'==typeof r?r:null};a?t.tasks.unshift(o):t.tasks.push(o),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),l.setImmediate(t.process)})}n===void 0&&(n=1);var r=0,o={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,n){a(o,t,!1,n)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(t,n){a(o,t,!0,n)},process:function(){if(!o.paused&&r<o.concurrency&&o.tasks.length){var n=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),r+=1;var a=function(){r-=1,n.callback&&n.callback.apply(n,arguments),o.drain&&0===o.tasks.length+r&&o.drain(),o.process()},s=d(a);t(n.data,s)}},length:function(){return o.tasks.length},running:function(){return r},idle:function(){return 0===o.tasks.length+r},pause:function(){!0===o.paused||(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)l.setImmediate(o.process)}}};return o},l.priorityQueue=function(t,n){function a(t,n){return t.priority-n.priority}function r(t,n,a){for(var r=-1,o=t.length-1,s;r<o;)s=r+(o-r+1>>>1),0<=a(n,t[s])?r=s:o=s-1;return r}function o(t,n,o,s){return t.started||(t.started=!0),h(n)||(n=[n]),0==n.length?l.setImmediate(function(){t.drain&&t.drain()}):void g(n,function(n){var d={data:n,priority:o,callback:'function'==typeof s?s:null};t.tasks.splice(r(t.tasks,d,a)+1,0,d),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),l.setImmediate(t.process)})}var s=l.queue(t,n);return s.push=function(t,n,a){o(s,t,n,a)},delete s.unshift,s},l.cargo=function(t,n){var a=!1,r=[],o={tasks:r,payload:n,saturated:null,empty:null,drain:null,drained:!0,push:function(t,a){h(t)||(t=[t]),g(t,function(t){r.push({data:t,callback:'function'==typeof a?a:null}),o.drained=!1,o.saturated&&r.length===n&&o.saturated()}),l.setImmediate(o.process)},process:function s(){if(!a){if(0===r.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var d='number'==typeof n?r.splice(0,n):r.splice(0,r.length),l=b(d,function(t){return t.data});o.empty&&o.empty(),a=!0,t(l,function(){a=!1;var t=arguments;g(d,function(n){n.callback&&n.callback.apply(null,t)}),s()})}},length:function(){return r.length},running:function(){return a}};return o};var j=function(t){return function(n){var a=Array.prototype.slice.call(arguments,1);n.apply(null,a.concat([function(n){var a=Array.prototype.slice.call(arguments,1);'undefined'!=typeof console&&(n?console.error&&console.error(n):console[t]&&g(a,function(n){console[t](n)}))}]))}};l.log=j('log'),l.dir=j('dir'),l.memoize=function(t,n){var a={},r={};n=n||function(t){return t};var o=function(){var o=Array.prototype.slice.call(arguments),s=o.pop(),d=n.apply(null,o);d in a?l.nextTick(function(){s.apply(null,a[d])}):d in r?r[d].push(s):(r[d]=[s],t.apply(null,o.concat([function(){a[d]=arguments;var t=r[d];delete r[d];for(var n=0,o=t.length;n<o;n++)t[n].apply(null,arguments)}])))};return o.memo=a,o.unmemoized=t,o},l.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},l.times=function(t,n,a){for(var r=[],o=0;o<t;o++)r.push(o);return l.map(r,n,a)},l.timesSeries=function(t,n,a){for(var r=[],o=0;o<t;o++)r.push(o);return l.mapSeries(r,n,a)},l.seq=function(){var t=arguments;return function(){var n=this,a=Array.prototype.slice.call(arguments),r=a.pop();l.reduce(t,a,function(t,a,r){a.apply(n,t.concat([function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);r(t,n)}]))},function(t,a){r.apply(n,[t].concat(a))})}},l.compose=function(){return l.seq.apply(null,Array.prototype.reverse.call(arguments))};var R=function(t,n){var a=function(){var a=this,r=Array.prototype.slice.call(arguments),o=r.pop();return t(n,function(t,n){t.apply(a,r.concat([n]))},o)};if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return a.apply(this,r)}return a};l.applyEach=x(R),l.applyEachSeries=k(R),l.forever=function(t,n){function a(r){if(r){if(n)return n(r);throw r}t(a)}a()},'undefined'!=typeof t&&t.exports?t.exports=l:(o=[],s=function(){return l}.apply(n,o),!(s!==void 0&&(t.exports=s)))})()}).call(n,a(5),a(48).setImmediate)},function(t,n,a){(function(t,n){(function(t){'use strict';function a(t){'function'!=typeof t&&(t=new Function(''+t));for(var n=Array(arguments.length-1),a=0;a<n.length;a++)n[a]=arguments[a+1];var r={callback:t,args:n};return g[h]=r,w(h),h++}function r(t){delete g[t]}function o(t){var n=t.callback,a=t.args;switch(a.length){case 0:n();break;case 1:n(a[0]);break;case 2:n(a[0],a[1]);break;case 3:n(a[0],a[1],a[2]);break;default:n.apply(void 0,a);}}function s(t){if(b)setTimeout(s,0,t);else{var n=g[t];if(n){b=!0;try{o(n)}finally{r(t),b=!1}}}}function d(){w=function(t){n.nextTick(function(){s(t)})}}function l(){if(t.postMessage&&!t.importScripts){var n=!0,a=t.onmessage;return t.onmessage=function(){n=!1},t.postMessage('','*'),t.onmessage=a,n}}function c(){var n='setImmediate$'+Math.random()+'$',a=function(a){a.source===t&&'string'==typeof a.data&&0===a.data.indexOf(n)&&s(+a.data.slice(n.length))};t.addEventListener?t.addEventListener('message',a,!1):t.attachEvent('onmessage',a),w=function(a){t.postMessage(n+a,'*')}}function u(){var t=new MessageChannel;t.port1.onmessage=function(t){var n=t.data;s(n)},w=function(n){t.port2.postMessage(n)}}function f(){var t=y.documentElement;w=function(n){var a=y.createElement('script');a.onreadystatechange=function(){s(n),a.onreadystatechange=null,t.removeChild(a),a=null},t.appendChild(a)}}function m(){w=function(t){setTimeout(s,0,t)}}if(!t.setImmediate){var h=1,g={},b=!1,y=t.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(t),w;v=v&&v.setTimeout?v:t,'[object process]'==={}.toString.call(t.process)?d():l()?c():t.MessageChannel?u():y&&'onreadystatechange'in y.createElement('script')?f():m(),v.setImmediate=a,v.clearImmediate=r}})('undefined'==typeof self?'undefined'==typeof t?this:t:self)}).call(n,a(3),a(5))},function(){},function(t,n){(function(n){t.exports=n}).call(n,{})},function(t,n,a){function r(t){return a(o(t))}function o(t){var n=s[t];if(!(n+1))throw new Error('Cannot find module \''+t+'\'.');return n}var s={"./N3Lexer":89,"./N3Lexer.js":89,"./N3Parser":90,"./N3Parser.js":90,"./N3Store":137,"./N3Store.js":137,"./N3StreamParser":138,"./N3StreamParser.js":138,"./N3StreamWriter":144,"./N3StreamWriter.js":144,"./N3Util":91,"./N3Util.js":91,"./N3Writer":96,"./N3Writer.js":96};r.keys=function(){return Object.keys(s)},r.resolve=o,t.exports=r,r.id=233},function(t,n){'use strict';function a(t){var n=t.length;if(0<n%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===t[n-2]?2:'='===t[n-1]?1:0}function r(t){return s[63&t>>18]+s[63&t>>12]+s[63&t>>6]+s[63&t]}function o(t,n,a){for(var o=[],s=n,d;s<a;s+=3)d=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(r(d));return o.join('')}n.byteLength=function(t){return 3*t.length/4-a(t)},n.toByteArray=function(t){var n=t.length,r,o,s,l,u;l=a(t),u=new c(3*n/4-l),o=0<l?n-4:n;var f=0;for(r=0;r<o;r+=4)s=d[t.charCodeAt(r)]<<18|d[t.charCodeAt(r+1)]<<12|d[t.charCodeAt(r+2)]<<6|d[t.charCodeAt(r+3)],u[f++]=255&s>>16,u[f++]=255&s>>8,u[f++]=255&s;return 2===l?(s=d[t.charCodeAt(r)]<<2|d[t.charCodeAt(r+1)]>>4,u[f++]=255&s):1===l&&(s=d[t.charCodeAt(r)]<<10|d[t.charCodeAt(r+1)]<<4|d[t.charCodeAt(r+2)]>>2,u[f++]=255&s>>8,u[f++]=255&s),u},n.fromByteArray=function(t){for(var n=t.length,a=n%3,r='',d=[],l=16383,c=0,u=n-a,f;c<u;c+=l)d.push(o(t,c,c+l>u?u:c+l));return 1==a?(f=t[n-1],r+=s[f>>2],r+=s[63&f<<4],r+='=='):2==a&&(f=(t[n-2]<<8)+t[n-1],r+=s[f>>10],r+=s[63&f>>4],r+=s[63&f<<2],r+='='),d.push(r),d.join('')};for(var s=[],d=[],c='undefined'==typeof Uint8Array?Array:Uint8Array,l='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',u=0,f=l.length;u<f;++u)s[u]=l[u],d[l.charCodeAt(u)]=u;d[45]=62,d[95]=63},function(t,n){n.read=function(t,n,a,r,o){var l=8*o-r-1,c=(1<<l)-1,u=c>>1,f=-7,h=a?o-1:0,g=a?-1:1,d=t[n+h],s,b;for(h+=g,s=d&(1<<-f)-1,d>>=-f,f+=l;0<f;s=256*s+t[n+h],h+=g,f-=8);for(b=s&(1<<-f)-1,s>>=-f,f+=r;0<f;b=256*b+t[n+h],h+=g,f-=8);if(0===s)s=1-u;else{if(s===c)return b?NaN:(d?-1:1)*Infinity;b+=v(2,r),s-=u}return(d?-1:1)*b*v(2,s-r)},n.write=function(t,n,a,r,o,f){var h=8*f-o-1,g=(1<<h)-1,b=g>>1,y=23===o?5.960464477539063e-8-6.617444900424222e-24:0,x=r?0:f-1,_=r?1:-1,d=0>n||0===n&&0>1/n?1:0,k,C,m;for(n=u(n),isNaN(n)||n===Infinity?(C=isNaN(n)?1:0,k=g):(k=w(l(n)/s),1>n*(m=v(2,-k))&&(k--,m*=2),n+=1<=k+b?y/m:y*v(2,1-b),2<=n*m&&(k++,m/=2),k+b>=g?(C=0,k=g):1<=k+b?(C=(n*m-1)*v(2,o),k+=b):(C=n*v(2,b-1)*v(2,o),k=0));8<=o;t[a+x]=255&C,x+=_,C/=256,o-=8);for(k=k<<o|C,h+=o;0<h;t[a+x]=255&k,x+=_,k/=256,h-=8);t[a+x-_]|=128*d}},function(){},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n,a){t.copy(n,a)}var s=a(4).Buffer;t.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var n={data:t,next:null};0<this.length?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return'';for(var n=this.head,a=''+n.data;n=n.next;)a+=t+n.data;return a},t.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var n=s.allocUnsafe(t>>>0),a=this.head,r=0;a;)o(a.data,n,r),r+=a.data.length,a=a.next;return n},t}()},function(t,n,a){(function(n){function a(t){try{if(!n.localStorage)return!1}catch(t){return!1}var a=n.localStorage[t];return null!=a&&'true'===(a+'').toLowerCase()}t.exports=function(t,n){if(a('noDeprecation'))return t;var r=!1;return function(){if(!r){if(a('throwDeprecation'))throw new Error(n);else a('traceDeprecation')?console.trace(n):console.warn(n);r=!0}return t.apply(this,arguments)}}}).call(n,a(3))},function(t,n,a){'use strict';function r(t){return this instanceof r?void o.call(this,t):new r(t)}t.exports=r;var o=a(143),s=a(50);s.inherits=a(1),s.inherits(r,o),r.prototype._transform=function(t,n,a){a(null,t)}},function(t,n,a){t.exports=a(93)},function(t,n,a){t.exports=a(33)},function(t,n,a){t.exports=a(49).Transform},function(t,n,a){t.exports=a(49).PassThrough},function(t){t.exports=function(t){return t&&'object'==typeof t&&'function'==typeof t.copy&&'function'==typeof t.fill&&'function'==typeof t.readUInt8}},function(t){t.exports='function'==typeof Object.create?function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(13),c=function(t){function n(){r(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.termType='DefaultGraph',t.value='',t}return s(n,t),d(n,[{key:'toCanonical',value:function(){return this.value}}]),n}(l);t.exports=c},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(13),c=function(t){function n(){r(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.termType=n.termType,t}return s(n,t),d(n,[{key:'toString',value:function(){return'()'}}]),n}(l);c.termType='empty',t.exports=c},function(t){'use strict';var n=function(){return{parseJSON:function(t,n,a){var r={},o=a.sym(n),s,d,l;for(var c in t){0===c.indexOf('_:')?r[c]?s=r[c]:(s=a.bnode(c),r[c]=s):s=a.sym(c);var u=t[c];for(var f in u){var m=u[f];for(var h in d=a.sym(f),m){var g=m[h];if('uri'===g.type)l=a.sym(g.value),a.add(s,d,l,o);else if('BlankNode'===g.type)r[g.value]?l=r[g.value]:(l=a.bnode(g.value),r[g.value]=l),a.add(s,d,l,o);else if('Literal'===g.type)l=g.datatype?a.literal(g.value,void 0,a.sym(g.datatype)):g.lang?a.literal(g.value,g.lang):a.literal(g.value),a.add(s,d,l,o);else throw new Error('error: unexpected termtype: '+h.type)}}}}}}();t.exports=n},function(t,n,a){'use strict';var r=a(32);t.exports=function(t){function n(t){for(var n=l()+'SELECT ',a=0;a<t.vars.length;a++)n+=t.vars[a]+' ';return n+='\n',n}function a(t){var n='',a=t.statements;for(var o in a)r.debug('Found statement: '+a),n+=l()+a[o]+'\n';return n}function o(t){var n='';for(var a in t.constraints){var r=t.constraints[a];n+=l()+'FILTER ( '+r.describe(a)+' ) \n'}return n}function s(t){for(var n='',d=0;d<t.optional.length;d++)r.debug('Found optional query'),n+=l()+'OPTIONAL { \n',c++,n+=a(t.optional[d]),n+=o(t.optional[d]),n+=s(t.optional[d]),c--,n+=l()+'}\n';return n}function d(t){var n=l()+'WHERE \n{ \n';return c++,n+=a(t),n+=o(t),n+=s(t),c--,n+='}',n}function l(){for(var t='',n=0;n<c;n++)t+='    ';return t}var c=0;return function(t){return n(t)+d(t.pat)}(t)}},function(t,n,a){'use strict';var r=a(32),o=a(69).Query;t.exports=function(t,n,s){function a(t){if(L[t])return L[t];var n=s.variable(t);return L[t]=n,n}function d(t){return'string'==typeof t&&t.match(/[^ \n\t]/)}function l(t){return'string'==typeof t&&t.match(/^[\?\$]/)}function c(t){return'string'==typeof t?t.replace(/^&lt;/,'<').replace(/&gt;$/,'>'):t}function u(t){return'string'==typeof t&&t.match(/^<[^>]*>$/)}function f(t){return'string'==typeof t&&(t.match(/^_:/)||t.match(/^$/))}function m(t){return'string'==typeof t&&t.match(/:$/)}function h(t){return'string'==typeof t&&t.match(/^:|^[^_][^:]*:/)}function g(t){var n=t.split(':');return n[0]}function b(t){var n=t.split(':');return n[1]}function y(t){return u(t)?t.slice(1,t.length-1):t}function v(t){var n=-1===t.indexOf('\'')?null:t.indexOf('\''),o=-1===t.indexOf('"')?null:t.indexOf('"');if(!n&&!o){var d=[,];return d[0]=t,d}var a=[,,],l,c;if(!n||o&&o<n)l='"',c=o;else if(!o||n&&n<o)l='\'',c=n;else return r.error('SQARQL QUERY OOPS!'),a;a[0]=t.slice(0,c);var u=t.slice(c+1).indexOf(l);if(-1===u)return r.error('SPARQL parsing error: no matching parentheses in literal '+t),t;var f;return t.slice(u+c+2).match(/^\^\^/)?(f=t.slice(u+c+2).indexOf(' '),a[1]=s.literal(t.slice(c+1,c+1+u),'',s.sym(y(t.slice(c+4+u,c+2+u+f)))),a=a.concat(v(t.slice(u+c+3+f)))):t.slice(u+c+2).match(/^@/)?(f=t.slice(u+c+2).indexOf(' '),a[1]=s.literal(t.slice(c+1,c+1+u),t.slice(c+3+u,c+2+u+f),null),a=a.concat(v(t.slice(u+c+2+f)))):(a[1]=s.literal(t.slice(c+1,c+1+u),'',null),r.info('Literal found: '+a[1]),a=a.concat(v(t.slice(u+c+2)))),a}function w(t){t=t.replace(/\(/g,' ( ').replace(/\)/g,' ) ').replace(/</g,' <').replace(/>/g,'> ').replace(/{/g,' { ').replace(/}/g,' } ').replace(/[\t\n\r]/g,' ').replace(/; /g,' ; ').replace(/\. /g,' . ').replace(/, /g,' , '),r.info('New str into spaceDelimit: \n'+t);var n=[],a=t.split(' ');for(var o in a)d(a[o])&&(n=n.concat(a[o]));return n}function _(t){for(var n=t,a=0;a<n.length;a++)if('a'===n[a]&&(n[a]='<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>'),'is'===n[a]&&'of'===n[a+2]){n.splice(a,1),n.splice(a+1,1);var r=n[a-1];n[a-1]=n[a+1],n[a+1]=r}return n}function k(t){for(var n=[],o=0;o<t.length;o++){if('string'!=typeof t[o]){n[o]=t[o];continue}t[o]=c(t[o]),l(t[o])?n[o]=a(t[o].slice(1)):f(t[o])?(r.info(t[o]+' was identified as a bnode.'),n[o]=s.bnode()):u(t[o])?(r.info(t[o]+' was identified as a symbol.'),n[o]=s.sym(y(t[o]))):h(t[o])?(r.info(t[o]+' was identified as a prefixed symbol'),M[g(t[o])]?n[o]=s.sym(t[o]=M[g(t[o])]+b(t[o])):(r.error('SPARQL error: '+t[o]+' with prefix '+g(t[o])+' does not have a correct prefix entry.'),n[o]=t[o])):n[o]=t[o]}return n}function C(t,n){for(var a=0;a<n.length;a++)if('string'==typeof n[a]&&n[a].toLowerCase()===t.toLowerCase())return a;return null}function T(t,n){for(var a=[],r=0;r<n.length;r++)'string'==typeof n[r]&&n[r].toLowerCase()===t.toLowerCase()&&a.push(r);return a}function E(t,n,a){r.info('Looking for a close bracket of type '+a+' in '+t);for(var o=0,s=0;s<t.length;s++)if(t[s]===n&&o++,t[s]===a&&o--,0>o)return s;return r.error('Statement had no close parenthesis in SPARQL query'),0}function S(t){return this.describe=function(n){return n+' = '+t.toNT()},this.test=function(n){return t.sameTerm(n)},this}function A(t){this.describe=function(n){return'REGEXP( \''+t+'\' , '+n+' )'},this.test=function(n){var a=new RegExp(t);return!!n.value&&a.test(n.value)}}function I(t,n){3===t.length&&'Variable'===t[0].termType&&('NamedNode'===t[2].termType||'Literal'===t[2].termType)?'='===t[1]?(r.debug('Constraint added: '+t),n.constraints[t[0]]=new S(t[2])):'>'===t[1]?(r.debug('Constraint added: '+t),n.constraints[t[0]]=new S(t[2])):'<'===t[1]?(r.debug('Constraint added: '+t),n.constraints[t[0]]=new S(t[2])):r.warn('I don\'t know how to handle the constraint: '+t):6===t.length&&'string'==typeof t[0]&&'regexp'===t[0].toLowerCase()&&'('===t[1]&&')'===t[5]&&','===t[3]&&'Variable'===t[4].termType&&'Literal'===t[2].termType&&(r.debug('Constraint added: '+t),n.constraints[t[4]]=new A(t[2].value))}function N(t,n){r.debug('Optional query: '+t+' not yet implemented.');var a=s.formula();j(t,a),n.optional.push(a)}function j(t,n){var a=k(t),o;r.debug('WHERE: '+a);for(var s;C('OPTIONAL',a);)s=C('OPTIONAL',a),r.debug('OPT: '+s+' '+a[s]+' in '+a),'{'!==a[s+1]&&r.warn('Bad optional opening bracket in word '+s),o=E(a.slice(s+2),'{','}'),-1===o?r.error('No matching bracket in word '+s):(N(a.slice(s+2,s+2+o),n),s=C('OPTIONAL',a),o=E(a.slice(s+2),'{','}'),a.splice(s,o+3));for(r.debug('WHERE after optionals: '+a);C('FILTER',a);){var d=C('FILTER',a);'('!==a[d+1]&&r.warn('Bad filter opening bracket in word '+d),o=E(a.slice(d+2),'(',')'),-1===o?r.error('No matching bracket in word '+d):(I(a.slice(d+2,d+2+o),n),d=C('FILTER',a),o=E(a.slice(d+2),'(',')'),a.splice(d,o+3))}r.debug('WHERE after filters and optionals: '+a),R(a,n)}function R(t,n){var a=[,];a[0]=-1;for(var o=a.concat(T('.',t)),s=[],d=0;d<o.length-1;d++)s[d]=t.slice(o[d]+1,o[d+1]);for(d in s){r.info('s+p+o '+d+' = '+s[d]);var l=s[d][0];s[d].splice(0,1);var c=a.concat(T(';',s[d]));c.push(s[d].length);for(var u=[],f=0;f<c.length-1;f++)u[f]=s[d].slice(c[f]+1,c[f+1]);for(d in u){r.info('p+o '+d+' = '+s[d]);var m=u[d][0];u[d].splice(0,1);var h=a.concat(T(',',u[d]));h.push(u[d].length);var g=[];for(f=0;f<h.length-1;f++)g[f]=u[d].slice(h[f]+1,h[f+1]);for(d in g){var b=g[d][0];r.info('Subj='+l+' Pred='+m+' Obj='+b),n.add(l,m,b)}}}}var L=[];r.info('SPARQL input: \n'+t);var O=new o,P=function(t){var n=v(t),a=[];for(var o in n)a='string'==typeof n[o]?a.concat(w(n[o])):a.concat(n[o]);return a=_(a),r.info('SPARQL Tokens: '+a),a}(t),M=function(t){var n=T('PREFIX',t),o=[];for(var s in n){var d=t[n[s]+1],a=t[n[s]+2];if(!m(d))r.error('Invalid SPARQL prefix: '+d);else if(!u(a))r.error('Invalid SPARQL symbol: '+a);else{r.info('Prefix found: '+d+' -> '+a);var l=g(d),c=y(a);o[l]=c}}return o}(P);M.rdf||(M.rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#'),M.rdfs||(M.rdfs='http://www.w3.org/2000/01/rdf-schema#');var D=C('SELECT',P),B=C('WHERE',P);if(0>D||0>B||D>B)return r.error('Invalid or nonexistent SELECT and WHERE tags in SPARQL query'),!1;if(function(t,n){for(var o in r.info('SPARQL vars: '+t),t)if(l(t[o])){r.info('Added '+t[o]+' to query variables from SPARQL');var s=a(t[o].slice(1));n.vars.push(s),s.label=t[o].slice(1)}else r.warn('Incorrect SPARQL variable in SELECT: '+t[o])}(P.slice(D+1,B),O),j(P.slice(B+2,P.length-1),O.pat),n)return O;for(var U in O.pat.statements){var x=O.pat.statements[U];'NamedNode'===x.subject.termType&&s.fetcher&&s.fetcher.lookUpThing(x.subject,'sparql:'+x.subject),'NamedNode'===x.object.termType&&s.fetcher&&s.fetcher.lookUpThing(x.object,'sparql:'+x.object)}return O}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(64),l=function(t){return t&&t.__esModule?t:{default:t}}(d),c=a(12).docpart,u=a(98),f=a(70).namedNode,m=a(51),h=a(97),g=a(12).join,b=a(24),y=function(){function t(n){if(r(this,t),this.store=n,n.updater)throw new Error('You can\'t have two UpdateManagers for the same store');n.fetcher||(n.fetcher=new u(n)),n.updater=this,this.ifps={},this.fps={},this.ns={},this.ns.link=m('http://www.w3.org/2007/ont/link#'),this.ns.http=m('http://www.w3.org/2007/ont/http#'),this.ns.httph=m('http://www.w3.org/2007/ont/httph#'),this.ns.ldp=m('http://www.w3.org/ns/ldp#'),this.ns.rdf=m('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),this.ns.rdfs=m('http://www.w3.org/2000/01/rdf-schema#'),this.ns.rdf=m('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),this.ns.owl=m('http://www.w3.org/2002/07/owl#'),this.patchControl=[]}return s(t,[{key:'patchControlFor',value:function(t){return this.patchControl[t.uri]||(this.patchControl[t.uri]=[]),this.patchControl[t.uri]}},{key:'editable',value:function(t,n){if(!t)return!1;if(n||(n=this.store),'file:///'===t.slice(0,8)){if(n.holds(n.sym(t),f('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'),f('http://www.w3.org/2007/ont/link#MachineEditableDocument')))return'LOCALFILE';var a=n.statementsMatching(n.sym(t));return console.log('sparql.editable: Not MachineEditableDocument file '+t+'\n'),console.log(a.map(function(t){return t.toNT()}).join('\n')),!1}var o=!1,s=n.each(void 0,this.ns.link('requestedURI'),c(t)),d;if(n.holds(f(t),this.ns.rdf('type'),this.ns.ldp('Resource')))return'SPARQL';for(var l=0,r,u;l<s.length;l++)if(d=s[l],void 0!==d){var m=n.any(d,this.ns.link('response'));if(void 0!==d){var h=n.each(m,this.ns.httph('accept-patch'));if(h.length)for(r=0;r<h.length;r++)if(u=h[r].value.trim(),0<=u.indexOf('application/sparql-update'))return'SPARQL';var g=n.each(m,this.ns.httph('ms-author-via'));if(g.length)for(r=0;r<g.length;r++){if(u=g[r].value.trim(),0<=u.indexOf('SPARQL'))return'SPARQL';if(0<=u.indexOf('DAV'))return'DAV'}var b=n.each(m,this.ns.http('status'));if(b.length)for(r=0;r<b.length;r++)(200===b[r]||404===b[r])&&(o=!0)}else console.log('sparql.editable: No response for '+t+'\n')}if(0===s.length)console.log('sparql.editable: No request for '+t+'\n');else if(o)return!1;console.log('sparql.editable: inconclusive for '+t+'\n')}},{key:'anonymize',value:function(t){return'_:'===t.toNT().substr(0,2)&&this.mentioned(t)?'?'+t.toNT().substr(2):t.toNT()}},{key:'anonymizeNT',value:function(t){return this.anonymize(t.subject)+' '+this.anonymize(t.predicate)+' '+this.anonymize(t.object)+' .'}},{key:'statementBnodes',value:function(t){return[t.subject,t.predicate,t.object].filter(function(t){return t.isBlank})}},{key:'statementArrayBnodes',value:function(t){for(var n=[],a=0;a<t.length;a++)n=n.concat(this.statementBnodes(t[a]));n.sort();for(var r=[],o=0;o<n.length;o++)0!==o&&n[o].sameTerm(n[o-1])||r.push(n[o]);return r}},{key:'cacheIfps',value:function(){this.ifps={};for(var t=this.store.each(void 0,this.ns.rdf('type'),this.ns.owl('InverseFunctionalProperty')),n=0;n<t.length;n++)this.ifps[t[n].uri]=!0;for(this.fps={},t=this.store.each(void 0,this.ns.rdf('type'),this.ns.owl('FunctionalProperty')),n=0;n<t.length;n++)this.fps[t[n].uri]=!0}},{key:'bnodeContext2',value:function(t,n,a){for(var r=this.store.statementsMatching(void 0,void 0,t,n),o=0,s,d;o<r.length;o++)if(this.fps[r[o].predicate.uri]){if(s=r[o].subject,!s.isBlank)return[r[o]];if(a&&(d=this.bnodeContext2(s,n,a-1),d))return d.concat([r[o]])}for(r=this.store.statementsMatching(t,void 0,void 0,n),o=0;o<r.length;o++)if(this.ifps[r[o].predicate.uri]){if(s=r[o].object,!s.isBlank)return[r[o]];if(a&&(d=this.bnodeContext2(s,n,a-1),d))return d.concat([r[o]])}return null}},{key:'bnodeContext1',value:function(t,n){for(var a=0,r;3>a;a++)if(r=this.bnodeContext2(t,n,a),null!==r)return r;return this.store.connectedStatements(t,n)}},{key:'mentioned',value:function(t){return 0!==this.store.statementsMatching(t).length||0!==this.store.statementsMatching(void 0,t).length||0!==this.store.statementsMatching(void 0,void 0,t).length}},{key:'bnodeContext',value:function(t,n){var a=[];if(t.length){this.cacheIfps();for(var r=0,o;r<t.length;r++)o=t[r],this.mentioned(o)&&(a=a.concat(this.bnodeContext1(o,n)))}return a}},{key:'statementContext',value:function(t){var n=this.statementBnodes(t);return this.bnodeContext(n,t.why)}},{key:'contextWhere',value:function(t){var n=this;return t&&0!==t.length?'WHERE { '+t.map(function(t){return n.anonymizeNT(t)}).join('\n')+' }\n':''}},{key:'fire',value:function(t,n,a){var r=this;return Promise.resolve().then(function(){if(!t)throw new Error('No URI given for remote editing operation: '+n);console.log('sparql: sending update to <'+t+'>');return r.store.fetcher.webOperation('PATCH',t,{noMeta:!0,contentType:'application/sparql-update',body:n})}).then(function(r){if(!r.ok){var o='sparql: update failed for <'+t+'> status='+r.status+', '+r.statusText+'\n   for query: '+n;throw console.log(o),new Error(o)}console.log('sparql: update Ok for <'+t+'>'),a(t,r.ok,r.responseText,r)}).catch(function(n){a(t,!1,n.message,n)})}},{key:'update_statement',value:function(t){if(!t||t.why){var n=this,a=this.statementContext(t);return{statement:t?[t.subject,t.predicate,t.object,t.why]:void 0,statementNT:t?this.anonymizeNT(t):void 0,where:n.contextWhere(a),set_object:function(t,a){var r=this.where;r+='DELETE DATA { '+this.statementNT+' } ;\n',r+='INSERT DATA { '+this.anonymize(this.statement[0])+' '+this.anonymize(this.statement[1])+' '+this.anonymize(t)+'  . }\n',n.fire(this.statement[3].uri,r,a)}}}}},{key:'insert_statement',value:function(t,n){var a=t instanceof Array?t[0]:t,r=this.contextWhere(this.statementContext(a));if(t instanceof Array){for(var o='',s=0;s<t.length;s++)o+=t[s]+'\n';r+='INSERT DATA { '+o+' }\n'}else r+='INSERT DATA { '+this.anonymize(t.subject)+' '+this.anonymize(t.predicate)+' '+this.anonymize(t.object)+'  . }\n';this.fire(a.why.uri,r,n)}},{key:'delete_statement',value:function(t,n){var a=t instanceof Array?t[0]:t,r=this.contextWhere(this.statementContext(a));if(t instanceof Array){for(var o='',s=0;s<t.length;s++)o+=t[s]+'\n';r+='DELETE DATA { '+o+' }\n'}else r+='DELETE DATA { '+this.anonymize(t.subject)+' '+this.anonymize(t.predicate)+' '+this.anonymize(t.object)+'  . }\n';this.fire(a.why.uri,r,n)}},{key:'requestDownstreamAction',value:function(t,n){var a=this.patchControlFor(t);if(!a.pendingUpstream)n(t);else if(!a.downstreamAction)a.downstreamAction=n;else if(''+a.downstreamAction!=''+n)throw new Error('Can\'t wait for > 1 different downstream actions')}},{key:'clearUpstreamCount',value:function(t){var n=this.patchControlFor(t);n.upstreamCount=0}},{key:'getUpdatesVia',value:function(t){var n=this.store.fetcher.getHeader(t,'updates-via');return n&&n.length?n[0].trim():null}},{key:'addDownstreamChangeListener',value:function(t,n){var a=this,r=this.patchControlFor(t);r.downstreamChangeListeners||(r.downstreamChangeListeners=[]),r.downstreamChangeListeners.push(n),this.setRefreshHandler(t,function(t){a.reloadAndSync(t)})}},{key:'reloadAndSync',value:function(t){var n=this.patchControlFor(t),a=this;if(n.reloading)return void console.log('   Already reloading - stop');n.reloading=!0;var r=1e3;(function o(){console.log('try reload - timeout = '+r),a.reload(a.store,t,function(a,s,d){if(n.reloading=!1,!a)0===d.status?(console.log('Network error refreshing the data. Retrying in '+r/1e3),n.reloading=!0,r*=2,setTimeout(o,r)):console.log('Error '+d.status+'refreshing the data:'+s+'. Stopped'+t);else if(n.downstreamChangeListeners)for(var l=0;l<n.downstreamChangeListeners.length;l++)console.log('        Calling downstream listener '+l),n.downstreamChangeListeners[l]()})})()}},{key:'setRefreshHandler',value:function(t,n){var a=this.getUpdatesVia(t),r=n,o=this,s=this,d=1500,l=0;if(!a)return console.log('Server doies not support live updates thoughUpdates-Via :-('),!1;a=g(a,t.uri),a=a.replace(/^http:/,'ws:').replace(/^https:/,'wss:'),console.log('Web socket URI '+a);return function n(){var c;if('undefined'!=typeof WebSocket)c=new WebSocket(a);else if('undefined'!=typeof Services)c=Services.wm.getMostRecentWindow('navigator:browser').WebSocket(a);else if('undefined'!=typeof window&&window.WebSocket)c=window.WebSocket(a);else return void console.log('Live update disabled, as WebSocket not supported by platform :-(');c.onopen=function(){console.log('    websocket open'),d=1500,this.send('sub '+t.uri),l&&(console.log('Web socket has been down, better check for any news.'),s.requestDownstreamAction(t,r))};var u=o.patchControlFor(t);u.upstreamCount=0,c.onerror=function(t){console.log('Error on Websocket:',t)},c.onclose=function(t){console.log('*** Websocket closed with code '+t.code+', reason \''+t.reason+'\' clean = '+t.clean),d*=2,l+=1,console.log('Retrying in '+d+'ms'),setTimeout(function(){console.log('Trying websocket again'),n()},d)},c.onmessage=function(n){if(n.data&&'pub'===n.data.slice(0,3)){if('upstreamCount'in u&&(u.upstreamCount-=1,0<=u.upstreamCount))return void console.log('just an echo: '+u.upstreamCount);console.log('Assume a real downstream change: '+u.upstreamCount+' -> 0'),u.upstreamCount=0,o.requestDownstreamAction(t,r)}}}(),!0}},{key:'update',value:function(t,n,a){try{var r=this.store,s=t?t instanceof l.default?t.statements:t instanceof Array?t:[t]:[],d=n?n instanceof l.default?n.statements:n instanceof Array?n:[n]:[];if(!(s instanceof Array))throw new Error('Type Error '+('undefined'==typeof s?'undefined':o(s))+': '+s);if(!(d instanceof Array))throw new Error('Type Error '+('undefined'==typeof d?'undefined':o(d))+': '+d);if(0===s.length&&0===d.length)return a(null,!0);var c=s.length?s[0].why:d[0].why;if(!c){var u='Error patching: statement does not specify which document to patch:'+s[0]+', '+d[0];throw console.log(u),new Error(u)}var f=this.patchControlFor(c),m=Date.now(),h=['subject','predicate','object','why'],g={delete:s,insert:d};['insert','delete'].map(function(t){g[t].map(function(t){if(!c.sameTerm(t.why))throw new Error('update: destination '+c+' inconsistent with delete quad '+t.why);h.map(function(n){if('undefined'==typeof t[n])throw new Error('update: undefined '+n+' of statement.')})})});var b=this.editable(c.uri,r);if(!b)throw new Error('Can\'t make changes in uneditable '+c);var y;if(0<=b.indexOf('SPARQL')){var v=[];s.length&&(v=this.statementArrayBnodes(s)),d.length&&(v=v.concat(this.statementArrayBnodes(d)));var w=this.bnodeContext(v,c),x=this.contextWhere(w),_='';if(x.length){if(s.length){for(_+='DELETE { ',y=0;y<s.length;y++)_+=this.anonymizeNT(s[y])+'\n';_+=' }\n'}if(d.length){for(_+='INSERT { ',y=0;y<d.length;y++)_+=this.anonymizeNT(d[y])+'\n';_+=' }\n'}_+=x}else{if(s.length){for(_+='DELETE DATA { ',y=0;y<s.length;y++)_+=this.anonymizeNT(s[y])+'\n';_+=' } \n'}if(d.length){for(s.length&&(_+=' ; '),_+='INSERT DATA { ',y=0;y<d.length;y++)_+=this.anonymizeNT(d[y])+'\n';_+=' }\n'}}f.pendingUpstream=f.pendingUpstream?f.pendingUpstream+1:1,'upstreamCount'in f&&(f.upstreamCount+=1,console.log('upstream count up to : '+f.upstreamCount)),this.fire(c.uri,_,function(t,n,o,l){if(l.elapsedTimeMs=Date.now()-m,console.log('success'),n){try{r.remove(s)}catch(t){n=!1,o='Remote Ok BUT error deleting '+s.length+' from store!!! '+t}for(var u=0;u<d.length;u++)r.add(d[u].subject,d[u].predicate,d[u].object,c)}if(a(t,n,o,l),f.pendingUpstream-=1,0===f.pendingUpstream&&f.downstreamAction){var h=f.downstreamAction;delete f.downstreamAction,console.log('delayed downstream action:'),h(c)}})}else if(0<=b.indexOf('DAV'))this.updateDav(c,s,d,a);else if(0<=b.indexOf('LOCALFILE'))try{this.updateLocalFile(c,s,d,a)}catch(t){a(c.uri,!1,'Exception trying to write back file <'+c.uri+'>\n')}else throw new Error('Unhandled edit method: \''+b+'\' for '+c)}catch(t){a(void 0,!1,'Exception in update: '+t+'\n'+$rdf.Util.stackString(t))}}},{key:'updateDav',value:function(t,n,a,r){var o=this.store,s=o.any(t,this.ns.link('request'));if(!s)throw new Error('No record of our HTTP GET request for document: '+t);var d=o.any(s,this.ns.link('response'));if(!d)return null;var l=o.the(d,this.ns.httph('content-type')).value,c=o.statementsMatching(void 0,void 0,void 0,t).slice(),u;for(u=0;u<n.length;u++)b.RDFArrayRemove(c,n[u]);for(u=0;u<a.length;u++)c.push(a[u]);var f=this.serialize(t.uri,c,l),m=o.the(d,this.ns.httph('content-location')),h;m&&(h=g(m.value,h));return o.fetcher.webOperation('PUT',h,{contentType:l,noMeta:!0,body:f}).then(function(s){if(!s.ok)throw new Error(s.error);for(var d=0;d<n.length;d++)o.remove(n[d]);for(d=0;d<a.length;d++)o.add(a[d].subject,a[d].predicate,a[d].object,t);r(t.uri,s.ok,s.responseText,s)}).catch(function(n){r(t.uri,!1,n.message,n)})}},{key:'updateLocalFile',value:function(t,n,a,r){var o=this.store;console.log('Writing back to local file\n');var s=o.statementsMatching(void 0,void 0,void 0,t).slice(),d;for(d=0;d<n.length;d++)b.RDFArrayRemove(s,n[d]);for(d=0;d<a.length;d++)s.push(a[d]);var l=t.uri.lastIndexOf('.');if(1>l)throw new Error('Rewriting file: No filename extension: '+t.uri);var c=t.uri.slice(l+1),f=u.CONTENT_TYPE_BY_EXT[c];if(!f)throw new Error('File extension .'+c+' not supported for data write');var m=this.serialize(t.uri,s,f);console.log('Writing back: <<<'+m+'>>>');var h=t.uri.slice(7),g=Components.classes['@mozilla.org/file/local;1'].createInstance(Components.interfaces.nsILocalFile);if(g.initWithPath(h),!g.exists())throw new Error('Rewriting file <'+t.uri+'> but it does not exist!');var y=Components.classes['@mozilla.org/network/file-output-stream;1'].createInstance(Components.interfaces.nsIFileOutputStream);for(y.init(g,42,parseInt('0666',8),0),y.write(m,m.length),y.close(),d=0;d<n.length;d++)o.remove(n[d]);for(d=0;d<a.length;d++)o.add(a[d].subject,a[d].predicate,a[d].object,t);r(t.uri,!0,'')}},{key:'serialize',value:function(t,n,a){var r=this.store,o;if('string'==typeof n)return n;var s=h(r);switch(s.suggestNamespaces(r.namespaces),s.setBase(t),a){case'text/xml':case'application/rdf+xml':o=s.statementsToXML(n);break;case'text/n3':case'text/turtle':case'application/x-turtle':case'application/n3':o=s.statementsToN3(n);break;default:throw new Error('Content-type '+a+' not supported for data serialization');}return o}},{key:'put',value:function(t,n,a,r){var o=this,s=this.store,d;return Promise.resolve().then(function(){return d=o.serialize(t.uri,n,a),s.fetcher.webOperation('PUT',t.uri,{contentType:a,body:d})}).then(function(a){return a.ok?void(delete s.fetcher.nonexistent[t.uri],delete s.fetcher.requested[t.uri],'string'!=typeof n&&n.map(function(t){s.addStatement(t)}),r(t.uri,a.ok,'',a)):r(t.uri,a.ok,a.error,a)}).catch(function(n){r(t.uri,!1,n.message)})}},{key:'reload',value:function(t,n,a){var r=Date.now();t.fetcher.nowOrWhenFetched(n.uri,{force:!0,noMeta:!0,clearPreviousData:!0},function(t,o,s){if(!t)console.log('    ERROR reloading data: '+o),a(!1,'Error reloading data: '+o,s);else if(s.onErrorWasCalled||200!==s.status)console.log('    Non-HTTP error reloading data! onErrorWasCalled='+s.onErrorWasCalled+' status: '+s.status),a(!1,'Non-HTTP error reloading data: '+o,s);else{var d=Date.now()-r;n.reloadTimeTotal||(n.reloadTimeTotal=0),n.reloadTimeCount||(n.reloadTimeCount=0),n.reloadTimeTotal+=d,n.reloadTimeCount+=1,console.log('    Fetch took '+d+'ms, av. of '+n.reloadTimeCount+' = '+n.reloadTimeTotal/n.reloadTimeCount+'ms.'),a(!0)}})}}]),t}();t.exports=y},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function s(t,n,a){var r=T.default.any(t,n);return r?r.value:a}function d(t,n){var a=n.toDel,r=n.toIns;return new Promise(function(t,n){T.default.updater.update(a,r,function(a,r,o){return r?void t():n(new Error('PATCH failed for resource <'+a+'>: '+o))})})}function l(t){return{groupIndex:T.default.any(t,k.default.vcard('groupIndex')),groupContainer:T.default.sym(t.dir().uri+'Group/')}}Object.defineProperty(n,'__esModule',{value:!0}),n.GroupBuilder=n.Group=n.GroupPicker=n.PeoplePicker=void 0;var c=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),u=function(t,n){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}(['\n        To add someone to this group, drag and drop their WebID URL onto the box.\n      '],['\n        To add someone to this group, drag and drop their WebID URL onto the box.\n      ']),f=a(253),m=r(f),h=a(254),g=r(h),b=a(18),y=r(b),v=a(178),w=a(76),x=a(20),_=a(9),k=r(_),C=a(14),T=r(C),E=n.PeoplePicker=function(){function t(n,a,r,s){o(this,t),this.options=s||{},this.element=n,this.typeIndex=a,this.groupPickedCb=r,this.selectedgroup=this.options.selectedgroup,this.onSelectGroup=this.onSelectGroup.bind(this)}return c(t,[{key:'render',value:function(){var t=this,n=document.createElement('div');if(n.style.maxWidth='350px',n.style.minHeight='200px',n.style.outline='1px solid black',n.style.display='flex',this.selectedgroup){n.style.flexDirection='column';var a=document.createElement('div');new A(a,this.selectedgroup).render();var r=document.createElement('button');r.textContent=(0,m.default)('Change group'),r.addEventListener('click',function(){t.selectedgroup=null,t.render()}),n.appendChild(a),n.appendChild(r)}else this.findAddressBook(this.typeIndex).then(function(a){var r=a.book,o=document.createElement('button');o.textContent=(0,m.default)('Pick an existing group'),o.style.margin='auto',o.addEventListener('click',function(){new S(n,r,t.onSelectGroup).render()});var s=document.createElement('button');s.textContent=(0,m.default)('Create a new group'),s.style.margin='auto',s.addEventListener('click',function(){t.createNewGroup(r).then(function(n){var a=n.group;new I(t.element,r,a,t.onSelectGroup).render()}).catch(function(n){t.element.appendChild((0,w.errorMessageBlock)(document,(0,m.default)('Error creating a new group. ('+n+')')))})}),n.appendChild(o),n.appendChild(s),t.element.innerHTML='',t.element.appendChild(n)}).catch(function(n){t.element.appendChild((0,w.errorMessageBlock)(document,(0,m.default)('Could find your groups. ('+n+')')))});return this.element.innerHTML='',this.element.appendChild(n),this}},{key:'findAddressBook',value:function(t){return new Promise(function(n,a){T.default.fetcher.nowOrWhenFetched(t,function(r,o){if(!r)return a(o);var s=T.default.any(null,k.default.solid('forClass'),k.default.vcard('AddressBook'));if(!s)return a(new Error('no address book registered in the solid type index '+t));var d=T.default.any(s,k.default.solid('instance'));return d?void T.default.fetcher.load(d).then(function(){return n({book:d})}).catch(function(t){return a(new Error('Could not load address book '+t))}):a(new Error('incomplete address book registration'))})})}},{key:'createNewGroup',value:function(t){var n=l(t),a=n.groupIndex,r=n.groupContainer,o=y.default.sym(''+r.uri+g.default.v4().slice(0,8)+'.ttl#this'),s=this.options.defaultNewGroupName||'Untitled Group',c=[o.doc(),a].map(function(n){var r=y.default.st(o,k.default.rdf('type'),k.default.vcard('Group'),n),l=y.default.st(o,k.default.vcard('fn'),s,o.doc(),n),c=y.default.st(t,k.default.vcard('includesGroup'),o,n),u=n.equals(a)?[r,l,c]:[r,l];return d(n.uri,{toIns:u}).then(function(){u.forEach(function(t){T.default.add(t)})})});return Promise.all(c).then(function(){return{group:o}}).catch(function(t){throw console.log('Could not create new group.  PATCH failed '+t),new Error('Couldn\'t create new group.  PATCH failed for ('+(t.xhr?t.xhr.responseURL:'')+')')})}},{key:'onSelectGroup',value:function(t){this.selectedgroup=t,this.groupPickedCb(t),this.render()}}]),t}(),S=n.GroupPicker=function(){function t(n,a,r){o(this,t),this.element=n,this.book=a,this.onSelectGroup=r}return c(t,[{key:'render',value:function(){var t=this;return this.loadGroups().then(function(n){var a=document.createElement('div');a.style.display='flex',a.style.flexDirection='column',n.forEach(function(n){var r=document.createElement('button');r.addEventListener('click',t.handleClickGroup(n)),new A(r,n).render(),a.appendChild(r)}),t.element.innerHTML='',t.element.appendChild(a)}).catch(function(n){t.element.appendChild((0,w.errorMessageBlock)(document,(0,m.default)('There was an error loading your groups. ('+n+')')))}),this}},{key:'loadGroups',value:function(){var t=this;return new Promise(function(n,a){var r=l(t.book),o=r.groupIndex;T.default.fetcher.nowOrWhenFetched(o,function(r,o){if(!r)return a(o);var s=T.default.each(t.book,k.default.vcard('includesGroup'));return n(s)})})}},{key:'handleClickGroup',value:function(t){var n=this;return function(){n.onSelectGroup(t)}}}]),t}(),A=n.Group=function(){function t(n,a){o(this,t),this.element=n,this.group=a}return c(t,[{key:'render',value:function(){var t=document.createElement('div');return t.textContent=(0,m.default)(s(this.group,k.default.vcard('fn'),'['+this.group.value+']')),this.element.innerHTML='',this.element.appendChild(t),this}}]),t}(),I=n.GroupBuilder=function(){function t(n,a,r,s,d){o(this,t),this.element=n,this.book=a,this.group=r,this.onGroupChanged=function(t,n,a){d&&d(t,n,a)},this.groupChangedCb=d,this.doneBuildingCb=s}return c(t,[{key:'refresh',value:function(){}},{key:'render',value:function(){var t=this,n=document.createElement('div');n.style.maxWidth='350px',n.style.minHeight='200px',n.style.outline='1px solid black',n.style.display='flex',n.style.flexDirection='column',(0,v.makeDropTarget)(n,function(n){n.map(function(n){t.add(n).catch(function(n){t.element.appendChild((0,w.errorMessageBlock)(document,(0,m.default)('Could not add the given WebId. ('+n+')')))})})});var a=document.createElement('input');a.type='text',a.value=s(this.group,k.default.vcard('fn'),'Untitled Group'),a.addEventListener('change',function(n){t.setGroupName(n.target.value).catch(function(n){t.element.appendChild((0,w.errorMessageBlock)(document,'Error changing group name. ('+n+')'))})});var r=document.createElement('label');if(r.textContent=(0,m.default)('Group Name:'),r.appendChild(a),n.appendChild(r),T.default.any(this.group,k.default.vcard('hasMember')))T.default.match(this.group,k.default.vcard('hasMember')).forEach(function(a){var r=a.object,o=document.createElement('div');new N(o,r,t.handleRemove(r)).render(),n.appendChild(o)});else{var o=document.createElement('p');o.textContent=(0,m.default)(u),n.appendChild(o)}var d=document.createElement('button');return d.textContent=(0,m.default)('Done'),d.addEventListener('click',function(){t.doneBuildingCb(t.group)}),n.appendChild(d),this.element.innerHTML='',this.element.appendChild(n),this}},{key:'add',value:function(t){var n=this;return new Promise(function(a,r){T.default.fetcher.nowOrWhenFetched(t,function(o,s){if(!o)return n.onGroupChanged(s),r(s);var d=y.default.namedNode(t),l=T.default.any(d,k.default.rdf('type'));return l&&l.equals(k.default.foaf('Person'))?a(d):r(new Error('Only people supported right now. (tried to add something of type '+l.value+')'))})}).then(function(t){var a=y.default.st(n.group,k.default.vcard('hasMember'),t);return T.default.holdsStatement(a)?t:d(n.group.doc().uri,{toIns:[a]}).then(function(){a.why=n.group.doc(),T.default.add(a),n.onGroupChanged(null,'added',t),n.render()})})}},{key:'handleRemove',value:function(t){var n=this;return function(){var a=y.default.st(n.group,k.default.vcard('hasMember'),t);return d(n.group.doc().uri,{toDel:[a]}).then(function(){return T.default.remove(a),n.onGroupChanged(null,'removed',t),n.render(),!0}).catch(function(n){var a=T.default.any(t,k.default.foaf('name')),r=a&&a.value?'Could not remove '+a.value+'. ('+n+')':'Could not remove '+t.value+'. ('+n+')';throw new Error(r)})}}},{key:'setGroupName',value:function(t){var n=this,a=l(this.book),r=a.groupIndex,o=[this.group.doc(),r].map(function(a){var r=T.default.match(n.group,k.default.vcard('fn'),null,a),o=y.default.st(n.group,k.default.vcard('fn'),y.default.literal(t));return d(a.value,{toDel:r,toIns:[o]}).then(function(){T.default.removeStatements(r),o.why=a,T.default.add(o)})});return Promise.all(o)}}]),t}(),N=function(){function t(n,a,r){o(this,t),this.webIdNode=a,this.element=n,this.handleRemove=r}return c(t,[{key:'render',value:function(){var t=this,n=document.createElement('div');n.style.display='flex';var a=s(this.webIdNode,k.default.foaf('img'),x.iconBase+'noun_15059.svg'),r=document.createElement('img');r.src=(0,m.default)(a),r.width='50',r.height='50',r.style.margin='5px';var o=s(this.webIdNode,k.default.foaf('name'),'['+this.webIdNode+']'),d=document.createElement('span');d.innerHTML=(0,m.default)(o),d.style.flexGrow='1',d.style.margin='auto 0';var l=document.createElement('button');return l.textContent='Remove',l.addEventListener('click',function(){return t.handleRemove().catch(function(n){t.element.appendChild((0,w.errorMessageBlock)(document,(0,m.default)(''+n)))})}),l.style.margin='5px',n.appendChild(r),n.appendChild(d),n.appendChild(l),this.element.innerHTML='',this.element.appendChild(n),this}}]),t}()},function(t){'use strict';/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var n=/["'&<>]/;t.exports=function(t){var a=''+t,r=n.exec(a);if(!r)return a;var o='',s=0,d=0,l;for(s=r.index;s<a.length;s++){switch(a.charCodeAt(s)){case 34:l='&quot;';break;case 38:l='&amp;';break;case 39:l='&#39;';break;case 60:l='&lt;';break;case 62:l='&gt;';break;default:continue;}d!==s&&(o+=a.substring(d,s)),d=s+1,o+=l}return d===s?o:o+a.substring(d,s)}},function(t,n,a){(function(r){var o;(function(s){'use strict';function d(t,n){var a=n||0,r=b;return r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]}function l(t,n,a){var r=n&&a||0;'string'==typeof t&&(n='binary'===t?new g(16):null,t=null),t=t||{};var o=t.random||(t.rng||c)();if(o[6]=64|15&o[6],o[8]=128|63&o[8],n)for(var s=0;16>s;s++)n[r+s]=o[s];return n||d(o)}var c,u,f,m,h;s?function(){var t=s.crypto||s.msCrypto;if(!c&&t&&t.getRandomValues)try{var n=new Uint8Array(16);m=c=function(){return t.getRandomValues(n),n},c()}catch(t){}if(!c){var a=Array(16);u=c=function(){for(var t=0,n;16>t;t++)0==(3&t)&&(n=4294967296*Math.random()),a[t]=255&n>>>((3&t)<<3);return a},'undefined'!=typeof console&&console.warn&&console.warn('[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()')}}():function(){try{var t=a(255).randomBytes;f=c=t&&function(){return t(16)},c()}catch(t){}}();for(var g='function'==typeof r?r:Array,b=[],y={},v=0;256>v;v++)b[v]=(v+256).toString(16).substr(1),y[b[v]]=v;var w=c(),x=[1|w[0],w[1],w[2],w[3],w[4],w[5]],_=16383&(w[6]<<8|w[7]),k=0,C=0,T=l;T.v1=function(t,a,r){var o=a&&r||0,s=a||[];t=t||{};var l=null==t.clockseq?_:t.clockseq,c=null==t.msecs?new Date().getTime():t.msecs,u=null==t.nsecs?C+1:t.nsecs,f=c-k+(u-C)/1e4;if(0>f&&null==t.clockseq&&(l=16383&l+1),(0>f||c>k)&&null==t.nsecs&&(u=0),1e4<=u)throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');k=c,C=u,_=l,c+=1.22192928e13;var m=(1e4*(268435455&c)+u)%4294967296;s[o++]=255&m>>>24,s[o++]=255&m>>>16,s[o++]=255&m>>>8,s[o++]=255&m;var h=268435455&1e4*(c/4294967296);s[o++]=255&h>>>8,s[o++]=255&h,s[o++]=16|15&h>>>24,s[o++]=255&h>>>16,s[o++]=128|l>>>8,s[o++]=255&l;for(var g=t.node||x,b=0;6>b;b++)s[o+b]=g[b];return a?a:d(s)},T.v4=l,T.parse=function(t,n,a){var r=n&&a||0,o=0;for(n=n||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>o&&(n[r+o++]=y[t])});16>o;)n[r+o++]=0;return n},T.unparse=d,T.BufferClass=g,T._rng=c,T._mathRNG=u,T._nodeRNG=f,T._whatwgRNG=m,'undefined'!=typeof t&&t.exports?t.exports=T:(o=function(){return T}.call(n,a,n,t),!(o!==void 0&&(t.exports=o)))})('undefined'==typeof window?null:window)}).call(n,a(0).Buffer)},function(t,n,a){'use strict';n.randomBytes=n.rng=n.pseudoRandomBytes=n.prng=a(52),n.createHash=n.Hash=a(53),n.createHmac=n.Hmac=a(151);var r=a(263),o=Object.keys(r),s=['sha1','sha224','sha256','sha384','sha512','md5','rmd160'].concat(o);n.getHashes=function(){return s};var d=a(153);n.pbkdf2=d.pbkdf2,n.pbkdf2Sync=d.pbkdf2Sync;var l=a(265);n.Cipher=l.Cipher,n.createCipher=l.createCipher,n.Cipheriv=l.Cipheriv,n.createCipheriv=l.createCipheriv,n.Decipher=l.Decipher,n.createDecipher=l.createDecipher,n.Decipheriv=l.Decipheriv,n.createDecipheriv=l.createDecipheriv,n.getCiphers=l.getCiphers,n.listCiphers=l.listCiphers;var c=a(284);n.DiffieHellmanGroup=c.DiffieHellmanGroup,n.createDiffieHellmanGroup=c.createDiffieHellmanGroup,n.getDiffieHellman=c.getDiffieHellman,n.createDiffieHellman=c.createDiffieHellman,n.DiffieHellman=c.DiffieHellman;var u=a(291);n.createSign=u.createSign,n.Sign=u.Sign,n.createVerify=u.createVerify,n.Verify=u.Verify,n.createECDH=a(335);var f=a(338);n.publicEncrypt=f.publicEncrypt,n.privateEncrypt=f.privateEncrypt,n.publicDecrypt=f.publicDecrypt,n.privateDecrypt=f.privateDecrypt,n.createCredentials=function(){throw new Error('sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify')},n.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,n,a){'use strict';(function(n){function a(t){if(0!=t.length%r){var a=t.length+(r-t.length%r);t=n.concat([t,o],a)}for(var s=Array(t.length>>>2),d=0,l=0;d<t.length;d+=r,l++)s[l]=t.readInt32LE(d);return s}var r=4,o=new n(r);o.fill(0);t.exports=function(t,r){var o=r(a(t),t.length*8);t=new n(16);for(var s=0;s<o.length;s++)t.writeInt32LE(o[s],s<<2,!0);return t}}).call(n,a(0).Buffer)},function(t,n,a){'use strict';(function(n){function r(t){o.call(this),this._block=new n(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var o=a(43).Transform,s=a(1);s(r,o),r.prototype._transform=function(t,a,r){var o=null;try{'buffer'!==a&&(t=new n(t,a)),this.update(t)}catch(t){o=t}r(o)},r.prototype._flush=function(t){var n=null;try{this.push(this._digest())}catch(t){n=t}t(n)},r.prototype.update=function(t,a){if(!n.isBuffer(t)&&'string'!=typeof t)throw new TypeError('Data must be a string or a buffer');if(this._finalized)throw new Error('Digest already called');n.isBuffer(t)||(t=new n(t,a||'binary'));for(var r=this._block,o=0;this._blockOffset+t.length-o>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)r[s++]=t[o++];this._update(),this._blockOffset=0}for(;o<t.length;)r[this._blockOffset++]=t[o++];for(var d=0,l=8*t.length;0<l;++d)this._length[d]+=l,l=0|this._length[d]/4294967296,0<l&&(this._length[d]-=4294967296*l);return this},r.prototype._update=function(){throw new Error('_update is not implemented')},r.prototype.digest=function(t){if(this._finalized)throw new Error('Digest already called');this._finalized=!0;var n=this._digest();return void 0!==t&&(n=n.toString(t)),n},r.prototype._digest=function(){throw new Error('_digest is not implemented')},t.exports=r}).call(n,a(0).Buffer)},function(t,n,a){(function(n){function r(){this.init(),this._w=c,d.call(this,64,56)}function o(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function u(t,n,a,r){return 0===t?n&a|~n&r:2===t?n&a|n&r|a&r:n^a^r}var s=a(1),d=a(45),f=[1518500249,1859775393,-1894007588,-899497514],c=Array(80);s(r,d),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(n){for(var r=this._w,m=0|this._a,a=0|this._b,h=0|this._c,c=0|this._d,d=0|this._e,g=0;16>g;++g)r[g]=n.readInt32BE(4*g);for(;80>g;++g)r[g]=r[g-3]^r[g-8]^r[g-14]^r[g-16];for(var b=0;80>b;++b){var y=~~(b/20),s=0|o(m)+u(y,a,h,c)+d+r[b]+f[y];d=c,c=h,h=l(a),a=m,m=s}this._a=0|m+this._a,this._b=0|a+this._b,this._c=0|h+this._c,this._d=0|c+this._d,this._e=0|d+this._e},r.prototype._hash=function(){var t=new n(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=r}).call(n,a(0).Buffer)},function(t,n,a){(function(n){function r(){this.init(),this._w=c,d.call(this,64,56)}function o(t){return t<<1|t>>>31}function l(t){return t<<5|t>>>27}function u(t){return t<<30|t>>>2}function f(t,n,a,r){return 0===t?n&a|~n&r:2===t?n&a|n&r|a&r:n^a^r}var s=a(1),d=a(45),m=[1518500249,1859775393,-1894007588,-899497514],c=Array(80);s(r,d),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(n){for(var r=this._w,h=0|this._a,a=0|this._b,g=0|this._c,c=0|this._d,d=0|this._e,b=0;16>b;++b)r[b]=n.readInt32BE(4*b);for(;80>b;++b)r[b]=o(r[b-3]^r[b-8]^r[b-14]^r[b-16]);for(var y=0;80>y;++y){var v=~~(y/20),s=0|l(h)+f(v,a,g,c)+d+r[y]+m[v];d=c,c=g,g=u(a),a=h,h=s}this._a=0|h+this._a,this._b=0|a+this._b,this._c=0|g+this._c,this._d=0|c+this._d,this._e=0|d+this._e},r.prototype._hash=function(){var t=new n(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=r}).call(n,a(0).Buffer)},function(t,n,a){(function(n){function r(){this.init(),this._w=l,d.call(this,64,56)}var o=a(1),s=a(149),d=a(45),l=Array(64);o(r,s),r.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},r.prototype._hash=function(){var t=new n(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=r}).call(n,a(0).Buffer)},function(t,n,a){(function(n){function r(){this.init(),this._w=l,d.call(this,128,112)}var o=a(1),s=a(150),d=a(45),l=Array(160);o(r,s),r.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},r.prototype._hash=function(){function t(t,n,r){a.writeInt32BE(t,r),a.writeInt32BE(n,r+4)}var a=new n(48);return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),a},t.exports=r}).call(n,a(0).Buffer)},function(t,n,a){'use strict';function r(t,n){d.call(this,'digest'),'string'==typeof n&&(n=s.from(n)),this._alg=t,this._key=n,n.length>c?n=t(n):n.length<c&&(n=s.concat([n,l],c));for(var a=this._ipad=s.allocUnsafe(c),r=this._opad=s.allocUnsafe(c),o=0;o<c;o++)a[o]=54^n[o],r[o]=92^n[o];this._hash=[a]}var o=a(1),s=a(4).Buffer,d=a(27),l=s.alloc(128),c=64;o(r,d),r.prototype._update=function(t){this._hash.push(t)},r.prototype._final=function(){var t=this._alg(s.concat(this._hash));return this._alg(s.concat([this._opad,t]))},t.exports=r},function(t,n,a){t.exports=a(152)},function(t,n,a){(function(n,r){function o(t){if(n.process&&!n.process.browser)return Promise.resolve(!1);if(!m||!m.importKey||!m.deriveBits)return Promise.resolve(!1);if(void 0!==g[t])return g[t];b=b||f.alloc(8);var a=s(b,b,10,128,t).then(function(){return!0}).catch(function(){return!1});return g[t]=a,a}function s(t,n,a,r,o){return m.importKey('raw',t,{name:'PBKDF2'},!1,['deriveBits']).then(function(t){return m.deriveBits({name:'PBKDF2',salt:n,iterations:a,hash:{name:o}},t,r<<3)}).then(function(t){return f.from(t)})}function d(t,n){t.then(function(t){r.nextTick(function(){n(null,t)})},function(t){r.nextTick(function(){n(t)})})}var l=a(154),c=a(155),u=a(156),f=a(4).Buffer,m=n.crypto&&n.crypto.subtle,h={sha:'SHA-1',"sha-1":'SHA-1',sha1:'SHA-1',sha256:'SHA-256',"sha-256":'SHA-256',sha384:'SHA-384',"sha-384":'SHA-384',"sha-512":'SHA-512',sha512:'SHA-512'},g=[],b;t.exports=function(t,a,m,g,b,y){if(f.isBuffer(t)||(t=f.from(t,c)),f.isBuffer(a)||(a=f.from(a,c)),l(m,g),'function'==typeof b&&(y=b,b=void 0),'function'!=typeof y)throw new Error('No callback provided to pbkdf2');b=b||'sha1';var v=h[b.toLowerCase()];return v&&'function'==typeof n.Promise?void d(o(v).then(function(n){return n?s(t,a,m,g,v):u(t,a,m,g,b)}),y):r.nextTick(function(){var n;try{n=u(t,a,m,g,b)}catch(t){return y(t)}y(null,n)})}}).call(n,a(3),a(5))},function(t,n,a){function r(t,n,a){if(t=t.toLowerCase(),u[t])return d.createCipheriv(t,n,a);if(c[t])return new l({key:n,iv:a,mode:t});throw new TypeError('invalid suite type')}function o(t,n,a){if(t=t.toLowerCase(),u[t])return d.createDecipheriv(t,n,a);if(c[t])return new l({key:n,iv:a,mode:t,decrypt:!0});throw new TypeError('invalid suite type')}var s=a(72),d=a(104),l=a(277),c=a(283),u=a(105);n.createCipher=n.Cipher=function(t,n){var a,o;if(t=t.toLowerCase(),u[t])a=u[t].key,o=u[t].iv;else if(c[t])a=8*c[t].key,o=c[t].iv;else throw new TypeError('invalid suite type');var d=s(n,!1,a,o);return r(t,d.key,d.iv)},n.createCipheriv=n.Cipheriv=r,n.createDecipher=n.Decipher=function(t,n){var a,r;if(t=t.toLowerCase(),u[t])a=u[t].key,r=u[t].iv;else if(c[t])a=8*c[t].key,r=c[t].iv;else throw new TypeError('invalid suite type');var d=s(n,!1,a,r);return o(t,d.key,d.iv)},n.createDecipheriv=n.Decipheriv=o,n.listCiphers=n.getCiphers=function(){return Object.keys(c).concat(d.getCiphers())}},function(t,n,a){'use strict';(function(n){function r(){c.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function o(t,a){return t<<a|t>>>32-a}function s(t,n,a,r,d,l,c){return 0|o(0|t+(n&a|~n&r)+d+l,c)+n}function l(t,n,a,r,l,c,u){return 0|o(0|t+(n&r|a&~r)+l+c,u)+n}function u(t,n,a,r,d,l,c){return 0|o(0|t+(n^a^r)+d+l,c)+n}function f(t,n,a,r,l,c,u){return 0|o(0|t+(a^(n|~r))+l+c,u)+n}var d=a(1),c=a(267),m=Array(16);d(r,c),r.prototype._update=function(){for(var t=m,n=0;16>n;++n)t[n]=this._block.readInt32LE(4*n);var r=this._a,a=this._b,o=this._c,c=this._d;r=s(r,a,o,c,t[0],3614090360,7),c=s(c,r,a,o,t[1],3905402710,12),o=s(o,c,r,a,t[2],606105819,17),a=s(a,o,c,r,t[3],3250441966,22),r=s(r,a,o,c,t[4],4118548399,7),c=s(c,r,a,o,t[5],1200080426,12),o=s(o,c,r,a,t[6],2821735955,17),a=s(a,o,c,r,t[7],4249261313,22),r=s(r,a,o,c,t[8],1770035416,7),c=s(c,r,a,o,t[9],2336552879,12),o=s(o,c,r,a,t[10],4294925233,17),a=s(a,o,c,r,t[11],2304563134,22),r=s(r,a,o,c,t[12],1804603682,7),c=s(c,r,a,o,t[13],4254626195,12),o=s(o,c,r,a,t[14],2792965006,17),a=s(a,o,c,r,t[15],1236535329,22),r=l(r,a,o,c,t[1],4129170786,5),c=l(c,r,a,o,t[6],3225465664,9),o=l(o,c,r,a,t[11],643717713,14),a=l(a,o,c,r,t[0],3921069994,20),r=l(r,a,o,c,t[5],3593408605,5),c=l(c,r,a,o,t[10],38016083,9),o=l(o,c,r,a,t[15],3634488961,14),a=l(a,o,c,r,t[4],3889429448,20),r=l(r,a,o,c,t[9],568446438,5),c=l(c,r,a,o,t[14],3275163606,9),o=l(o,c,r,a,t[3],4107603335,14),a=l(a,o,c,r,t[8],1163531501,20),r=l(r,a,o,c,t[13],2850285829,5),c=l(c,r,a,o,t[2],4243563512,9),o=l(o,c,r,a,t[7],1735328473,14),a=l(a,o,c,r,t[12],2368359562,20),r=u(r,a,o,c,t[5],4294588738,4),c=u(c,r,a,o,t[8],2272392833,11),o=u(o,c,r,a,t[11],1839030562,16),a=u(a,o,c,r,t[14],4259657740,23),r=u(r,a,o,c,t[1],2763975236,4),c=u(c,r,a,o,t[4],1272893353,11),o=u(o,c,r,a,t[7],4139469664,16),a=u(a,o,c,r,t[10],3200236656,23),r=u(r,a,o,c,t[13],681279174,4),c=u(c,r,a,o,t[0],3936430074,11),o=u(o,c,r,a,t[3],3572445317,16),a=u(a,o,c,r,t[6],76029189,23),r=u(r,a,o,c,t[9],3654602809,4),c=u(c,r,a,o,t[12],3873151461,11),o=u(o,c,r,a,t[15],530742520,16),a=u(a,o,c,r,t[2],3299628645,23),r=f(r,a,o,c,t[0],4096336452,6),c=f(c,r,a,o,t[7],1126891415,10),o=f(o,c,r,a,t[14],2878612391,15),a=f(a,o,c,r,t[5],4237533241,21),r=f(r,a,o,c,t[12],1700485571,6),c=f(c,r,a,o,t[3],2399980690,10),o=f(o,c,r,a,t[10],4293915773,15),a=f(a,o,c,r,t[1],2240044497,21),r=f(r,a,o,c,t[8],1873313359,6),c=f(c,r,a,o,t[15],4264355552,10),o=f(o,c,r,a,t[6],2734768916,15),a=f(a,o,c,r,t[13],1309151649,21),r=f(r,a,o,c,t[4],4149444226,6),c=f(c,r,a,o,t[11],3174756917,10),o=f(o,c,r,a,t[2],718787259,15),a=f(a,o,c,r,t[9],3951481745,21),this._a=0|this._a+r,this._b=0|this._b+a,this._c=0|this._c+o,this._d=0|this._d+c},r.prototype._digest=function(){this._block[this._blockOffset++]=128,56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=new n(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=r}).call(n,a(0).Buffer)},function(t,n,a){'use strict';function r(t,n){if(!s.isBuffer(t)&&'string'!=typeof t)throw new TypeError(n+' must be a string or a buffer')}function o(t){d.call(this),this._block=s.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var s=a(4).Buffer,d=a(43).Transform,l=a(1);l(o,d),o.prototype._transform=function(t,n,a){var r=null;try{this.update(t,n)}catch(t){r=t}a(r)},o.prototype._flush=function(t){var n=null;try{this.push(this.digest())}catch(t){n=t}t(n)},o.prototype.update=function(t,n){if(r(t,'Data'),this._finalized)throw new Error('Digest already called');s.isBuffer(t)||(t=s.from(t,n));for(var a=this._block,o=0;this._blockOffset+t.length-o>=this._blockSize;){for(var d=this._blockOffset;d<this._blockSize;)a[d++]=t[o++];this._update(),this._blockOffset=0}for(;o<t.length;)a[this._blockOffset++]=t[o++];for(var l=0,c=8*t.length;0<c;++l)this._length[l]+=c,c=0|this._length[l]/4294967296,0<c&&(this._length[l]-=4294967296*c);return this},o.prototype._update=function(){throw new Error('_update is not implemented')},o.prototype.digest=function(t){if(this._finalized)throw new Error('Digest already called');this._finalized=!0;var n=this._digest();t!==void 0&&(n=n.toString(t)),this._block.fill(0),this._blockOffset=0;for(var a=0;4>a;++a)this._length[a]=0;return n},o.prototype._digest=function(){throw new Error('_digest is not implemented')},t.exports=o},function(t,n,a){function r(t,n,a){f.call(this),this._cache=new o,this._cipher=new m.AES(n),this._prev=c.from(a),this._mode=t,this._autopadding=!0}function o(){this.cache=c.allocUnsafe(0)}function s(t,n,a){var o=d[t.toLowerCase()];if(!o)throw new TypeError('invalid suite type');if('string'==typeof n&&(n=c.from(n)),n.length!==o.key/8)throw new TypeError('invalid key length '+n.length);if('string'==typeof a&&(a=c.from(a)),a.length!==o.iv)throw new TypeError('invalid iv length '+a.length);return'stream'===o.type?new u(o.module,n,a):'auth'===o.type?new l(o.module,n,a):new r(o.module,n,a)}var d=a(105),l=a(159),c=a(4).Buffer,u=a(160),f=a(27),m=a(73),h=a(72),g=a(1);g(r,f),r.prototype._update=function(t){this._cache.add(t);for(var n=[],a,r;a=this._cache.get();)r=this._mode.encrypt(this,a),n.push(r);return c.concat(n)};var b=c.alloc(16,16);r.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(b))throw this._cipher.scrub(),new Error('data not multiple of block length')},r.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},o.prototype.add=function(t){this.cache=c.concat([this.cache,t])},o.prototype.get=function(){if(15<this.cache.length){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},o.prototype.flush=function(){for(var t=16-this.cache.length,n=c.allocUnsafe(t),a=-1;++a<t;)n.writeUInt8(t,a);return c.concat([this.cache,n])},n.createCipheriv=s,n.createCipher=function(t,n){var a=d[t.toLowerCase()];if(!a)throw new TypeError('invalid suite type');var r=h(n,!1,a.key,a.iv);return s(t,r.key,r.iv)}},function(t,n){n.encrypt=function(t,n){return t._cipher.encryptBlock(n)},n.decrypt=function(t,n){return t._cipher.decryptBlock(n)}},function(t,n,a){var r=a(54);n.encrypt=function(t,n){var a=r(n,t._prev);return t._prev=t._cipher.encryptBlock(a),t._prev},n.decrypt=function(t,n){var a=t._prev;t._prev=n;var o=t._cipher.decryptBlock(n);return r(o,a)}},function(t,n,a){function r(t,n,a){var r=n.length,d=s(n,t._cache);return t._cache=t._cache.slice(r),t._prev=o.concat([t._prev,a?n:d]),d}var o=a(4).Buffer,s=a(54);n.encrypt=function(t,n,a){for(var s=o.allocUnsafe(0),d;n.length;)if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=o.allocUnsafe(0)),t._cache.length<=n.length)d=t._cache.length,s=o.concat([s,r(t,n.slice(0,d),a)]),n=n.slice(d);else{s=o.concat([s,r(t,n,a)]);break}return s}},function(t,n,a){(function(t){function a(n,a,r){var o=n._cipher.encryptBlock(n._prev),s=o[0]^a;return n._prev=t.concat([n._prev.slice(1),t.from([r?a:s])]),s}n.encrypt=function(n,r,o){for(var s=r.length,d=t.allocUnsafe(s),l=-1;++l<s;)d[l]=a(n,r[l],o);return d}}).call(n,a(0).Buffer)},function(t,n,a){function r(t,n,a){for(var r=-1,s=0,d,l,c;++r<8;)d=t._cipher.encryptBlock(t._prev),l=n&1<<7-r?128:0,c=d[0]^l,s+=(128&c)>>r%8,t._prev=o(t._prev,a?l:c);return s}function o(t,n){var a=t.length,r=-1,o=s.allocUnsafe(t.length);for(t=s.concat([t,s.from([n])]);++r<a;)o[r]=t[r]<<1|t[r+1]>>7;return o}var s=a(4).Buffer;n.encrypt=function(t,n,a){for(var o=n.length,d=s.allocUnsafe(o),l=-1;++l<o;)d[l]=r(t,n[l],a);return d}},function(t,n,a){(function(t){function r(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}var o=a(54);n.encrypt=function(n,a){for(;n._cache.length<a.length;)n._cache=t.concat([n._cache,r(n)]);var s=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),o(a,s)}}).call(n,a(0).Buffer)},function(t,n,a){function r(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function o(t){var n=d.allocUnsafe(16);return n.writeUInt32BE(t[0]>>>0,0),n.writeUInt32BE(t[1]>>>0,4),n.writeUInt32BE(t[2]>>>0,8),n.writeUInt32BE(t[3]>>>0,12),n}function s(t){this.h=t,this.state=d.alloc(16,0),this.cache=d.allocUnsafe(0)}var d=a(4).Buffer,l=d.alloc(16,0);s.prototype.ghash=function(t){for(var n=-1;++n<t.length;)this.state[n]^=t[n];this._multiply()},s.prototype._multiply=function(){for(var t=r(this.h),n=[0,0,0,0],a=-1,s,d,l;128>++a;){for(d=0!=(this.state[~~(a/8)]&1<<7-a%8),d&&(n[0]^=t[0],n[1]^=t[1],n[2]^=t[2],n[3]^=t[3]),l=0!=(1&t[3]),s=3;0<s;s--)t[s]=t[s]>>>1|(1&t[s-1])<<31;t[0]>>>=1,l&&(t[0]^=-520093696)}this.state=o(n)},s.prototype.update=function(t){this.cache=d.concat([this.cache,t]);for(var n;16<=this.cache.length;)n=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(n)},s.prototype.final=function(t,n){return this.cache.length&&this.ghash(d.concat([this.cache,l],16)),this.ghash(o([0,t,0,n])),this.state},t.exports=s},function(t,n,a){function r(t,n,a){m.call(this),this._cache=new o,this._last=void 0,this._cipher=new h.AES(n),this._prev=c.from(a),this._mode=t,this._autopadding=!0}function o(){this.cache=c.allocUnsafe(0)}function s(t){for(var n=t[15],a=-1;++a<n;)if(t[a+(16-n)]!==n)throw new Error('unable to decrypt data');return 16===n?void 0:t.slice(0,16-n)}function d(t,n,a){var o=u[t.toLowerCase()];if(!o)throw new TypeError('invalid suite type');if('string'==typeof a&&(a=c.from(a)),a.length!==o.iv)throw new TypeError('invalid iv length '+a.length);if('string'==typeof n&&(n=c.from(n)),n.length!==o.key/8)throw new TypeError('invalid key length '+n.length);return'stream'===o.type?new f(o.module,n,a,!0):'auth'===o.type?new l(o.module,n,a,!0):new r(o.module,n,a)}var l=a(159),c=a(4).Buffer,u=a(105),f=a(160),m=a(27),h=a(73),g=a(72),b=a(1);b(r,m),r.prototype._update=function(t){this._cache.add(t);for(var n=[],a,r;a=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,a),n.push(r);return c.concat(n)},r.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return s(this._mode.decrypt(this,t));if(t)throw new Error('data not multiple of block length')},r.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},o.prototype.add=function(t){this.cache=c.concat([this.cache,t])},o.prototype.get=function(t){var n;if(t){if(16<this.cache.length)return n=this.cache.slice(0,16),this.cache=this.cache.slice(16),n;}else if(16<=this.cache.length)return n=this.cache.slice(0,16),this.cache=this.cache.slice(16),n;return null},o.prototype.flush=function(){if(this.cache.length)return this.cache},n.createDecipher=function(t,n){var a=u[t.toLowerCase()];if(!a)throw new TypeError('invalid suite type');var r=g(n,!1,a.key,a.iv);return d(t,r.key,r.iv)},n.createDecipheriv=d},function(t,n,a){(function(n){function r(t){o.call(this);var a=t.mode.toLowerCase(),r=l[a],s;s=t.decrypt?'decrypt':'encrypt';var d=t.key;('des-ede'===a||'des-ede-cbc'===a)&&(d=n.concat([d,d.slice(0,8)]));var c=t.iv;this._des=r.create({key:d,iv:c,type:s})}var o=a(27),s=a(106),d=a(1),l={"des-ede3-cbc":s.CBC.instantiate(s.EDE),"des-ede3":s.EDE,"des-ede-cbc":s.CBC.instantiate(s.EDE),"des-ede":s.EDE,"des-cbc":s.CBC.instantiate(s.DES),"des-ecb":s.DES};l.des=l['des-cbc'],l.des3=l['des-ede3-cbc'],t.exports=r,d(r,o),r.prototype._update=function(t){return new n(this._des.update(t))},r.prototype._final=function(){return new n(this._des.final())}}).call(n,a(0).Buffer)},function(t,n){'use strict';n.readUInt32BE=function(t,n){var a=t[0+n]<<24|t[1+n]<<16|t[2+n]<<8|t[3+n];return a>>>0},n.writeUInt32BE=function(t,n,a){t[0+a]=n>>>24,t[1+a]=255&n>>>16,t[2+a]=255&n>>>8,t[3+a]=255&n},n.ip=function(t,n,a,r){for(var o=0,s=0,d=6;0<=d;d-=2){for(var l=0;24>=l;l+=8)o<<=1,o|=1&n>>>l+d;for(var l=0;24>=l;l+=8)o<<=1,o|=1&t>>>l+d}for(var d=6;0<=d;d-=2){for(var l=1;25>=l;l+=8)s<<=1,s|=1&n>>>l+d;for(var l=1;25>=l;l+=8)s<<=1,s|=1&t>>>l+d}a[r+0]=o>>>0,a[r+1]=s>>>0},n.rip=function(t,n,a,r){for(var o=0,s=0,d=0;4>d;d++)for(var l=24;0<=l;l-=8)o<<=1,o|=1&n>>>l+d,o<<=1,o|=1&t>>>l+d;for(var d=4;8>d;d++)for(var l=24;0<=l;l-=8)s<<=1,s|=1&n>>>l+d,s<<=1,s|=1&t>>>l+d;a[r+0]=o>>>0,a[r+1]=s>>>0},n.pc1=function(t,n,a,r){for(var o=0,s=0,d=7;5<=d;d--){for(var l=0;24>=l;l+=8)o<<=1,o|=1&n>>l+d;for(var l=0;24>=l;l+=8)o<<=1,o|=1&t>>l+d}for(var l=0;24>=l;l+=8)o<<=1,o|=1&n>>l+d;for(var d=1;3>=d;d++){for(var l=0;24>=l;l+=8)s<<=1,s|=1&n>>l+d;for(var l=0;24>=l;l+=8)s<<=1,s|=1&t>>l+d}for(var l=0;24>=l;l+=8)s<<=1,s|=1&t>>l+d;a[r+0]=o>>>0,a[r+1]=s>>>0},n.r28shl=function(t,n){return 268435455&t<<n|t>>>28-n};var a=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];n.pc2=function(t,n,r,o){for(var s=0,d=0,l=a.length>>>1,c=0;c<l;c++)s<<=1,s|=1&t>>>a[c];for(var c=l;c<a.length;c++)d<<=1,d|=1&n>>>a[c];r[o+0]=s>>>0,r[o+1]=d>>>0},n.expand=function(t,n,a){var r=0,o=0;r=(1&t)<<5|t>>>27;for(var s=23;15<=s;s-=4)r<<=6,r|=63&t>>>s;for(var s=11;3<=s;s-=4)o|=63&t>>>s,o<<=6;o|=(31&t)<<1|t>>>31,n[a+0]=r>>>0,n[a+1]=o>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];n.substitute=function(t,n){for(var a=0,o=0;4>o;o++){var s=63&t>>>18-6*o,d=r[64*o+s];a<<=4,a|=d}for(var o=0;4>o;o++){var s=63&n>>>18-6*o,d=r[256+64*o+s];a<<=4,a|=d}return a>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];n.permute=function(t){for(var n=0,a=0;a<o.length;a++)n<<=1,n|=1&t>>>o[a];return n>>>0},n.padSplit=function(t,n,a){for(var r=t.toString(2);r.length<n;)r='0'+r;for(var o=[],s=0;s<n;s+=a)o.push(r.slice(s,s+a));return o.join(' ')}},function(t,n,a){'use strict';function r(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=Array(this.blockSize),this.bufferOff=0}var o=a(15);t.exports=r,r.prototype._init=function(){},r.prototype.update=function(t){return 0===t.length?[]:'decrypt'===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},r.prototype._buffer=function(t,n){for(var a=_(this.buffer.length-this.bufferOff,t.length-n),r=0;r<a;r++)this.buffer[this.bufferOff+r]=t[n+r];return this.bufferOff+=a,a},r.prototype._flushBuffer=function(t,n){return this._update(this.buffer,0,t,n),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(t){var n=0,a=0,r=0|(this.bufferOff+t.length)/this.blockSize,o=Array(r*this.blockSize);0!==this.bufferOff&&(n+=this._buffer(t,n),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(o,a)));for(var s=t.length-(t.length-n)%this.blockSize;n<s;n+=this.blockSize)this._update(t,n,o,a),a+=this.blockSize;for(;n<t.length;n++,this.bufferOff++)this.buffer[this.bufferOff]=t[n];return o},r.prototype._updateDecrypt=function(t){for(var n=0,a=0,r=b((this.bufferOff+t.length)/this.blockSize)-1,o=Array(r*this.blockSize);0<r;r--)n+=this._buffer(t,n),a+=this._flushBuffer(o,a);return n+=this._buffer(t,n),o},r.prototype.final=function(t){var n;t&&(n=this.update(t));var a;return a='encrypt'===this.type?this._finalEncrypt():this._finalDecrypt(),n?n.concat(a):a},r.prototype._pad=function(t,n){if(0===n)return!1;for(;n<t.length;)t[n++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=Array(this.blockSize);return this._update(this.buffer,0,t,0),t},r.prototype._unpad=function(t){return t},r.prototype._finalDecrypt=function(){o.equal(this.bufferOff,this.blockSize,'Not enough data to decrypt');var t=Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,n,a){'use strict';function r(){this.tmp=[,,],this.keys=null}function o(t){u.call(this,t);var n=new r;this._desState=n,this.deriveKeys(n,t.key)}var s=a(15),d=a(1),l=a(106),c=l.utils,u=l.Cipher;d(o,u),t.exports=o,o.create=function(t){return new o(t)};var f=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];o.prototype.deriveKeys=function(t,n){t.keys=Array(32),s.equal(n.length,this.blockSize,'Invalid key length');var a=c.readUInt32BE(n,0),r=c.readUInt32BE(n,4);c.pc1(a,r,t.tmp,0),a=t.tmp[0],r=t.tmp[1];for(var o=0,d;o<t.keys.length;o+=2)d=f[o>>>1],a=c.r28shl(a,d),r=c.r28shl(r,d),c.pc2(a,r,t.keys,o)},o.prototype._update=function(t,n,a,o){var s=this._desState,d=c.readUInt32BE(t,n),l=c.readUInt32BE(t,n+4);c.ip(d,l,s.tmp,0),d=s.tmp[0],l=s.tmp[1],'encrypt'===this.type?this._encrypt(s,d,l,s.tmp,0):this._decrypt(s,d,l,s.tmp,0),d=s.tmp[0],l=s.tmp[1],c.writeUInt32BE(a,d,o),c.writeUInt32BE(a,l,o+4)},o.prototype._pad=function(t,n){for(var a=t.length-n,r=n;r<t.length;r++)t[r]=a;return!0},o.prototype._unpad=function(t){for(var n=t[t.length-1],a=t.length-n;a<t.length;a++)s.equal(t[a],n);return t.slice(0,t.length-n)},o.prototype._encrypt=function(n,a,o,d,u){for(var m=a,l=o,r=0;r<n.keys.length;r+=2){var h=n.keys[r],g=n.keys[r+1];c.expand(l,n.tmp,0),h^=n.tmp[0],g^=n.tmp[1];var b=c.substitute(h,g),s=c.permute(b),f=l;l=(m^s)>>>0,m=f}c.rip(l,m,d,u)},o.prototype._decrypt=function(n,a,o,d,u){for(var m=o,l=a,r=n.keys.length-2;0<=r;r-=2){var h=n.keys[r],g=n.keys[r+1];c.expand(m,n.tmp,0),h^=n.tmp[0],g^=n.tmp[1];var b=c.substitute(h,g),s=c.permute(b),f=m;m=(l^s)>>>0,l=f}c.rip(m,l,d,u)}},function(t,n,a){'use strict';function r(t){o.equal(t.length,8,'Invalid IV length'),this.iv=Array(8);for(var n=0;n<this.iv.length;n++)this.iv[n]=t[n]}var o=a(15),s=a(1),d={};n.instantiate=function(t){function n(n){t.call(this,n),this._cbcInit()}s(n,t);for(var a=Object.keys(d),r=0,o;r<a.length;r++)o=a[r],n.prototype[o]=d[o];return n.create=function(t){return new n(t)},n},d._cbcInit=function(){var t=new r(this.options.iv);this._cbcState=t},d._update=function(t,n,a,r){var o=this._cbcState,s=this.constructor.super_.prototype,d=o.iv;if('encrypt'===this.type){for(var l=0;l<this.blockSize;l++)d[l]^=t[n+l];s._update.call(this,d,0,a,r);for(var l=0;l<this.blockSize;l++)d[l]=a[r+l]}else{s._update.call(this,t,n,a,r);for(var l=0;l<this.blockSize;l++)a[r+l]^=d[l];for(var l=0;l<this.blockSize;l++)d[l]=t[n+l]}}},function(t,n,a){'use strict';function r(t,n){s.equal(n.length,24,'Invalid key length');var a=n.slice(0,8),r=n.slice(8,16),o=n.slice(16,24);this.ciphers='encrypt'===t?[u.create({type:'encrypt',key:a}),u.create({type:'decrypt',key:r}),u.create({type:'encrypt',key:o})]:[u.create({type:'decrypt',key:o}),u.create({type:'encrypt',key:r}),u.create({type:'decrypt',key:a})]}function o(t){c.call(this,t);var n=new r(this.type,this.options.key);this._edeState=n}var s=a(15),d=a(1),l=a(106),c=l.Cipher,u=l.DES;d(o,c),t.exports=o,o.create=function(t){return new o(t)},o.prototype._update=function(t,n,a,r){var o=this._edeState;o.ciphers[0]._update(t,n,a,r),o.ciphers[1]._update(a,r,a,r),o.ciphers[2]._update(a,r,a,r)},o.prototype._pad=u.prototype._pad,o.prototype._unpad=u.prototype._unpad},function(t,n){n['des-ecb']={key:8,iv:0},n['des-cbc']=n.des={key:8,iv:8},n['des-ede3-cbc']=n.des3={key:24,iv:8},n['des-ede3']={key:24,iv:0},n['des-ede-cbc']={key:16,iv:8},n['des-ede']={key:16,iv:0}},function(t,n,a){(function(t){function r(n,a,s,c){return t.isBuffer(a)||void 0===l[a]?r(n,'binary',a,s):(a=a||'binary',c=c||'binary',s=s||new t([2]),t.isBuffer(s)||(s=new t(s,c)),'number'==typeof n)?new d(o(n,s),s,!0):(t.isBuffer(n)||(n=new t(n,a)),new d(n,s,!0))}var o=a(161),s=a(289),d=a(290),l={binary:!0,hex:!0,base64:!0};n.DiffieHellmanGroup=n.createDiffieHellmanGroup=n.getDiffieHellman=function(n){var a=new t(s[n].prime,'hex'),r=new t(s[n].gen,'hex');return new d(a,r)},n.createDiffieHellman=n.DiffieHellman=r}).call(n,a(0).Buffer)},function(){},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function v(t,n,a){return v.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_(t.length,a),s=n,d;s<r;s++)d=t.charCodeAt(s)-48,o<<=4,o|=49<=d&&54>=d?d-49+10:17<=d&&22>=d?d-17+10:15&d;return o}function l(t,n,a,o){for(var s=0,r=_(t.length,a),d=n,l;d<r;d++)l=t.charCodeAt(d)-48,s*=o,s+=49<=l?l-49+10:17<=l?l-17+10:l;return s}function u(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,o=a%26;n[a]=(t.words[r]&1<<o)>>>o}return n}function w(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_(u,n.length-1),g=y(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function x(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_(l,n.length-1),m=y(0,l-t.length+1);m<=f;m++){var h=l-m,g=0|t.words[h],a=0|n.words[m],b=g*a,r=67108863&b;c=0|c+(0|b/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function k(t,n,a){var r=new C;return r.mulp(t,n,a)}function C(t,n){this.x=t,this.y=n}function T(t,n){this.name=t,this.p=new v(n,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){T.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function S(){T.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function A(){T.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function I(){T.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function N(t){if('string'==typeof t){var n=v._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function j(t){N.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=v:n.BN=v,v.BN=v,v.wordSize=26;var R;try{R=a(287).Buffer}catch(t){}v.isBN=function(t){return!!(t instanceof v)||null!==t&&'object'==typeof t&&t.constructor.wordSize===v.wordSize&&Array.isArray(t.words)},v.max=function(t,n){return 0<t.cmp(n)?t:n},v.min=function(t,n){return 0>t.cmp(n)?t:n},v.prototype._init=function(t,n,a){if('number'==typeof t)return this._initNumber(t,n,a);if('object'==typeof t)return this._initArray(t,n,a);'hex'===n&&(n=16),o(n===(0|n)&&2<=n&&36>=n),t=t.toString().replace(/\s+/g,'');var r=0;'-'===t[0]&&r++,16===n?this._parseHex(t,r):this._parseBase(t,n,r),'-'===t[0]&&(this.negative=1),this.strip();'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initNumber=function(t,n,a){0>t&&(this.negative=1,t=-t),67108864>t?(this.words=[67108863&t],this.length=1):4503599627370496>t?(this.words=[67108863&t,67108863&t/67108864],this.length=2):(o(9007199254740992>t),this.words=[67108863&t,67108863&t/67108864,1],this.length=3);'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initArray=function(t,n,a){if(o('number'==typeof t.length),0>=t.length)return this.words=[0],this.length=1,this;this.length=b(t.length/3),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s=0,d,l;if('be'===a)for(r=t.length-1,d=0;0<=r;r-=3)l=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);else if('le'===a)for(r=0,d=0;r<t.length;r+=3)l=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);return this.strip()},v.prototype._parseHex=function(t,n){this.length=b((t.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r=0,o,d;for(a=t.length-6,o=0;a>=n;a-=6)d=s(t,a,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r,r+=24,26<=r&&(r-=26,o++);a+6!==n&&(d=s(t,n,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r),this.strip()},v.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var r=0,o=1;67108863>=o;o*=n)r++;r--,o=0|o/n;for(var s=t.length-a,d=s%r,c=_(s,s-d)+a,u=0,f=a;f<c;f+=r)u=l(t,f,f+r,n),this.imuln(o),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u);if(0!=d){var m=1;for(u=l(t,f,t.length,n),f=0;f<d;f++)m*=n;this.imuln(m),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u)}},v.prototype.copy=function(t){t.words=Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},v.prototype.clone=function(){var t=new v(null);return this.copy(t),t},v.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var L=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];v.prototype.toString=function(t,n){t=t||10,n=0|n||1;var a;if(16===t||'hex'===t){a='';for(var s=0,d=0,l=0;l<this.length;l++){var u=this.words[l],f=(16777215&(u<<s|d)).toString(16);d=16777215&u>>>24-s,a=0!=d||l!==this.length-1?L[6-f.length]+f+a:f+a,s+=2,26<=s&&(s-=26,l--)}for(0!=d&&(a=d.toString(16)+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}if(t===(0|t)&&2<=t&&36>=t){var m=O[t],h=P[t];a='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(t);g=g.idivn(h),a=g.isZero()?c+a:L[m-c.length]+c+a}for(this.isZero()&&(a='0'+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}o(!1,'Base should be between 2 and 36')},v.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?t:-t},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(t,n){return o('undefined'!=typeof R),this.toArrayLike(R,t,n)},v.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},v.prototype.toArrayLike=function(t,n,a){var r=this.byteLength(),s=a||y(1,r);o(r<=s,'byte array longer than desired length'),o(0<s,'Requested array length <= 0'),this.strip();var d=new t(s),l=this.clone(),c,u;if(!('le'===n)){for(u=0;u<s-r;u++)d[u]=0;for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[s-u-1]=c}else{for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[u]=c;for(;u<s;u++)d[u]=0}return d},v.prototype._countBits=g?function(t){return 32-g(t)}:function(n){var a=n,t=0;return 4096<=a&&(t+=13,a>>>=13),64<=a&&(t+=7,a>>>=7),8<=a&&(t+=4,a>>>=4),2<=a&&(t+=2,a>>>=2),t+a},v.prototype._zeroBits=function(n){if(0===n)return 26;var a=n,t=0;return 0==(8191&a)&&(t+=13,a>>>=13),0==(127&a)&&(t+=7,a>>>=7),0==(15&a)&&(t+=4,a>>>=4),0==(3&a)&&(t+=2,a>>>=2),0==(1&a)&&t++,t},v.prototype.bitLength=function(){var t=this.words[this.length-1],n=this._countBits(t);return 26*(this.length-1)+n},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0,a;n<this.length&&(a=this._zeroBits(this.words[n]),t+=a,26===a);n++);return t},v.prototype.byteLength=function(){return b(this.bitLength()/8)},v.prototype.toTwos=function(t){return 0===this.negative?this.clone():this.abs().inotn(t).iaddn(1)},v.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]|=t.words[n];return this.strip()},v.prototype.ior=function(t){return o(0==(this.negative|t.negative)),this.iuor(t)},v.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},v.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},v.prototype.iuand=function(t){var n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]&=t.words[a];return this.length=n.length,this.strip()},v.prototype.iand=function(t){return o(0==(this.negative|t.negative)),this.iuand(t)},v.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},v.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},v.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var r=0;r<a.length;r++)this.words[r]=n.words[r]^a.words[r];if(this!==n)for(;r<n.length;r++)this.words[r]=n.words[r];return this.length=n.length,this.strip()},v.prototype.ixor=function(t){return o(0==(this.negative|t.negative)),this.iuxor(t)},v.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},v.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},v.prototype.inotn=function(t){o('number'==typeof t&&0<=t);var n=0|b(t/26),a=t%26;this._expand(n),0<a&&n--;for(var r=0;r<n;r++)this.words[r]=67108863&~this.words[r];return 0<a&&(this.words[r]=~this.words[r]&67108863>>26-a),this.strip()},v.prototype.notn=function(t){return this.clone().inotn(t)},v.prototype.setn=function(t,n){o('number'==typeof t&&0<=t);var a=0|t/26,r=t%26;return this._expand(a+1),n?this.words[a]|=1<<r:this.words[a]&=~(1<<r),this.strip()},v.prototype.iadd=function(t){var n;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();var r,a;this.length>t.length?(r=this,a=t):(r=t,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|r.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!=o&&s<r.length;s++)n=(0|r.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=r.length,0!=o)this.words[this.length]=o,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},v.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},v.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var o,a;0<r?(o=this,a=t):(o=t,a=this);for(var s=0,d=0;d<a.length;d++)n=(0|o.words[d])-(0|a.words[d])+s,s=n>>26,this.words[d]=67108863&n;for(;0!=s&&d<o.length;d++)n=(0|o.words[d])+s,s=n>>26,this.words[d]=67108863&n;if(0==s&&d<o.length&&o!==this)for(;d<o.length;d++)this.words[d]=o.words[d];return this.length=y(this.length,d),o!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(t){return this.clone().isub(t)};var M=function(t,n,r){var s=t.words,a=n.words,d=r.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,g=f>>>13,b=0|s[2],y=8191&b,v=b>>>13,w=0|s[3],x=8191&w,_=w>>>13,k=0|s[4],C=8191&k,T=k>>>13,E=0|s[5],S=8191&E,A=E>>>13,I=0|s[6],N=8191&I,j=I>>>13,R=0|s[7],L=8191&R,O=R>>>13,P=0|s[8],M=8191&P,D=P>>>13,B=0|s[9],U=8191&B,q=B>>>13,F=0|a[0],z=8191&F,H=F>>>13,W=0|a[1],V=8191&W,G=W>>>13,K=0|a[2],J=8191&K,X=K>>>13,Z=0|a[3],Y=8191&Z,Q=Z>>>13,ee=0|a[4],te=8191&ee,ne=ee>>>13,ae=0|a[5],re=8191&ae,oe=ae>>>13,ie=0|a[6],se=8191&ie,de=ie>>>13,le=0|a[7],pe=8191&le,ce=le>>>13,ue=0|a[8],fe=8191&ue,he=ue>>>13,ge=0|a[9],be=8191&ge,ye=ge>>>13,ve,we,xe;r.negative=t.negative^n.negative,r.length=19,ve=h(c,z),we=h(c,H),we=0|we+h(u,z),xe=h(u,H);var _e=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(_e>>>26),_e&=67108863,ve=h(m,z),we=h(m,H),we=0|we+h(g,z),xe=h(g,H),ve=0|ve+h(c,V),we=0|we+h(c,G),we=0|we+h(u,V),xe=0|xe+h(u,G);var ke=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(ke>>>26),ke&=67108863,ve=h(y,z),we=h(y,H),we=0|we+h(v,z),xe=h(v,H),ve=0|ve+h(m,V),we=0|we+h(m,G),we=0|we+h(g,V),xe=0|xe+h(g,G),ve=0|ve+h(c,J),we=0|we+h(c,X),we=0|we+h(u,J),xe=0|xe+h(u,X);var Ce=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ce>>>26),Ce&=67108863,ve=h(x,z),we=h(x,H),we=0|we+h(_,z),xe=h(_,H),ve=0|ve+h(y,V),we=0|we+h(y,G),we=0|we+h(v,V),xe=0|xe+h(v,G),ve=0|ve+h(m,J),we=0|we+h(m,X),we=0|we+h(g,J),xe=0|xe+h(g,X),ve=0|ve+h(c,Y),we=0|we+h(c,Q),we=0|we+h(u,Y),xe=0|xe+h(u,Q);var Te=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Te>>>26),Te&=67108863,ve=h(C,z),we=h(C,H),we=0|we+h(T,z),xe=h(T,H),ve=0|ve+h(x,V),we=0|we+h(x,G),we=0|we+h(_,V),xe=0|xe+h(_,G),ve=0|ve+h(y,J),we=0|we+h(y,X),we=0|we+h(v,J),xe=0|xe+h(v,X),ve=0|ve+h(m,Y),we=0|we+h(m,Q),we=0|we+h(g,Y),xe=0|xe+h(g,Q),ve=0|ve+h(c,te),we=0|we+h(c,ne),we=0|we+h(u,te),xe=0|xe+h(u,ne);var Ee=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ee>>>26),Ee&=67108863,ve=h(S,z),we=h(S,H),we=0|we+h(A,z),xe=h(A,H),ve=0|ve+h(C,V),we=0|we+h(C,G),we=0|we+h(T,V),xe=0|xe+h(T,G),ve=0|ve+h(x,J),we=0|we+h(x,X),we=0|we+h(_,J),xe=0|xe+h(_,X),ve=0|ve+h(y,Y),we=0|we+h(y,Q),we=0|we+h(v,Y),xe=0|xe+h(v,Q),ve=0|ve+h(m,te),we=0|we+h(m,ne),we=0|we+h(g,te),xe=0|xe+h(g,ne),ve=0|ve+h(c,re),we=0|we+h(c,oe),we=0|we+h(u,re),xe=0|xe+h(u,oe);var Se=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Se>>>26),Se&=67108863,ve=h(N,z),we=h(N,H),we=0|we+h(j,z),xe=h(j,H),ve=0|ve+h(S,V),we=0|we+h(S,G),we=0|we+h(A,V),xe=0|xe+h(A,G),ve=0|ve+h(C,J),we=0|we+h(C,X),we=0|we+h(T,J),xe=0|xe+h(T,X),ve=0|ve+h(x,Y),we=0|we+h(x,Q),we=0|we+h(_,Y),xe=0|xe+h(_,Q),ve=0|ve+h(y,te),we=0|we+h(y,ne),we=0|we+h(v,te),xe=0|xe+h(v,ne),ve=0|ve+h(m,re),we=0|we+h(m,oe),we=0|we+h(g,re),xe=0|xe+h(g,oe),ve=0|ve+h(c,se),we=0|we+h(c,de),we=0|we+h(u,se),xe=0|xe+h(u,de);var Ae=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ae>>>26),Ae&=67108863,ve=h(L,z),we=h(L,H),we=0|we+h(O,z),xe=h(O,H),ve=0|ve+h(N,V),we=0|we+h(N,G),we=0|we+h(j,V),xe=0|xe+h(j,G),ve=0|ve+h(S,J),we=0|we+h(S,X),we=0|we+h(A,J),xe=0|xe+h(A,X),ve=0|ve+h(C,Y),we=0|we+h(C,Q),we=0|we+h(T,Y),xe=0|xe+h(T,Q),ve=0|ve+h(x,te),we=0|we+h(x,ne),we=0|we+h(_,te),xe=0|xe+h(_,ne),ve=0|ve+h(y,re),we=0|we+h(y,oe),we=0|we+h(v,re),xe=0|xe+h(v,oe),ve=0|ve+h(m,se),we=0|we+h(m,de),we=0|we+h(g,se),xe=0|xe+h(g,de),ve=0|ve+h(c,pe),we=0|we+h(c,ce),we=0|we+h(u,pe),xe=0|xe+h(u,ce);var Ie=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ie>>>26),Ie&=67108863,ve=h(M,z),we=h(M,H),we=0|we+h(D,z),xe=h(D,H),ve=0|ve+h(L,V),we=0|we+h(L,G),we=0|we+h(O,V),xe=0|xe+h(O,G),ve=0|ve+h(N,J),we=0|we+h(N,X),we=0|we+h(j,J),xe=0|xe+h(j,X),ve=0|ve+h(S,Y),we=0|we+h(S,Q),we=0|we+h(A,Y),xe=0|xe+h(A,Q),ve=0|ve+h(C,te),we=0|we+h(C,ne),we=0|we+h(T,te),xe=0|xe+h(T,ne),ve=0|ve+h(x,re),we=0|we+h(x,oe),we=0|we+h(_,re),xe=0|xe+h(_,oe),ve=0|ve+h(y,se),we=0|we+h(y,de),we=0|we+h(v,se),xe=0|xe+h(v,de),ve=0|ve+h(m,pe),we=0|we+h(m,ce),we=0|we+h(g,pe),xe=0|xe+h(g,ce),ve=0|ve+h(c,fe),we=0|we+h(c,he),we=0|we+h(u,fe),xe=0|xe+h(u,he);var Ne=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ne>>>26),Ne&=67108863,ve=h(U,z),we=h(U,H),we=0|we+h(q,z),xe=h(q,H),ve=0|ve+h(M,V),we=0|we+h(M,G),we=0|we+h(D,V),xe=0|xe+h(D,G),ve=0|ve+h(L,J),we=0|we+h(L,X),we=0|we+h(O,J),xe=0|xe+h(O,X),ve=0|ve+h(N,Y),we=0|we+h(N,Q),we=0|we+h(j,Y),xe=0|xe+h(j,Q),ve=0|ve+h(S,te),we=0|we+h(S,ne),we=0|we+h(A,te),xe=0|xe+h(A,ne),ve=0|ve+h(C,re),we=0|we+h(C,oe),we=0|we+h(T,re),xe=0|xe+h(T,oe),ve=0|ve+h(x,se),we=0|we+h(x,de),we=0|we+h(_,se),xe=0|xe+h(_,de),ve=0|ve+h(y,pe),we=0|we+h(y,ce),we=0|we+h(v,pe),xe=0|xe+h(v,ce),ve=0|ve+h(m,fe),we=0|we+h(m,he),we=0|we+h(g,fe),xe=0|xe+h(g,he),ve=0|ve+h(c,be),we=0|we+h(c,ye),we=0|we+h(u,be),xe=0|xe+h(u,ye);var je=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(je>>>26),je&=67108863,ve=h(U,V),we=h(U,G),we=0|we+h(q,V),xe=h(q,G),ve=0|ve+h(M,J),we=0|we+h(M,X),we=0|we+h(D,J),xe=0|xe+h(D,X),ve=0|ve+h(L,Y),we=0|we+h(L,Q),we=0|we+h(O,Y),xe=0|xe+h(O,Q),ve=0|ve+h(N,te),we=0|we+h(N,ne),we=0|we+h(j,te),xe=0|xe+h(j,ne),ve=0|ve+h(S,re),we=0|we+h(S,oe),we=0|we+h(A,re),xe=0|xe+h(A,oe),ve=0|ve+h(C,se),we=0|we+h(C,de),we=0|we+h(T,se),xe=0|xe+h(T,de),ve=0|ve+h(x,pe),we=0|we+h(x,ce),we=0|we+h(_,pe),xe=0|xe+h(_,ce),ve=0|ve+h(y,fe),we=0|we+h(y,he),we=0|we+h(v,fe),xe=0|xe+h(v,he),ve=0|ve+h(m,be),we=0|we+h(m,ye),we=0|we+h(g,be),xe=0|xe+h(g,ye);var Re=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Re>>>26),Re&=67108863,ve=h(U,J),we=h(U,X),we=0|we+h(q,J),xe=h(q,X),ve=0|ve+h(M,Y),we=0|we+h(M,Q),we=0|we+h(D,Y),xe=0|xe+h(D,Q),ve=0|ve+h(L,te),we=0|we+h(L,ne),we=0|we+h(O,te),xe=0|xe+h(O,ne),ve=0|ve+h(N,re),we=0|we+h(N,oe),we=0|we+h(j,re),xe=0|xe+h(j,oe),ve=0|ve+h(S,se),we=0|we+h(S,de),we=0|we+h(A,se),xe=0|xe+h(A,de),ve=0|ve+h(C,pe),we=0|we+h(C,ce),we=0|we+h(T,pe),xe=0|xe+h(T,ce),ve=0|ve+h(x,fe),we=0|we+h(x,he),we=0|we+h(_,fe),xe=0|xe+h(_,he),ve=0|ve+h(y,be),we=0|we+h(y,ye),we=0|we+h(v,be),xe=0|xe+h(v,ye);var Le=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Le>>>26),Le&=67108863,ve=h(U,Y),we=h(U,Q),we=0|we+h(q,Y),xe=h(q,Q),ve=0|ve+h(M,te),we=0|we+h(M,ne),we=0|we+h(D,te),xe=0|xe+h(D,ne),ve=0|ve+h(L,re),we=0|we+h(L,oe),we=0|we+h(O,re),xe=0|xe+h(O,oe),ve=0|ve+h(N,se),we=0|we+h(N,de),we=0|we+h(j,se),xe=0|xe+h(j,de),ve=0|ve+h(S,pe),we=0|we+h(S,ce),we=0|we+h(A,pe),xe=0|xe+h(A,ce),ve=0|ve+h(C,fe),we=0|we+h(C,he),we=0|we+h(T,fe),xe=0|xe+h(T,he),ve=0|ve+h(x,be),we=0|we+h(x,ye),we=0|we+h(_,be),xe=0|xe+h(_,ye);var Oe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Oe>>>26),Oe&=67108863,ve=h(U,te),we=h(U,ne),we=0|we+h(q,te),xe=h(q,ne),ve=0|ve+h(M,re),we=0|we+h(M,oe),we=0|we+h(D,re),xe=0|xe+h(D,oe),ve=0|ve+h(L,se),we=0|we+h(L,de),we=0|we+h(O,se),xe=0|xe+h(O,de),ve=0|ve+h(N,pe),we=0|we+h(N,ce),we=0|we+h(j,pe),xe=0|xe+h(j,ce),ve=0|ve+h(S,fe),we=0|we+h(S,he),we=0|we+h(A,fe),xe=0|xe+h(A,he),ve=0|ve+h(C,be),we=0|we+h(C,ye),we=0|we+h(T,be),xe=0|xe+h(T,ye);var Pe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Pe>>>26),Pe&=67108863,ve=h(U,re),we=h(U,oe),we=0|we+h(q,re),xe=h(q,oe),ve=0|ve+h(M,se),we=0|we+h(M,de),we=0|we+h(D,se),xe=0|xe+h(D,de),ve=0|ve+h(L,pe),we=0|we+h(L,ce),we=0|we+h(O,pe),xe=0|xe+h(O,ce),ve=0|ve+h(N,fe),we=0|we+h(N,he),we=0|we+h(j,fe),xe=0|xe+h(j,he),ve=0|ve+h(S,be),we=0|we+h(S,ye),we=0|we+h(A,be),xe=0|xe+h(A,ye);var Me=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Me>>>26),Me&=67108863,ve=h(U,se),we=h(U,de),we=0|we+h(q,se),xe=h(q,de),ve=0|ve+h(M,pe),we=0|we+h(M,ce),we=0|we+h(D,pe),xe=0|xe+h(D,ce),ve=0|ve+h(L,fe),we=0|we+h(L,he),we=0|we+h(O,fe),xe=0|xe+h(O,he),ve=0|ve+h(N,be),we=0|we+h(N,ye),we=0|we+h(j,be),xe=0|xe+h(j,ye);var De=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(De>>>26),De&=67108863,ve=h(U,pe),we=h(U,ce),we=0|we+h(q,pe),xe=h(q,ce),ve=0|ve+h(M,fe),we=0|we+h(M,he),we=0|we+h(D,fe),xe=0|xe+h(D,he),ve=0|ve+h(L,be),we=0|we+h(L,ye),we=0|we+h(O,be),xe=0|xe+h(O,ye);var Be=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Be>>>26),Be&=67108863,ve=h(U,fe),we=h(U,he),we=0|we+h(q,fe),xe=h(q,he),ve=0|ve+h(M,be),we=0|we+h(M,ye),we=0|we+h(D,be),xe=0|xe+h(D,ye);var Ue=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ue>>>26),Ue&=67108863,ve=h(U,be),we=h(U,ye),we=0|we+h(q,be),xe=h(q,ye);var qe=0|(0|o+ve)+((8191&we)<<13);return o=0|(0|xe+(we>>>13))+(qe>>>26),qe&=67108863,d[0]=_e,d[1]=ke,d[2]=Ce,d[3]=Te,d[4]=Ee,d[5]=Se,d[6]=Ae,d[7]=Ie,d[8]=Ne,d[9]=je,d[10]=Re,d[11]=Le,d[12]=Oe,d[13]=Pe,d[14]=Me,d[15]=De,d[16]=Be,d[17]=Ue,d[18]=qe,0!=o&&(d[19]=o,r.length++),r};h||(M=w),v.prototype.mulTo=function(t,n){var a=this.length+t.length,r;return r=10===this.length&&10===t.length?M(this,t,n):63>a?w(this,t,n):1024>a?x(this,t,n):k(this,t,n),r},C.prototype.makeRBT=function(n){for(var a=Array(n),t=v.prototype._countBits(n)-1,r=0;r<n;r++)a[r]=this.revBin(r,t,n);return a},C.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var r=0,o=0;o<n;o++)r|=(1&t)<<n-o-1,t>>=1;return r},C.prototype.permute=function(t,n,a,r,o,s){for(var d=0;d<s;d++)r[d]=n[t[d]],o[d]=a[t[d]]},C.prototype.transform=function(t,n,a,r,o,d){this.permute(d,t,n,a,r,o);for(var u=1;u<o;u<<=1)for(var s=u<<1,l=f(2*m/s),h=c(2*m/s),g=0;g<o;g+=s)for(var b=l,y=h,v=0;v<u;v++){var w=a[g+v],x=r[g+v],_=a[g+v+u],k=r[g+v+u],C=b*_-y*k;k=b*k+y*_,_=C,a[g+v]=w+_,r[g+v]=x+k,a[g+v+u]=w-_,r[g+v+u]=x-k,v!==s&&(C=l*b-h*y,y=l*y+h*b,b=C)}},C.prototype.guessLen13b=function(t,n){var a=1|y(n,t),r=1&a,o=0;for(a=0|a/2;a;a>>>=1)o++;return 1<<o+1+r},C.prototype.conjugate=function(n,a,r){if(!(1>=r))for(var o=0,s;o<r/2;o++)s=n[o],n[o]=n[r-o-1],n[r-o-1]=s,s=a[o],a[o]=-a[r-o-1],a[r-o-1]=-s},C.prototype.normalize13b=function(t,n){for(var a=0,r=0,o;r<n/2;r++)o=8192*d(t[2*r+1]/n)+d(t[2*r]/n)+a,t[r]=67108863&o,a=67108864>o?0:0|o/67108864;return t},C.prototype.convert13b=function(t,n,a,r){for(var s=0,d=0;d<n;d++)s+=0|t[d],a[2*d]=8191&s,s>>>=13,a[2*d+1]=8191&s,s>>>=13;for(d=2*n;d<r;++d)a[d]=0;o(0==s),o(0==(-8192&s))},C.prototype.stub=function(t){for(var n=Array(t),a=0;a<t;a++)n[a]=0;return n},C.prototype.mulp=function(t,n,a){var r=2*this.guessLen13b(t.length,n.length),o=this.makeRBT(r),s=this.stub(r),d=Array(r),l=Array(r),c=Array(r),u=Array(r),f=Array(r),m=Array(r),h=a.words;h.length=r,this.convert13b(t.words,t.length,d,r),this.convert13b(n.words,n.length,u,r),this.transform(d,s,l,c,r,o),this.transform(u,s,f,m,r,o);for(var g=0,b;g<r;g++)b=l[g]*f[g]-c[g]*m[g],c[g]=l[g]*m[g]+c[g]*f[g],l[g]=b;return this.conjugate(l,c,r),this.transform(l,c,h,s,r,o),this.conjugate(h,s,r),this.normalize13b(h,r),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},v.prototype.mul=function(t){var n=new v(null);return n.words=Array(this.length+t.length),this.mulTo(t,n)},v.prototype.mulf=function(t){var n=new v(null);return n.words=Array(this.length+t.length),k(this,t,n)},v.prototype.imul=function(t){return this.clone().mulTo(t,this)},v.prototype.imuln=function(t){o('number'==typeof t),o(67108864>t);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*t,s=(67108863&r)+(67108863&n);n>>=26,n+=0|r/67108864,n+=s>>>26,this.words[a]=67108863&s}return 0!=n&&(this.words[a]=n,this.length++),this},v.prototype.muln=function(t){return this.clone().imuln(t)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(t){var n=u(t);if(0===n.length)return new v(1);for(var a=this,r=0;r<n.length&&!(0!==n[r]);r++,a=a.sqr());if(++r<n.length)for(var o=a.sqr();r<n.length;r++,o=o.sqr())0!==n[r]&&(a=a.mul(o));return a},v.prototype.iushln=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26,r;if(0!=n){var s=0;for(r=0;r<this.length;r++){var d=this.words[r]&67108863>>>26-n<<26-n,l=(0|this.words[r])-d<<n;this.words[r]=l|s,s=d>>>26-n}s&&(this.words[r]=s,this.length++)}if(0!=a){for(r=this.length-1;0<=r;r--)this.words[r+a]=this.words[r];for(r=0;r<a;r++)this.words[r]=0;this.length+=a}return this.strip()},v.prototype.ishln=function(t){return o(0===this.negative),this.iushln(t)},v.prototype.iushrn=function(t,n,a){o('number'==typeof t&&0<=t);var d=n?(n-n%26)/26:0;var l=t%26,r=_((t-l)/26,this.length),s=a;if(d-=r,d=y(0,d),s){for(var c=0;c<r;c++)s.words[c]=this.words[c];s.length=r}if(0===r);else if(this.length>r)for(this.length-=r,c=0;c<this.length;c++)this.words[c]=this.words[c+r];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!=u||c>=d);c--){var f=0|this.words[c];this.words[c]=u<<26-l|f>>>l,u=f&(67108863^67108863>>>l<<l)}return s&&0!=u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(t,n,a){return o(0===this.negative),this.iushrn(t,n,a)},v.prototype.shln=function(t){return this.clone().ishln(t)},v.prototype.ushln=function(t){return this.clone().iushln(t)},v.prototype.shrn=function(t){return this.clone().ishrn(t)},v.prototype.ushrn=function(t){return this.clone().iushrn(t)},v.prototype.testn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(this.length<=a)return!1;var r=this.words[a];return!!(r&1<<n)},v.prototype.imaskn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=a)return this;if(0!=n&&a++,this.length=_(a,this.length),0!=n){this.words[this.length-1]&=67108863^67108863>>>n<<n}return this.strip()},v.prototype.maskn=function(t){return this.clone().imaskn(t)},v.prototype.iaddn=function(t){return o('number'==typeof t),o(67108864>t),0>t?this.isubn(-t):0===this.negative?this._iaddn(t):1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this)},v.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&67108864<=this.words[n];n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=y(this.length,n+1),this},v.prototype.isubn=function(t){if(o('number'==typeof t),o(67108864>t),0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&0>this.words[n];n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},v.prototype.addn=function(t){return this.clone().iaddn(t)},v.prototype.subn=function(t){return this.clone().isubn(t)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(t,n,a){var r=t.length+a,s;this._expand(r);var d=0,l;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+d;var c=(0|t.words[s])*n;l-=67108863&c,d=(l>>26)-(0|c/67108864),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)l=(0|this.words[s+a])+d,d=l>>26,this.words[s+a]=67108863&l;if(0==d)return this.strip();for(o(-1==d),d=0,s=0;s<this.length;s++)l=-(0|this.words[s])+d,d=l>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},v.prototype._wordDiv=function(t,n){var r=this.length-t.length,o=this.clone(),s=t,d=0|s.words[s.length-1],l=this._countBits(d);r=26-l,0!=r&&(s=s.ushln(r),o.iushln(r),d=0|s.words[s.length-1]);var c=o.length-s.length,u;if('mod'!==n){u=new v(null),u.length=c+1,u.words=Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var m=o.clone()._ishlnsubmul(s,1,c);0===m.negative&&(o=m,u&&(u.words[c]=1));for(var h=c-1,g;0<=h;h--){for(g=67108864*(0|o.words[s.length+h])+(0|o.words[s.length+h-1]),g=_(0|g/d,67108863),o._ishlnsubmul(s,g,h);0!==o.negative;)g--,o.negative=0,o._ishlnsubmul(s,1,h),o.isZero()||(o.negative^=1);u&&(u.words[h]=g)}return u&&u.strip(),o.strip(),'div'!==n&&0!=r&&o.iushrn(r),{div:u||null,mod:o}},v.prototype.divmod=function(t,n,a){if(o(!t.isZero()),this.isZero())return{div:new v(0),mod:new v(0)};var r,s,d;return 0!==this.negative&&0===t.negative?(d=this.neg().divmod(t,n),'mod'!==n&&(r=d.div.neg()),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(d=this.divmod(t.neg(),n),'mod'!==n&&(r=d.div.neg()),{div:r,mod:d.mod}):0==(this.negative&t.negative)?t.length>this.length||0>this.cmp(t)?{div:new v(0),mod:this}:1===t.length?'div'===n?{div:this.divn(t.words[0]),mod:null}:'mod'===n?{div:null,mod:new v(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new v(this.modn(t.words[0]))}:this._wordDiv(t,n):(d=this.neg().divmod(t.neg(),n),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:d.div,mod:s})},v.prototype.div=function(t){return this.divmod(t,'div',!1).div},v.prototype.mod=function(t){return this.divmod(t,'mod',!1).mod},v.prototype.umod=function(t){return this.divmod(t,'mod',!0).mod},v.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0===n.div.negative?n.mod:n.mod.isub(t),r=t.ushrn(1),o=t.andln(1),s=a.cmp(r);return 0>s||1===o&&0===s?n.div:0===n.div.negative?n.div.iaddn(1):n.div.isubn(1)},v.prototype.modn=function(t){o(67108863>=t);for(var n=0,a=this.length-1;0<=a;a--)n=(67108864%t*n+(0|this.words[a]))%t;return n},v.prototype.idivn=function(t){o(67108863>=t);for(var n=0,a=this.length-1,r;0<=a;a--)r=(0|this.words[a])+67108864*n,this.words[a]=0|r/t,n=r%t;return this.strip()},v.prototype.divn=function(t){return this.clone().idivn(t)},v.prototype.egcd=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=new v(0),l=new v(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var u=a.clone(),f=n.clone();!n.isZero();){for(var m=0,h=1;0==(n.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(n.iushrn(m);0<m--;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(f)),r.iushrn(1),s.iushrn(1);for(var g=0,b=1;0==(a.words[0]&b)&&26>g;++g,b<<=1);if(0<g)for(a.iushrn(g);0<g--;)(d.isOdd()||l.isOdd())&&(d.iadd(u),l.isub(f)),d.iushrn(1),l.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(d),s.isub(l)):(a.isub(n),d.isub(r),l.isub(s))}return{a:d,b:l,gcd:a.iushln(c)}},v.prototype._invmp=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=a.clone();0<n.cmpn(1)&&0<a.cmpn(1);){for(var l=0,c=1;0==(n.words[0]&c)&&26>l;++l,c<<=1);if(0<l)for(n.iushrn(l);0<l--;)r.isOdd()&&r.iadd(d),r.iushrn(1);for(var u=0,f=1;0==(a.words[0]&f)&&26>u;++u,f<<=1);if(0<u)for(a.iushrn(u);0<u--;)s.isOdd()&&s.iadd(d),s.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(s)):(a.isub(n),s.isub(r))}var m;return m=0===n.cmpn(1)?r:s,0>m.cmpn(0)&&m.iadd(t),m},v.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var o=this.clone(),a=n.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},v.prototype.invm=function(t){return this.egcd(t).a.umod(t)},v.prototype.isEven=function(){return 0==(1&this.words[0])},v.prototype.isOdd=function(){return 1==(1&this.words[0])},v.prototype.andln=function(t){return this.words[0]&t},v.prototype.bincn=function(t){o('number'==typeof t);var n=t%26,a=(t-n)/26,r=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=r,this;for(var s=r,d=a,l;0!=s&&d<this.length;d++)l=0|this.words[d],l+=s,s=l>>>26,l&=67108863,this.words[d]=l;return 0!=s&&(this.words[d]=s,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(t){var n=0>t;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;this.strip();var a;if(1<this.length)a=1;else{n&&(t=-t),o(67108863>=t,'Number is too big');var r=0|this.words[0];a=r===t?0:r<t?-1:1}return 0===this.negative?a:0|-a},v.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0===this.negative?n:0|-n},v.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,r=this.length-1;0<=r;r--){var o=0|this.words[r],a=0|t.words[r];if(o!=a){o<a?n=-1:o>a&&(n=1);break}}return n},v.prototype.gtn=function(t){return 1===this.cmpn(t)},v.prototype.gt=function(t){return 1===this.cmp(t)},v.prototype.gten=function(t){return 0<=this.cmpn(t)},v.prototype.gte=function(t){return 0<=this.cmp(t)},v.prototype.ltn=function(t){return-1===this.cmpn(t)},v.prototype.lt=function(t){return-1===this.cmp(t)},v.prototype.lten=function(t){return 0>=this.cmpn(t)},v.prototype.lte=function(t){return 0>=this.cmp(t)},v.prototype.eqn=function(t){return 0===this.cmpn(t)},v.prototype.eq=function(t){return 0===this.cmp(t)},v.red=function(t){return new N(t)},v.prototype.toRed=function(t){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),t.convertTo(this)._forceRed(t)},v.prototype.fromRed=function(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},v.prototype._forceRed=function(t){return this.red=t,this},v.prototype.forceRed=function(t){return o(!this.red,'Already a number in reduction context'),this._forceRed(t)},v.prototype.redAdd=function(t){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,t)},v.prototype.redIAdd=function(t){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,t)},v.prototype.redSub=function(t){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,t)},v.prototype.redISub=function(t){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,t)},v.prototype.redShl=function(t){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,t)},v.prototype.redMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.mul(this,t)},v.prototype.redIMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.imul(this,t)},v.prototype.redSqr=function(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(t){return o(this.red&&!t.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,t)};var D={k256:null,p224:null,p192:null,p25519:null};T.prototype._tmp=function(){var t=new v(null);return t.words=Array(b(this.n/13)),t},T.prototype.ireduce=function(t){var n=t,a;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),a=n.bitLength();while(a>this.n);var r=a<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},T.prototype.split=function(t,n){t.iushrn(this.n,0,n)},T.prototype.imulK=function(t){return t.imul(this.k)},r(E,T),E.prototype.split=function(t,n){for(var a=4194303,r=_(t.length,9),o=0;o<r;o++)n.words[o]=t.words[o];if(n.length=r,9>=t.length)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(n.words[n.length++]=s&a,o=10;o<t.length;o++){var d=0|t.words[o];t.words[o-10]=(d&a)<<4|s>>>22,s=d}s>>>=22,t.words[o-10]=s,t.length-=0===s&&10<t.length?10:9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0,r;a<t.length;a++)r=0|t.words[a],n+=977*r,t.words[a]=67108863&n,n=64*r+(0|n/67108864);return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(S,T),r(A,T),r(I,T),I.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var r=19*(0|t.words[a])+n,o=67108863&r;r>>>=26,t.words[a]=o,n=r}return 0!=n&&(t.words[t.length++]=n),t},v._prime=function(t){if(D[t])return D[t];var n;if('k256'===t)n=new E;else if('p224'===t)n=new S;else if('p192'===t)n=new A;else if('p25519'===t)n=new I;else throw new Error('Unknown prime '+t);return D[t]=n,n},N.prototype._verify1=function(t){o(0===t.negative,'red works only with positives'),o(t.red,'red works only with red numbers')},N.prototype._verify2=function(t,n){o(0==(t.negative|n.negative),'red works only with positives'),o(t.red&&t.red===n.red,'red works only with red numbers')},N.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},N.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},N.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a._forceRed(this)},N.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a},N.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a._forceRed(this)},N.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a},N.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},N.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},N.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},N.prototype.isqr=function(t){return this.imul(t,t.clone())},N.prototype.sqr=function(t){return this.mul(t,t)},N.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var d=this.m.add(new v(1)).iushrn(2);return this.pow(n,d)}for(var l=this.m.subn(1),u=0;!l.isZero()&&0===l.andln(1);)u++,l.iushrn(1);o(!l.isZero());var s=new v(1).toRed(this),f=s.redNeg(),h=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new v(2*g*g).toRed(this);0!==this.pow(g,h).cmp(f);)g.redIAdd(f);for(var y=this.pow(g,l),c=this.pow(n,l.addn(1).iushrn(1)),r=this.pow(n,l),t=u;0!==r.cmp(s);){for(var m=r,w=0;0!==m.cmp(s);w++)m=m.redSqr();o(w<t);var x=this.pow(y,new v(1).iushln(t-w-1));c=c.redMul(x),y=x.redSqr(),r=r.redMul(y),t=w}return c},N.prototype.invm=function(t){var n=t._invmp(this.m);return 0===n.negative?this.imod(n):(n.negative=0,this.imod(n).redNeg())},N.prototype.pow=function(t,n){if(n.isZero())return new v(1).toRed(this);if(0===n.cmpn(1))return t.clone();var a=4,r=Array(1<<a);r[0]=new v(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var s=r[0],d=0,l=0,c=n.bitLength()%26;for(0==c&&(c=26),o=n.length-1;0<=o;o--){for(var u=n.words[o],f=c-1,m;0<=f;f--){if(m=1&u>>f,s!==r[0]&&(s=this.sqr(s)),0==m&&0==d){l=0;continue}d<<=1,d|=m,l++,l!=a&&(0!==o||0!==f)||(s=this.mul(s,r[d]),l=0,d=0)}c=26}return s},N.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},N.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},v.mont=function(t){return new j(t)},r(j,N),j.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},j.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},j.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new v(0)._forceRed(this);var r=n.mul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.invm=function(t){var n=this.imod(t._invmp(this.m).mul(this.r2));return n._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(7)(t))},function(){},function(){},function(t){t.exports={modp1:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff'},modp2:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff'},modp5:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff'},modp14:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff'},modp15:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff'},modp16:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff'},modp17:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff'},modp18:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff'}}},function(t,n,a){(function(n){function r(t,a){return a=a||'utf8',n.isBuffer(t)||(t=new n(t,a)),this._pub=new c(t),this}function o(t,a){return a=a||'utf8',n.isBuffer(t)||(t=new n(t,a)),this._priv=new c(t),this}function s(t,n){var a=n.toString('hex'),r=[a,t.toString(16)].join('_');if(r in x)return x[r];var o=0;if(t.isEven()||!v.simpleSieve||!v.fermatTest(t)||!f.test(t))return o+=1,o+='02'===a||'05'===a?8:4,x[r]=o,o;f.test(t.shrn(1))||(o+=2);var s;return'02'===a?t.mod(m).cmp(h)&&(o+=8):'05'===a?(s=t.mod(g),s.cmp(b)&&s.cmp(y)&&(o+=8)):o+=4,x[r]=o,o}function d(t,n,a){this.setGenerator(n),this.__prime=new c(t),this._prime=c.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,a?(this.setPublicKey=r,this.setPrivateKey=o):this._primeCode=8}function l(t,a){var r=new n(t.toArray());return a?r.toString(a):r}var c=a(162),u=a(163),f=new u,m=new c(24),h=new c(11),g=new c(10),b=new c(3),y=new c(7),v=a(161),w=a(52);t.exports=d;var x={};Object.defineProperty(d.prototype,'verifyError',{enumerable:!0,get:function(){return'number'!=typeof this._primeCode&&(this._primeCode=s(this.__prime,this.__gen)),this._primeCode}}),d.prototype.generateKeys=function(){return this._priv||(this._priv=new c(w(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},d.prototype.computeSecret=function(t){t=new c(t),t=t.toRed(this._prime);var a=t.redPow(this._priv).fromRed(),r=new n(a.toArray()),o=this.getPrime();if(r.length<o.length){var s=new n(o.length-r.length);s.fill(0),r=n.concat([s,r])}return r},d.prototype.getPublicKey=function(t){return l(this._pub,t)},d.prototype.getPrivateKey=function(t){return l(this._priv,t)},d.prototype.getPrime=function(t){return l(this.__prime,t)},d.prototype.getGenerator=function(t){return l(this._gen,t)},d.prototype.setGenerator=function(t,a){return a=a||'utf8',n.isBuffer(t)||(t=new n(t,a)),this.__gen=t,this._gen=new c(t),this}}).call(n,a(0).Buffer)},function(t,n,a){(function(n){function r(t){c.Writable.call(this);var n=h[t];if(!n)throw new Error('Unknown message digest');this._hashType=n.hash,this._hash=l(n.hash),this._tag=n.id,this._signType=n.sign}function o(t){c.Writable.call(this);var n=h[t];if(!n)throw new Error('Unknown message digest');this._hash=l(n.hash),this._tag=n.id,this._signType=n.sign}function s(t){return new r(t)}function d(t){return new o(t)}var l=a(53),c=a(43),u=a(1),f=a(292),m=a(334),h=a(152);Object.keys(h).forEach(function(t){h[t].id=new n(h[t].id,'hex'),h[t.toLowerCase()]=h[t]}),u(r,c.Writable),r.prototype._write=function(t,n,a){this._hash.update(t),a()},r.prototype.update=function(t,a){return'string'==typeof t&&(t=new n(t,a)),this._hash.update(t),this},r.prototype.sign=function(t,n){this.end();var a=this._hash.digest(),r=f(a,t,this._hashType,this._signType,this._tag);return n?r.toString(n):r},u(o,c.Writable),o.prototype._write=function(t,n,a){this._hash.update(t),a()},o.prototype.update=function(t,a){return'string'==typeof t&&(t=new n(t,a)),this._hash.update(t),this},o.prototype.verify=function(t,a,r){'string'==typeof a&&(a=new n(a,r)),this.end();var o=this._hash.digest();return m(a,o,t,this._signType,this._tag)},t.exports={Sign:s,Verify:d,createSign:s,createVerify:d}}).call(n,a(0).Buffer)},function(t,n,a){(function(n){function r(t,a){var r=v[a.curve.join('.')];if(!r)throw new Error('unknown curve '+a.curve.join('.'));var o=new g(r),s=o.keyFromPrivate(a.privateKey),d=s.sign(t);return new n(d.toDER())}function o(t,n,a){for(var o=n.params.priv_key,m=n.params.p,h=n.params.q,y=n.params.g,g=new b(0),r=c(t,h).mod(h),v=!1,s=l(o,h,t,a),w;!1==v;)w=u(h,s,a),g=f(y,w,m,h),v=w.invm(h).imul(r.add(o.mul(g))).mod(h),0===v.cmpn(0)&&(v=!1,g=new b(0));return d(g,v)}function d(t,a){t=t.toArray(),a=a.toArray(),128&t[0]&&(t=[0].concat(t)),128&a[0]&&(a=[0].concat(a));var r=t.length+a.length+4,o=[48,r,2,t.length];return o=o.concat(t,[2,a.length],a),new n(o)}function l(t,a,r,o){if(t=new n(t.toArray()),t.length<a.byteLength()){var d=new n(a.byteLength()-t.length);d.fill(0),t=n.concat([d,t])}var l=r.length,c=s(r,a),u=new n(l);u.fill(1);var f=new n(l);return f.fill(0),f=m(o,f).update(u).update(new n([0])).update(t).update(c).digest(),u=m(o,f).update(u).digest(),f=m(o,f).update(u).update(new n([1])).update(t).update(c).digest(),u=m(o,f).update(u).digest(),{k:f,v:u}}function c(t,n){var a=new b(t),r=(t.length<<3)-n.bitLength();return 0<r&&a.ishrn(r),a}function s(t,a){t=c(t,a),t=t.mod(a);var r=new n(t.toArray());if(r.length<a.byteLength()){var o=new n(a.byteLength()-r.length);o.fill(0),r=n.concat([o,r])}return r}function u(a,r,o){var s,t;do{for(s=new n(0);8*s.length<a.bitLength();)r.v=m(o,r.k).update(r.v).digest(),s=n.concat([s,r.v]);t=c(s,a),r.k=m(o,r.k).update(r.v).update(new n([0])).digest(),r.v=m(o,r.k).update(r.v).digest()}while(-1!==t.cmp(a));return t}function f(t,n,a,r){return t.toRed(b.mont(a)).redPow(n).fromRed().mod(r)}var m=a(151),h=a(107),g=a(6).ec,b=a(169),y=a(75),v=a(174);t.exports=function(t,a,s,d,l){var c=y(a);if(c.curve){if('ecdsa'!==d&&'ecdsa/rsa'!==d)throw new Error('wrong private key type');return r(t,c)}if('dsa'===c.type){if('dsa'!==d)throw new Error('wrong private key type');return o(t,c,s)}if('rsa'!==d&&'ecdsa/rsa'!==d)throw new Error('wrong private key type');t=n.concat([l,t]);for(var u=c.modulus.byteLength(),f=[0,1];t.length+f.length+1<u;)f.push(255);f.push(0);for(var m=-1;++m<t.length;)f.push(t[m]);var g=h(f,c);return g},t.exports.getKey=l,t.exports.makeKey=u}).call(n,a(0).Buffer)},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function v(t,n,a){return v.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_(t.length,a),s=n,d;s<r;s++)d=t.charCodeAt(s)-48,o<<=4,o|=49<=d&&54>=d?d-49+10:17<=d&&22>=d?d-17+10:15&d;return o}function l(t,n,a,o){for(var s=0,r=_(t.length,a),d=n,l;d<r;d++)l=t.charCodeAt(d)-48,s*=o,s+=49<=l?l-49+10:17<=l?l-17+10:l;return s}function u(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,o=a%26;n[a]=(t.words[r]&1<<o)>>>o}return n}function w(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_(u,n.length-1),g=y(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function x(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_(l,n.length-1),m=y(0,l-t.length+1);m<=f;m++){var h=l-m,g=0|t.words[h],a=0|n.words[m],b=g*a,r=67108863&b;c=0|c+(0|b/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function k(t,n,a){var r=new C;return r.mulp(t,n,a)}function C(t,n){this.x=t,this.y=n}function T(t,n){this.name=t,this.p=new v(n,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){T.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function S(){T.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function A(){T.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function I(){T.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function N(t){if('string'==typeof t){var n=v._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function j(t){N.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=v:n.BN=v,v.BN=v,v.wordSize=26;var R;try{R=a(294).Buffer}catch(t){}v.isBN=function(t){return!!(t instanceof v)||null!==t&&'object'==typeof t&&t.constructor.wordSize===v.wordSize&&Array.isArray(t.words)},v.max=function(t,n){return 0<t.cmp(n)?t:n},v.min=function(t,n){return 0>t.cmp(n)?t:n},v.prototype._init=function(t,n,a){if('number'==typeof t)return this._initNumber(t,n,a);if('object'==typeof t)return this._initArray(t,n,a);'hex'===n&&(n=16),o(n===(0|n)&&2<=n&&36>=n),t=t.toString().replace(/\s+/g,'');var r=0;'-'===t[0]&&r++,16===n?this._parseHex(t,r):this._parseBase(t,n,r),'-'===t[0]&&(this.negative=1),this.strip();'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initNumber=function(t,n,a){0>t&&(this.negative=1,t=-t),67108864>t?(this.words=[67108863&t],this.length=1):4503599627370496>t?(this.words=[67108863&t,67108863&t/67108864],this.length=2):(o(9007199254740992>t),this.words=[67108863&t,67108863&t/67108864,1],this.length=3);'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initArray=function(t,n,a){if(o('number'==typeof t.length),0>=t.length)return this.words=[0],this.length=1,this;this.length=b(t.length/3),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s=0,d,l;if('be'===a)for(r=t.length-1,d=0;0<=r;r-=3)l=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);else if('le'===a)for(r=0,d=0;r<t.length;r+=3)l=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);return this.strip()},v.prototype._parseHex=function(t,n){this.length=b((t.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r=0,o,d;for(a=t.length-6,o=0;a>=n;a-=6)d=s(t,a,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r,r+=24,26<=r&&(r-=26,o++);a+6!==n&&(d=s(t,n,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r),this.strip()},v.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var r=0,o=1;67108863>=o;o*=n)r++;r--,o=0|o/n;for(var s=t.length-a,d=s%r,c=_(s,s-d)+a,u=0,f=a;f<c;f+=r)u=l(t,f,f+r,n),this.imuln(o),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u);if(0!=d){var m=1;for(u=l(t,f,t.length,n),f=0;f<d;f++)m*=n;this.imuln(m),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u)}},v.prototype.copy=function(t){t.words=Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},v.prototype.clone=function(){var t=new v(null);return this.copy(t),t},v.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var L=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];v.prototype.toString=function(t,n){t=t||10,n=0|n||1;var a;if(16===t||'hex'===t){a='';for(var s=0,d=0,l=0;l<this.length;l++){var u=this.words[l],f=(16777215&(u<<s|d)).toString(16);d=16777215&u>>>24-s,a=0!=d||l!==this.length-1?L[6-f.length]+f+a:f+a,s+=2,26<=s&&(s-=26,l--)}for(0!=d&&(a=d.toString(16)+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}if(t===(0|t)&&2<=t&&36>=t){var m=O[t],h=P[t];a='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(t);g=g.idivn(h),a=g.isZero()?c+a:L[m-c.length]+c+a}for(this.isZero()&&(a='0'+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}o(!1,'Base should be between 2 and 36')},v.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?t:-t},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(t,n){return o('undefined'!=typeof R),this.toArrayLike(R,t,n)},v.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},v.prototype.toArrayLike=function(t,n,a){var r=this.byteLength(),s=a||y(1,r);o(r<=s,'byte array longer than desired length'),o(0<s,'Requested array length <= 0'),this.strip();var d=new t(s),l=this.clone(),c,u;if(!('le'===n)){for(u=0;u<s-r;u++)d[u]=0;for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[s-u-1]=c}else{for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[u]=c;for(;u<s;u++)d[u]=0}return d},v.prototype._countBits=g?function(t){return 32-g(t)}:function(n){var a=n,t=0;return 4096<=a&&(t+=13,a>>>=13),64<=a&&(t+=7,a>>>=7),8<=a&&(t+=4,a>>>=4),2<=a&&(t+=2,a>>>=2),t+a},v.prototype._zeroBits=function(n){if(0===n)return 26;var a=n,t=0;return 0==(8191&a)&&(t+=13,a>>>=13),0==(127&a)&&(t+=7,a>>>=7),0==(15&a)&&(t+=4,a>>>=4),0==(3&a)&&(t+=2,a>>>=2),0==(1&a)&&t++,t},v.prototype.bitLength=function(){var t=this.words[this.length-1],n=this._countBits(t);return 26*(this.length-1)+n},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0,a;n<this.length&&(a=this._zeroBits(this.words[n]),t+=a,26===a);n++);return t},v.prototype.byteLength=function(){return b(this.bitLength()/8)},v.prototype.toTwos=function(t){return 0===this.negative?this.clone():this.abs().inotn(t).iaddn(1)},v.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]|=t.words[n];return this.strip()},v.prototype.ior=function(t){return o(0==(this.negative|t.negative)),this.iuor(t)},v.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},v.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},v.prototype.iuand=function(t){var n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]&=t.words[a];return this.length=n.length,this.strip()},v.prototype.iand=function(t){return o(0==(this.negative|t.negative)),this.iuand(t)},v.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},v.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},v.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var r=0;r<a.length;r++)this.words[r]=n.words[r]^a.words[r];if(this!==n)for(;r<n.length;r++)this.words[r]=n.words[r];return this.length=n.length,this.strip()},v.prototype.ixor=function(t){return o(0==(this.negative|t.negative)),this.iuxor(t)},v.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},v.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},v.prototype.inotn=function(t){o('number'==typeof t&&0<=t);var n=0|b(t/26),a=t%26;this._expand(n),0<a&&n--;for(var r=0;r<n;r++)this.words[r]=67108863&~this.words[r];return 0<a&&(this.words[r]=~this.words[r]&67108863>>26-a),this.strip()},v.prototype.notn=function(t){return this.clone().inotn(t)},v.prototype.setn=function(t,n){o('number'==typeof t&&0<=t);var a=0|t/26,r=t%26;return this._expand(a+1),n?this.words[a]|=1<<r:this.words[a]&=~(1<<r),this.strip()},v.prototype.iadd=function(t){var n;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();var r,a;this.length>t.length?(r=this,a=t):(r=t,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|r.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!=o&&s<r.length;s++)n=(0|r.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=r.length,0!=o)this.words[this.length]=o,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},v.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},v.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var o,a;0<r?(o=this,a=t):(o=t,a=this);for(var s=0,d=0;d<a.length;d++)n=(0|o.words[d])-(0|a.words[d])+s,s=n>>26,this.words[d]=67108863&n;for(;0!=s&&d<o.length;d++)n=(0|o.words[d])+s,s=n>>26,this.words[d]=67108863&n;if(0==s&&d<o.length&&o!==this)for(;d<o.length;d++)this.words[d]=o.words[d];return this.length=y(this.length,d),o!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(t){return this.clone().isub(t)};var M=function(t,n,r){var s=t.words,a=n.words,d=r.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,g=f>>>13,b=0|s[2],y=8191&b,v=b>>>13,w=0|s[3],x=8191&w,_=w>>>13,k=0|s[4],C=8191&k,T=k>>>13,E=0|s[5],S=8191&E,A=E>>>13,I=0|s[6],N=8191&I,j=I>>>13,R=0|s[7],L=8191&R,O=R>>>13,P=0|s[8],M=8191&P,D=P>>>13,B=0|s[9],U=8191&B,q=B>>>13,F=0|a[0],z=8191&F,H=F>>>13,W=0|a[1],V=8191&W,G=W>>>13,K=0|a[2],J=8191&K,X=K>>>13,Z=0|a[3],Y=8191&Z,Q=Z>>>13,ee=0|a[4],te=8191&ee,ne=ee>>>13,ae=0|a[5],re=8191&ae,oe=ae>>>13,ie=0|a[6],se=8191&ie,de=ie>>>13,le=0|a[7],pe=8191&le,ce=le>>>13,ue=0|a[8],fe=8191&ue,he=ue>>>13,ge=0|a[9],be=8191&ge,ye=ge>>>13,ve,we,xe;r.negative=t.negative^n.negative,r.length=19,ve=h(c,z),we=h(c,H),we=0|we+h(u,z),xe=h(u,H);var _e=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(_e>>>26),_e&=67108863,ve=h(m,z),we=h(m,H),we=0|we+h(g,z),xe=h(g,H),ve=0|ve+h(c,V),we=0|we+h(c,G),we=0|we+h(u,V),xe=0|xe+h(u,G);var ke=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(ke>>>26),ke&=67108863,ve=h(y,z),we=h(y,H),we=0|we+h(v,z),xe=h(v,H),ve=0|ve+h(m,V),we=0|we+h(m,G),we=0|we+h(g,V),xe=0|xe+h(g,G),ve=0|ve+h(c,J),we=0|we+h(c,X),we=0|we+h(u,J),xe=0|xe+h(u,X);var Ce=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ce>>>26),Ce&=67108863,ve=h(x,z),we=h(x,H),we=0|we+h(_,z),xe=h(_,H),ve=0|ve+h(y,V),we=0|we+h(y,G),we=0|we+h(v,V),xe=0|xe+h(v,G),ve=0|ve+h(m,J),we=0|we+h(m,X),we=0|we+h(g,J),xe=0|xe+h(g,X),ve=0|ve+h(c,Y),we=0|we+h(c,Q),we=0|we+h(u,Y),xe=0|xe+h(u,Q);var Te=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Te>>>26),Te&=67108863,ve=h(C,z),we=h(C,H),we=0|we+h(T,z),xe=h(T,H),ve=0|ve+h(x,V),we=0|we+h(x,G),we=0|we+h(_,V),xe=0|xe+h(_,G),ve=0|ve+h(y,J),we=0|we+h(y,X),we=0|we+h(v,J),xe=0|xe+h(v,X),ve=0|ve+h(m,Y),we=0|we+h(m,Q),we=0|we+h(g,Y),xe=0|xe+h(g,Q),ve=0|ve+h(c,te),we=0|we+h(c,ne),we=0|we+h(u,te),xe=0|xe+h(u,ne);var Ee=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ee>>>26),Ee&=67108863,ve=h(S,z),we=h(S,H),we=0|we+h(A,z),xe=h(A,H),ve=0|ve+h(C,V),we=0|we+h(C,G),we=0|we+h(T,V),xe=0|xe+h(T,G),ve=0|ve+h(x,J),we=0|we+h(x,X),we=0|we+h(_,J),xe=0|xe+h(_,X),ve=0|ve+h(y,Y),we=0|we+h(y,Q),we=0|we+h(v,Y),xe=0|xe+h(v,Q),ve=0|ve+h(m,te),we=0|we+h(m,ne),we=0|we+h(g,te),xe=0|xe+h(g,ne),ve=0|ve+h(c,re),we=0|we+h(c,oe),we=0|we+h(u,re),xe=0|xe+h(u,oe);var Se=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Se>>>26),Se&=67108863,ve=h(N,z),we=h(N,H),we=0|we+h(j,z),xe=h(j,H),ve=0|ve+h(S,V),we=0|we+h(S,G),we=0|we+h(A,V),xe=0|xe+h(A,G),ve=0|ve+h(C,J),we=0|we+h(C,X),we=0|we+h(T,J),xe=0|xe+h(T,X),ve=0|ve+h(x,Y),we=0|we+h(x,Q),we=0|we+h(_,Y),xe=0|xe+h(_,Q),ve=0|ve+h(y,te),we=0|we+h(y,ne),we=0|we+h(v,te),xe=0|xe+h(v,ne),ve=0|ve+h(m,re),we=0|we+h(m,oe),we=0|we+h(g,re),xe=0|xe+h(g,oe),ve=0|ve+h(c,se),we=0|we+h(c,de),we=0|we+h(u,se),xe=0|xe+h(u,de);var Ae=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ae>>>26),Ae&=67108863,ve=h(L,z),we=h(L,H),we=0|we+h(O,z),xe=h(O,H),ve=0|ve+h(N,V),we=0|we+h(N,G),we=0|we+h(j,V),xe=0|xe+h(j,G),ve=0|ve+h(S,J),we=0|we+h(S,X),we=0|we+h(A,J),xe=0|xe+h(A,X),ve=0|ve+h(C,Y),we=0|we+h(C,Q),we=0|we+h(T,Y),xe=0|xe+h(T,Q),ve=0|ve+h(x,te),we=0|we+h(x,ne),we=0|we+h(_,te),xe=0|xe+h(_,ne),ve=0|ve+h(y,re),we=0|we+h(y,oe),we=0|we+h(v,re),xe=0|xe+h(v,oe),ve=0|ve+h(m,se),we=0|we+h(m,de),we=0|we+h(g,se),xe=0|xe+h(g,de),ve=0|ve+h(c,pe),we=0|we+h(c,ce),we=0|we+h(u,pe),xe=0|xe+h(u,ce);var Ie=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ie>>>26),Ie&=67108863,ve=h(M,z),we=h(M,H),we=0|we+h(D,z),xe=h(D,H),ve=0|ve+h(L,V),we=0|we+h(L,G),we=0|we+h(O,V),xe=0|xe+h(O,G),ve=0|ve+h(N,J),we=0|we+h(N,X),we=0|we+h(j,J),xe=0|xe+h(j,X),ve=0|ve+h(S,Y),we=0|we+h(S,Q),we=0|we+h(A,Y),xe=0|xe+h(A,Q),ve=0|ve+h(C,te),we=0|we+h(C,ne),we=0|we+h(T,te),xe=0|xe+h(T,ne),ve=0|ve+h(x,re),we=0|we+h(x,oe),we=0|we+h(_,re),xe=0|xe+h(_,oe),ve=0|ve+h(y,se),we=0|we+h(y,de),we=0|we+h(v,se),xe=0|xe+h(v,de),ve=0|ve+h(m,pe),we=0|we+h(m,ce),we=0|we+h(g,pe),xe=0|xe+h(g,ce),ve=0|ve+h(c,fe),we=0|we+h(c,he),we=0|we+h(u,fe),xe=0|xe+h(u,he);var Ne=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ne>>>26),Ne&=67108863,ve=h(U,z),we=h(U,H),we=0|we+h(q,z),xe=h(q,H),ve=0|ve+h(M,V),we=0|we+h(M,G),we=0|we+h(D,V),xe=0|xe+h(D,G),ve=0|ve+h(L,J),we=0|we+h(L,X),we=0|we+h(O,J),xe=0|xe+h(O,X),ve=0|ve+h(N,Y),we=0|we+h(N,Q),we=0|we+h(j,Y),xe=0|xe+h(j,Q),ve=0|ve+h(S,te),we=0|we+h(S,ne),we=0|we+h(A,te),xe=0|xe+h(A,ne),ve=0|ve+h(C,re),we=0|we+h(C,oe),we=0|we+h(T,re),xe=0|xe+h(T,oe),ve=0|ve+h(x,se),we=0|we+h(x,de),we=0|we+h(_,se),xe=0|xe+h(_,de),ve=0|ve+h(y,pe),we=0|we+h(y,ce),we=0|we+h(v,pe),xe=0|xe+h(v,ce),ve=0|ve+h(m,fe),we=0|we+h(m,he),we=0|we+h(g,fe),xe=0|xe+h(g,he),ve=0|ve+h(c,be),we=0|we+h(c,ye),we=0|we+h(u,be),xe=0|xe+h(u,ye);var je=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(je>>>26),je&=67108863,ve=h(U,V),we=h(U,G),we=0|we+h(q,V),xe=h(q,G),ve=0|ve+h(M,J),we=0|we+h(M,X),we=0|we+h(D,J),xe=0|xe+h(D,X),ve=0|ve+h(L,Y),we=0|we+h(L,Q),we=0|we+h(O,Y),xe=0|xe+h(O,Q),ve=0|ve+h(N,te),we=0|we+h(N,ne),we=0|we+h(j,te),xe=0|xe+h(j,ne),ve=0|ve+h(S,re),we=0|we+h(S,oe),we=0|we+h(A,re),xe=0|xe+h(A,oe),ve=0|ve+h(C,se),we=0|we+h(C,de),we=0|we+h(T,se),xe=0|xe+h(T,de),ve=0|ve+h(x,pe),we=0|we+h(x,ce),we=0|we+h(_,pe),xe=0|xe+h(_,ce),ve=0|ve+h(y,fe),we=0|we+h(y,he),we=0|we+h(v,fe),xe=0|xe+h(v,he),ve=0|ve+h(m,be),we=0|we+h(m,ye),we=0|we+h(g,be),xe=0|xe+h(g,ye);var Re=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Re>>>26),Re&=67108863,ve=h(U,J),we=h(U,X),we=0|we+h(q,J),xe=h(q,X),ve=0|ve+h(M,Y),we=0|we+h(M,Q),we=0|we+h(D,Y),xe=0|xe+h(D,Q),ve=0|ve+h(L,te),we=0|we+h(L,ne),we=0|we+h(O,te),xe=0|xe+h(O,ne),ve=0|ve+h(N,re),we=0|we+h(N,oe),we=0|we+h(j,re),xe=0|xe+h(j,oe),ve=0|ve+h(S,se),we=0|we+h(S,de),we=0|we+h(A,se),xe=0|xe+h(A,de),ve=0|ve+h(C,pe),we=0|we+h(C,ce),we=0|we+h(T,pe),xe=0|xe+h(T,ce),ve=0|ve+h(x,fe),we=0|we+h(x,he),we=0|we+h(_,fe),xe=0|xe+h(_,he),ve=0|ve+h(y,be),we=0|we+h(y,ye),we=0|we+h(v,be),xe=0|xe+h(v,ye);var Le=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Le>>>26),Le&=67108863,ve=h(U,Y),we=h(U,Q),we=0|we+h(q,Y),xe=h(q,Q),ve=0|ve+h(M,te),we=0|we+h(M,ne),we=0|we+h(D,te),xe=0|xe+h(D,ne),ve=0|ve+h(L,re),we=0|we+h(L,oe),we=0|we+h(O,re),xe=0|xe+h(O,oe),ve=0|ve+h(N,se),we=0|we+h(N,de),we=0|we+h(j,se),xe=0|xe+h(j,de),ve=0|ve+h(S,pe),we=0|we+h(S,ce),we=0|we+h(A,pe),xe=0|xe+h(A,ce),ve=0|ve+h(C,fe),we=0|we+h(C,he),we=0|we+h(T,fe),xe=0|xe+h(T,he),ve=0|ve+h(x,be),we=0|we+h(x,ye),we=0|we+h(_,be),xe=0|xe+h(_,ye);var Oe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Oe>>>26),Oe&=67108863,ve=h(U,te),we=h(U,ne),we=0|we+h(q,te),xe=h(q,ne),ve=0|ve+h(M,re),we=0|we+h(M,oe),we=0|we+h(D,re),xe=0|xe+h(D,oe),ve=0|ve+h(L,se),we=0|we+h(L,de),we=0|we+h(O,se),xe=0|xe+h(O,de),ve=0|ve+h(N,pe),we=0|we+h(N,ce),we=0|we+h(j,pe),xe=0|xe+h(j,ce),ve=0|ve+h(S,fe),we=0|we+h(S,he),we=0|we+h(A,fe),xe=0|xe+h(A,he),ve=0|ve+h(C,be),we=0|we+h(C,ye),we=0|we+h(T,be),xe=0|xe+h(T,ye);var Pe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Pe>>>26),Pe&=67108863,ve=h(U,re),we=h(U,oe),we=0|we+h(q,re),xe=h(q,oe),ve=0|ve+h(M,se),we=0|we+h(M,de),we=0|we+h(D,se),xe=0|xe+h(D,de),ve=0|ve+h(L,pe),we=0|we+h(L,ce),we=0|we+h(O,pe),xe=0|xe+h(O,ce),ve=0|ve+h(N,fe),we=0|we+h(N,he),we=0|we+h(j,fe),xe=0|xe+h(j,he),ve=0|ve+h(S,be),we=0|we+h(S,ye),we=0|we+h(A,be),xe=0|xe+h(A,ye);var Me=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Me>>>26),Me&=67108863,ve=h(U,se),we=h(U,de),we=0|we+h(q,se),xe=h(q,de),ve=0|ve+h(M,pe),we=0|we+h(M,ce),we=0|we+h(D,pe),xe=0|xe+h(D,ce),ve=0|ve+h(L,fe),we=0|we+h(L,he),we=0|we+h(O,fe),xe=0|xe+h(O,he),ve=0|ve+h(N,be),we=0|we+h(N,ye),we=0|we+h(j,be),xe=0|xe+h(j,ye);var De=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(De>>>26),De&=67108863,ve=h(U,pe),we=h(U,ce),we=0|we+h(q,pe),xe=h(q,ce),ve=0|ve+h(M,fe),we=0|we+h(M,he),we=0|we+h(D,fe),xe=0|xe+h(D,he),ve=0|ve+h(L,be),we=0|we+h(L,ye),we=0|we+h(O,be),xe=0|xe+h(O,ye);var Be=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Be>>>26),Be&=67108863,ve=h(U,fe),we=h(U,he),we=0|we+h(q,fe),xe=h(q,he),ve=0|ve+h(M,be),we=0|we+h(M,ye),we=0|we+h(D,be),xe=0|xe+h(D,ye);var Ue=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ue>>>26),Ue&=67108863,ve=h(U,be),we=h(U,ye),we=0|we+h(q,be),xe=h(q,ye);var qe=0|(0|o+ve)+((8191&we)<<13);return o=0|(0|xe+(we>>>13))+(qe>>>26),qe&=67108863,d[0]=_e,d[1]=ke,d[2]=Ce,d[3]=Te,d[4]=Ee,d[5]=Se,d[6]=Ae,d[7]=Ie,d[8]=Ne,d[9]=je,d[10]=Re,d[11]=Le,d[12]=Oe,d[13]=Pe,d[14]=Me,d[15]=De,d[16]=Be,d[17]=Ue,d[18]=qe,0!=o&&(d[19]=o,r.length++),r};h||(M=w),v.prototype.mulTo=function(t,n){var a=this.length+t.length,r;return r=10===this.length&&10===t.length?M(this,t,n):63>a?w(this,t,n):1024>a?x(this,t,n):k(this,t,n),r},C.prototype.makeRBT=function(n){for(var a=Array(n),t=v.prototype._countBits(n)-1,r=0;r<n;r++)a[r]=this.revBin(r,t,n);return a},C.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var r=0,o=0;o<n;o++)r|=(1&t)<<n-o-1,t>>=1;return r},C.prototype.permute=function(t,n,a,r,o,s){for(var d=0;d<s;d++)r[d]=n[t[d]],o[d]=a[t[d]]},C.prototype.transform=function(t,n,a,r,o,d){this.permute(d,t,n,a,r,o);for(var u=1;u<o;u<<=1)for(var s=u<<1,l=f(2*m/s),h=c(2*m/s),g=0;g<o;g+=s)for(var b=l,y=h,v=0;v<u;v++){var w=a[g+v],x=r[g+v],_=a[g+v+u],k=r[g+v+u],C=b*_-y*k;k=b*k+y*_,_=C,a[g+v]=w+_,r[g+v]=x+k,a[g+v+u]=w-_,r[g+v+u]=x-k,v!==s&&(C=l*b-h*y,y=l*y+h*b,b=C)}},C.prototype.guessLen13b=function(t,n){var a=1|y(n,t),r=1&a,o=0;for(a=0|a/2;a;a>>>=1)o++;return 1<<o+1+r},C.prototype.conjugate=function(n,a,r){if(!(1>=r))for(var o=0,s;o<r/2;o++)s=n[o],n[o]=n[r-o-1],n[r-o-1]=s,s=a[o],a[o]=-a[r-o-1],a[r-o-1]=-s},C.prototype.normalize13b=function(t,n){for(var a=0,r=0,o;r<n/2;r++)o=8192*d(t[2*r+1]/n)+d(t[2*r]/n)+a,t[r]=67108863&o,a=67108864>o?0:0|o/67108864;return t},C.prototype.convert13b=function(t,n,a,r){for(var s=0,d=0;d<n;d++)s+=0|t[d],a[2*d]=8191&s,s>>>=13,a[2*d+1]=8191&s,s>>>=13;for(d=2*n;d<r;++d)a[d]=0;o(0==s),o(0==(-8192&s))},C.prototype.stub=function(t){for(var n=Array(t),a=0;a<t;a++)n[a]=0;return n},C.prototype.mulp=function(t,n,a){var r=2*this.guessLen13b(t.length,n.length),o=this.makeRBT(r),s=this.stub(r),d=Array(r),l=Array(r),c=Array(r),u=Array(r),f=Array(r),m=Array(r),h=a.words;h.length=r,this.convert13b(t.words,t.length,d,r),this.convert13b(n.words,n.length,u,r),this.transform(d,s,l,c,r,o),this.transform(u,s,f,m,r,o);for(var g=0,b;g<r;g++)b=l[g]*f[g]-c[g]*m[g],c[g]=l[g]*m[g]+c[g]*f[g],l[g]=b;return this.conjugate(l,c,r),this.transform(l,c,h,s,r,o),this.conjugate(h,s,r),this.normalize13b(h,r),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},v.prototype.mul=function(t){var n=new v(null);return n.words=Array(this.length+t.length),this.mulTo(t,n)},v.prototype.mulf=function(t){var n=new v(null);return n.words=Array(this.length+t.length),k(this,t,n)},v.prototype.imul=function(t){return this.clone().mulTo(t,this)},v.prototype.imuln=function(t){o('number'==typeof t),o(67108864>t);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*t,s=(67108863&r)+(67108863&n);n>>=26,n+=0|r/67108864,n+=s>>>26,this.words[a]=67108863&s}return 0!=n&&(this.words[a]=n,this.length++),this},v.prototype.muln=function(t){return this.clone().imuln(t)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(t){var n=u(t);if(0===n.length)return new v(1);for(var a=this,r=0;r<n.length&&!(0!==n[r]);r++,a=a.sqr());if(++r<n.length)for(var o=a.sqr();r<n.length;r++,o=o.sqr())0!==n[r]&&(a=a.mul(o));return a},v.prototype.iushln=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26,r;if(0!=n){var s=0;for(r=0;r<this.length;r++){var d=this.words[r]&67108863>>>26-n<<26-n,l=(0|this.words[r])-d<<n;this.words[r]=l|s,s=d>>>26-n}s&&(this.words[r]=s,this.length++)}if(0!=a){for(r=this.length-1;0<=r;r--)this.words[r+a]=this.words[r];for(r=0;r<a;r++)this.words[r]=0;this.length+=a}return this.strip()},v.prototype.ishln=function(t){return o(0===this.negative),this.iushln(t)},v.prototype.iushrn=function(t,n,a){o('number'==typeof t&&0<=t);var d=n?(n-n%26)/26:0;var l=t%26,r=_((t-l)/26,this.length),s=a;if(d-=r,d=y(0,d),s){for(var c=0;c<r;c++)s.words[c]=this.words[c];s.length=r}if(0===r);else if(this.length>r)for(this.length-=r,c=0;c<this.length;c++)this.words[c]=this.words[c+r];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!=u||c>=d);c--){var f=0|this.words[c];this.words[c]=u<<26-l|f>>>l,u=f&(67108863^67108863>>>l<<l)}return s&&0!=u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(t,n,a){return o(0===this.negative),this.iushrn(t,n,a)},v.prototype.shln=function(t){return this.clone().ishln(t)},v.prototype.ushln=function(t){return this.clone().iushln(t)},v.prototype.shrn=function(t){return this.clone().ishrn(t)},v.prototype.ushrn=function(t){return this.clone().iushrn(t)},v.prototype.testn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(this.length<=a)return!1;var r=this.words[a];return!!(r&1<<n)},v.prototype.imaskn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=a)return this;if(0!=n&&a++,this.length=_(a,this.length),0!=n){this.words[this.length-1]&=67108863^67108863>>>n<<n}return this.strip()},v.prototype.maskn=function(t){return this.clone().imaskn(t)},v.prototype.iaddn=function(t){return o('number'==typeof t),o(67108864>t),0>t?this.isubn(-t):0===this.negative?this._iaddn(t):1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this)},v.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&67108864<=this.words[n];n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=y(this.length,n+1),this},v.prototype.isubn=function(t){if(o('number'==typeof t),o(67108864>t),0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&0>this.words[n];n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},v.prototype.addn=function(t){return this.clone().iaddn(t)},v.prototype.subn=function(t){return this.clone().isubn(t)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(t,n,a){var r=t.length+a,s;this._expand(r);var d=0,l;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+d;var c=(0|t.words[s])*n;l-=67108863&c,d=(l>>26)-(0|c/67108864),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)l=(0|this.words[s+a])+d,d=l>>26,this.words[s+a]=67108863&l;if(0==d)return this.strip();for(o(-1==d),d=0,s=0;s<this.length;s++)l=-(0|this.words[s])+d,d=l>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},v.prototype._wordDiv=function(t,n){var r=this.length-t.length,o=this.clone(),s=t,d=0|s.words[s.length-1],l=this._countBits(d);r=26-l,0!=r&&(s=s.ushln(r),o.iushln(r),d=0|s.words[s.length-1]);var c=o.length-s.length,u;if('mod'!==n){u=new v(null),u.length=c+1,u.words=Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var m=o.clone()._ishlnsubmul(s,1,c);0===m.negative&&(o=m,u&&(u.words[c]=1));for(var h=c-1,g;0<=h;h--){for(g=67108864*(0|o.words[s.length+h])+(0|o.words[s.length+h-1]),g=_(0|g/d,67108863),o._ishlnsubmul(s,g,h);0!==o.negative;)g--,o.negative=0,o._ishlnsubmul(s,1,h),o.isZero()||(o.negative^=1);u&&(u.words[h]=g)}return u&&u.strip(),o.strip(),'div'!==n&&0!=r&&o.iushrn(r),{div:u||null,mod:o}},v.prototype.divmod=function(t,n,a){if(o(!t.isZero()),this.isZero())return{div:new v(0),mod:new v(0)};var r,s,d;return 0!==this.negative&&0===t.negative?(d=this.neg().divmod(t,n),'mod'!==n&&(r=d.div.neg()),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(d=this.divmod(t.neg(),n),'mod'!==n&&(r=d.div.neg()),{div:r,mod:d.mod}):0==(this.negative&t.negative)?t.length>this.length||0>this.cmp(t)?{div:new v(0),mod:this}:1===t.length?'div'===n?{div:this.divn(t.words[0]),mod:null}:'mod'===n?{div:null,mod:new v(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new v(this.modn(t.words[0]))}:this._wordDiv(t,n):(d=this.neg().divmod(t.neg(),n),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:d.div,mod:s})},v.prototype.div=function(t){return this.divmod(t,'div',!1).div},v.prototype.mod=function(t){return this.divmod(t,'mod',!1).mod},v.prototype.umod=function(t){return this.divmod(t,'mod',!0).mod},v.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0===n.div.negative?n.mod:n.mod.isub(t),r=t.ushrn(1),o=t.andln(1),s=a.cmp(r);return 0>s||1===o&&0===s?n.div:0===n.div.negative?n.div.iaddn(1):n.div.isubn(1)},v.prototype.modn=function(t){o(67108863>=t);for(var n=0,a=this.length-1;0<=a;a--)n=(67108864%t*n+(0|this.words[a]))%t;return n},v.prototype.idivn=function(t){o(67108863>=t);for(var n=0,a=this.length-1,r;0<=a;a--)r=(0|this.words[a])+67108864*n,this.words[a]=0|r/t,n=r%t;return this.strip()},v.prototype.divn=function(t){return this.clone().idivn(t)},v.prototype.egcd=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=new v(0),l=new v(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var u=a.clone(),f=n.clone();!n.isZero();){for(var m=0,h=1;0==(n.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(n.iushrn(m);0<m--;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(f)),r.iushrn(1),s.iushrn(1);for(var g=0,b=1;0==(a.words[0]&b)&&26>g;++g,b<<=1);if(0<g)for(a.iushrn(g);0<g--;)(d.isOdd()||l.isOdd())&&(d.iadd(u),l.isub(f)),d.iushrn(1),l.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(d),s.isub(l)):(a.isub(n),d.isub(r),l.isub(s))}return{a:d,b:l,gcd:a.iushln(c)}},v.prototype._invmp=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=a.clone();0<n.cmpn(1)&&0<a.cmpn(1);){for(var l=0,c=1;0==(n.words[0]&c)&&26>l;++l,c<<=1);if(0<l)for(n.iushrn(l);0<l--;)r.isOdd()&&r.iadd(d),r.iushrn(1);for(var u=0,f=1;0==(a.words[0]&f)&&26>u;++u,f<<=1);if(0<u)for(a.iushrn(u);0<u--;)s.isOdd()&&s.iadd(d),s.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(s)):(a.isub(n),s.isub(r))}var m;return m=0===n.cmpn(1)?r:s,0>m.cmpn(0)&&m.iadd(t),m},v.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var o=this.clone(),a=n.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},v.prototype.invm=function(t){return this.egcd(t).a.umod(t)},v.prototype.isEven=function(){return 0==(1&this.words[0])},v.prototype.isOdd=function(){return 1==(1&this.words[0])},v.prototype.andln=function(t){return this.words[0]&t},v.prototype.bincn=function(t){o('number'==typeof t);var n=t%26,a=(t-n)/26,r=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=r,this;for(var s=r,d=a,l;0!=s&&d<this.length;d++)l=0|this.words[d],l+=s,s=l>>>26,l&=67108863,this.words[d]=l;return 0!=s&&(this.words[d]=s,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(t){var n=0>t;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;this.strip();var a;if(1<this.length)a=1;else{n&&(t=-t),o(67108863>=t,'Number is too big');var r=0|this.words[0];a=r===t?0:r<t?-1:1}return 0===this.negative?a:0|-a},v.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0===this.negative?n:0|-n},v.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,r=this.length-1;0<=r;r--){var o=0|this.words[r],a=0|t.words[r];if(o!=a){o<a?n=-1:o>a&&(n=1);break}}return n},v.prototype.gtn=function(t){return 1===this.cmpn(t)},v.prototype.gt=function(t){return 1===this.cmp(t)},v.prototype.gten=function(t){return 0<=this.cmpn(t)},v.prototype.gte=function(t){return 0<=this.cmp(t)},v.prototype.ltn=function(t){return-1===this.cmpn(t)},v.prototype.lt=function(t){return-1===this.cmp(t)},v.prototype.lten=function(t){return 0>=this.cmpn(t)},v.prototype.lte=function(t){return 0>=this.cmp(t)},v.prototype.eqn=function(t){return 0===this.cmpn(t)},v.prototype.eq=function(t){return 0===this.cmp(t)},v.red=function(t){return new N(t)},v.prototype.toRed=function(t){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),t.convertTo(this)._forceRed(t)},v.prototype.fromRed=function(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},v.prototype._forceRed=function(t){return this.red=t,this},v.prototype.forceRed=function(t){return o(!this.red,'Already a number in reduction context'),this._forceRed(t)},v.prototype.redAdd=function(t){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,t)},v.prototype.redIAdd=function(t){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,t)},v.prototype.redSub=function(t){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,t)},v.prototype.redISub=function(t){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,t)},v.prototype.redShl=function(t){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,t)},v.prototype.redMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.mul(this,t)},v.prototype.redIMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.imul(this,t)},v.prototype.redSqr=function(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(t){return o(this.red&&!t.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,t)};var D={k256:null,p224:null,p192:null,p25519:null};T.prototype._tmp=function(){var t=new v(null);return t.words=Array(b(this.n/13)),t},T.prototype.ireduce=function(t){var n=t,a;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),a=n.bitLength();while(a>this.n);var r=a<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},T.prototype.split=function(t,n){t.iushrn(this.n,0,n)},T.prototype.imulK=function(t){return t.imul(this.k)},r(E,T),E.prototype.split=function(t,n){for(var a=4194303,r=_(t.length,9),o=0;o<r;o++)n.words[o]=t.words[o];if(n.length=r,9>=t.length)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(n.words[n.length++]=s&a,o=10;o<t.length;o++){var d=0|t.words[o];t.words[o-10]=(d&a)<<4|s>>>22,s=d}s>>>=22,t.words[o-10]=s,t.length-=0===s&&10<t.length?10:9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0,r;a<t.length;a++)r=0|t.words[a],n+=977*r,t.words[a]=67108863&n,n=64*r+(0|n/67108864);return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(S,T),r(A,T),r(I,T),I.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var r=19*(0|t.words[a])+n,o=67108863&r;r>>>=26,t.words[a]=o,n=r}return 0!=n&&(t.words[t.length++]=n),t},v._prime=function(t){if(D[t])return D[t];var n;if('k256'===t)n=new E;else if('p224'===t)n=new S;else if('p192'===t)n=new A;else if('p25519'===t)n=new I;else throw new Error('Unknown prime '+t);return D[t]=n,n},N.prototype._verify1=function(t){o(0===t.negative,'red works only with positives'),o(t.red,'red works only with red numbers')},N.prototype._verify2=function(t,n){o(0==(t.negative|n.negative),'red works only with positives'),o(t.red&&t.red===n.red,'red works only with red numbers')},N.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},N.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},N.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a._forceRed(this)},N.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a},N.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a._forceRed(this)},N.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a},N.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},N.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},N.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},N.prototype.isqr=function(t){return this.imul(t,t.clone())},N.prototype.sqr=function(t){return this.mul(t,t)},N.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var d=this.m.add(new v(1)).iushrn(2);return this.pow(n,d)}for(var l=this.m.subn(1),u=0;!l.isZero()&&0===l.andln(1);)u++,l.iushrn(1);o(!l.isZero());var s=new v(1).toRed(this),f=s.redNeg(),h=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new v(2*g*g).toRed(this);0!==this.pow(g,h).cmp(f);)g.redIAdd(f);for(var y=this.pow(g,l),c=this.pow(n,l.addn(1).iushrn(1)),r=this.pow(n,l),t=u;0!==r.cmp(s);){for(var m=r,w=0;0!==m.cmp(s);w++)m=m.redSqr();o(w<t);var x=this.pow(y,new v(1).iushln(t-w-1));c=c.redMul(x),y=x.redSqr(),r=r.redMul(y),t=w}return c},N.prototype.invm=function(t){var n=t._invmp(this.m);return 0===n.negative?this.imod(n):(n.negative=0,this.imod(n).redNeg())},N.prototype.pow=function(t,n){if(n.isZero())return new v(1).toRed(this);if(0===n.cmpn(1))return t.clone();var a=4,r=Array(1<<a);r[0]=new v(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var s=r[0],d=0,l=0,c=n.bitLength()%26;for(0==c&&(c=26),o=n.length-1;0<=o;o--){for(var u=n.words[o],f=c-1,m;0<=f;f--){if(m=1&u>>f,s!==r[0]&&(s=this.sqr(s)),0==m&&0==d){l=0;continue}d<<=1,d|=m,l++,l!=a&&(0!==o||0!==f)||(s=this.mul(s,r[d]),l=0,d=0)}c=26}return s},N.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},N.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},v.mont=function(t){return new j(t)},r(j,N),j.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},j.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},j.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new v(0)._forceRed(this);var r=n.mul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.invm=function(t){var n=this.imod(t._invmp(this.m).mul(this.r2));return n._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(7)(t))},function(){},function(t){t.exports={_args:[['elliptic@6.4.0','/home/travis/build/linkeddata/mashlib']],_from:'elliptic@6.4.0',_id:'elliptic@6.4.0',_inBundle:!1,_integrity:'sha1-ysmvh2LIWDYYcAPI3+GT5eLq5d8=',_location:'/elliptic',_phantomChildren:{},_requested:{type:'version',registry:!0,raw:'elliptic@6.4.0',name:'elliptic',escapedName:'elliptic',rawSpec:'6.4.0',saveSpec:null,fetchSpec:'6.4.0'},_requiredBy:['/@trust/keyto','/browserify-sign','/create-ecdh'],_resolved:'https://registry.npmjs.org/elliptic/-/elliptic-6.4.0.tgz',_spec:'6.4.0',_where:'/home/travis/build/linkeddata/mashlib',author:{name:'Fedor Indutny',email:'fedor@indutny.com'},bugs:{url:'https://github.com/indutny/elliptic/issues'},dependencies:{"bn.js":'^4.4.0',brorand:'^1.0.1',"hash.js":'^1.0.0',"hmac-drbg":'^1.0.0',inherits:'^2.0.1',"minimalistic-assert":'^1.0.0',"minimalistic-crypto-utils":'^1.0.0'},description:'EC cryptography',devDependencies:{brfs:'^1.4.3',coveralls:'^2.11.3',grunt:'^0.4.5',"grunt-browserify":'^5.0.0',"grunt-cli":'^1.2.0',"grunt-contrib-connect":'^1.0.0',"grunt-contrib-copy":'^1.0.0',"grunt-contrib-uglify":'^1.0.1',"grunt-mocha-istanbul":'^3.0.1',"grunt-saucelabs":'^8.6.2',istanbul:'^0.4.2',jscs:'^2.9.0',jshint:'^2.6.0',mocha:'^2.1.0'},files:['lib'],homepage:'https://github.com/indutny/elliptic',keywords:['EC','Elliptic','curve','Cryptography'],license:'MIT',main:'lib/elliptic.js',name:'elliptic',repository:{type:'git',url:'git+ssh://git@github.com/indutny/elliptic.git'},scripts:{jscs:'jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js',jshint:'jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js',lint:'npm run jscs && npm run jshint',test:'npm run lint && npm run unit',unit:'istanbul test _mocha --reporter=spec test/index.js',version:'grunt dist && git add dist/'},version:'6.4.0'}},function(t,n,a){'use strict';var r=n,o=a(25),s=a(15),d=a(165);r.assert=s,r.toArray=d.toArray,r.zero2=d.zero2,r.toHex=d.toHex,r.encode=d.encode,r.getNAF=function(t,n){for(var a=[],r=1<<n+1,o=t.clone();0<=o.cmpn(1);){var s;if(o.isOdd()){var d=o.andln(r-1);s=d>(r>>1)-1?(r>>1)-d:d,o.isubn(s)}else s=0;a.push(s);for(var l=0!==o.cmpn(0)&&0===o.andln(r-1)?n+1:1,c=1;c<l;c++)a.push(0);o.iushrn(l)}return a},r.getJSF=function(t,n){var a=[[],[]];t=t.clone(),n=n.clone();for(var r=0,o=0;0<t.cmpn(-r)||0<n.cmpn(-o);){var s=3&t.andln(3)+r,d=3&n.andln(3)+o;3==s&&(s=-1),3==d&&(d=-1);var l;if(0==(1&s))l=0;else{var c=7&t.andln(7)+r;l=(3==c||5==c)&&2==d?-s:s}a[0].push(l);var u;if(0==(1&d))u=0;else{var c=7&n.andln(7)+o;u=(3==c||5==c)&&2==s?-d:d}a[1].push(u),2*r===l+1&&(r=1-r),2*o===u+1&&(o=1-o),t.iushrn(1),n.iushrn(1)}return a},r.cachedProperty=function(t,n,a){var r='_'+n;t.prototype[n]=function(){return this[r]===void 0?this[r]=a.call(this):this[r]}},r.parseBytes=function(t){return'string'==typeof t?r.toArray(t,'hex'):t},r.intFromLE=function(t){return new o(t,'hex','le')}},function(){},function(t,n,a){'use strict';function r(t,n){this.type=t,this.p=new s(n.p,16),this.red=n.prime?s.red(n.prime):s.mont(this.p),this.zero=new s(0).toRed(this.red),this.one=new s(1).toRed(this.red),this.two=new s(2).toRed(this.red),this.n=n.n&&new s(n.n,16),this.g=n.g&&this.pointFromJSON(n.g,n.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,];var a=this.n&&this.p.div(this.n);!a||0<a.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function o(t,n){this.curve=t,this.type=n,this.precomputed=null}var s=a(25),d=a(6),l=d.utils,c=l.getNAF,u=l.getJSF,f=l.assert;t.exports=r,r.prototype.point=function(){throw new Error('Not implemented')},r.prototype.validate=function(){throw new Error('Not implemented')},r.prototype._fixedNafMul=function(t,n){f(t.precomputed);var r=t._getDoubles(),o=c(n,1),s=(1<<r.step+1)-(0==r.step%2?2:1);s/=3;for(var d=[],l=0,u;l<o.length;l+=r.step){u=0;for(var n=l+r.step-1;n>=l;n--)u=(u<<1)+o[n];d.push(u)}for(var m=this.jpoint(null,null,null),a=this.jpoint(null,null,null),h=s;0<h;h--){for(var l=0,u;l<d.length;l++)u=d[l],u===h?a=a.mixedAdd(r.points[l]):u===-h&&(a=a.mixedAdd(r.points[l].neg()));m=m.add(a)}return m.toP()},r.prototype._wnafMul=function(t,n){var a=4,r=t._getNAFPoints(a);a=r.wnd;for(var o=r.points,s=c(n,a),d=this.jpoint(null,null,null),l=s.length-1;0<=l;l--){for(var n=0;0<=l&&0===s[l];l--)n++;if(0<=l&&n++,d=d.dblp(n),0>l)break;var u=s[l];f(0!==u),d='affine'===t.type?0<u?d.mixedAdd(o[u-1>>1]):d.mixedAdd(o[-u-1>>1].neg()):0<u?d.add(o[u-1>>1]):d.add(o[-u-1>>1].neg())}return'affine'===t.type?d.toP():d},r.prototype._wnafMulAdd=function(t,n,r,o,s){for(var d=this._wnafT1,l=this._wnafT2,f=this._wnafT3,m=0,h=0;h<o;h++){var g=n[h],v=g._getNAFPoints(t);d[h]=v.wnd,l[h]=v.points}for(var h=o-1;1<=h;h-=2){var w=h-1,a=h;if(1!==d[w]||1!==d[a]){f[w]=c(r[w],d[w]),f[a]=c(r[a],d[a]),m=y(f[w].length,m),m=y(f[a].length,m);continue}var b=[n[w],null,null,n[a]];0===n[w].y.cmp(n[a].y)?(b[1]=n[w].add(n[a]),b[2]=n[w].toJ().mixedAdd(n[a].neg())):0===n[w].y.cmp(n[a].y.redNeg())?(b[1]=n[w].toJ().mixedAdd(n[a]),b[2]=n[w].add(n[a].neg())):(b[1]=n[w].toJ().mixedAdd(n[a]),b[2]=n[w].toJ().mixedAdd(n[a].neg()));var x=[-3,-1,-5,-7,0,7,5,1,3],_=u(r[w],r[a]);m=y(_[0].length,m),f[w]=Array(m),f[a]=Array(m);for(var C=0;C<m;C++){var T=0|_[0][C],E=0|_[1][C];f[w][C]=x[3*(T+1)+(E+1)],f[a][C]=0,l[w]=b}}for(var S=this.jpoint(null,null,null),A=this._wnafT4,h=m,I;0<=h;h--){for(I=0;0<=h;){for(var k=!0,C=0;C<o;C++)A[C]=0|f[C][h],0!==A[C]&&(k=!1);if(!k)break;I++,h--}if(0<=h&&I++,S=S.dblp(I),0>h)break;for(var C=0;C<o;C++){var N=A[C],g;if(0===N)continue;else 0<N?g=l[C][N-1>>1]:0>N&&(g=l[C][-N-1>>1].neg());S='affine'===g.type?S.mixedAdd(g):S.add(g)}}for(var h=0;h<o;h++)l[h]=null;return s?S:S.toP()},r.BasePoint=o,o.prototype.eq=function(){throw new Error('Not implemented')},o.prototype.validate=function(){return this.curve.validate(this)},r.prototype.decodePoint=function(t,n){t=l.toArray(t,n);var a=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*a){6===t[0]?f(0==t[t.length-1]%2):7===t[0]&&f(1==t[t.length-1]%2);var r=this.point(t.slice(1,1+a),t.slice(1+a,1+2*a));return r}if((2===t[0]||3===t[0])&&t.length-1===a)return this.pointFromX(t.slice(1,1+a),3===t[0]);throw new Error('Unknown point format')},o.prototype.encodeCompressed=function(t){return this.encode(t,!0)},o.prototype._encode=function(t){var n=this.curve.p.byteLength(),a=this.getX().toArray('be',n);return t?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray('be',n))},o.prototype.encode=function(t,n){return l.encode(this._encode(n),t)},o.prototype.precompute=function(t){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,t),n.beta=this._getBeta(),this.precomputed=n,this},o.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return!!n&&n.points.length>=b((t.bitLength()+1)/n.step)},o.prototype._getDoubles=function(t,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],r=this,o=0;o<n;o+=t){for(var s=0;s<t;s++)r=r.dbl();a.push(r)}return{step:t,points:a}},o.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],a=(1<<t)-1,r=1==a?null:this.dbl(),o=1;o<a;o++)n[o]=n[o-1].add(r);return{wnd:t,points:n}},o.prototype._getBeta=function(){return null},o.prototype.dblp=function(t){for(var n=this,a=0;a<t;a++)n=n.dbl();return n}},function(t,n,a){'use strict';function r(t){f.call(this,'short',t),this.a=new c(t.a,16).toRed(this.red),this.b=new c(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function o(t,n,a,r){f.BasePoint.call(this,t,'affine'),null===n&&null===a?(this.x=null,this.y=null,this.inf=!0):(this.x=new c(n,16),this.y=new c(a,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.y.red&&(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function s(t,n,a,r){f.BasePoint.call(this,t,'jacobian'),null===n&&null===a&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new c(0)):(this.x=new c(n,16),this.y=new c(a,16),this.z=new c(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var d=a(74),l=a(6),c=a(25),u=a(1),f=d.base,m=l.utils.assert;u(r,f),t.exports=r,r.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var n,a;if(t.beta)n=new c(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);n=0>r[0].cmp(r[1])?r[0]:r[1],n=n.toRed(this.red)}if(t.lambda)a=new c(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(n))?a=o[0]:(a=o[1],m(0===this.g.mul(a).x.cmp(this.g.x.redMul(n))))}var s;return s=t.basis?t.basis.map(function(t){return{a:new c(t.a,16),b:new c(t.b,16)}}):this._getEndoBasis(a),{beta:n,lambda:a,basis:s}}},r.prototype._getEndoRoots=function(t){var n=t===this.p?this.red:c.mont(t),a=new c(2).toRed(n).redInvm(),r=a.redNeg(),o=new c(3).toRed(n).redNeg().redSqrt().redMul(a),s=r.redAdd(o).fromRed(),d=r.redSub(o).fromRed();return[s,d]},r.prototype._getEndoBasis=function(t){for(var n=this.n.ushrn(w(this.n.bitLength()/2)),a=t,o=this.n.clone(),s=new c(1),d=new c(0),l=new c(0),u=new c(1),f=0,m,h,g,b,v,_,k,C,r,x;0!==a.cmpn(0);){x=o.div(a),C=o.sub(x.mul(a)),r=l.sub(x.mul(s));var T=u.sub(x.mul(d));if(!g&&0>C.cmp(n))m=k.neg(),h=s,g=C.neg(),b=r;else if(g&&2==++f)break;k=C,o=a,a=C,l=s,s=r,u=d,d=T}v=C.neg(),_=r;var y=g.sqr().add(b.sqr()),E=v.sqr().add(_.sqr());return 0<=E.cmp(y)&&(v=m,_=h),g.negative&&(g=g.neg(),b=b.neg()),v.negative&&(v=v.neg(),_=_.neg()),[{a:g,b:b},{a:v,b:_}]},r.prototype._endoSplit=function(t){var n=this.endo.basis,a=n[0],r=n[1],o=r.b.mul(t).divRound(this.n),s=a.b.neg().mul(t).divRound(this.n),d=o.mul(a.a),l=s.mul(r.a),c=o.mul(a.b),u=s.mul(r.b),f=t.sub(d).sub(l),m=c.add(u).neg();return{k1:f,k2:m}},r.prototype.pointFromX=function(t,n){t=new c(t,16),t.red||(t=t.toRed(this.red));var a=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=a.redSqrt();if(0!==r.redSqr().redSub(a).cmp(this.zero))throw new Error('invalid point');var o=r.fromRed().isOdd();return(n&&!o||!n&&o)&&(r=r.redNeg()),this.point(t,r)},r.prototype.validate=function(t){if(t.inf)return!0;var n=t.x,a=t.y,r=this.a.redMul(n),o=n.redSqr().redMul(n).redIAdd(r).redIAdd(this.b);return 0===a.redSqr().redISub(o).cmpn(0)},r.prototype._endoWnafMulAdd=function(t,n,a){for(var r=this._endoWnafT1,o=this._endoWnafT2,s=0;s<t.length;s++){var d=this._endoSplit(n[s]),l=t[s],c=l._getBeta();d.k1.negative&&(d.k1.ineg(),l=l.neg(!0)),d.k2.negative&&(d.k2.ineg(),c=c.neg(!0)),r[2*s]=l,r[2*s+1]=c,o[2*s]=d.k1,o[2*s+1]=d.k2}for(var u=this._wnafMulAdd(1,r,o,2*s,a),f=0;f<2*s;f++)r[f]=null,o[f]=null;return u},u(o,f.BasePoint),r.prototype.point=function(t,n,a){return new o(this,t,n,a)},r.prototype.pointFromJSON=function(t,n){return o.fromJSON(this,t,n)},o.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var a=this.curve,r=function(t){return a.point(t.x.redMul(a.endo.beta),t.y)};t.beta=n,n.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return n}},o.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},o.fromJSON=function(t,n,a){function r(n){return t.point(n[0],n[1],a)}'string'==typeof n&&(n=JSON.parse(n));var o=t.point(n[0],n[1],a);if(!n[2])return o;var s=n[2];return o.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[o].concat(s.doubles.points.map(r))},naf:s.naf&&{wnd:s.naf.wnd,points:[o].concat(s.naf.points.map(r))}},o},o.prototype.inspect=function(){return this.isInfinity()?'<EC Point Infinity>':'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+'>'},o.prototype.isInfinity=function(){return this.inf},o.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var n=this.y.redSub(t.y);0!==n.cmpn(0)&&(n=n.redMul(this.x.redSub(t.x).redInvm()));var a=n.redSqr().redISub(this.x).redISub(t.x),r=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,r)},o.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var n=this.curve.a,a=this.x.redSqr(),r=t.redInvm(),o=a.redAdd(a).redIAdd(a).redIAdd(n).redMul(r),s=o.redSqr().redISub(this.x.redAdd(this.x)),d=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,d)},o.prototype.getX=function(){return this.x.fromRed()},o.prototype.getY=function(){return this.y.fromRed()},o.prototype.mul=function(t){return t=new c(t,16),this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},o.prototype.mulAdd=function(t,n,a){var r=[this,n],o=[t,a];return this.curve.endo?this.curve._endoWnafMulAdd(r,o):this.curve._wnafMulAdd(1,r,o,2)},o.prototype.jmulAdd=function(t,n,a){var r=[this,n],o=[t,a];return this.curve.endo?this.curve._endoWnafMulAdd(r,o,!0):this.curve._wnafMulAdd(1,r,o,2,!0)},o.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},o.prototype.neg=function(t){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var a=this.precomputed,r=function(t){return t.neg()};n.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(r)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(r)}}}return n},o.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t},u(s,f.BasePoint),r.prototype.jpoint=function(t,n,a){return new s(this,t,n,a)},s.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),n=t.redSqr(),a=this.x.redMul(n),r=this.y.redMul(n).redMul(t);return this.curve.point(a,r)},s.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},s.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var n=t.z.redSqr(),a=this.z.redSqr(),o=this.x.redMul(n),s=t.x.redMul(a),d=this.y.redMul(n.redMul(t.z)),l=t.y.redMul(a.redMul(this.z)),c=o.redSub(s),u=d.redSub(l);if(0===c.cmpn(0))return 0===u.cmpn(0)?this.dbl():this.curve.jpoint(null,null,null);var r=c.redSqr(),f=r.redMul(c),m=o.redMul(r),h=u.redSqr().redIAdd(f).redISub(m).redISub(m),g=u.redMul(m.redISub(h)).redISub(d.redMul(f)),b=this.z.redMul(t.z).redMul(c);return this.curve.jpoint(h,g,b)},s.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var n=this.z.redSqr(),a=this.x,o=t.x.redMul(n),s=this.y,d=t.y.redMul(n).redMul(this.z),l=a.redSub(o),c=s.redSub(d);if(0===l.cmpn(0))return 0===c.cmpn(0)?this.dbl():this.curve.jpoint(null,null,null);var r=l.redSqr(),u=r.redMul(l),f=a.redMul(r),m=c.redSqr().redIAdd(u).redISub(f).redISub(f),h=c.redMul(f.redISub(m)).redISub(s.redMul(u)),g=this.z.redMul(l);return this.curve.jpoint(m,h,g)},s.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var n=this,r=0;r<t;r++)n=n.dbl();return n}for(var o=this.curve.a,a=this.curve.tinv,s=this.x,d=this.y,l=this.z,u=l.redSqr().redSqr(),f=d.redAdd(d),r=0;r<t;r++){var m=s.redSqr(),h=f.redSqr(),g=h.redSqr(),b=m.redAdd(m).redIAdd(m).redIAdd(o.redMul(u)),c=s.redMul(h),y=b.redSqr().redISub(c.redAdd(c)),v=c.redISub(y),w=b.redMul(v);w=w.redIAdd(w).redISub(g);var x=f.redMul(l);r+1<t&&(u=u.redMul(g)),s=y,l=x,f=w}return this.curve.jpoint(s,f.redMul(a),l)},s.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},s.prototype._zeroDbl=function(){var n,r,o;if(this.zOne){var l=this.x.redSqr(),u=this.y.redSqr(),h=u.redSqr(),g=this.x.redAdd(u).redSqr().redISub(l).redISub(h);g=g.redIAdd(g);var s=l.redAdd(l).redIAdd(l),m=s.redSqr().redISub(g).redISub(g),t=h.redIAdd(h);t=t.redIAdd(t),t=t.redIAdd(t),n=m,r=s.redMul(g.redISub(m)).redISub(t),o=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),a=this.y.redSqr(),b=a.redSqr(),c=this.x.redAdd(a).redSqr().redISub(y).redISub(b);c=c.redIAdd(c);var d=y.redAdd(y).redIAdd(y),v=d.redSqr(),f=b.redIAdd(b);f=f.redIAdd(f),f=f.redIAdd(f),n=v.redISub(c).redISub(c),r=d.redMul(c.redISub(n)).redISub(f),o=this.y.redMul(this.z),o=o.redIAdd(o)}return this.curve.jpoint(n,r,o)},s.prototype._threeDbl=function(){var n,a,r;if(this.zOne){var o=this.x.redSqr(),d=this.y.redSqr(),l=d.redSqr(),c=this.x.redAdd(d).redSqr().redISub(o).redISub(l);c=c.redIAdd(c);var s=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),u=s.redSqr().redISub(c).redISub(c);n=u;var t=l.redIAdd(l);t=t.redIAdd(t),t=t.redIAdd(t),a=s.redMul(c.redISub(u)).redISub(t),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),m=this.y.redSqr(),h=this.x.redMul(m),g=this.x.redSub(f).redMul(this.x.redAdd(f));g=g.redAdd(g).redIAdd(g);var b=h.redIAdd(h);b=b.redIAdd(b);var y=b.redAdd(b);n=g.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(m).redISub(f);var v=m.redSqr();v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v),a=g.redMul(b.redISub(n)).redISub(v)}return this.curve.jpoint(n,a,r)},s.prototype._dbl=function(){var t=this.curve.a,n=this.x,a=this.y,r=this.z,o=r.redSqr().redSqr(),s=n.redSqr(),d=a.redSqr(),l=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(o)),c=n.redAdd(n);c=c.redIAdd(c);var u=c.redMul(d),f=l.redSqr().redISub(u.redAdd(u)),m=u.redISub(f),h=d.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var g=l.redMul(m).redISub(h),b=a.redAdd(a).redMul(r);return this.curve.jpoint(f,g,b)},s.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var n=this.x.redSqr(),a=this.y.redSqr(),r=this.z.redSqr(),o=a.redSqr(),s=n.redAdd(n).redIAdd(n),d=s.redSqr(),l=this.x.redAdd(a).redSqr().redISub(n).redISub(o);l=l.redIAdd(l),l=l.redAdd(l).redIAdd(l),l=l.redISub(d);var c=l.redSqr(),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var t=s.redIAdd(l).redSqr().redISub(d).redISub(c).redISub(f),u=a.redMul(t);u=u.redIAdd(u),u=u.redIAdd(u);var m=this.x.redMul(c).redISub(u);m=m.redIAdd(m),m=m.redIAdd(m);var h=this.y.redMul(t.redMul(f.redISub(t)).redISub(l.redMul(c)));h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var g=this.z.redAdd(l).redSqr().redISub(r).redISub(c);return this.curve.jpoint(m,h,g)},s.prototype.mul=function(t,n){return t=new c(t,n),this.curve._wnafMul(this,t)},s.prototype.eq=function(t){if('affine'===t.type)return this.eq(t.toJ());if(this===t)return!0;var n=this.z.redSqr(),a=t.z.redSqr();if(0!==this.x.redMul(a).redISub(t.x.redMul(n)).cmpn(0))return!1;var r=n.redMul(this.z),o=a.redMul(t.z);return 0===this.y.redMul(o).redISub(t.y.redMul(r)).cmpn(0)},s.prototype.eqXToP=function(n){var a=this.z.redSqr(),r=n.toRed(this.curve.red).redMul(a);if(0===this.x.cmp(r))return!0;for(var o=n.clone(),s=this.curve.redN.redMul(a);;){if(o.iadd(this.curve.n),0<=o.cmp(this.curve.p))return!1;if(r.redIAdd(s),0===this.x.cmp(r))return!0}return!1},s.prototype.inspect=function(){return this.isInfinity()?'<EC JPoint Infinity>':'<EC JPoint x: '+this.x.toString(16,2)+' y: '+this.y.toString(16,2)+' z: '+this.z.toString(16,2)+'>'},s.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,n,a){'use strict';function r(t){c.call(this,'mont',t),this.a=new d(t.a,16).toRed(this.red),this.b=new d(t.b,16).toRed(this.red),this.i4=new d(4).toRed(this.red).redInvm(),this.two=new d(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function o(t,n,a){c.BasePoint.call(this,t,'projective'),null===n&&null===a?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new d(n,16),this.z=new d(a,16),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.z.red&&(this.z=this.z.toRed(this.curve.red)))}var s=a(74),d=a(25),l=a(1),c=s.base,u=a(6),f=u.utils;l(r,c),t.exports=r,r.prototype.validate=function(t){var n=t.normalize().x,a=n.redSqr(),r=a.redMul(n).redAdd(a.redMul(this.a)).redAdd(n),o=r.redSqrt();return 0===o.redSqr().cmp(r)},l(o,c.BasePoint),r.prototype.decodePoint=function(t,n){return this.point(f.toArray(t,n),1)},r.prototype.point=function(t,n){return new o(this,t,n)},r.prototype.pointFromJSON=function(t){return o.fromJSON(this,t)},o.prototype.precompute=function(){},o.prototype._encode=function(){return this.getX().toArray('be',this.curve.p.byteLength())},o.fromJSON=function(t,n){return new o(t,n[0],n[1]||t.one)},o.prototype.inspect=function(){return this.isInfinity()?'<EC Point Infinity>':'<EC Point x: '+this.x.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>'},o.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},o.prototype.dbl=function(){var t=this.x.redAdd(this.z),n=t.redSqr(),a=this.x.redSub(this.z),r=a.redSqr(),o=n.redSub(r),s=n.redMul(r),d=o.redMul(r.redAdd(this.curve.a24.redMul(o)));return this.curve.point(s,d)},o.prototype.add=function(){throw new Error('Not supported on Montgomery curve')},o.prototype.diffAdd=function(t,n){var r=this.x.redAdd(this.z),a=this.x.redSub(this.z),o=t.x.redAdd(t.z),s=t.x.redSub(t.z),d=s.redMul(r),l=o.redMul(a),c=n.z.redMul(d.redAdd(l).redSqr()),u=n.x.redMul(d.redISub(l).redSqr());return this.curve.point(c,u)},o.prototype.mul=function(n){for(var r=n.clone(),t=this,a=this.curve.point(null,null),o=this,s=[];0!==r.cmpn(0);r.iushrn(1))s.push(r.andln(1));for(var d=s.length-1;0<=d;d--)0===s[d]?(t=t.diffAdd(a,o),a=a.dbl()):(a=t.diffAdd(a,o),t=t.dbl());return a},o.prototype.mulAdd=function(){throw new Error('Not supported on Montgomery curve')},o.prototype.jumlAdd=function(){throw new Error('Not supported on Montgomery curve')},o.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},o.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,n,a){'use strict';function r(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,u.call(this,'edwards',t),this.a=new l(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new l(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new l(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),f(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function o(n,a,r,o,s){u.BasePoint.call(this,n,'projective'),null===a&&null===r&&null===o?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new l(a,16),this.y=new l(r,16),this.z=o?new l(o,16):this.curve.one,this.t=s&&new l(s,16),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.y.red&&(this.y=this.y.toRed(this.curve.red)),!this.z.red&&(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),!this.zOne&&(this.t=this.t.redMul(this.z.redInvm()))))}var s=a(74),d=a(6),l=a(25),c=a(1),u=s.base,f=d.utils.assert;c(r,u),t.exports=r,r.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},r.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},r.prototype.jpoint=function(n,a,r,o){return this.point(n,a,r,o)},r.prototype.pointFromX=function(t,n){t=new l(t,16),t.red||(t=t.toRed(this.red));var a=t.redSqr(),r=this.c2.redSub(this.a.redMul(a)),o=this.one.redSub(this.c2.redMul(this.d).redMul(a)),s=r.redMul(o.redInvm()),d=s.redSqrt();if(0!==d.redSqr().redSub(s).cmp(this.zero))throw new Error('invalid point');var c=d.fromRed().isOdd();return(n&&!c||!n&&c)&&(d=d.redNeg()),this.point(t,d)},r.prototype.pointFromY=function(t,n){t=new l(t,16),t.red||(t=t.toRed(this.red));var a=t.redSqr(),r=a.redSub(this.one),o=a.redMul(this.d).redAdd(this.one),s=r.redMul(o.redInvm());if(0===s.cmp(this.zero))if(n)throw new Error('invalid point');else return this.point(this.zero,t);var d=s.redSqrt();if(0!==d.redSqr().redSub(s).cmp(this.zero))throw new Error('invalid point');return d.isOdd()!==n&&(d=d.redNeg()),this.point(d,t)},r.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var n=t.x.redSqr(),a=t.y.redSqr(),r=n.redMul(this.a).redAdd(a),o=this.c2.redMul(this.one.redAdd(this.d.redMul(n).redMul(a)));return 0===r.cmp(o)},c(o,u.BasePoint),r.prototype.pointFromJSON=function(t){return o.fromJSON(this,t)},r.prototype.point=function(n,a,r,s){return new o(this,n,a,r,s)},o.fromJSON=function(t,n){return new o(t,n[0],n[1],n[2])},o.prototype.inspect=function(){return this.isInfinity()?'<EC Point Infinity>':'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>'},o.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},o.prototype._extDbl=function(){var t=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr();a=a.redIAdd(a);var r=this.curve._mulA(t),o=this.x.redAdd(this.y).redSqr().redISub(t).redISub(n),s=r.redAdd(n),d=s.redSub(a),l=r.redSub(n),c=o.redMul(d),u=s.redMul(l),f=o.redMul(l),m=d.redMul(s);return this.curve.point(c,u,m,f)},o.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),a=this.y.redSqr(),r,o,s;if(this.curve.twisted){var d=this.curve._mulA(n),l=d.redAdd(a);if(this.zOne)r=t.redSub(n).redSub(a).redMul(l.redSub(this.curve.two)),o=l.redMul(d.redSub(a)),s=l.redSqr().redSub(l).redSub(l);else{var c=this.z.redSqr(),u=l.redSub(c).redISub(c);r=t.redSub(n).redISub(a).redMul(u),o=l.redMul(d.redSub(a)),s=l.redMul(u)}}else{var d=n.redAdd(a),c=this.curve._mulC(this.c.redMul(this.z)).redSqr(),u=d.redSub(c).redSub(c);r=this.curve._mulC(t.redISub(d)).redMul(u),o=this.curve._mulC(d).redMul(n.redISub(a)),s=d.redMul(u)}return this.curve.point(r,o,s)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},o.prototype._extAdd=function(t){var n=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),a=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),o=this.z.redMul(t.z.redAdd(t.z)),s=a.redSub(n),d=o.redSub(r),l=o.redAdd(r),c=a.redAdd(n),u=s.redMul(d),f=l.redMul(c),m=s.redMul(c),h=d.redMul(l);return this.curve.point(u,f,h,m)},o.prototype._projAdd=function(t){var n=this.z.redMul(t.z),a=n.redSqr(),r=this.x.redMul(t.x),o=this.y.redMul(t.y),s=this.curve.d.redMul(r).redMul(o),d=a.redSub(s),l=a.redAdd(s),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(r).redISub(o),u=n.redMul(d).redMul(c),f,m;return this.curve.twisted?(f=n.redMul(l).redMul(o.redSub(this.curve._mulA(r))),m=d.redMul(l)):(f=n.redMul(l).redMul(o.redSub(r)),m=this.curve._mulC(d).redMul(l)),this.curve.point(u,f,m)},o.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},o.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},o.prototype.mulAdd=function(t,n,a){return this.curve._wnafMulAdd(1,[this,n],[t,a],2,!1)},o.prototype.jmulAdd=function(t,n,a){return this.curve._wnafMulAdd(1,[this,n],[t,a],2,!0)},o.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},o.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()},o.prototype.getY=function(){return this.normalize(),this.y.fromRed()},o.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},o.prototype.eqXToP=function(n){var a=n.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(a))return!0;for(var r=n.clone(),o=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),0<=r.cmp(this.curve.p))return!1;if(a.redIAdd(o),0===this.x.cmp(a))return!0}return!1},o.prototype.toP=o.prototype.normalize,o.prototype.mixedAdd=o.prototype.add},function(t,n,a){'use strict';function r(t){this.curve='short'===t.type?new l.curve.short(t):'edwards'===t.type?new l.curve.edwards(t):new l.curve.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,c(this.g.validate(),'Invalid curve'),c(this.g.mul(this.n).isInfinity(),'Invalid curve, G*N != O')}function o(t,n){Object.defineProperty(s,t,{configurable:!0,enumerable:!0,get:function(){var a=new r(n);return Object.defineProperty(s,t,{configurable:!0,enumerable:!0,value:a}),a}})}var s=n,d=a(108),l=a(6),c=l.utils.assert;s.PresetCurve=r,o('p192',{type:'short',prime:'p192',p:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',a:'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',b:'64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',n:'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',hash:d.sha256,gRed:!1,g:['188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012','07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811']}),o('p224',{type:'short',prime:'p224',p:'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',a:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',b:'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',n:'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',hash:d.sha256,gRed:!1,g:['b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21','bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34']}),o('p256',{type:'short',prime:null,p:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',a:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',b:'5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',n:'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',hash:d.sha256,gRed:!1,g:['6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296','4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5']}),o('p384',{type:'short',prime:null,p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff',a:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc',b:'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',n:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',hash:d.sha384,gRed:!1,g:['aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7','3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f']}),o('p521',{type:'short',prime:null,p:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff',a:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc',b:'00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',n:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',hash:d.sha512,gRed:!1,g:['000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66','00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650']}),o('curve25519',{type:'mont',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'76d06',b:'1',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:d.sha256,gRed:!1,g:['9']}),o('ed25519',{type:'edwards',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'-1',c:'1',d:'52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:d.sha256,gRed:!1,g:['216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a','6666666666666666666666666666666666666666666666666666666666666658']});var u;try{u=a(309)}catch(t){u=void 0}o('secp256k1',{type:'short',prime:'k256',p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',a:'0',b:'7',n:'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',h:'1',hash:d.sha256,beta:'7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',lambda:'5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',basis:[{a:'3086d221a7d46bcde86c90e49284eb15',b:'-e4437ed6010e88286f547fa90abfe4c3'},{a:'114ca50f7a8e2f3f657c1108d9d44cfd8',b:'3086d221a7d46bcde86c90e49284eb15'}],gRed:!1,g:['79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798','483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',u]})},function(t,n,a){'use strict';n.sha1=a(304),n.sha224=a(305),n.sha256=a(167),n.sha384=a(306),n.sha512=a(168)},function(t,n,a){'use strict';function r(){return this instanceof r?void(c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)):new r}var o=a(22),s=a(55),d=a(166),l=o.rotl32,u=o.sum32,f=o.sum32_5,m=d.ft_1,c=s.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];o.inherits(r,c),t.exports=r,r.blockSize=512,r.outSize=160,r.hmacStrength=80,r.padLength=64,r.prototype._update=function(n,r){for(var o=this.W,g=0;16>g;g++)o[g]=n[r+g];for(;g<o.length;g++)o[g]=l(o[g-3]^o[g-8]^o[g-14]^o[g-16],1);var y=this.h[0],a=this.h[1],b=this.h[2],c=this.h[3],d=this.h[4];for(g=0;g<o.length;g++){var v=~~(g/20),s=f(l(y,5),m(v,a,b,c),d,o[g],h[v]);d=c,c=b,b=l(a,30),a=y,y=s}this.h[0]=u(this.h[0],y),this.h[1]=u(this.h[1],a),this.h[2]=u(this.h[2],b),this.h[3]=u(this.h[3],c),this.h[4]=u(this.h[4],d)},r.prototype._digest=function(t){return'hex'===t?o.toHex32(this.h,'big'):o.split32(this.h,'big')}},function(t,n,a){'use strict';function r(){return this instanceof r?void(s.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]):new r}var o=a(22),s=a(167);o.inherits(r,s),t.exports=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(t){return'hex'===t?o.toHex32(this.h.slice(0,7),'big'):o.split32(this.h.slice(0,7),'big')}},function(t,n,a){'use strict';function r(){return this instanceof r?void(s.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]):new r}var o=a(22),s=a(168);o.inherits(r,s),t.exports=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(t){return'hex'===t?o.toHex32(this.h.slice(0,12),'big'):o.split32(this.h.slice(0,12),'big')}},function(t,n,a){'use strict';function o(){return this instanceof o?void(y.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian='little'):new o}function d(t,n,a,r){return 15>=t?n^a^r:31>=t?n&a|~n&r:47>=t?(n|~a)^r:63>=t?n&r|a&~r:n^(a|~r)}function l(t){return 15>=t?0:31>=t?1518500249:47>=t?1859775393:63>=t?2400959708:2840853838}function c(t){return 15>=t?1352829926:31>=t?1548603684:47>=t?1836072691:63>=t?2053994217:0}var u=a(22),f=a(55),m=u.rotl32,h=u.sum32,g=u.sum32_3,b=u.sum32_4,y=f.BlockHash;u.inherits(o,y),n.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(t,n){for(var a=this.h[0],o=this.h[1],u=this.h[2],f=this.h[3],y=this.h[4],x=a,_=o,k=u,C=f,E=y,S=0,A;80>S;S++)A=h(m(b(a,d(S,o,u,f),t[v[S]+n],l(S)),w[S]),y),a=y,y=f,f=m(u,10),u=o,o=A,A=h(m(b(x,d(79-S,_,k,C),t[r[S]+n],c(S)),s[S]),E),x=E,E=C,C=m(k,10),k=_,_=A;A=g(this.h[1],u,C),this.h[1]=g(this.h[2],f,E),this.h[2]=g(this.h[3],y,x),this.h[3]=g(this.h[4],a,_),this.h[4]=g(this.h[0],o,k),this.h[0]=A},o.prototype._digest=function(t){return'hex'===t?u.toHex32(this.h,'little'):u.split32(this.h,'little')};var v=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],r=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],s=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,n,a){'use strict';function r(t,n,a){return this instanceof r?void(this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(n,a))):new r(t,n,a)}var o=a(22),s=a(15);t.exports=r,r.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),s(t.length<=this.blockSize);for(var n=t.length;n<this.blockSize;n++)t.push(0);for(n=0;n<t.length;n++)t[n]^=54;for(this.inner=new this.Hash().update(t),n=0;n<t.length;n++)t[n]^=106;this.outer=new this.Hash().update(t)},r.prototype.update=function(t,n){return this.inner.update(t,n),this},r.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t){t.exports={doubles:{step:4,points:[['e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a','f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'],['8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508','11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'],['175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739','d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'],['363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640','4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'],['8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c','4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'],['723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda','96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'],['eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa','5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'],['100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0','cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'],['e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d','9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'],['feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d','e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'],['da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1','9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'],['53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0','5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'],['8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047','10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'],['385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862','283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'],['6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7','7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'],['3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd','56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'],['85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83','7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'],['948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a','53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'],['6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8','bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'],['e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d','4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'],['e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725','7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'],['213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754','4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'],['4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c','17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'],['fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6','6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'],['76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39','c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'],['c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891','893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'],['d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b','febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'],['b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03','2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'],['e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d','eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'],['a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070','7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'],['90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4','e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'],['8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da','662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'],['e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11','1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'],['8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e','efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'],['e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41','2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'],['b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef','67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'],['d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8','db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'],['324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d','648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'],['4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96','35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'],['9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd','ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'],['6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5','9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'],['a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266','40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'],['7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71','34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'],['928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac','c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'],['85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751','1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'],['ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e','493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'],['827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241','c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'],['eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3','be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'],['e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f','4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'],['1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19','aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'],['146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be','b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'],['fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9','6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'],['da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2','8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'],['a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13','7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'],['174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c','ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'],['959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba','2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'],['d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151','e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'],['64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073','d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'],['8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458','38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'],['13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b','69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'],['bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366','d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'],['8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa','40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'],['8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0','620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'],['dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787','7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'],['f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e','ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82']]},naf:{wnd:7,points:[['f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9','388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'],['2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4','d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'],['5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc','6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'],['acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe','cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'],['774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb','d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'],['f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8','ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'],['d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e','581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'],['defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34','4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'],['2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c','85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'],['352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5','321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'],['2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f','2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'],['9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714','73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'],['daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729','a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'],['c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db','2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'],['6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4','e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'],['1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5','b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'],['605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479','2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'],['62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d','80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'],['80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f','1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'],['7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb','d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'],['d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9','eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'],['49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963','758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'],['77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74','958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'],['f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530','e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'],['463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b','5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'],['f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247','cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'],['caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1','cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'],['2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120','4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'],['7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435','91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'],['754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18','673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'],['e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8','59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'],['186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb','3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'],['df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f','55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'],['5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143','efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'],['290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba','e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'],['af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45','f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'],['766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a','744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'],['59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e','c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'],['f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8','e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'],['7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c','30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'],['948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519','e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'],['7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab','100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'],['3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca','ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'],['d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf','8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'],['1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610','68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'],['733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4','f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'],['15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c','d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'],['a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940','edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'],['e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980','a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'],['311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3','66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'],['34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf','9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'],['f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63','4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'],['d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448','fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'],['32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf','5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'],['7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5','8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'],['ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6','8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'],['16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5','5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'],['eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99','f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'],['78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51','f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'],['494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5','42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'],['a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5','204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'],['c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997','4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'],['841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881','73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'],['5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5','39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'],['36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66','d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'],['336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726','ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'],['8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede','6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'],['1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94','60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'],['85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31','3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'],['29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51','b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'],['a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252','ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'],['4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5','cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'],['d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b','6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'],['ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4','322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'],['af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f','6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'],['e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889','2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'],['591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246','b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'],['11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984','998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'],['3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a','b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'],['cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030','bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'],['c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197','6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'],['c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593','c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'],['a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef','21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'],['347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38','60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'],['da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a','49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'],['c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111','5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'],['4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502','7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'],['3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea','be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'],['cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26','8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'],['b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986','39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'],['d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e','62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'],['48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4','25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'],['dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda','ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'],['6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859','cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'],['e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f','f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'],['eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c','6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'],['13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942','fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'],['ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a','1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'],['b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80','5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'],['ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d','438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'],['8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1','cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'],['52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63','c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'],['e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352','6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'],['7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193','ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'],['5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00','9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'],['32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58','ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'],['e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7','d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'],['8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8','c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'],['4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e','67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'],['3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d','cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'],['674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b','299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'],['d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f','f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'],['30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6','462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'],['be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297','62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'],['93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a','7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'],['b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c','ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'],['d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52','4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'],['d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb','bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'],['463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065','bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'],['7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917','603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'],['74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9','cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'],['30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3','553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'],['9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57','712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'],['176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66','ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'],['75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8','9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'],['809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721','9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'],['1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180','4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9']]}}},function(t,n,a){'use strict';function r(t){return this instanceof r?void('string'==typeof t&&(c(s.curves.hasOwnProperty(t),'Unknown curve '+t),t=s.curves[t]),t instanceof s.curves.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash):new r(t)}var o=a(25),d=a(311),s=a(6),l=s.utils,c=l.assert,u=a(312),f=a(313);t.exports=r,r.prototype.keyPair=function(t){return new u(this,t)},r.prototype.keyFromPrivate=function(t,n){return u.fromPrivate(this,t,n)},r.prototype.keyFromPublic=function(t,n){return u.fromPublic(this,t,n)},r.prototype.genKeyPair=function(t){t||(t={});var n=new d({hash:this.hash,pers:t.pers,persEnc:t.persEnc||'utf8',entropy:t.entropy||s.rand(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||'utf8',nonce:this.n.toArray()}),a=this.n.byteLength(),r=this.n.sub(new o(2));do{var l=new o(n.generate(a));if(0<l.cmp(r))continue;return l.iaddn(1),this.keyFromPrivate(l)}while(!0)},r.prototype._truncateToN=function(t,n){var a=8*t.byteLength()-this.n.bitLength();return 0<a&&(t=t.ushrn(a)),!n&&0<=t.cmp(this.n)?t.sub(this.n):t},r.prototype.sign=function(t,n,a,l){'object'==typeof a&&(l=a,a=null),l||(l={}),n=this.keyFromPrivate(n,a),t=this._truncateToN(new o(t,16));for(var c=this.n.byteLength(),u=n.getPrivate().toArray('be',c),m=t.toArray('be',c),h=new d({hash:this.hash,entropy:u,nonce:m,pers:l.pers,persEnc:l.persEnc||'utf8'}),g=this.n.sub(new o(1)),b=0,y;;b++)if(y=l.k?l.k(b):new o(h.generate(this.n.byteLength())),y=this._truncateToN(y,!0),!(0>=y.cmpn(1)||0<=y.cmp(g))){var v=this.g.mul(y);if(!v.isInfinity()){var w=v.getX(),x=w.umod(this.n);if(0!==x.cmpn(0)){var _=y.invm(this.n).mul(x.mul(n.getPrivate()).iadd(t));if(_=_.umod(this.n),0!==_.cmpn(0)){var k=(v.getY().isOdd()?1:0)|(0===w.cmp(x)?0:2);return l.canonical&&0<_.cmp(this.nh)&&(_=this.n.sub(_),k^=1),new f({r:x,s:_,recoveryParam:k})}}}}},r.prototype.verify=function(t,n,a,d){t=this._truncateToN(new o(t,16)),a=this.keyFromPublic(a,d),n=new f(n,'hex');var l=n.r,r=n.s;if(0>l.cmpn(1)||0<=l.cmp(this.n))return!1;if(0>r.cmpn(1)||0<=r.cmp(this.n))return!1;var s=r.invm(this.n),c=s.mul(t).umod(this.n),u=s.mul(l).umod(this.n);if(!this.curve._maxwellTrick){var m=this.g.mulAdd(c,a.getPublic(),u);return!m.isInfinity()&&0===m.getX().umod(this.n).cmp(l)}var m=this.g.jmulAdd(c,a.getPublic(),u);return!m.isInfinity()&&m.eqXToP(l)},r.prototype.recoverPubKey=function(t,a,d,l){c((3&d)===d,'The recovery param is more than two bits'),a=new f(a,l);var u=this.n,n=new o(t),m=a.r,r=a.s,s=1&d,h=d>>1;if(0<=m.cmp(this.curve.p.umod(this.curve.n))&&h)throw new Error('Unable to find sencond key candinate');m=h?this.curve.pointFromX(m.add(this.curve.n),s):this.curve.pointFromX(m,s);var g=a.r.invm(u),b=u.sub(n).mul(g).umod(u),y=r.mul(g).umod(u);return this.g.mulAdd(b,m,y)},r.prototype.getKeyRecoveryParam=function(t,n,a,r){if(n=new f(n,r),null!==n.recoveryParam)return n.recoveryParam;for(var o=0;4>o;o++){var s;try{s=this.recoverPubKey(t,n,o)}catch(t){continue}if(s.eq(a))return o}throw new Error('Unable to find valid recovery factor')}},function(t,n,a){'use strict';function r(t){if(!(this instanceof r))return new r(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=s.toArray(t.entropy,t.entropyEnc||'hex'),a=s.toArray(t.nonce,t.nonceEnc||'hex'),o=s.toArray(t.pers,t.persEnc||'hex');d(n.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits'),this._init(n,a,o)}var o=a(108),s=a(165),d=a(15);t.exports=r,r.prototype._init=function(t,n,a){var r=t.concat(n).concat(a);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new o.hmac(this.hash,this.K)},r.prototype._update=function(t){var n=this._hmac().update(this.V).update([0]);t&&(n=n.update(t)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest();t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(t,n,a,r){'string'!=typeof n&&(r=a,a=n,n=null),t=s.toArray(t,n),a=s.toArray(a,r),d(t.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits'),this._update(t.concat(a||[])),this._reseed=1},r.prototype.generate=function(t,n,a,r){if(this._reseed>this.reseedInterval)throw new Error('Reseed is required');'string'!=typeof n&&(r=a,a=n,n=null),a&&(a=s.toArray(a,r||'hex'),this._update(a));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var d=o.slice(0,t);return this._update(a),this._reseed++,s.encode(d,n)}},function(t,n,a){'use strict';function r(t,n){this.ec=t,this.priv=null,this.pub=null,n.priv&&this._importPrivate(n.priv,n.privEnc),n.pub&&this._importPublic(n.pub,n.pubEnc)}var o=a(25),s=a(6),d=s.utils,l=d.assert;t.exports=r,r.fromPublic=function(t,n,a){return n instanceof r?n:new r(t,{pub:n,pubEnc:a})},r.fromPrivate=function(t,n,a){return n instanceof r?n:new r(t,{priv:n,privEnc:a})},r.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:'Invalid public key'}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:'Public key * N != O'}:{result:!1,reason:'Public key is not a point'}},r.prototype.getPublic=function(t,n){return'string'==typeof t&&(n=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,t):this.pub},r.prototype.getPrivate=function(t){return'hex'===t?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(t,n){this.priv=new o(t,n||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function(t,n){return t.x||t.y?('mont'===this.ec.curve.type?l(t.x,'Need x coordinate'):('short'===this.ec.curve.type||'edwards'===this.ec.curve.type)&&l(t.x&&t.y,'Need both x and y coordinate'),void(this.pub=this.ec.curve.point(t.x,t.y))):void(this.pub=this.ec.curve.decodePoint(t,n))},r.prototype.derive=function(t){return t.mul(this.priv).getX()},r.prototype.sign=function(t,n,a){return this.ec.sign(t,this,n,a)},r.prototype.verify=function(t,n){return this.ec.verify(t,n,this)},r.prototype.inspect=function(){return'<Key priv: '+(this.priv&&this.priv.toString(16,2))+' pub: '+(this.pub&&this.pub.inspect())+' >'}},function(t,n,a){'use strict';function r(t,n){return t instanceof r?t:void(this._importDER(t,n)||(g(t.r&&t.s,'Signature without r or s'),this.r=new f(t.r,16),this.s=new f(t.s,16),this.recoveryParam=void 0===t.recoveryParam?null:t.recoveryParam))}function o(){this.place=0}function d(t,n){var a=t[n.place++];if(!(128&a))return a;for(var r=0,o=0,s=n.place;o<(15&a);o++,s++)r<<=8,r|=t[s];return n.place=s,r}function c(t){for(var n=0,a=t.length-1;!t[n]&&!(128&t[n+1])&&n<a;)n++;return 0==n?t:t.slice(n)}function u(t,n){if(128>n)return void t.push(n);var a=1+(l(n)/s>>>3);for(t.push(128|a);--a;)t.push(255&n>>>(a<<3));t.push(n)}var f=a(25),m=a(6),h=m.utils,g=h.assert;t.exports=r,r.prototype._importDER=function(t,n){t=h.toArray(t,n);var a=new o;if(48!==t[a.place++])return!1;var l=d(t,a);if(l+a.place!==t.length)return!1;if(2!==t[a.place++])return!1;var c=d(t,a),u=t.slice(a.place,c+a.place);if(a.place+=c,2!==t[a.place++])return!1;var r=d(t,a);if(t.length!==r+a.place)return!1;var m=t.slice(a.place,r+a.place);return 0===u[0]&&128&u[1]&&(u=u.slice(1)),0===m[0]&&128&m[1]&&(m=m.slice(1)),this.r=new f(u),this.s=new f(m),this.recoveryParam=null,!0},r.prototype.toDER=function(t){var n=this.r.toArray(),a=this.s.toArray();for(128&n[0]&&(n=[0].concat(n)),128&a[0]&&(a=[0].concat(a)),n=c(n),a=c(a);!a[0]&&!(128&a[1]);)a=a.slice(1);var r=[2];u(r,n.length),r=r.concat(n),r.push(2),u(r,a.length);var o=r.concat(a),s=[48];return u(s,o.length),s=s.concat(o),h.encode(s,t)}},function(t,n,a){'use strict';function r(t){if(l('ed25519'===t,'only tested with ed25519 so far'),!(this instanceof r))return new r(t);var t=s.curves[t].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=b(t.n.bitLength()/8),this.hash=o.sha512}var o=a(108),s=a(6),d=s.utils,l=d.assert,c=d.parseBytes,u=a(315),f=a(316);t.exports=r,r.prototype.sign=function(t,n){t=c(t);var a=this.keyFromSecret(n),o=this.hashInt(a.messagePrefix(),t),r=this.g.mul(o),s=this.encodePoint(r),d=this.hashInt(s,a.pubBytes(),t).mul(a.priv()),l=o.add(d).umod(this.curve.n);return this.makeSignature({R:r,S:l,Rencoded:s})},r.prototype.verify=function(t,n,a){t=c(t),n=this.makeSignature(n);var r=this.keyFromPublic(a),o=this.hashInt(n.Rencoded(),r.pubBytes(),t),s=this.g.mul(n.S()),d=n.R().add(r.pub().mul(o));return d.eq(s)},r.prototype.hashInt=function(){for(var t=this.hash(),n=0;n<arguments.length;n++)t.update(arguments[n]);return d.intFromLE(t.digest()).umod(this.curve.n)},r.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},r.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},r.prototype.makeSignature=function(t){return t instanceof f?t:new f(this,t)},r.prototype.encodePoint=function(t){var n=t.getY().toArray('le',this.encodingLength);return n[this.encodingLength-1]|=t.getX().isOdd()?128:0,n},r.prototype.decodePoint=function(t){t=d.parseBytes(t);var n=t.length-1,a=t.slice(0,n).concat(-129&t[n]),r=0!=(128&t[n]),o=d.intFromLE(a);return this.curve.pointFromY(o,r)},r.prototype.encodeInt=function(t){return t.toArray('le',this.encodingLength)},r.prototype.decodeInt=function(t){return d.intFromLE(t)},r.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,n,a){'use strict';function r(t,n){this.eddsa=t,this._secret=l(n.secret),t.isPoint(n.pub)?this._pub=n.pub:this._pubBytes=l(n.pub)}var o=a(6),s=o.utils,d=s.assert,l=s.parseBytes,c=s.cachedProperty;r.fromPublic=function(t,n){return n instanceof r?n:new r(t,{pub:n})},r.fromSecret=function(t,n){return n instanceof r?n:new r(t,{secret:n})},r.prototype.secret=function(){return this._secret},c(r,'pubBytes',function(){return this.eddsa.encodePoint(this.pub())}),c(r,'pub',function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),c(r,'privBytes',function(){var t=this.eddsa,n=this.hash(),r=t.encodingLength-1,o=n.slice(0,t.encodingLength);return o[0]&=248,o[r]&=127,o[r]|=64,o}),c(r,'priv',function(){return this.eddsa.decodeInt(this.privBytes())}),c(r,'hash',function(){return this.eddsa.hash().update(this.secret()).digest()}),c(r,'messagePrefix',function(){return this.hash().slice(this.eddsa.encodingLength)}),r.prototype.sign=function(t){return d(this._secret,'KeyPair can only verify'),this.eddsa.sign(t,this)},r.prototype.verify=function(t,n){return this.eddsa.verify(t,n,this)},r.prototype.getSecret=function(t){return d(this._secret,'KeyPair is public only'),s.encode(this.secret(),t)},r.prototype.getPublic=function(t){return s.encode(this.pubBytes(),t)},t.exports=r},function(t,n,a){'use strict';function r(t,n){this.eddsa=t,'object'!=typeof n&&(n=u(n)),Array.isArray(n)&&(n={R:n.slice(0,t.encodingLength),S:n.slice(t.encodingLength)}),l(n.R&&n.S,'Signature without R or S'),t.isPoint(n.R)&&(this._R=n.R),n.S instanceof o&&(this._S=n.S),this._Rencoded=Array.isArray(n.R)?n.R:n.Rencoded,this._Sencoded=Array.isArray(n.S)?n.S:n.Sencoded}var o=a(25),s=a(6),d=s.utils,l=d.assert,c=d.cachedProperty,u=d.parseBytes;c(r,'S',function(){return this.eddsa.decodeInt(this.Sencoded())}),c(r,'R',function(){return this.eddsa.decodePoint(this.Rencoded())}),c(r,'Rencoded',function(){return this.eddsa.encodePoint(this.R())}),c(r,'Sencoded',function(){return this.eddsa.encodeInt(this.S())}),r.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},r.prototype.toHex=function(){return d.encode(this.toBytes(),'hex').toUpperCase()},t.exports=r},function(){},function(t,n,a){'use strict';var r=a(56);n.certificate=a(331);var o=r.define('RSAPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('modulus').int(),this.key('publicExponent').int(),this.key('privateExponent').int(),this.key('prime1').int(),this.key('prime2').int(),this.key('exponent1').int(),this.key('exponent2').int(),this.key('coefficient').int())});n.RSAPrivateKey=o;var s=r.define('RSAPublicKey',function(){this.seq().obj(this.key('modulus').int(),this.key('publicExponent').int())});n.RSAPublicKey=s;var d=r.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(l),this.key('subjectPublicKey').bitstr())});n.PublicKey=d;var l=r.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('none').null_().optional(),this.key('curve').objid().optional(),this.key('params').seq().obj(this.key('p').int(),this.key('q').int(),this.key('g').int()).optional())}),c=r.define('PrivateKeyInfo',function(){this.seq().obj(this.key('version').int(),this.key('algorithm').use(l),this.key('subjectPrivateKey').octstr())});n.PrivateKey=c;var u=r.define('EncryptedPrivateKeyInfo',function(){this.seq().obj(this.key('algorithm').seq().obj(this.key('id').objid(),this.key('decrypt').seq().obj(this.key('kde').seq().obj(this.key('id').objid(),this.key('kdeparams').seq().obj(this.key('salt').octstr(),this.key('iters').int())),this.key('cipher').seq().obj(this.key('algo').objid(),this.key('iv').octstr()))),this.key('subjectPrivateKey').octstr())});n.EncryptedPrivateKey=u;var f=r.define('DSAPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('p').int(),this.key('q').int(),this.key('g').int(),this.key('pub_key').int(),this.key('priv_key').int())});n.DSAPrivateKey=f,n.DSAparam=r.define('DSAparam',function(){this.int()});var m=r.define('ECPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('privateKey').octstr(),this.key('parameters').optional().explicit(0).use(h),this.key('publicKey').optional().explicit(1).bitstr())});n.ECPrivateKey=m;var h=r.define('ECParameters',function(){this.choice({namedCurve:this.objid()})});n.signature=r.define('signature',function(){this.seq().obj(this.key('r').int(),this.key('s').int())})},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function v(t,n,a){return v.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_(t.length,a),s=n,d;s<r;s++)d=t.charCodeAt(s)-48,o<<=4,o|=49<=d&&54>=d?d-49+10:17<=d&&22>=d?d-17+10:15&d;return o}function l(t,n,a,o){for(var s=0,r=_(t.length,a),d=n,l;d<r;d++)l=t.charCodeAt(d)-48,s*=o,s+=49<=l?l-49+10:17<=l?l-17+10:l;return s}function u(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,o=a%26;n[a]=(t.words[r]&1<<o)>>>o}return n}function w(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_(u,n.length-1),g=y(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function x(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_(l,n.length-1),m=y(0,l-t.length+1);m<=f;m++){var h=l-m,g=0|t.words[h],a=0|n.words[m],b=g*a,r=67108863&b;c=0|c+(0|b/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function k(t,n,a){var r=new C;return r.mulp(t,n,a)}function C(t,n){this.x=t,this.y=n}function T(t,n){this.name=t,this.p=new v(n,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){T.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function S(){T.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function A(){T.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function I(){T.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function N(t){if('string'==typeof t){var n=v._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function j(t){N.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=v:n.BN=v,v.BN=v,v.wordSize=26;var R;try{R=a(320).Buffer}catch(t){}v.isBN=function(t){return!!(t instanceof v)||null!==t&&'object'==typeof t&&t.constructor.wordSize===v.wordSize&&Array.isArray(t.words)},v.max=function(t,n){return 0<t.cmp(n)?t:n},v.min=function(t,n){return 0>t.cmp(n)?t:n},v.prototype._init=function(t,n,a){if('number'==typeof t)return this._initNumber(t,n,a);if('object'==typeof t)return this._initArray(t,n,a);'hex'===n&&(n=16),o(n===(0|n)&&2<=n&&36>=n),t=t.toString().replace(/\s+/g,'');var r=0;'-'===t[0]&&r++,16===n?this._parseHex(t,r):this._parseBase(t,n,r),'-'===t[0]&&(this.negative=1),this.strip();'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initNumber=function(t,n,a){0>t&&(this.negative=1,t=-t),67108864>t?(this.words=[67108863&t],this.length=1):4503599627370496>t?(this.words=[67108863&t,67108863&t/67108864],this.length=2):(o(9007199254740992>t),this.words=[67108863&t,67108863&t/67108864,1],this.length=3);'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initArray=function(t,n,a){if(o('number'==typeof t.length),0>=t.length)return this.words=[0],this.length=1,this;this.length=b(t.length/3),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s=0,d,l;if('be'===a)for(r=t.length-1,d=0;0<=r;r-=3)l=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);else if('le'===a)for(r=0,d=0;r<t.length;r+=3)l=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);return this.strip()},v.prototype._parseHex=function(t,n){this.length=b((t.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r=0,o,d;for(a=t.length-6,o=0;a>=n;a-=6)d=s(t,a,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r,r+=24,26<=r&&(r-=26,o++);a+6!==n&&(d=s(t,n,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r),this.strip()},v.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var r=0,o=1;67108863>=o;o*=n)r++;r--,o=0|o/n;for(var s=t.length-a,d=s%r,c=_(s,s-d)+a,u=0,f=a;f<c;f+=r)u=l(t,f,f+r,n),this.imuln(o),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u);if(0!=d){var m=1;for(u=l(t,f,t.length,n),f=0;f<d;f++)m*=n;this.imuln(m),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u)}},v.prototype.copy=function(t){t.words=Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},v.prototype.clone=function(){var t=new v(null);return this.copy(t),t},v.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var L=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];v.prototype.toString=function(t,n){t=t||10,n=0|n||1;var a;if(16===t||'hex'===t){a='';for(var s=0,d=0,l=0;l<this.length;l++){var u=this.words[l],f=(16777215&(u<<s|d)).toString(16);d=16777215&u>>>24-s,a=0!=d||l!==this.length-1?L[6-f.length]+f+a:f+a,s+=2,26<=s&&(s-=26,l--)}for(0!=d&&(a=d.toString(16)+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}if(t===(0|t)&&2<=t&&36>=t){var m=O[t],h=P[t];a='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(t);g=g.idivn(h),a=g.isZero()?c+a:L[m-c.length]+c+a}for(this.isZero()&&(a='0'+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}o(!1,'Base should be between 2 and 36')},v.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?t:-t},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(t,n){return o('undefined'!=typeof R),this.toArrayLike(R,t,n)},v.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},v.prototype.toArrayLike=function(t,n,a){var r=this.byteLength(),s=a||y(1,r);o(r<=s,'byte array longer than desired length'),o(0<s,'Requested array length <= 0'),this.strip();var d=new t(s),l=this.clone(),c,u;if(!('le'===n)){for(u=0;u<s-r;u++)d[u]=0;for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[s-u-1]=c}else{for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[u]=c;for(;u<s;u++)d[u]=0}return d},v.prototype._countBits=g?function(t){return 32-g(t)}:function(n){var a=n,t=0;return 4096<=a&&(t+=13,a>>>=13),64<=a&&(t+=7,a>>>=7),8<=a&&(t+=4,a>>>=4),2<=a&&(t+=2,a>>>=2),t+a},v.prototype._zeroBits=function(n){if(0===n)return 26;var a=n,t=0;return 0==(8191&a)&&(t+=13,a>>>=13),0==(127&a)&&(t+=7,a>>>=7),0==(15&a)&&(t+=4,a>>>=4),0==(3&a)&&(t+=2,a>>>=2),0==(1&a)&&t++,t},v.prototype.bitLength=function(){var t=this.words[this.length-1],n=this._countBits(t);return 26*(this.length-1)+n},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0,a;n<this.length&&(a=this._zeroBits(this.words[n]),t+=a,26===a);n++);return t},v.prototype.byteLength=function(){return b(this.bitLength()/8)},v.prototype.toTwos=function(t){return 0===this.negative?this.clone():this.abs().inotn(t).iaddn(1)},v.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]|=t.words[n];return this.strip()},v.prototype.ior=function(t){return o(0==(this.negative|t.negative)),this.iuor(t)},v.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},v.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},v.prototype.iuand=function(t){var n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]&=t.words[a];return this.length=n.length,this.strip()},v.prototype.iand=function(t){return o(0==(this.negative|t.negative)),this.iuand(t)},v.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},v.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},v.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var r=0;r<a.length;r++)this.words[r]=n.words[r]^a.words[r];if(this!==n)for(;r<n.length;r++)this.words[r]=n.words[r];return this.length=n.length,this.strip()},v.prototype.ixor=function(t){return o(0==(this.negative|t.negative)),this.iuxor(t)},v.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},v.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},v.prototype.inotn=function(t){o('number'==typeof t&&0<=t);var n=0|b(t/26),a=t%26;this._expand(n),0<a&&n--;for(var r=0;r<n;r++)this.words[r]=67108863&~this.words[r];return 0<a&&(this.words[r]=~this.words[r]&67108863>>26-a),this.strip()},v.prototype.notn=function(t){return this.clone().inotn(t)},v.prototype.setn=function(t,n){o('number'==typeof t&&0<=t);var a=0|t/26,r=t%26;return this._expand(a+1),n?this.words[a]|=1<<r:this.words[a]&=~(1<<r),this.strip()},v.prototype.iadd=function(t){var n;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();var r,a;this.length>t.length?(r=this,a=t):(r=t,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|r.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!=o&&s<r.length;s++)n=(0|r.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=r.length,0!=o)this.words[this.length]=o,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},v.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},v.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var o,a;0<r?(o=this,a=t):(o=t,a=this);for(var s=0,d=0;d<a.length;d++)n=(0|o.words[d])-(0|a.words[d])+s,s=n>>26,this.words[d]=67108863&n;for(;0!=s&&d<o.length;d++)n=(0|o.words[d])+s,s=n>>26,this.words[d]=67108863&n;if(0==s&&d<o.length&&o!==this)for(;d<o.length;d++)this.words[d]=o.words[d];return this.length=y(this.length,d),o!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(t){return this.clone().isub(t)};var M=function(t,n,r){var s=t.words,a=n.words,d=r.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,g=f>>>13,b=0|s[2],y=8191&b,v=b>>>13,w=0|s[3],x=8191&w,_=w>>>13,k=0|s[4],C=8191&k,T=k>>>13,E=0|s[5],S=8191&E,A=E>>>13,I=0|s[6],N=8191&I,j=I>>>13,R=0|s[7],L=8191&R,O=R>>>13,P=0|s[8],M=8191&P,D=P>>>13,B=0|s[9],U=8191&B,q=B>>>13,F=0|a[0],z=8191&F,H=F>>>13,W=0|a[1],V=8191&W,G=W>>>13,K=0|a[2],J=8191&K,X=K>>>13,Z=0|a[3],Y=8191&Z,Q=Z>>>13,ee=0|a[4],te=8191&ee,ne=ee>>>13,ae=0|a[5],re=8191&ae,oe=ae>>>13,ie=0|a[6],se=8191&ie,de=ie>>>13,le=0|a[7],pe=8191&le,ce=le>>>13,ue=0|a[8],fe=8191&ue,he=ue>>>13,ge=0|a[9],be=8191&ge,ye=ge>>>13,ve,we,xe;r.negative=t.negative^n.negative,r.length=19,ve=h(c,z),we=h(c,H),we=0|we+h(u,z),xe=h(u,H);var _e=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(_e>>>26),_e&=67108863,ve=h(m,z),we=h(m,H),we=0|we+h(g,z),xe=h(g,H),ve=0|ve+h(c,V),we=0|we+h(c,G),we=0|we+h(u,V),xe=0|xe+h(u,G);var ke=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(ke>>>26),ke&=67108863,ve=h(y,z),we=h(y,H),we=0|we+h(v,z),xe=h(v,H),ve=0|ve+h(m,V),we=0|we+h(m,G),we=0|we+h(g,V),xe=0|xe+h(g,G),ve=0|ve+h(c,J),we=0|we+h(c,X),we=0|we+h(u,J),xe=0|xe+h(u,X);var Ce=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ce>>>26),Ce&=67108863,ve=h(x,z),we=h(x,H),we=0|we+h(_,z),xe=h(_,H),ve=0|ve+h(y,V),we=0|we+h(y,G),we=0|we+h(v,V),xe=0|xe+h(v,G),ve=0|ve+h(m,J),we=0|we+h(m,X),we=0|we+h(g,J),xe=0|xe+h(g,X),ve=0|ve+h(c,Y),we=0|we+h(c,Q),we=0|we+h(u,Y),xe=0|xe+h(u,Q);var Te=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Te>>>26),Te&=67108863,ve=h(C,z),we=h(C,H),we=0|we+h(T,z),xe=h(T,H),ve=0|ve+h(x,V),we=0|we+h(x,G),we=0|we+h(_,V),xe=0|xe+h(_,G),ve=0|ve+h(y,J),we=0|we+h(y,X),we=0|we+h(v,J),xe=0|xe+h(v,X),ve=0|ve+h(m,Y),we=0|we+h(m,Q),we=0|we+h(g,Y),xe=0|xe+h(g,Q),ve=0|ve+h(c,te),we=0|we+h(c,ne),we=0|we+h(u,te),xe=0|xe+h(u,ne);var Ee=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ee>>>26),Ee&=67108863,ve=h(S,z),we=h(S,H),we=0|we+h(A,z),xe=h(A,H),ve=0|ve+h(C,V),we=0|we+h(C,G),we=0|we+h(T,V),xe=0|xe+h(T,G),ve=0|ve+h(x,J),we=0|we+h(x,X),we=0|we+h(_,J),xe=0|xe+h(_,X),ve=0|ve+h(y,Y),we=0|we+h(y,Q),we=0|we+h(v,Y),xe=0|xe+h(v,Q),ve=0|ve+h(m,te),we=0|we+h(m,ne),we=0|we+h(g,te),xe=0|xe+h(g,ne),ve=0|ve+h(c,re),we=0|we+h(c,oe),we=0|we+h(u,re),xe=0|xe+h(u,oe);var Se=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Se>>>26),Se&=67108863,ve=h(N,z),we=h(N,H),we=0|we+h(j,z),xe=h(j,H),ve=0|ve+h(S,V),we=0|we+h(S,G),we=0|we+h(A,V),xe=0|xe+h(A,G),ve=0|ve+h(C,J),we=0|we+h(C,X),we=0|we+h(T,J),xe=0|xe+h(T,X),ve=0|ve+h(x,Y),we=0|we+h(x,Q),we=0|we+h(_,Y),xe=0|xe+h(_,Q),ve=0|ve+h(y,te),we=0|we+h(y,ne),we=0|we+h(v,te),xe=0|xe+h(v,ne),ve=0|ve+h(m,re),we=0|we+h(m,oe),we=0|we+h(g,re),xe=0|xe+h(g,oe),ve=0|ve+h(c,se),we=0|we+h(c,de),we=0|we+h(u,se),xe=0|xe+h(u,de);var Ae=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ae>>>26),Ae&=67108863,ve=h(L,z),we=h(L,H),we=0|we+h(O,z),xe=h(O,H),ve=0|ve+h(N,V),we=0|we+h(N,G),we=0|we+h(j,V),xe=0|xe+h(j,G),ve=0|ve+h(S,J),we=0|we+h(S,X),we=0|we+h(A,J),xe=0|xe+h(A,X),ve=0|ve+h(C,Y),we=0|we+h(C,Q),we=0|we+h(T,Y),xe=0|xe+h(T,Q),ve=0|ve+h(x,te),we=0|we+h(x,ne),we=0|we+h(_,te),xe=0|xe+h(_,ne),ve=0|ve+h(y,re),we=0|we+h(y,oe),we=0|we+h(v,re),xe=0|xe+h(v,oe),ve=0|ve+h(m,se),we=0|we+h(m,de),we=0|we+h(g,se),xe=0|xe+h(g,de),ve=0|ve+h(c,pe),we=0|we+h(c,ce),we=0|we+h(u,pe),xe=0|xe+h(u,ce);var Ie=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ie>>>26),Ie&=67108863,ve=h(M,z),we=h(M,H),we=0|we+h(D,z),xe=h(D,H),ve=0|ve+h(L,V),we=0|we+h(L,G),we=0|we+h(O,V),xe=0|xe+h(O,G),ve=0|ve+h(N,J),we=0|we+h(N,X),we=0|we+h(j,J),xe=0|xe+h(j,X),ve=0|ve+h(S,Y),we=0|we+h(S,Q),we=0|we+h(A,Y),xe=0|xe+h(A,Q),ve=0|ve+h(C,te),we=0|we+h(C,ne),we=0|we+h(T,te),xe=0|xe+h(T,ne),ve=0|ve+h(x,re),we=0|we+h(x,oe),we=0|we+h(_,re),xe=0|xe+h(_,oe),ve=0|ve+h(y,se),we=0|we+h(y,de),we=0|we+h(v,se),xe=0|xe+h(v,de),ve=0|ve+h(m,pe),we=0|we+h(m,ce),we=0|we+h(g,pe),xe=0|xe+h(g,ce),ve=0|ve+h(c,fe),we=0|we+h(c,he),we=0|we+h(u,fe),xe=0|xe+h(u,he);var Ne=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ne>>>26),Ne&=67108863,ve=h(U,z),we=h(U,H),we=0|we+h(q,z),xe=h(q,H),ve=0|ve+h(M,V),we=0|we+h(M,G),we=0|we+h(D,V),xe=0|xe+h(D,G),ve=0|ve+h(L,J),we=0|we+h(L,X),we=0|we+h(O,J),xe=0|xe+h(O,X),ve=0|ve+h(N,Y),we=0|we+h(N,Q),we=0|we+h(j,Y),xe=0|xe+h(j,Q),ve=0|ve+h(S,te),we=0|we+h(S,ne),we=0|we+h(A,te),xe=0|xe+h(A,ne),ve=0|ve+h(C,re),we=0|we+h(C,oe),we=0|we+h(T,re),xe=0|xe+h(T,oe),ve=0|ve+h(x,se),we=0|we+h(x,de),we=0|we+h(_,se),xe=0|xe+h(_,de),ve=0|ve+h(y,pe),we=0|we+h(y,ce),we=0|we+h(v,pe),xe=0|xe+h(v,ce),ve=0|ve+h(m,fe),we=0|we+h(m,he),we=0|we+h(g,fe),xe=0|xe+h(g,he),ve=0|ve+h(c,be),we=0|we+h(c,ye),we=0|we+h(u,be),xe=0|xe+h(u,ye);var je=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(je>>>26),je&=67108863,ve=h(U,V),we=h(U,G),we=0|we+h(q,V),xe=h(q,G),ve=0|ve+h(M,J),we=0|we+h(M,X),we=0|we+h(D,J),xe=0|xe+h(D,X),ve=0|ve+h(L,Y),we=0|we+h(L,Q),we=0|we+h(O,Y),xe=0|xe+h(O,Q),ve=0|ve+h(N,te),we=0|we+h(N,ne),we=0|we+h(j,te),xe=0|xe+h(j,ne),ve=0|ve+h(S,re),we=0|we+h(S,oe),we=0|we+h(A,re),xe=0|xe+h(A,oe),ve=0|ve+h(C,se),we=0|we+h(C,de),we=0|we+h(T,se),xe=0|xe+h(T,de),ve=0|ve+h(x,pe),we=0|we+h(x,ce),we=0|we+h(_,pe),xe=0|xe+h(_,ce),ve=0|ve+h(y,fe),we=0|we+h(y,he),we=0|we+h(v,fe),xe=0|xe+h(v,he),ve=0|ve+h(m,be),we=0|we+h(m,ye),we=0|we+h(g,be),xe=0|xe+h(g,ye);var Re=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Re>>>26),Re&=67108863,ve=h(U,J),we=h(U,X),we=0|we+h(q,J),xe=h(q,X),ve=0|ve+h(M,Y),we=0|we+h(M,Q),we=0|we+h(D,Y),xe=0|xe+h(D,Q),ve=0|ve+h(L,te),we=0|we+h(L,ne),we=0|we+h(O,te),xe=0|xe+h(O,ne),ve=0|ve+h(N,re),we=0|we+h(N,oe),we=0|we+h(j,re),xe=0|xe+h(j,oe),ve=0|ve+h(S,se),we=0|we+h(S,de),we=0|we+h(A,se),xe=0|xe+h(A,de),ve=0|ve+h(C,pe),we=0|we+h(C,ce),we=0|we+h(T,pe),xe=0|xe+h(T,ce),ve=0|ve+h(x,fe),we=0|we+h(x,he),we=0|we+h(_,fe),xe=0|xe+h(_,he),ve=0|ve+h(y,be),we=0|we+h(y,ye),we=0|we+h(v,be),xe=0|xe+h(v,ye);var Le=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Le>>>26),Le&=67108863,ve=h(U,Y),we=h(U,Q),we=0|we+h(q,Y),xe=h(q,Q),ve=0|ve+h(M,te),we=0|we+h(M,ne),we=0|we+h(D,te),xe=0|xe+h(D,ne),ve=0|ve+h(L,re),we=0|we+h(L,oe),we=0|we+h(O,re),xe=0|xe+h(O,oe),ve=0|ve+h(N,se),we=0|we+h(N,de),we=0|we+h(j,se),xe=0|xe+h(j,de),ve=0|ve+h(S,pe),we=0|we+h(S,ce),we=0|we+h(A,pe),xe=0|xe+h(A,ce),ve=0|ve+h(C,fe),we=0|we+h(C,he),we=0|we+h(T,fe),xe=0|xe+h(T,he),ve=0|ve+h(x,be),we=0|we+h(x,ye),we=0|we+h(_,be),xe=0|xe+h(_,ye);var Oe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Oe>>>26),Oe&=67108863,ve=h(U,te),we=h(U,ne),we=0|we+h(q,te),xe=h(q,ne),ve=0|ve+h(M,re),we=0|we+h(M,oe),we=0|we+h(D,re),xe=0|xe+h(D,oe),ve=0|ve+h(L,se),we=0|we+h(L,de),we=0|we+h(O,se),xe=0|xe+h(O,de),ve=0|ve+h(N,pe),we=0|we+h(N,ce),we=0|we+h(j,pe),xe=0|xe+h(j,ce),ve=0|ve+h(S,fe),we=0|we+h(S,he),we=0|we+h(A,fe),xe=0|xe+h(A,he),ve=0|ve+h(C,be),we=0|we+h(C,ye),we=0|we+h(T,be),xe=0|xe+h(T,ye);var Pe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Pe>>>26),Pe&=67108863,ve=h(U,re),we=h(U,oe),we=0|we+h(q,re),xe=h(q,oe),ve=0|ve+h(M,se),we=0|we+h(M,de),we=0|we+h(D,se),xe=0|xe+h(D,de),ve=0|ve+h(L,pe),we=0|we+h(L,ce),we=0|we+h(O,pe),xe=0|xe+h(O,ce),ve=0|ve+h(N,fe),we=0|we+h(N,he),we=0|we+h(j,fe),xe=0|xe+h(j,he),ve=0|ve+h(S,be),we=0|we+h(S,ye),we=0|we+h(A,be),xe=0|xe+h(A,ye);var Me=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Me>>>26),Me&=67108863,ve=h(U,se),we=h(U,de),we=0|we+h(q,se),xe=h(q,de),ve=0|ve+h(M,pe),we=0|we+h(M,ce),we=0|we+h(D,pe),xe=0|xe+h(D,ce),ve=0|ve+h(L,fe),we=0|we+h(L,he),we=0|we+h(O,fe),xe=0|xe+h(O,he),ve=0|ve+h(N,be),we=0|we+h(N,ye),we=0|we+h(j,be),xe=0|xe+h(j,ye);var De=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(De>>>26),De&=67108863,ve=h(U,pe),we=h(U,ce),we=0|we+h(q,pe),xe=h(q,ce),ve=0|ve+h(M,fe),we=0|we+h(M,he),we=0|we+h(D,fe),xe=0|xe+h(D,he),ve=0|ve+h(L,be),we=0|we+h(L,ye),we=0|we+h(O,be),xe=0|xe+h(O,ye);var Be=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Be>>>26),Be&=67108863,ve=h(U,fe),we=h(U,he),we=0|we+h(q,fe),xe=h(q,he),ve=0|ve+h(M,be),we=0|we+h(M,ye),we=0|we+h(D,be),xe=0|xe+h(D,ye);var Ue=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ue>>>26),Ue&=67108863,ve=h(U,be),we=h(U,ye),we=0|we+h(q,be),xe=h(q,ye);var qe=0|(0|o+ve)+((8191&we)<<13);return o=0|(0|xe+(we>>>13))+(qe>>>26),qe&=67108863,d[0]=_e,d[1]=ke,d[2]=Ce,d[3]=Te,d[4]=Ee,d[5]=Se,d[6]=Ae,d[7]=Ie,d[8]=Ne,d[9]=je,d[10]=Re,d[11]=Le,d[12]=Oe,d[13]=Pe,d[14]=Me,d[15]=De,d[16]=Be,d[17]=Ue,d[18]=qe,0!=o&&(d[19]=o,r.length++),r};h||(M=w),v.prototype.mulTo=function(t,n){var a=this.length+t.length,r;return r=10===this.length&&10===t.length?M(this,t,n):63>a?w(this,t,n):1024>a?x(this,t,n):k(this,t,n),r},C.prototype.makeRBT=function(n){for(var a=Array(n),t=v.prototype._countBits(n)-1,r=0;r<n;r++)a[r]=this.revBin(r,t,n);return a},C.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var r=0,o=0;o<n;o++)r|=(1&t)<<n-o-1,t>>=1;return r},C.prototype.permute=function(t,n,a,r,o,s){for(var d=0;d<s;d++)r[d]=n[t[d]],o[d]=a[t[d]]},C.prototype.transform=function(t,n,a,r,o,d){this.permute(d,t,n,a,r,o);for(var u=1;u<o;u<<=1)for(var s=u<<1,l=f(2*m/s),h=c(2*m/s),g=0;g<o;g+=s)for(var b=l,y=h,v=0;v<u;v++){var w=a[g+v],x=r[g+v],_=a[g+v+u],k=r[g+v+u],C=b*_-y*k;k=b*k+y*_,_=C,a[g+v]=w+_,r[g+v]=x+k,a[g+v+u]=w-_,r[g+v+u]=x-k,v!==s&&(C=l*b-h*y,y=l*y+h*b,b=C)}},C.prototype.guessLen13b=function(t,n){var a=1|y(n,t),r=1&a,o=0;for(a=0|a/2;a;a>>>=1)o++;return 1<<o+1+r},C.prototype.conjugate=function(n,a,r){if(!(1>=r))for(var o=0,s;o<r/2;o++)s=n[o],n[o]=n[r-o-1],n[r-o-1]=s,s=a[o],a[o]=-a[r-o-1],a[r-o-1]=-s},C.prototype.normalize13b=function(t,n){for(var a=0,r=0,o;r<n/2;r++)o=8192*d(t[2*r+1]/n)+d(t[2*r]/n)+a,t[r]=67108863&o,a=67108864>o?0:0|o/67108864;return t},C.prototype.convert13b=function(t,n,a,r){for(var s=0,d=0;d<n;d++)s+=0|t[d],a[2*d]=8191&s,s>>>=13,a[2*d+1]=8191&s,s>>>=13;for(d=2*n;d<r;++d)a[d]=0;o(0==s),o(0==(-8192&s))},C.prototype.stub=function(t){for(var n=Array(t),a=0;a<t;a++)n[a]=0;return n},C.prototype.mulp=function(t,n,a){var r=2*this.guessLen13b(t.length,n.length),o=this.makeRBT(r),s=this.stub(r),d=Array(r),l=Array(r),c=Array(r),u=Array(r),f=Array(r),m=Array(r),h=a.words;h.length=r,this.convert13b(t.words,t.length,d,r),this.convert13b(n.words,n.length,u,r),this.transform(d,s,l,c,r,o),this.transform(u,s,f,m,r,o);for(var g=0,b;g<r;g++)b=l[g]*f[g]-c[g]*m[g],c[g]=l[g]*m[g]+c[g]*f[g],l[g]=b;return this.conjugate(l,c,r),this.transform(l,c,h,s,r,o),this.conjugate(h,s,r),this.normalize13b(h,r),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},v.prototype.mul=function(t){var n=new v(null);return n.words=Array(this.length+t.length),this.mulTo(t,n)},v.prototype.mulf=function(t){var n=new v(null);return n.words=Array(this.length+t.length),k(this,t,n)},v.prototype.imul=function(t){return this.clone().mulTo(t,this)},v.prototype.imuln=function(t){o('number'==typeof t),o(67108864>t);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*t,s=(67108863&r)+(67108863&n);n>>=26,n+=0|r/67108864,n+=s>>>26,this.words[a]=67108863&s}return 0!=n&&(this.words[a]=n,this.length++),this},v.prototype.muln=function(t){return this.clone().imuln(t)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(t){var n=u(t);if(0===n.length)return new v(1);for(var a=this,r=0;r<n.length&&!(0!==n[r]);r++,a=a.sqr());if(++r<n.length)for(var o=a.sqr();r<n.length;r++,o=o.sqr())0!==n[r]&&(a=a.mul(o));return a},v.prototype.iushln=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26,r;if(0!=n){var s=0;for(r=0;r<this.length;r++){var d=this.words[r]&67108863>>>26-n<<26-n,l=(0|this.words[r])-d<<n;this.words[r]=l|s,s=d>>>26-n}s&&(this.words[r]=s,this.length++)}if(0!=a){for(r=this.length-1;0<=r;r--)this.words[r+a]=this.words[r];for(r=0;r<a;r++)this.words[r]=0;this.length+=a}return this.strip()},v.prototype.ishln=function(t){return o(0===this.negative),this.iushln(t)},v.prototype.iushrn=function(t,n,a){o('number'==typeof t&&0<=t);var d=n?(n-n%26)/26:0;var l=t%26,r=_((t-l)/26,this.length),s=a;if(d-=r,d=y(0,d),s){for(var c=0;c<r;c++)s.words[c]=this.words[c];s.length=r}if(0===r);else if(this.length>r)for(this.length-=r,c=0;c<this.length;c++)this.words[c]=this.words[c+r];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!=u||c>=d);c--){var f=0|this.words[c];this.words[c]=u<<26-l|f>>>l,u=f&(67108863^67108863>>>l<<l)}return s&&0!=u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(t,n,a){return o(0===this.negative),this.iushrn(t,n,a)},v.prototype.shln=function(t){return this.clone().ishln(t)},v.prototype.ushln=function(t){return this.clone().iushln(t)},v.prototype.shrn=function(t){return this.clone().ishrn(t)},v.prototype.ushrn=function(t){return this.clone().iushrn(t)},v.prototype.testn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(this.length<=a)return!1;var r=this.words[a];return!!(r&1<<n)},v.prototype.imaskn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=a)return this;if(0!=n&&a++,this.length=_(a,this.length),0!=n){this.words[this.length-1]&=67108863^67108863>>>n<<n}return this.strip()},v.prototype.maskn=function(t){return this.clone().imaskn(t)},v.prototype.iaddn=function(t){return o('number'==typeof t),o(67108864>t),0>t?this.isubn(-t):0===this.negative?this._iaddn(t):1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this)},v.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&67108864<=this.words[n];n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=y(this.length,n+1),this},v.prototype.isubn=function(t){if(o('number'==typeof t),o(67108864>t),0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&0>this.words[n];n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},v.prototype.addn=function(t){return this.clone().iaddn(t)},v.prototype.subn=function(t){return this.clone().isubn(t)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(t,n,a){var r=t.length+a,s;this._expand(r);var d=0,l;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+d;var c=(0|t.words[s])*n;l-=67108863&c,d=(l>>26)-(0|c/67108864),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)l=(0|this.words[s+a])+d,d=l>>26,this.words[s+a]=67108863&l;if(0==d)return this.strip();for(o(-1==d),d=0,s=0;s<this.length;s++)l=-(0|this.words[s])+d,d=l>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},v.prototype._wordDiv=function(t,n){var r=this.length-t.length,o=this.clone(),s=t,d=0|s.words[s.length-1],l=this._countBits(d);r=26-l,0!=r&&(s=s.ushln(r),o.iushln(r),d=0|s.words[s.length-1]);var c=o.length-s.length,u;if('mod'!==n){u=new v(null),u.length=c+1,u.words=Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var m=o.clone()._ishlnsubmul(s,1,c);0===m.negative&&(o=m,u&&(u.words[c]=1));for(var h=c-1,g;0<=h;h--){for(g=67108864*(0|o.words[s.length+h])+(0|o.words[s.length+h-1]),g=_(0|g/d,67108863),o._ishlnsubmul(s,g,h);0!==o.negative;)g--,o.negative=0,o._ishlnsubmul(s,1,h),o.isZero()||(o.negative^=1);u&&(u.words[h]=g)}return u&&u.strip(),o.strip(),'div'!==n&&0!=r&&o.iushrn(r),{div:u||null,mod:o}},v.prototype.divmod=function(t,n,a){if(o(!t.isZero()),this.isZero())return{div:new v(0),mod:new v(0)};var r,s,d;return 0!==this.negative&&0===t.negative?(d=this.neg().divmod(t,n),'mod'!==n&&(r=d.div.neg()),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(d=this.divmod(t.neg(),n),'mod'!==n&&(r=d.div.neg()),{div:r,mod:d.mod}):0==(this.negative&t.negative)?t.length>this.length||0>this.cmp(t)?{div:new v(0),mod:this}:1===t.length?'div'===n?{div:this.divn(t.words[0]),mod:null}:'mod'===n?{div:null,mod:new v(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new v(this.modn(t.words[0]))}:this._wordDiv(t,n):(d=this.neg().divmod(t.neg(),n),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:d.div,mod:s})},v.prototype.div=function(t){return this.divmod(t,'div',!1).div},v.prototype.mod=function(t){return this.divmod(t,'mod',!1).mod},v.prototype.umod=function(t){return this.divmod(t,'mod',!0).mod},v.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0===n.div.negative?n.mod:n.mod.isub(t),r=t.ushrn(1),o=t.andln(1),s=a.cmp(r);return 0>s||1===o&&0===s?n.div:0===n.div.negative?n.div.iaddn(1):n.div.isubn(1)},v.prototype.modn=function(t){o(67108863>=t);for(var n=0,a=this.length-1;0<=a;a--)n=(67108864%t*n+(0|this.words[a]))%t;return n},v.prototype.idivn=function(t){o(67108863>=t);for(var n=0,a=this.length-1,r;0<=a;a--)r=(0|this.words[a])+67108864*n,this.words[a]=0|r/t,n=r%t;return this.strip()},v.prototype.divn=function(t){return this.clone().idivn(t)},v.prototype.egcd=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=new v(0),l=new v(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var u=a.clone(),f=n.clone();!n.isZero();){for(var m=0,h=1;0==(n.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(n.iushrn(m);0<m--;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(f)),r.iushrn(1),s.iushrn(1);for(var g=0,b=1;0==(a.words[0]&b)&&26>g;++g,b<<=1);if(0<g)for(a.iushrn(g);0<g--;)(d.isOdd()||l.isOdd())&&(d.iadd(u),l.isub(f)),d.iushrn(1),l.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(d),s.isub(l)):(a.isub(n),d.isub(r),l.isub(s))}return{a:d,b:l,gcd:a.iushln(c)}},v.prototype._invmp=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=a.clone();0<n.cmpn(1)&&0<a.cmpn(1);){for(var l=0,c=1;0==(n.words[0]&c)&&26>l;++l,c<<=1);if(0<l)for(n.iushrn(l);0<l--;)r.isOdd()&&r.iadd(d),r.iushrn(1);for(var u=0,f=1;0==(a.words[0]&f)&&26>u;++u,f<<=1);if(0<u)for(a.iushrn(u);0<u--;)s.isOdd()&&s.iadd(d),s.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(s)):(a.isub(n),s.isub(r))}var m;return m=0===n.cmpn(1)?r:s,0>m.cmpn(0)&&m.iadd(t),m},v.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var o=this.clone(),a=n.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},v.prototype.invm=function(t){return this.egcd(t).a.umod(t)},v.prototype.isEven=function(){return 0==(1&this.words[0])},v.prototype.isOdd=function(){return 1==(1&this.words[0])},v.prototype.andln=function(t){return this.words[0]&t},v.prototype.bincn=function(t){o('number'==typeof t);var n=t%26,a=(t-n)/26,r=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=r,this;for(var s=r,d=a,l;0!=s&&d<this.length;d++)l=0|this.words[d],l+=s,s=l>>>26,l&=67108863,this.words[d]=l;return 0!=s&&(this.words[d]=s,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(t){var n=0>t;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;this.strip();var a;if(1<this.length)a=1;else{n&&(t=-t),o(67108863>=t,'Number is too big');var r=0|this.words[0];a=r===t?0:r<t?-1:1}return 0===this.negative?a:0|-a},v.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0===this.negative?n:0|-n},v.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,r=this.length-1;0<=r;r--){var o=0|this.words[r],a=0|t.words[r];if(o!=a){o<a?n=-1:o>a&&(n=1);break}}return n},v.prototype.gtn=function(t){return 1===this.cmpn(t)},v.prototype.gt=function(t){return 1===this.cmp(t)},v.prototype.gten=function(t){return 0<=this.cmpn(t)},v.prototype.gte=function(t){return 0<=this.cmp(t)},v.prototype.ltn=function(t){return-1===this.cmpn(t)},v.prototype.lt=function(t){return-1===this.cmp(t)},v.prototype.lten=function(t){return 0>=this.cmpn(t)},v.prototype.lte=function(t){return 0>=this.cmp(t)},v.prototype.eqn=function(t){return 0===this.cmpn(t)},v.prototype.eq=function(t){return 0===this.cmp(t)},v.red=function(t){return new N(t)},v.prototype.toRed=function(t){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),t.convertTo(this)._forceRed(t)},v.prototype.fromRed=function(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},v.prototype._forceRed=function(t){return this.red=t,this},v.prototype.forceRed=function(t){return o(!this.red,'Already a number in reduction context'),this._forceRed(t)},v.prototype.redAdd=function(t){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,t)},v.prototype.redIAdd=function(t){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,t)},v.prototype.redSub=function(t){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,t)},v.prototype.redISub=function(t){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,t)},v.prototype.redShl=function(t){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,t)},v.prototype.redMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.mul(this,t)},v.prototype.redIMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.imul(this,t)},v.prototype.redSqr=function(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(t){return o(this.red&&!t.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,t)};var D={k256:null,p224:null,p192:null,p25519:null};T.prototype._tmp=function(){var t=new v(null);return t.words=Array(b(this.n/13)),t},T.prototype.ireduce=function(t){var n=t,a;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),a=n.bitLength();while(a>this.n);var r=a<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},T.prototype.split=function(t,n){t.iushrn(this.n,0,n)},T.prototype.imulK=function(t){return t.imul(this.k)},r(E,T),E.prototype.split=function(t,n){for(var a=4194303,r=_(t.length,9),o=0;o<r;o++)n.words[o]=t.words[o];if(n.length=r,9>=t.length)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(n.words[n.length++]=s&a,o=10;o<t.length;o++){var d=0|t.words[o];t.words[o-10]=(d&a)<<4|s>>>22,s=d}s>>>=22,t.words[o-10]=s,t.length-=0===s&&10<t.length?10:9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0,r;a<t.length;a++)r=0|t.words[a],n+=977*r,t.words[a]=67108863&n,n=64*r+(0|n/67108864);return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(S,T),r(A,T),r(I,T),I.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var r=19*(0|t.words[a])+n,o=67108863&r;r>>>=26,t.words[a]=o,n=r}return 0!=n&&(t.words[t.length++]=n),t},v._prime=function(t){if(D[t])return D[t];var n;if('k256'===t)n=new E;else if('p224'===t)n=new S;else if('p192'===t)n=new A;else if('p25519'===t)n=new I;else throw new Error('Unknown prime '+t);return D[t]=n,n},N.prototype._verify1=function(t){o(0===t.negative,'red works only with positives'),o(t.red,'red works only with red numbers')},N.prototype._verify2=function(t,n){o(0==(t.negative|n.negative),'red works only with positives'),o(t.red&&t.red===n.red,'red works only with red numbers')},N.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},N.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},N.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a._forceRed(this)},N.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a},N.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a._forceRed(this)},N.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a},N.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},N.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},N.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},N.prototype.isqr=function(t){return this.imul(t,t.clone())},N.prototype.sqr=function(t){return this.mul(t,t)},N.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var d=this.m.add(new v(1)).iushrn(2);return this.pow(n,d)}for(var l=this.m.subn(1),u=0;!l.isZero()&&0===l.andln(1);)u++,l.iushrn(1);o(!l.isZero());var s=new v(1).toRed(this),f=s.redNeg(),h=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new v(2*g*g).toRed(this);0!==this.pow(g,h).cmp(f);)g.redIAdd(f);for(var y=this.pow(g,l),c=this.pow(n,l.addn(1).iushrn(1)),r=this.pow(n,l),t=u;0!==r.cmp(s);){for(var m=r,w=0;0!==m.cmp(s);w++)m=m.redSqr();o(w<t);var x=this.pow(y,new v(1).iushln(t-w-1));c=c.redMul(x),y=x.redSqr(),r=r.redMul(y),t=w}return c},N.prototype.invm=function(t){var n=t._invmp(this.m);return 0===n.negative?this.imod(n):(n.negative=0,this.imod(n).redNeg())},N.prototype.pow=function(t,n){if(n.isZero())return new v(1).toRed(this);if(0===n.cmpn(1))return t.clone();var a=4,r=Array(1<<a);r[0]=new v(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var s=r[0],d=0,l=0,c=n.bitLength()%26;for(0==c&&(c=26),o=n.length-1;0<=o;o--){for(var u=n.words[o],f=c-1,m;0<=f;f--){if(m=1&u>>f,s!==r[0]&&(s=this.sqr(s)),0==m&&0==d){l=0;continue}d<<=1,d|=m,l++,l!=a&&(0!==o||0!==f)||(s=this.mul(s,r[d]),l=0,d=0)}c=26}return s},N.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},N.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},v.mont=function(t){return new j(t)},r(j,N),j.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},j.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},j.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new v(0)._forceRed(this);var r=n.mul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.invm=function(t){var n=this.imod(t._invmp(this.m).mul(this.r2));return n._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(7)(t))},function(){},function(t,n,a){function r(t,n){this.name=t,this.body=n,this.decoders={},this.encoders={}}var o=a(56),s=a(1);n.define=function(t,n){return new r(t,n)};r.prototype._createNamed=function(t){var n;try{n=a(322).runInThisContext('(function '+this.name+'(entity) {\n  this._initNamed(entity);\n})')}catch(t){n=function(t){this._initNamed(t)}}return s(n,t),n.prototype._initNamed=function(n){t.call(this,n)},new n(this)},r.prototype._getDecoder=function(t){return t=t||'der',this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(o.decoders[t])),this.decoders[t]},r.prototype.decode=function(t,n,a){return this._getDecoder(n).decode(t,a)},r.prototype._getEncoder=function(t){return t=t||'der',this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(o.encoders[t])),this.encoders[t]},r.prototype.encode=function(t,n,a){return this._getEncoder(n).encode(t,a)}},function(t,n,a){function r(){}var o=a(323),s=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var a in t)n.push(a);return n},d=function(t,n){if(t.forEach)return t.forEach(n);for(var a=0;a<t.length;a++)n(t[a],a,t)},l=function(){try{return Object.defineProperty({},'_',{}),function(t,n,a){Object.defineProperty(t,n,{writable:!0,enumerable:!1,configurable:!0,value:a})}}catch(t){return function(t,n,a){t[n]=a}}}(),c=['Array','Boolean','Date','Error','EvalError','Function','Infinity','JSON','Math','NaN','Number','Object','RangeError','ReferenceError','RegExp','String','SyntaxError','TypeError','URIError','decodeURI','decodeURIComponent','encodeURI','encodeURIComponent','escape','eval','isFinite','isNaN','parseFloat','parseInt','undefined','unescape'];r.prototype={};var u=n.Script=function(t){return this instanceof u?void(this.code=t):new u(t)};u.prototype.runInContext=function(t){if(!(t instanceof r))throw new TypeError('needs a \'context\' argument.');var n=document.createElement('iframe');n.style||(n.style={}),n.style.display='none',document.body.appendChild(n);var a=n.contentWindow,u=a.eval,f=a.execScript;!u&&f&&(f.call(a,'null'),u=a.eval),d(s(t),function(n){a[n]=t[n]}),d(c,function(n){t[n]&&(a[n]=t[n])});var m=s(a),h=u.call(a,this.code);return d(s(a),function(n){(n in t||-1===o(m,n))&&(t[n]=a[n])}),d(c,function(n){n in t||l(t,n,a[n])}),document.body.removeChild(n),h},u.prototype.runInThisContext=function(){return eval(this.code)},u.prototype.runInNewContext=function(t){var n=u.createContext(t),a=this.runInContext(n);return d(s(n),function(a){t[a]=n[a]}),a},d(s(u.prototype),function(t){n[t]=u[t]=function(n){var a=u(n);return a[t].apply(a,[].slice.call(arguments,1))}}),n.createScript=function(t){return n.Script(t)},n.createContext=u.createContext=function(t){var n=new r;return'object'==typeof t&&d(s(t),function(a){n[a]=t[a]}),n}},function(t){var n=[].indexOf;t.exports=function(t,a){if(n)return t.indexOf(a);for(var r=0;r<t.length;++r)if(t[r]===a)return r;return-1}},function(t,n,a){function r(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,n){this.path=t,this.rethrow(n)}var s=a(1);n.Reporter=r,r.prototype.isError=function(t){return t instanceof o},r.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},r.prototype.restore=function(t){var n=this._reporterState;n.obj=t.obj,n.path=n.path.slice(0,t.pathLen)},r.prototype.enterKey=function(t){return this._reporterState.path.push(t)},r.prototype.exitKey=function(t){var n=this._reporterState;n.path=n.path.slice(0,t-1)},r.prototype.leaveKey=function(t,n,a){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[n]=a)},r.prototype.path=function(){return this._reporterState.path.join('/')},r.prototype.enterObject=function(){var t=this._reporterState,n=t.obj;return t.obj={},n},r.prototype.leaveObject=function(t){var n=this._reporterState,a=n.obj;return n.obj=t,a},r.prototype.error=function(t){var n=this._reporterState,a=t instanceof o,r;if(r=a?t:new o(n.path.map(function(t){return'['+JSON.stringify(t)+']'}).join(''),t.message||t,t.stack),!n.options.partial)throw r;return a||n.errors.push(r),r},r.prototype.wrapResult=function(t){var n=this._reporterState;return n.options.partial?{result:this.isError(t)?null:t,errors:n.errors}:t};s(o,Error),o.prototype.rethrow=function(t){if(this.message=t+' at: '+(this.path||'(shallow)'),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,n,a){function r(t,n){var a={};this._baseState=a,a.enc=t,a.parent=n||null,a.children=null,a.tag=null,a.args=null,a.reverseArgs=null,a.choice=null,a.optional=!1,a.any=!1,a.obj=!1,a.use=null,a.useDecoder=null,a.key=null,a['default']=null,a.explicit=null,a.implicit=null,a.contains=null,a.parent||(a.children=[],this._wrap())}var o=a(57).Reporter,s=a(57).EncoderBuffer,d=a(57).DecoderBuffer,l=a(15),c=['seq','seqof','set','setof','objid','bool','gentime','utctime','null_','enum','int','objDesc','bitstr','bmpstr','charstr','genstr','graphstr','ia5str','iso646str','numstr','octstr','printstr','t61str','unistr','utf8str','videostr'],u=['key','obj','use','optional','explicit','implicit','def','choice','any','contains'].concat(c);t.exports=r;var f=['enc','parent','children','tag','args','reverseArgs','choice','optional','any','obj','use','alteredUse','key','default','explicit','implicit','contains'];r.prototype.clone=function(){var t=this._baseState,n={};f.forEach(function(a){n[a]=t[a]});var a=new this.constructor(n.parent);return a._baseState=n,a},r.prototype._wrap=function(){var t=this._baseState;u.forEach(function(n){this[n]=function(){var a=new this.constructor(this);return t.children.push(a),a[n].apply(a,arguments)}},this)},r.prototype._init=function(t){var n=this._baseState;l(null===n.parent),t.call(this),n.children=n.children.filter(function(t){return t._baseState.parent===this},this),l.equal(n.children.length,1,'Root node can have only one child')},r.prototype._useArgs=function(t){var n=this._baseState,a=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==a.length&&(l(null===n.children),n.children=a,a.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(l(null===n.args),n.args=t,n.reverseArgs=t.map(function(t){if('object'!=typeof t||t.constructor!==Object)return t;var n={};return Object.keys(t).forEach(function(a){a==(0|a)&&(a|=0);var r=t[a];n[r]=a}),n}))},['_peekTag','_decodeTag','_use','_decodeStr','_decodeObjid','_decodeTime','_decodeNull','_decodeInt','_decodeBool','_decodeList','_encodeComposite','_encodeStr','_encodeObjid','_encodeTime','_encodeNull','_encodeInt','_encodeBool'].forEach(function(t){r.prototype[t]=function(){var n=this._baseState;throw new Error(t+' not implemented for encoding: '+n.enc)}}),c.forEach(function(t){r.prototype[t]=function(){var n=this._baseState,a=Array.prototype.slice.call(arguments);return l(null===n.tag),n.tag=t,this._useArgs(a),this}}),r.prototype.use=function(t){l(t);var n=this._baseState;return l(null===n.use),n.use=t,this},r.prototype.optional=function(){var t=this._baseState;return t.optional=!0,this},r.prototype.def=function(t){var n=this._baseState;return l(null===n['default']),n['default']=t,n.optional=!0,this},r.prototype.explicit=function(t){var n=this._baseState;return l(null===n.explicit&&null===n.implicit),n.explicit=t,this},r.prototype.implicit=function(t){var n=this._baseState;return l(null===n.explicit&&null===n.implicit),n.implicit=t,this},r.prototype.obj=function(){var t=this._baseState,n=Array.prototype.slice.call(arguments);return t.obj=!0,0!==n.length&&this._useArgs(n),this},r.prototype.key=function(t){var n=this._baseState;return l(null===n.key),n.key=t,this},r.prototype.any=function(){var t=this._baseState;return t.any=!0,this},r.prototype.choice=function(t){var n=this._baseState;return l(null===n.choice),n.choice=t,this._useArgs(Object.keys(t).map(function(n){return t[n]})),this},r.prototype.contains=function(t){var n=this._baseState;return l(null===n.use),n.contains=t,this},r.prototype._decode=function(t,n){var a=this._baseState;if(null===a.parent)return t.wrapResult(a.children[0]._decode(t,n));var r=a['default'],o=!0,s=null;if(null!==a.key&&(s=t.enterKey(a.key)),a.optional){var l=null;if(null===a.explicit?null===a.implicit?null!==a.tag&&(l=a.tag):l=a.implicit:l=a.explicit,null===l&&!a.any){var c=t.save();try{null===a.choice?this._decodeGeneric(a.tag,t,n):this._decodeChoice(t,n),o=!0}catch(t){o=!1}t.restore(c)}else if(o=this._peekTag(t,l,a.any),t.isError(o))return o}var u;if(a.obj&&o&&(u=t.enterObject()),o){if(null!==a.explicit){var f=this._decodeTag(t,a.explicit);if(t.isError(f))return f;t=f}var m=t.offset;if(null===a.use&&null===a.choice){if(a.any)var c=t.save();var h=this._decodeTag(t,null===a.implicit?a.tag:a.implicit,a.any);if(t.isError(h))return h;a.any?r=t.raw(c):t=h}if(n&&n.track&&null!==a.tag&&n.track(t.path(),m,t.length,'tagged'),n&&n.track&&null!==a.tag&&n.track(t.path(),t.offset,t.length,'content'),r=a.any?r:null===a.choice?this._decodeGeneric(a.tag,t,n):this._decodeChoice(t,n),t.isError(r))return r;if(a.any||null!==a.choice||null===a.children||a.children.forEach(function(a){a._decode(t,n)}),a.contains&&('octstr'===a.tag||'bitstr'===a.tag)){var g=new d(r);r=this._getUse(a.contains,t._reporterState.obj)._decode(g,n)}}return a.obj&&o&&(r=t.leaveObject(u)),null!==a.key&&(null!==r||!0===o)?t.leaveKey(s,a.key,r):null!==s&&t.exitKey(s),r},r.prototype._decodeGeneric=function(t,n,a){var r=this._baseState;if('seq'===t||'set'===t)return null;return'seqof'===t||'setof'===t?this._decodeList(n,t,r.args[0],a):/str$/.test(t)?this._decodeStr(n,t,a):'objid'===t&&r.args?this._decodeObjid(n,r.args[0],r.args[1],a):'objid'===t?this._decodeObjid(n,null,null,a):'gentime'===t||'utctime'===t?this._decodeTime(n,t,a):'null_'===t?this._decodeNull(n,a):'bool'===t?this._decodeBool(n,a):'objDesc'===t?this._decodeStr(n,t,a):'int'===t||'enum'===t?this._decodeInt(n,r.args&&r.args[0],a):null===r.use?n.error('unknown tag: '+t):this._getUse(r.use,n._reporterState.obj)._decode(n,a)},r.prototype._getUse=function(t,n){var a=this._baseState;return a.useDecoder=this._use(t,n),l(null===a.useDecoder._baseState.parent),a.useDecoder=a.useDecoder._baseState.children[0],a.implicit!==a.useDecoder._baseState.implicit&&(a.useDecoder=a.useDecoder.clone(),a.useDecoder._baseState.implicit=a.implicit),a.useDecoder},r.prototype._decodeChoice=function(t,n){var a=this._baseState,r=null,o=!1;return Object.keys(a.choice).some(function(s){var d=t.save(),l=a.choice[s];try{var c=l._decode(t,n);if(t.isError(c))return!1;r={type:s,value:c},o=!0}catch(n){return t.restore(d),!1}return!0},this),o?r:t.error('Choice not matched')},r.prototype._createEncoderBuffer=function(t){return new s(t,this.reporter)},r.prototype._encode=function(t,n,a){var r=this._baseState;if(null===r['default']||r['default']!==t){var o=this._encodeValue(t,n,a);return void 0===o||this._skipDefault(o,n,a)?void 0:o}},r.prototype._encodeValue=function(t,n,a){var r=this._baseState;if(null===r.parent)return r.children[0]._encode(t,n||new o);var s=null;if(this.reporter=n,r.optional&&void 0===t)if(null!==r['default'])t=r['default'];else return;var d=null,l=!1;if(r.any)s=this._createEncoderBuffer(t);else if(r.choice)s=this._encodeChoice(t,n);else if(r.contains)d=this._getUse(r.contains,a)._encode(t,n),l=!0;else if(r.children)d=r.children.map(function(a){if('null_'===a._baseState.tag)return a._encode(null,n,t);if(null===a._baseState.key)return n.error('Child should have a key');var r=n.enterKey(a._baseState.key);if('object'!=typeof t)return n.error('Child expected, but input is not object');var o=a._encode(t[a._baseState.key],n,t);return n.leaveKey(r),o},this).filter(function(t){return t}),d=this._createEncoderBuffer(d);else if('seqof'===r.tag||'setof'===r.tag){if(!(r.args&&1===r.args.length))return n.error('Too many args for : '+r.tag);if(!Array.isArray(t))return n.error('seqof/setof, but data is not Array');var c=this.clone();c._baseState.implicit=null,d=this._createEncoderBuffer(t.map(function(a){var r=this._baseState;return this._getUse(r.args[0],t)._encode(a,n)},c))}else null===r.use?(d=this._encodePrimitive(r.tag,t),l=!0):s=this._getUse(r.use,a)._encode(t,n);var s;if(!r.any&&null===r.choice){var u=null===r.implicit?r.tag:r.implicit,f=null===r.implicit?'universal':'context';null===u?null===r.use&&n.error('Tag could be ommited only for .use()'):null===r.use&&(s=this._encodeComposite(u,l,f,d))}return null!==r.explicit&&(s=this._encodeComposite(r.explicit,!1,'context',s)),s},r.prototype._encodeChoice=function(t,n){var a=this._baseState,r=a.choice[t.type];return r||l(!1,t.type+' not found in '+JSON.stringify(Object.keys(a.choice))),r._encode(t.value,n)},r.prototype._encodePrimitive=function(t,n){var a=this._baseState;if(/str$/.test(t))return this._encodeStr(n,t);if('objid'===t&&a.args)return this._encodeObjid(n,a.reverseArgs[0],a.args[1]);if('objid'===t)return this._encodeObjid(n,null,null);if('gentime'===t||'utctime'===t)return this._encodeTime(n,t);if('null_'===t)return this._encodeNull();if('int'===t||'enum'===t)return this._encodeInt(n,a.args&&a.reverseArgs[0]);if('bool'===t)return this._encodeBool(n);if('objDesc'===t)return this._encodeStr(n,t);throw new Error('Unsupported tag: '+t)},r.prototype._isNumstr=function(t){return /^[0-9 ]*$/.test(t)},r.prototype._isPrintstr=function(t){return /^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(t)}},function(t,n,a){var r=a(171);n.tagClass={0:'universal',1:'application',2:'context',3:'private'},n.tagClassByName=r._reverse(n.tagClass),n.tag={0:'end',1:'bool',2:'int',3:'bitstr',4:'octstr',5:'null_',6:'objid',7:'objDesc',8:'external',9:'real',10:'enum',11:'embed',12:'utf8str',13:'relativeOid',16:'seq',17:'set',18:'numstr',19:'printstr',20:'t61str',21:'videostr',22:'ia5str',23:'utctime',24:'gentime',25:'graphstr',26:'iso646str',27:'genstr',28:'unistr',29:'charstr',30:'bmpstr'},n.tagByName=r._reverse(n.tag)},function(t,n,a){var r=n;r.der=a(172),r.pem=a(328)},function(t,n,a){function r(t){d.call(this,t),this.enc='pem'}var o=a(1),s=a(0).Buffer,d=a(172);o(r,d),t.exports=r,r.prototype.decode=function(t,n){for(var a=t.toString().split(/[\r\n]+/g),r=n.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,l=-1,c=-1,u=0,f;u<a.length;u++)if(f=a[u].match(o),null!==f&&f[2]===r)if(-1==l){if('BEGIN'!==f[1])break;l=u}else{if('END'!==f[1])break;c=u;break}if(-1===l||-1===c)throw new Error('PEM section not found for: '+r);var m=a.slice(l+1,c).join('');m.replace(/[^a-z0-9\+\/=]+/gi,'');var h=new s(m,'base64');return d.prototype.decode.call(this,h,n)}},function(t,n,a){var r=n;r.der=a(173),r.pem=a(330)},function(t,n,a){function r(t){s.call(this,t),this.enc='pem'}var o=a(1),s=a(173);o(r,s),t.exports=r,r.prototype.encode=function(t,n){for(var a=s.prototype.encode.call(this,t),r=a.toString('base64'),o=['-----BEGIN '+n.label+'-----'],d=0;d<r.length;d+=64)o.push(r.slice(d,d+64));return o.push('-----END '+n.label+'-----'),o.join('\n')}},function(t,n,a){'use strict';var r=a(56),o=r.define('Time',function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),s=r.define('AttributeTypeValue',function(){this.seq().obj(this.key('type').objid(),this.key('value').any())}),d=r.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('parameters').optional())}),l=r.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(d),this.key('subjectPublicKey').bitstr())}),c=r.define('RelativeDistinguishedName',function(){this.setof(s)}),u=r.define('RDNSequence',function(){this.seqof(c)}),f=r.define('Name',function(){this.choice({rdnSequence:this.use(u)})}),m=r.define('Validity',function(){this.seq().obj(this.key('notBefore').use(o),this.key('notAfter').use(o))}),h=r.define('Extension',function(){this.seq().obj(this.key('extnID').objid(),this.key('critical').bool().def(!1),this.key('extnValue').octstr())}),g=r.define('TBSCertificate',function(){this.seq().obj(this.key('version').explicit(0).int(),this.key('serialNumber').int(),this.key('signature').use(d),this.key('issuer').use(f),this.key('validity').use(m),this.key('subject').use(f),this.key('subjectPublicKeyInfo').use(l),this.key('issuerUniqueID').implicit(1).bitstr().optional(),this.key('subjectUniqueID').implicit(2).bitstr().optional(),this.key('extensions').explicit(3).seqof(h).optional())}),b=r.define('X509Certificate',function(){this.seq().obj(this.key('tbsCertificate').use(g),this.key('signatureAlgorithm').use(d),this.key('signatureValue').bitstr())});t.exports=b},function(t){t.exports={"2.16.840.1.101.3.4.1.1":'aes-128-ecb',"2.16.840.1.101.3.4.1.2":'aes-128-cbc',"2.16.840.1.101.3.4.1.3":'aes-128-ofb',"2.16.840.1.101.3.4.1.4":'aes-128-cfb',"2.16.840.1.101.3.4.1.21":'aes-192-ecb',"2.16.840.1.101.3.4.1.22":'aes-192-cbc',"2.16.840.1.101.3.4.1.23":'aes-192-ofb',"2.16.840.1.101.3.4.1.24":'aes-192-cfb',"2.16.840.1.101.3.4.1.41":'aes-256-ecb',"2.16.840.1.101.3.4.1.42":'aes-256-cbc',"2.16.840.1.101.3.4.1.43":'aes-256-ofb',"2.16.840.1.101.3.4.1.44":'aes-256-cfb'}},function(t,n,a){(function(n){var r=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,o=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n/m,s=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?-----END \1-----$/m,d=a(72),l=a(104);t.exports=function(t,a){var c=t.toString(),u=c.match(r),f;if(!u){var m=c.match(s);f=new n(m[2].replace(/\r?\n/g,''),'base64')}else{var h='aes'+u[1],g=new n(u[2],'hex'),b=new n(u[3].replace(/\r?\n/g,''),'base64'),y=d(a,g.slice(0,8),parseInt(u[1],10)).key,v=[],w=l.createDecipheriv(h,y,g);v.push(w.update(b)),v.push(w.final()),f=n.concat(v)}var x=c.match(o)[1];return{tag:x,data:f}}}).call(n,a(0).Buffer)},function(t,n,a){(function(n){function r(t,n,a){var r=u[a.data.algorithm.curve.join('.')];if(!r)throw new Error('unknown curve '+a.data.algorithm.curve.join('.'));var o=new s(r),d=a.data.subjectPrivateKey.data;return o.verify(n,t,d)}function o(t,n,a){var o=a.data.p,u=a.data.q,f=a.data.g,m=a.data.pub_key,h=c.signature.decode(t,'der'),g=h.s,s=h.r;d(g,u),d(s,u);var r=l.mont(o),b=g.invm(u),y=f.toRed(r).redPow(new l(n).mul(b).mod(u)).fromRed().mul(m.toRed(r).redPow(s.mul(b).mod(u)).fromRed()).mod(o).mod(u);return 0===y.cmp(s)}function d(t,n){if(0>=t.cmpn(0))throw new Error('invalid sig');if(t.cmp(n)>=n)throw new Error('invalid sig')}var l=a(169),s=a(6).ec,c=a(75),u=a(174);t.exports=function(t,a,s,d,u){var f=c(s);if('ec'===f.type){if('ecdsa'!==d&&'ecdsa/rsa'!==d)throw new Error('wrong public key type');return r(t,a,f)}if('dsa'===f.type){if('dsa'!==d)throw new Error('wrong public key type');return o(t,a,f)}if('rsa'!==d&&'ecdsa/rsa'!==d)throw new Error('wrong public key type');a=n.concat([u,a]);for(var m=f.modulus.byteLength(),h=[1],g=0;a.length+h.length+2<m;)h.push(255),g++;h.push(0);for(var b=-1;++b<a.length;)h.push(a[b]);h=new n(h);var y=l.mont(f.modulus);t=new l(t).toRed(y),t=t.redPow(new l(f.publicExponent)),t=new n(t.fromRed().toArray());var v=8>g?1:0;for(m=_(t.length,h.length),t.length!==h.length&&(v=1),b=-1;++b<m;)v|=t[b]^h[b];return 0==v}}).call(n,a(0).Buffer)},function(t,n,a){(function(n){function r(t){this.curveType=l[t],this.curveType||(this.curveType={name:t}),this.curve=new s.ec(this.curveType.name),this.keys=void 0}function o(t,a,r){Array.isArray(t)||(t=t.toArray());var o=new n(t);if(r&&o.length<r){var s=new n(r-o.length);s.fill(0),o=n.concat([s,o])}return a?o.toString(a):o}var s=a(6),d=a(336);t.exports=function(t){return new r(t)};var l={secp256k1:{name:'secp256k1',byteLength:32},secp224r1:{name:'p224',byteLength:28},prime256v1:{name:'p256',byteLength:32},prime192v1:{name:'p192',byteLength:24},ed25519:{name:'ed25519',byteLength:32},secp384r1:{name:'p384',byteLength:48},secp521r1:{name:'p521',byteLength:66}};l.p224=l.secp224r1,l.p256=l.secp256r1=l.prime256v1,l.p192=l.secp192r1=l.prime192v1,l.p384=l.secp384r1,l.p521=l.secp521r1,r.prototype.generateKeys=function(t,n){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,n)},r.prototype.computeSecret=function(t,a,r){a=a||'utf8',n.isBuffer(t)||(t=new n(t,a));var s=this.curve.keyFromPublic(t).getPublic(),d=s.mul(this.keys.getPrivate()).getX();return o(d,r,this.curveType.byteLength)},r.prototype.getPublicKey=function(t,n){var a=this.keys.getPublic('compressed'===n,!0);return'hybrid'===n&&(a[a.length-1]%2?a[0]=7:a[0]=6),o(a,t)},r.prototype.getPrivateKey=function(t){return o(this.keys.getPrivate(),t)},r.prototype.setPublicKey=function(t,a){return a=a||'utf8',n.isBuffer(t)||(t=new n(t,a)),this.keys._importPublic(t),this},r.prototype.setPrivateKey=function(t,a){a=a||'utf8',n.isBuffer(t)||(t=new n(t,a));var r=new d(t);return r=r.toString(16),this.keys._importPrivate(r),this}}).call(n,a(0).Buffer)},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function v(t,n,a){return v.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_(t.length,a),s=n,d;s<r;s++)d=t.charCodeAt(s)-48,o<<=4,o|=49<=d&&54>=d?d-49+10:17<=d&&22>=d?d-17+10:15&d;return o}function l(t,n,a,o){for(var s=0,r=_(t.length,a),d=n,l;d<r;d++)l=t.charCodeAt(d)-48,s*=o,s+=49<=l?l-49+10:17<=l?l-17+10:l;return s}function u(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,o=a%26;n[a]=(t.words[r]&1<<o)>>>o}return n}function w(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_(u,n.length-1),g=y(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function x(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_(l,n.length-1),m=y(0,l-t.length+1);m<=f;m++){var h=l-m,g=0|t.words[h],a=0|n.words[m],b=g*a,r=67108863&b;c=0|c+(0|b/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function k(t,n,a){var r=new C;return r.mulp(t,n,a)}function C(t,n){this.x=t,this.y=n}function T(t,n){this.name=t,this.p=new v(n,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){T.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function S(){T.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function A(){T.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function I(){T.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function N(t){if('string'==typeof t){var n=v._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function j(t){N.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=v:n.BN=v,v.BN=v,v.wordSize=26;var R;try{R=a(337).Buffer}catch(t){}v.isBN=function(t){return!!(t instanceof v)||null!==t&&'object'==typeof t&&t.constructor.wordSize===v.wordSize&&Array.isArray(t.words)},v.max=function(t,n){return 0<t.cmp(n)?t:n},v.min=function(t,n){return 0>t.cmp(n)?t:n},v.prototype._init=function(t,n,a){if('number'==typeof t)return this._initNumber(t,n,a);if('object'==typeof t)return this._initArray(t,n,a);'hex'===n&&(n=16),o(n===(0|n)&&2<=n&&36>=n),t=t.toString().replace(/\s+/g,'');var r=0;'-'===t[0]&&r++,16===n?this._parseHex(t,r):this._parseBase(t,n,r),'-'===t[0]&&(this.negative=1),this.strip();'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initNumber=function(t,n,a){0>t&&(this.negative=1,t=-t),67108864>t?(this.words=[67108863&t],this.length=1):4503599627370496>t?(this.words=[67108863&t,67108863&t/67108864],this.length=2):(o(9007199254740992>t),this.words=[67108863&t,67108863&t/67108864,1],this.length=3);'le'!==a||this._initArray(this.toArray(),n,a)},v.prototype._initArray=function(t,n,a){if(o('number'==typeof t.length),0>=t.length)return this.words=[0],this.length=1,this;this.length=b(t.length/3),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s=0,d,l;if('be'===a)for(r=t.length-1,d=0;0<=r;r-=3)l=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);else if('le'===a)for(r=0,d=0;r<t.length;r+=3)l=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[d]|=67108863&l<<s,this.words[d+1]=67108863&l>>>26-s,s+=24,26<=s&&(s-=26,d++);return this.strip()},v.prototype._parseHex=function(t,n){this.length=b((t.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r=0,o,d;for(a=t.length-6,o=0;a>=n;a-=6)d=s(t,a,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r,r+=24,26<=r&&(r-=26,o++);a+6!==n&&(d=s(t,n,a+6),this.words[o]|=67108863&d<<r,this.words[o+1]|=4194303&d>>>26-r),this.strip()},v.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var r=0,o=1;67108863>=o;o*=n)r++;r--,o=0|o/n;for(var s=t.length-a,d=s%r,c=_(s,s-d)+a,u=0,f=a;f<c;f+=r)u=l(t,f,f+r,n),this.imuln(o),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u);if(0!=d){var m=1;for(u=l(t,f,t.length,n),f=0;f<d;f++)m*=n;this.imuln(m),67108864>this.words[0]+u?this.words[0]+=u:this._iaddn(u)}},v.prototype.copy=function(t){t.words=Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},v.prototype.clone=function(){var t=new v(null);return this.copy(t),t},v.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var L=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];v.prototype.toString=function(t,n){t=t||10,n=0|n||1;var a;if(16===t||'hex'===t){a='';for(var s=0,d=0,l=0;l<this.length;l++){var u=this.words[l],f=(16777215&(u<<s|d)).toString(16);d=16777215&u>>>24-s,a=0!=d||l!==this.length-1?L[6-f.length]+f+a:f+a,s+=2,26<=s&&(s-=26,l--)}for(0!=d&&(a=d.toString(16)+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}if(t===(0|t)&&2<=t&&36>=t){var m=O[t],h=P[t];a='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(t);g=g.idivn(h),a=g.isZero()?c+a:L[m-c.length]+c+a}for(this.isZero()&&(a='0'+a);0!=a.length%n;)a='0'+a;return 0!==this.negative&&(a='-'+a),a}o(!1,'Base should be between 2 and 36')},v.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?t:-t},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(t,n){return o('undefined'!=typeof R),this.toArrayLike(R,t,n)},v.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},v.prototype.toArrayLike=function(t,n,a){var r=this.byteLength(),s=a||y(1,r);o(r<=s,'byte array longer than desired length'),o(0<s,'Requested array length <= 0'),this.strip();var d=new t(s),l=this.clone(),c,u;if(!('le'===n)){for(u=0;u<s-r;u++)d[u]=0;for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[s-u-1]=c}else{for(u=0;!l.isZero();u++)c=l.andln(255),l.iushrn(8),d[u]=c;for(;u<s;u++)d[u]=0}return d},v.prototype._countBits=g?function(t){return 32-g(t)}:function(n){var a=n,t=0;return 4096<=a&&(t+=13,a>>>=13),64<=a&&(t+=7,a>>>=7),8<=a&&(t+=4,a>>>=4),2<=a&&(t+=2,a>>>=2),t+a},v.prototype._zeroBits=function(n){if(0===n)return 26;var a=n,t=0;return 0==(8191&a)&&(t+=13,a>>>=13),0==(127&a)&&(t+=7,a>>>=7),0==(15&a)&&(t+=4,a>>>=4),0==(3&a)&&(t+=2,a>>>=2),0==(1&a)&&t++,t},v.prototype.bitLength=function(){var t=this.words[this.length-1],n=this._countBits(t);return 26*(this.length-1)+n},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0,a;n<this.length&&(a=this._zeroBits(this.words[n]),t+=a,26===a);n++);return t},v.prototype.byteLength=function(){return b(this.bitLength()/8)},v.prototype.toTwos=function(t){return 0===this.negative?this.clone():this.abs().inotn(t).iaddn(1)},v.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]|=t.words[n];return this.strip()},v.prototype.ior=function(t){return o(0==(this.negative|t.negative)),this.iuor(t)},v.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},v.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},v.prototype.iuand=function(t){var n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]&=t.words[a];return this.length=n.length,this.strip()},v.prototype.iand=function(t){return o(0==(this.negative|t.negative)),this.iuand(t)},v.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},v.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},v.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var r=0;r<a.length;r++)this.words[r]=n.words[r]^a.words[r];if(this!==n)for(;r<n.length;r++)this.words[r]=n.words[r];return this.length=n.length,this.strip()},v.prototype.ixor=function(t){return o(0==(this.negative|t.negative)),this.iuxor(t)},v.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},v.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},v.prototype.inotn=function(t){o('number'==typeof t&&0<=t);var n=0|b(t/26),a=t%26;this._expand(n),0<a&&n--;for(var r=0;r<n;r++)this.words[r]=67108863&~this.words[r];return 0<a&&(this.words[r]=~this.words[r]&67108863>>26-a),this.strip()},v.prototype.notn=function(t){return this.clone().inotn(t)},v.prototype.setn=function(t,n){o('number'==typeof t&&0<=t);var a=0|t/26,r=t%26;return this._expand(a+1),n?this.words[a]|=1<<r:this.words[a]&=~(1<<r),this.strip()},v.prototype.iadd=function(t){var n;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();var r,a;this.length>t.length?(r=this,a=t):(r=t,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|r.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!=o&&s<r.length;s++)n=(0|r.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=r.length,0!=o)this.words[this.length]=o,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},v.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},v.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var o,a;0<r?(o=this,a=t):(o=t,a=this);for(var s=0,d=0;d<a.length;d++)n=(0|o.words[d])-(0|a.words[d])+s,s=n>>26,this.words[d]=67108863&n;for(;0!=s&&d<o.length;d++)n=(0|o.words[d])+s,s=n>>26,this.words[d]=67108863&n;if(0==s&&d<o.length&&o!==this)for(;d<o.length;d++)this.words[d]=o.words[d];return this.length=y(this.length,d),o!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(t){return this.clone().isub(t)};var M=function(t,n,r){var s=t.words,a=n.words,d=r.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,g=f>>>13,b=0|s[2],y=8191&b,v=b>>>13,w=0|s[3],x=8191&w,_=w>>>13,k=0|s[4],C=8191&k,T=k>>>13,E=0|s[5],S=8191&E,A=E>>>13,I=0|s[6],N=8191&I,j=I>>>13,R=0|s[7],L=8191&R,O=R>>>13,P=0|s[8],M=8191&P,D=P>>>13,B=0|s[9],U=8191&B,q=B>>>13,F=0|a[0],z=8191&F,H=F>>>13,W=0|a[1],V=8191&W,G=W>>>13,K=0|a[2],J=8191&K,X=K>>>13,Z=0|a[3],Y=8191&Z,Q=Z>>>13,ee=0|a[4],te=8191&ee,ne=ee>>>13,ae=0|a[5],re=8191&ae,oe=ae>>>13,ie=0|a[6],se=8191&ie,de=ie>>>13,le=0|a[7],pe=8191&le,ce=le>>>13,ue=0|a[8],fe=8191&ue,he=ue>>>13,ge=0|a[9],be=8191&ge,ye=ge>>>13,ve,we,xe;r.negative=t.negative^n.negative,r.length=19,ve=h(c,z),we=h(c,H),we=0|we+h(u,z),xe=h(u,H);var _e=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(_e>>>26),_e&=67108863,ve=h(m,z),we=h(m,H),we=0|we+h(g,z),xe=h(g,H),ve=0|ve+h(c,V),we=0|we+h(c,G),we=0|we+h(u,V),xe=0|xe+h(u,G);var ke=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(ke>>>26),ke&=67108863,ve=h(y,z),we=h(y,H),we=0|we+h(v,z),xe=h(v,H),ve=0|ve+h(m,V),we=0|we+h(m,G),we=0|we+h(g,V),xe=0|xe+h(g,G),ve=0|ve+h(c,J),we=0|we+h(c,X),we=0|we+h(u,J),xe=0|xe+h(u,X);var Ce=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ce>>>26),Ce&=67108863,ve=h(x,z),we=h(x,H),we=0|we+h(_,z),xe=h(_,H),ve=0|ve+h(y,V),we=0|we+h(y,G),we=0|we+h(v,V),xe=0|xe+h(v,G),ve=0|ve+h(m,J),we=0|we+h(m,X),we=0|we+h(g,J),xe=0|xe+h(g,X),ve=0|ve+h(c,Y),we=0|we+h(c,Q),we=0|we+h(u,Y),xe=0|xe+h(u,Q);var Te=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Te>>>26),Te&=67108863,ve=h(C,z),we=h(C,H),we=0|we+h(T,z),xe=h(T,H),ve=0|ve+h(x,V),we=0|we+h(x,G),we=0|we+h(_,V),xe=0|xe+h(_,G),ve=0|ve+h(y,J),we=0|we+h(y,X),we=0|we+h(v,J),xe=0|xe+h(v,X),ve=0|ve+h(m,Y),we=0|we+h(m,Q),we=0|we+h(g,Y),xe=0|xe+h(g,Q),ve=0|ve+h(c,te),we=0|we+h(c,ne),we=0|we+h(u,te),xe=0|xe+h(u,ne);var Ee=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ee>>>26),Ee&=67108863,ve=h(S,z),we=h(S,H),we=0|we+h(A,z),xe=h(A,H),ve=0|ve+h(C,V),we=0|we+h(C,G),we=0|we+h(T,V),xe=0|xe+h(T,G),ve=0|ve+h(x,J),we=0|we+h(x,X),we=0|we+h(_,J),xe=0|xe+h(_,X),ve=0|ve+h(y,Y),we=0|we+h(y,Q),we=0|we+h(v,Y),xe=0|xe+h(v,Q),ve=0|ve+h(m,te),we=0|we+h(m,ne),we=0|we+h(g,te),xe=0|xe+h(g,ne),ve=0|ve+h(c,re),we=0|we+h(c,oe),we=0|we+h(u,re),xe=0|xe+h(u,oe);var Se=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Se>>>26),Se&=67108863,ve=h(N,z),we=h(N,H),we=0|we+h(j,z),xe=h(j,H),ve=0|ve+h(S,V),we=0|we+h(S,G),we=0|we+h(A,V),xe=0|xe+h(A,G),ve=0|ve+h(C,J),we=0|we+h(C,X),we=0|we+h(T,J),xe=0|xe+h(T,X),ve=0|ve+h(x,Y),we=0|we+h(x,Q),we=0|we+h(_,Y),xe=0|xe+h(_,Q),ve=0|ve+h(y,te),we=0|we+h(y,ne),we=0|we+h(v,te),xe=0|xe+h(v,ne),ve=0|ve+h(m,re),we=0|we+h(m,oe),we=0|we+h(g,re),xe=0|xe+h(g,oe),ve=0|ve+h(c,se),we=0|we+h(c,de),we=0|we+h(u,se),xe=0|xe+h(u,de);var Ae=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ae>>>26),Ae&=67108863,ve=h(L,z),we=h(L,H),we=0|we+h(O,z),xe=h(O,H),ve=0|ve+h(N,V),we=0|we+h(N,G),we=0|we+h(j,V),xe=0|xe+h(j,G),ve=0|ve+h(S,J),we=0|we+h(S,X),we=0|we+h(A,J),xe=0|xe+h(A,X),ve=0|ve+h(C,Y),we=0|we+h(C,Q),we=0|we+h(T,Y),xe=0|xe+h(T,Q),ve=0|ve+h(x,te),we=0|we+h(x,ne),we=0|we+h(_,te),xe=0|xe+h(_,ne),ve=0|ve+h(y,re),we=0|we+h(y,oe),we=0|we+h(v,re),xe=0|xe+h(v,oe),ve=0|ve+h(m,se),we=0|we+h(m,de),we=0|we+h(g,se),xe=0|xe+h(g,de),ve=0|ve+h(c,pe),we=0|we+h(c,ce),we=0|we+h(u,pe),xe=0|xe+h(u,ce);var Ie=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ie>>>26),Ie&=67108863,ve=h(M,z),we=h(M,H),we=0|we+h(D,z),xe=h(D,H),ve=0|ve+h(L,V),we=0|we+h(L,G),we=0|we+h(O,V),xe=0|xe+h(O,G),ve=0|ve+h(N,J),we=0|we+h(N,X),we=0|we+h(j,J),xe=0|xe+h(j,X),ve=0|ve+h(S,Y),we=0|we+h(S,Q),we=0|we+h(A,Y),xe=0|xe+h(A,Q),ve=0|ve+h(C,te),we=0|we+h(C,ne),we=0|we+h(T,te),xe=0|xe+h(T,ne),ve=0|ve+h(x,re),we=0|we+h(x,oe),we=0|we+h(_,re),xe=0|xe+h(_,oe),ve=0|ve+h(y,se),we=0|we+h(y,de),we=0|we+h(v,se),xe=0|xe+h(v,de),ve=0|ve+h(m,pe),we=0|we+h(m,ce),we=0|we+h(g,pe),xe=0|xe+h(g,ce),ve=0|ve+h(c,fe),we=0|we+h(c,he),we=0|we+h(u,fe),xe=0|xe+h(u,he);var Ne=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ne>>>26),Ne&=67108863,ve=h(U,z),we=h(U,H),we=0|we+h(q,z),xe=h(q,H),ve=0|ve+h(M,V),we=0|we+h(M,G),we=0|we+h(D,V),xe=0|xe+h(D,G),ve=0|ve+h(L,J),we=0|we+h(L,X),we=0|we+h(O,J),xe=0|xe+h(O,X),ve=0|ve+h(N,Y),we=0|we+h(N,Q),we=0|we+h(j,Y),xe=0|xe+h(j,Q),ve=0|ve+h(S,te),we=0|we+h(S,ne),we=0|we+h(A,te),xe=0|xe+h(A,ne),ve=0|ve+h(C,re),we=0|we+h(C,oe),we=0|we+h(T,re),xe=0|xe+h(T,oe),ve=0|ve+h(x,se),we=0|we+h(x,de),we=0|we+h(_,se),xe=0|xe+h(_,de),ve=0|ve+h(y,pe),we=0|we+h(y,ce),we=0|we+h(v,pe),xe=0|xe+h(v,ce),ve=0|ve+h(m,fe),we=0|we+h(m,he),we=0|we+h(g,fe),xe=0|xe+h(g,he),ve=0|ve+h(c,be),we=0|we+h(c,ye),we=0|we+h(u,be),xe=0|xe+h(u,ye);var je=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(je>>>26),je&=67108863,ve=h(U,V),we=h(U,G),we=0|we+h(q,V),xe=h(q,G),ve=0|ve+h(M,J),we=0|we+h(M,X),we=0|we+h(D,J),xe=0|xe+h(D,X),ve=0|ve+h(L,Y),we=0|we+h(L,Q),we=0|we+h(O,Y),xe=0|xe+h(O,Q),ve=0|ve+h(N,te),we=0|we+h(N,ne),we=0|we+h(j,te),xe=0|xe+h(j,ne),ve=0|ve+h(S,re),we=0|we+h(S,oe),we=0|we+h(A,re),xe=0|xe+h(A,oe),ve=0|ve+h(C,se),we=0|we+h(C,de),we=0|we+h(T,se),xe=0|xe+h(T,de),ve=0|ve+h(x,pe),we=0|we+h(x,ce),we=0|we+h(_,pe),xe=0|xe+h(_,ce),ve=0|ve+h(y,fe),we=0|we+h(y,he),we=0|we+h(v,fe),xe=0|xe+h(v,he),ve=0|ve+h(m,be),we=0|we+h(m,ye),we=0|we+h(g,be),xe=0|xe+h(g,ye);var Re=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Re>>>26),Re&=67108863,ve=h(U,J),we=h(U,X),we=0|we+h(q,J),xe=h(q,X),ve=0|ve+h(M,Y),we=0|we+h(M,Q),we=0|we+h(D,Y),xe=0|xe+h(D,Q),ve=0|ve+h(L,te),we=0|we+h(L,ne),we=0|we+h(O,te),xe=0|xe+h(O,ne),ve=0|ve+h(N,re),we=0|we+h(N,oe),we=0|we+h(j,re),xe=0|xe+h(j,oe),ve=0|ve+h(S,se),we=0|we+h(S,de),we=0|we+h(A,se),xe=0|xe+h(A,de),ve=0|ve+h(C,pe),we=0|we+h(C,ce),we=0|we+h(T,pe),xe=0|xe+h(T,ce),ve=0|ve+h(x,fe),we=0|we+h(x,he),we=0|we+h(_,fe),xe=0|xe+h(_,he),ve=0|ve+h(y,be),we=0|we+h(y,ye),we=0|we+h(v,be),xe=0|xe+h(v,ye);var Le=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Le>>>26),Le&=67108863,ve=h(U,Y),we=h(U,Q),we=0|we+h(q,Y),xe=h(q,Q),ve=0|ve+h(M,te),we=0|we+h(M,ne),we=0|we+h(D,te),xe=0|xe+h(D,ne),ve=0|ve+h(L,re),we=0|we+h(L,oe),we=0|we+h(O,re),xe=0|xe+h(O,oe),ve=0|ve+h(N,se),we=0|we+h(N,de),we=0|we+h(j,se),xe=0|xe+h(j,de),ve=0|ve+h(S,pe),we=0|we+h(S,ce),we=0|we+h(A,pe),xe=0|xe+h(A,ce),ve=0|ve+h(C,fe),we=0|we+h(C,he),we=0|we+h(T,fe),xe=0|xe+h(T,he),ve=0|ve+h(x,be),we=0|we+h(x,ye),we=0|we+h(_,be),xe=0|xe+h(_,ye);var Oe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Oe>>>26),Oe&=67108863,ve=h(U,te),we=h(U,ne),we=0|we+h(q,te),xe=h(q,ne),ve=0|ve+h(M,re),we=0|we+h(M,oe),we=0|we+h(D,re),xe=0|xe+h(D,oe),ve=0|ve+h(L,se),we=0|we+h(L,de),we=0|we+h(O,se),xe=0|xe+h(O,de),ve=0|ve+h(N,pe),we=0|we+h(N,ce),we=0|we+h(j,pe),xe=0|xe+h(j,ce),ve=0|ve+h(S,fe),we=0|we+h(S,he),we=0|we+h(A,fe),xe=0|xe+h(A,he),ve=0|ve+h(C,be),we=0|we+h(C,ye),we=0|we+h(T,be),xe=0|xe+h(T,ye);var Pe=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Pe>>>26),Pe&=67108863,ve=h(U,re),we=h(U,oe),we=0|we+h(q,re),xe=h(q,oe),ve=0|ve+h(M,se),we=0|we+h(M,de),we=0|we+h(D,se),xe=0|xe+h(D,de),ve=0|ve+h(L,pe),we=0|we+h(L,ce),we=0|we+h(O,pe),xe=0|xe+h(O,ce),ve=0|ve+h(N,fe),we=0|we+h(N,he),we=0|we+h(j,fe),xe=0|xe+h(j,he),ve=0|ve+h(S,be),we=0|we+h(S,ye),we=0|we+h(A,be),xe=0|xe+h(A,ye);var Me=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Me>>>26),Me&=67108863,ve=h(U,se),we=h(U,de),we=0|we+h(q,se),xe=h(q,de),ve=0|ve+h(M,pe),we=0|we+h(M,ce),we=0|we+h(D,pe),xe=0|xe+h(D,ce),ve=0|ve+h(L,fe),we=0|we+h(L,he),we=0|we+h(O,fe),xe=0|xe+h(O,he),ve=0|ve+h(N,be),we=0|we+h(N,ye),we=0|we+h(j,be),xe=0|xe+h(j,ye);var De=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(De>>>26),De&=67108863,ve=h(U,pe),we=h(U,ce),we=0|we+h(q,pe),xe=h(q,ce),ve=0|ve+h(M,fe),we=0|we+h(M,he),we=0|we+h(D,fe),xe=0|xe+h(D,he),ve=0|ve+h(L,be),we=0|we+h(L,ye),we=0|we+h(O,be),xe=0|xe+h(O,ye);var Be=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Be>>>26),Be&=67108863,ve=h(U,fe),we=h(U,he),we=0|we+h(q,fe),xe=h(q,he),ve=0|ve+h(M,be),we=0|we+h(M,ye),we=0|we+h(D,be),xe=0|xe+h(D,ye);var Ue=0|(0|o+ve)+((8191&we)<<13);o=0|(0|xe+(we>>>13))+(Ue>>>26),Ue&=67108863,ve=h(U,be),we=h(U,ye),we=0|we+h(q,be),xe=h(q,ye);var qe=0|(0|o+ve)+((8191&we)<<13);return o=0|(0|xe+(we>>>13))+(qe>>>26),qe&=67108863,d[0]=_e,d[1]=ke,d[2]=Ce,d[3]=Te,d[4]=Ee,d[5]=Se,d[6]=Ae,d[7]=Ie,d[8]=Ne,d[9]=je,d[10]=Re,d[11]=Le,d[12]=Oe,d[13]=Pe,d[14]=Me,d[15]=De,d[16]=Be,d[17]=Ue,d[18]=qe,0!=o&&(d[19]=o,r.length++),r};h||(M=w),v.prototype.mulTo=function(t,n){var a=this.length+t.length,r;return r=10===this.length&&10===t.length?M(this,t,n):63>a?w(this,t,n):1024>a?x(this,t,n):k(this,t,n),r},C.prototype.makeRBT=function(n){for(var a=Array(n),t=v.prototype._countBits(n)-1,r=0;r<n;r++)a[r]=this.revBin(r,t,n);return a},C.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var r=0,o=0;o<n;o++)r|=(1&t)<<n-o-1,t>>=1;return r},C.prototype.permute=function(t,n,a,r,o,s){for(var d=0;d<s;d++)r[d]=n[t[d]],o[d]=a[t[d]]},C.prototype.transform=function(t,n,a,r,o,d){this.permute(d,t,n,a,r,o);for(var u=1;u<o;u<<=1)for(var s=u<<1,l=f(2*m/s),h=c(2*m/s),g=0;g<o;g+=s)for(var b=l,y=h,v=0;v<u;v++){var w=a[g+v],x=r[g+v],_=a[g+v+u],k=r[g+v+u],C=b*_-y*k;k=b*k+y*_,_=C,a[g+v]=w+_,r[g+v]=x+k,a[g+v+u]=w-_,r[g+v+u]=x-k,v!==s&&(C=l*b-h*y,y=l*y+h*b,b=C)}},C.prototype.guessLen13b=function(t,n){var a=1|y(n,t),r=1&a,o=0;for(a=0|a/2;a;a>>>=1)o++;return 1<<o+1+r},C.prototype.conjugate=function(n,a,r){if(!(1>=r))for(var o=0,s;o<r/2;o++)s=n[o],n[o]=n[r-o-1],n[r-o-1]=s,s=a[o],a[o]=-a[r-o-1],a[r-o-1]=-s},C.prototype.normalize13b=function(t,n){for(var a=0,r=0,o;r<n/2;r++)o=8192*d(t[2*r+1]/n)+d(t[2*r]/n)+a,t[r]=67108863&o,a=67108864>o?0:0|o/67108864;return t},C.prototype.convert13b=function(t,n,a,r){for(var s=0,d=0;d<n;d++)s+=0|t[d],a[2*d]=8191&s,s>>>=13,a[2*d+1]=8191&s,s>>>=13;for(d=2*n;d<r;++d)a[d]=0;o(0==s),o(0==(-8192&s))},C.prototype.stub=function(t){for(var n=Array(t),a=0;a<t;a++)n[a]=0;return n},C.prototype.mulp=function(t,n,a){var r=2*this.guessLen13b(t.length,n.length),o=this.makeRBT(r),s=this.stub(r),d=Array(r),l=Array(r),c=Array(r),u=Array(r),f=Array(r),m=Array(r),h=a.words;h.length=r,this.convert13b(t.words,t.length,d,r),this.convert13b(n.words,n.length,u,r),this.transform(d,s,l,c,r,o),this.transform(u,s,f,m,r,o);for(var g=0,b;g<r;g++)b=l[g]*f[g]-c[g]*m[g],c[g]=l[g]*m[g]+c[g]*f[g],l[g]=b;return this.conjugate(l,c,r),this.transform(l,c,h,s,r,o),this.conjugate(h,s,r),this.normalize13b(h,r),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},v.prototype.mul=function(t){var n=new v(null);return n.words=Array(this.length+t.length),this.mulTo(t,n)},v.prototype.mulf=function(t){var n=new v(null);return n.words=Array(this.length+t.length),k(this,t,n)},v.prototype.imul=function(t){return this.clone().mulTo(t,this)},v.prototype.imuln=function(t){o('number'==typeof t),o(67108864>t);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*t,s=(67108863&r)+(67108863&n);n>>=26,n+=0|r/67108864,n+=s>>>26,this.words[a]=67108863&s}return 0!=n&&(this.words[a]=n,this.length++),this},v.prototype.muln=function(t){return this.clone().imuln(t)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(t){var n=u(t);if(0===n.length)return new v(1);for(var a=this,r=0;r<n.length&&!(0!==n[r]);r++,a=a.sqr());if(++r<n.length)for(var o=a.sqr();r<n.length;r++,o=o.sqr())0!==n[r]&&(a=a.mul(o));return a},v.prototype.iushln=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26,r;if(0!=n){var s=0;for(r=0;r<this.length;r++){var d=this.words[r]&67108863>>>26-n<<26-n,l=(0|this.words[r])-d<<n;this.words[r]=l|s,s=d>>>26-n}s&&(this.words[r]=s,this.length++)}if(0!=a){for(r=this.length-1;0<=r;r--)this.words[r+a]=this.words[r];for(r=0;r<a;r++)this.words[r]=0;this.length+=a}return this.strip()},v.prototype.ishln=function(t){return o(0===this.negative),this.iushln(t)},v.prototype.iushrn=function(t,n,a){o('number'==typeof t&&0<=t);var d=n?(n-n%26)/26:0;var l=t%26,r=_((t-l)/26,this.length),s=a;if(d-=r,d=y(0,d),s){for(var c=0;c<r;c++)s.words[c]=this.words[c];s.length=r}if(0===r);else if(this.length>r)for(this.length-=r,c=0;c<this.length;c++)this.words[c]=this.words[c+r];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!=u||c>=d);c--){var f=0|this.words[c];this.words[c]=u<<26-l|f>>>l,u=f&(67108863^67108863>>>l<<l)}return s&&0!=u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(t,n,a){return o(0===this.negative),this.iushrn(t,n,a)},v.prototype.shln=function(t){return this.clone().ishln(t)},v.prototype.ushln=function(t){return this.clone().iushln(t)},v.prototype.shrn=function(t){return this.clone().ishrn(t)},v.prototype.ushrn=function(t){return this.clone().iushrn(t)},v.prototype.testn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(this.length<=a)return!1;var r=this.words[a];return!!(r&1<<n)},v.prototype.imaskn=function(t){o('number'==typeof t&&0<=t);var n=t%26,a=(t-n)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=a)return this;if(0!=n&&a++,this.length=_(a,this.length),0!=n){this.words[this.length-1]&=67108863^67108863>>>n<<n}return this.strip()},v.prototype.maskn=function(t){return this.clone().imaskn(t)},v.prototype.iaddn=function(t){return o('number'==typeof t),o(67108864>t),0>t?this.isubn(-t):0===this.negative?this._iaddn(t):1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this)},v.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&67108864<=this.words[n];n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=y(this.length,n+1),this},v.prototype.isubn=function(t){if(o('number'==typeof t),o(67108864>t),0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&0>this.words[n];n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},v.prototype.addn=function(t){return this.clone().iaddn(t)},v.prototype.subn=function(t){return this.clone().isubn(t)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(t,n,a){var r=t.length+a,s;this._expand(r);var d=0,l;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+d;var c=(0|t.words[s])*n;l-=67108863&c,d=(l>>26)-(0|c/67108864),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)l=(0|this.words[s+a])+d,d=l>>26,this.words[s+a]=67108863&l;if(0==d)return this.strip();for(o(-1==d),d=0,s=0;s<this.length;s++)l=-(0|this.words[s])+d,d=l>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},v.prototype._wordDiv=function(t,n){var r=this.length-t.length,o=this.clone(),s=t,d=0|s.words[s.length-1],l=this._countBits(d);r=26-l,0!=r&&(s=s.ushln(r),o.iushln(r),d=0|s.words[s.length-1]);var c=o.length-s.length,u;if('mod'!==n){u=new v(null),u.length=c+1,u.words=Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var m=o.clone()._ishlnsubmul(s,1,c);0===m.negative&&(o=m,u&&(u.words[c]=1));for(var h=c-1,g;0<=h;h--){for(g=67108864*(0|o.words[s.length+h])+(0|o.words[s.length+h-1]),g=_(0|g/d,67108863),o._ishlnsubmul(s,g,h);0!==o.negative;)g--,o.negative=0,o._ishlnsubmul(s,1,h),o.isZero()||(o.negative^=1);u&&(u.words[h]=g)}return u&&u.strip(),o.strip(),'div'!==n&&0!=r&&o.iushrn(r),{div:u||null,mod:o}},v.prototype.divmod=function(t,n,a){if(o(!t.isZero()),this.isZero())return{div:new v(0),mod:new v(0)};var r,s,d;return 0!==this.negative&&0===t.negative?(d=this.neg().divmod(t,n),'mod'!==n&&(r=d.div.neg()),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(d=this.divmod(t.neg(),n),'mod'!==n&&(r=d.div.neg()),{div:r,mod:d.mod}):0==(this.negative&t.negative)?t.length>this.length||0>this.cmp(t)?{div:new v(0),mod:this}:1===t.length?'div'===n?{div:this.divn(t.words[0]),mod:null}:'mod'===n?{div:null,mod:new v(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new v(this.modn(t.words[0]))}:this._wordDiv(t,n):(d=this.neg().divmod(t.neg(),n),'div'!==n&&(s=d.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:d.div,mod:s})},v.prototype.div=function(t){return this.divmod(t,'div',!1).div},v.prototype.mod=function(t){return this.divmod(t,'mod',!1).mod},v.prototype.umod=function(t){return this.divmod(t,'mod',!0).mod},v.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0===n.div.negative?n.mod:n.mod.isub(t),r=t.ushrn(1),o=t.andln(1),s=a.cmp(r);return 0>s||1===o&&0===s?n.div:0===n.div.negative?n.div.iaddn(1):n.div.isubn(1)},v.prototype.modn=function(t){o(67108863>=t);for(var n=0,a=this.length-1;0<=a;a--)n=(67108864%t*n+(0|this.words[a]))%t;return n},v.prototype.idivn=function(t){o(67108863>=t);for(var n=0,a=this.length-1,r;0<=a;a--)r=(0|this.words[a])+67108864*n,this.words[a]=0|r/t,n=r%t;return this.strip()},v.prototype.divn=function(t){return this.clone().idivn(t)},v.prototype.egcd=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=new v(0),l=new v(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var u=a.clone(),f=n.clone();!n.isZero();){for(var m=0,h=1;0==(n.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(n.iushrn(m);0<m--;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(f)),r.iushrn(1),s.iushrn(1);for(var g=0,b=1;0==(a.words[0]&b)&&26>g;++g,b<<=1);if(0<g)for(a.iushrn(g);0<g--;)(d.isOdd()||l.isOdd())&&(d.iadd(u),l.isub(f)),d.iushrn(1),l.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(d),s.isub(l)):(a.isub(n),d.isub(r),l.isub(s))}return{a:d,b:l,gcd:a.iushln(c)}},v.prototype._invmp=function(t){o(0===t.negative),o(!t.isZero());var n=this,a=t.clone();n=0===n.negative?n.clone():n.umod(t);for(var r=new v(1),s=new v(0),d=a.clone();0<n.cmpn(1)&&0<a.cmpn(1);){for(var l=0,c=1;0==(n.words[0]&c)&&26>l;++l,c<<=1);if(0<l)for(n.iushrn(l);0<l--;)r.isOdd()&&r.iadd(d),r.iushrn(1);for(var u=0,f=1;0==(a.words[0]&f)&&26>u;++u,f<<=1);if(0<u)for(a.iushrn(u);0<u--;)s.isOdd()&&s.iadd(d),s.iushrn(1);0<=n.cmp(a)?(n.isub(a),r.isub(s)):(a.isub(n),s.isub(r))}var m;return m=0===n.cmpn(1)?r:s,0>m.cmpn(0)&&m.iadd(t),m},v.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var o=this.clone(),a=n.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},v.prototype.invm=function(t){return this.egcd(t).a.umod(t)},v.prototype.isEven=function(){return 0==(1&this.words[0])},v.prototype.isOdd=function(){return 1==(1&this.words[0])},v.prototype.andln=function(t){return this.words[0]&t},v.prototype.bincn=function(t){o('number'==typeof t);var n=t%26,a=(t-n)/26,r=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=r,this;for(var s=r,d=a,l;0!=s&&d<this.length;d++)l=0|this.words[d],l+=s,s=l>>>26,l&=67108863,this.words[d]=l;return 0!=s&&(this.words[d]=s,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(t){var n=0>t;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;this.strip();var a;if(1<this.length)a=1;else{n&&(t=-t),o(67108863>=t,'Number is too big');var r=0|this.words[0];a=r===t?0:r<t?-1:1}return 0===this.negative?a:0|-a},v.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0===this.negative?n:0|-n},v.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,r=this.length-1;0<=r;r--){var o=0|this.words[r],a=0|t.words[r];if(o!=a){o<a?n=-1:o>a&&(n=1);break}}return n},v.prototype.gtn=function(t){return 1===this.cmpn(t)},v.prototype.gt=function(t){return 1===this.cmp(t)},v.prototype.gten=function(t){return 0<=this.cmpn(t)},v.prototype.gte=function(t){return 0<=this.cmp(t)},v.prototype.ltn=function(t){return-1===this.cmpn(t)},v.prototype.lt=function(t){return-1===this.cmp(t)},v.prototype.lten=function(t){return 0>=this.cmpn(t)},v.prototype.lte=function(t){return 0>=this.cmp(t)},v.prototype.eqn=function(t){return 0===this.cmpn(t)},v.prototype.eq=function(t){return 0===this.cmp(t)},v.red=function(t){return new N(t)},v.prototype.toRed=function(t){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),t.convertTo(this)._forceRed(t)},v.prototype.fromRed=function(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},v.prototype._forceRed=function(t){return this.red=t,this},v.prototype.forceRed=function(t){return o(!this.red,'Already a number in reduction context'),this._forceRed(t)},v.prototype.redAdd=function(t){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,t)},v.prototype.redIAdd=function(t){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,t)},v.prototype.redSub=function(t){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,t)},v.prototype.redISub=function(t){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,t)},v.prototype.redShl=function(t){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,t)},v.prototype.redMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.mul(this,t)},v.prototype.redIMul=function(t){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,t),this.red.imul(this,t)},v.prototype.redSqr=function(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(t){return o(this.red&&!t.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,t)};var D={k256:null,p224:null,p192:null,p25519:null};T.prototype._tmp=function(){var t=new v(null);return t.words=Array(b(this.n/13)),t},T.prototype.ireduce=function(t){var n=t,a;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),a=n.bitLength();while(a>this.n);var r=a<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},T.prototype.split=function(t,n){t.iushrn(this.n,0,n)},T.prototype.imulK=function(t){return t.imul(this.k)},r(E,T),E.prototype.split=function(t,n){for(var a=4194303,r=_(t.length,9),o=0;o<r;o++)n.words[o]=t.words[o];if(n.length=r,9>=t.length)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(n.words[n.length++]=s&a,o=10;o<t.length;o++){var d=0|t.words[o];t.words[o-10]=(d&a)<<4|s>>>22,s=d}s>>>=22,t.words[o-10]=s,t.length-=0===s&&10<t.length?10:9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0,r;a<t.length;a++)r=0|t.words[a],n+=977*r,t.words[a]=67108863&n,n=64*r+(0|n/67108864);return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(S,T),r(A,T),r(I,T),I.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var r=19*(0|t.words[a])+n,o=67108863&r;r>>>=26,t.words[a]=o,n=r}return 0!=n&&(t.words[t.length++]=n),t},v._prime=function(t){if(D[t])return D[t];var n;if('k256'===t)n=new E;else if('p224'===t)n=new S;else if('p192'===t)n=new A;else if('p25519'===t)n=new I;else throw new Error('Unknown prime '+t);return D[t]=n,n},N.prototype._verify1=function(t){o(0===t.negative,'red works only with positives'),o(t.red,'red works only with red numbers')},N.prototype._verify2=function(t,n){o(0==(t.negative|n.negative),'red works only with positives'),o(t.red&&t.red===n.red,'red works only with red numbers')},N.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},N.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},N.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a._forceRed(this)},N.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return 0<=a.cmp(this.m)&&a.isub(this.m),a},N.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a._forceRed(this)},N.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return 0>a.cmpn(0)&&a.iadd(this.m),a},N.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},N.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},N.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},N.prototype.isqr=function(t){return this.imul(t,t.clone())},N.prototype.sqr=function(t){return this.mul(t,t)},N.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var d=this.m.add(new v(1)).iushrn(2);return this.pow(n,d)}for(var l=this.m.subn(1),u=0;!l.isZero()&&0===l.andln(1);)u++,l.iushrn(1);o(!l.isZero());var s=new v(1).toRed(this),f=s.redNeg(),h=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new v(2*g*g).toRed(this);0!==this.pow(g,h).cmp(f);)g.redIAdd(f);for(var y=this.pow(g,l),c=this.pow(n,l.addn(1).iushrn(1)),r=this.pow(n,l),t=u;0!==r.cmp(s);){for(var m=r,w=0;0!==m.cmp(s);w++)m=m.redSqr();o(w<t);var x=this.pow(y,new v(1).iushln(t-w-1));c=c.redMul(x),y=x.redSqr(),r=r.redMul(y),t=w}return c},N.prototype.invm=function(t){var n=t._invmp(this.m);return 0===n.negative?this.imod(n):(n.negative=0,this.imod(n).redNeg())},N.prototype.pow=function(t,n){if(n.isZero())return new v(1).toRed(this);if(0===n.cmpn(1))return t.clone();var a=4,r=Array(1<<a);r[0]=new v(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var s=r[0],d=0,l=0,c=n.bitLength()%26;for(0==c&&(c=26),o=n.length-1;0<=o;o--){for(var u=n.words[o],f=c-1,m;0<=f;f--){if(m=1&u>>f,s!==r[0]&&(s=this.sqr(s)),0==m&&0==d){l=0;continue}d<<=1,d|=m,l++,l!=a&&(0!==o||0!==f)||(s=this.mul(s,r[d]),l=0,d=0)}c=26}return s},N.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},N.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},v.mont=function(t){return new j(t)},r(j,N),j.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},j.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},j.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new v(0)._forceRed(this);var r=n.mul(a),t=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},j.prototype.invm=function(t){var n=this.imod(t._invmp(this.m).mul(this.r2));return n._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(7)(t))},function(){},function(t,n,a){n.publicEncrypt=a(339),n.privateDecrypt=a(341),n.privateEncrypt=function(t,a){return n.publicEncrypt(t,a,!0)},n.publicDecrypt=function(t,a){return n.privateDecrypt(t,a,!0)}},function(t,n,a){(function(n){function r(t,a){var r=t.modulus.byteLength(),o=a.length,s=c('sha1').update(new n('')).digest(),d=s.length,h=2*d;if(o>r-h-2)throw new Error('message too long');var g=new n(r-o-h-2);g.fill(0);var b=r-d-1,y=l(d),v=f(n.concat([s,g,new n([1]),a],b),u(y,b)),w=f(y,u(v,d));return new m(n.concat([new n([0]),w,v],r))}function o(t,a,r){var o=a.length,d=t.modulus.byteLength();if(o>d-11)throw new Error('message too long');var l;return r?(l=new n(d-o-3),l.fill(255)):l=s(d-o-3),new m(n.concat([new n([0,r?1:2]),l,new n([0]),a],d))}function s(t){for(var a=new n(t),r=0,o=l(2*t),s=0,d;r<t;)s===o.length&&(o=l(2*t),s=0),d=o[s++],d&&(a[r++]=d);return a}var d=a(75),l=a(52),c=a(53),u=a(175),f=a(176),m=a(109),h=a(177),g=a(107);t.exports=function(t,n,a){var s=t.padding?t.padding:a?1:4;var l=d(t),c;if(4===s)c=r(l,n);else if(1===s)c=o(l,n,a);else if(3!==s)throw new Error('unknown padding');else if(c=new m(n),0<=c.cmp(l.modulus))throw new Error('data too long for modulus');return a?g(c,l):h(c,l)}}).call(n,a(0).Buffer)},function(){},function(t,n,a){(function(r){function n(t,a){var o=t.modulus,n=t.modulus.byteLength(),d=a.length,u=m('sha1').update(new r('')).digest(),f=u.length;if(0!==a[0])throw new Error('decryption error');var h=a.slice(1,f+1),g=a.slice(f+1),b=c(h,l(g,f)),y=c(g,l(b,n-f-1));if(s(u,y.slice(0,f)))throw new Error('decryption error');for(var v=f;0===y[v];)v++;if(1!==y[v++])throw new Error('decryption error');return y.slice(v)}function o(t,n,a){for(var r=n.slice(0,2),o=2,s=0;0!==n[o++];)if(o>=n.length){s++;break}var d=n.slice(2,o-1),l=n.slice(o-1,o);if(('0002'!==r.toString('hex')&&!a||'0001'!==r.toString('hex')&&a)&&s++,8>d.length&&s++,s)throw new Error('decryption error');return n.slice(o)}function s(t,n){t=new r(t),n=new r(n);var a=0,o=t.length;t.length!==n.length&&(a++,o=_(t.length,n.length));for(var s=-1;++s<o;)a+=t[s]^n[s];return a}var d=a(75),l=a(175),c=a(176),u=a(109),f=a(107),m=a(53),h=a(177);t.exports=function(t,a,s){var l=t.padding?t.padding:s?1:4;var c=d(t),m=c.modulus.byteLength();if(a.length>m||0<=new u(a).cmp(c.modulus))throw new Error('decryption error');var g=s?h(new u(a),c):f(a,c);var b=new r(m-g.length);if(b.fill(0),g=r.concat([b,g],m),4===l)return n(c,g);if(1===l)return o(c,g,s);if(3===l)return g;throw new Error('unknown padding')}}).call(n,a(0).Buffer)},function(t,n,a){'use strict';var r={acl:a(148),ns:a(9),widgets:a(21),aclControl:t.exports={}},o=a(23);r.aclControl.preventBrowserDropEvents=function(t){function n(t){t.stopPropagation(),t.preventDefault()}if(console.log('preventBrowserDropEvents called.'),'undefined'!=typeof tabulator){if(tabulator.preventBrowserDropEventsDone)return;tabulator.preventBrowserDropEventsDone=!0}t.addEventListener('drop',function(t){0<t.dataTransfer.files.length&&!confirm('Are you sure you want to drop this file here? (Cancel opens it in a new tab)')&&(t.stopPropagation(),t.preventDefault(),console.log('@@@@ document-level DROP suppressed: '+t.dataTransfer.dropEffect))},!1),t.addEventListener('dragenter',n,!1),t.addEventListener('dragover',n,!1)},r.aclControl.shortNameForFolder=function(t){var n=t.uri;'/'===n.slice(-1)&&(n=n.slice(0,-1));var a=n.lastIndexOf('/');return 0<=a&&(n=n.slice(a+1)),n||'/'},r.aclControl.ACLControlBox5=function(t,n,s,d){var a=d.updater||new $rdf.UpdateManager(d),l=r.ns.acl,c=t.doc(),u=n.createElement('table');u.setAttribute('style','margin: 1em; border: 0.1em #ccc ;');var f=u.appendChild(n.createElement('tr'));f.textContent='Sharing for '+s+' '+o.label(t),f.setAttribute('style','min-width: 20em; padding: 1em; font-size: 120%; border-bottom: 0.1em solid red; margin-bottom: 2em;');var m=u.appendChild(n.createElement('tr')),h=m.appendChild(n.createElement('div'));h.setAttribute('style','padding: 2em;');var g=u.appendChild(n.createElement('tr')),b=g.appendChild(n.createElement('table')),y=u.appendChild(n.createElement('tr')),v='border-radius: 0.3em; background-color: white; border: 0.01em solid #888;',w=function(a,o,s,d,c){var u=c.doingDefault?'default':'main';c=c||{};var f=r.acl.readACL(o,s,d,c.doingDefaults),m;a[u]=m=r.acl.ACLbyCombination(f);var h=function(t){for(var n=['Read','Append','Write','Control'],a=[],r=0;4>r;r++)t&1<<r&&a.push('http://www.w3.org/ns/auth/acl#'+n[r]);return a.sort(),a=a.join('\n'),a},g={1:'Viewers',2:'Submitters',3:'Posters',5:'Editors',9:'Owners (write locked)',13:'Owners'},b={1:!0,2:!0,3:!0,5:!0,13:!0},y={1:'can read but not change information',2:'can add new information but not read any',3:'can add new information, and read but not change existing information',5:'can read and change information',9:'can read and control sharing, currently write-locked.',13:'can read, write, and control sharing.'},v={1:'green',2:'#cc0',3:'orange',5:'red',9:'blue',13:'purple'},w=function(t){for(var n='',a=['Read','Append','Write','Control'],r=0;4>r;r++)t&1<<r&&(n+=a[r])},x=function(t){for(var n=0,r;16>n;n++)if(r=m[h(n)],r)for(var a=0;a<r.length;a++)for(;a<r.length&&r[a][1]===t;)r.splice(a,1)},_=function(t){var n=r.ns,a=$rdf.sym(t),o=d.findTypeURIs(a);for(var s in o)console.log('    drop object type includes: '+s);if(t.startsWith('http')&&3===t.split('/').length)return{pred:'origin',obj:a};if(n.vcard('WebID').uri in o)return{pred:'agent',obj:a};if(n.vcard('Group').uri in o)return{pred:'agentGroup',obj:a};if(a.sameTerm(n.foaf('Agent'))||a.sameTerm(n.rdf('Resource'))||a.sameTerm(n.owl('Thing')))return{pred:'agentClass',obj:a};if(n.vcard('Individual').uri in o||n.foaf('Person').uri in o||n.foaf('Agent').uri in o){var l=d.any(a,n.foaf('preferredURI'));return l?{pred:'agent',obj:$rdf.sym(l)}:{pred:'agent',obj:a}}return n.solid('AppProvider').uri in o?{pred:'origin',obj:a}:n.solid('AppProviderClass').uri in o?{pred:'originClass',obj:a}:void console.log('    Triage fails for '+t)};a.saveBack=function(t){var n=$rdf.graph();a.isContainer?a.defaultsDiffer?(r.acl.makeACLGraphbyCombo(n,o,a.mainByCombo,s,!0),r.acl.makeACLGraphbyCombo(n,o,a.defByCombo,s,!1,!0)):r.acl.makeACLGraphbyCombo(n,o,a.mainByCombo,s,!0,!0):r.acl.makeACLGraphbyCombo(n,o,a.mainByCombo,s,!0);var l=n.updater||new $rdf.UpdateManager(n);l.put(s,n.statementsMatching(void 0,void 0,void 0,s),'text/turtle',function(a,r,o){r?(d.fetcher.unload(s),d.add(n.statements),d.fetcher.requested[s.uri]='done',console.log('ACL modification: success!')):console.log('ACL file save failed: '+o),t(r)})};var C=function(o,s){var u=a.appendChild(n.createElement('tr'));u.combo=s,u.setAttribute('style','color: '+(c.modify?v[E]||'black':'#888')+';');var f=u.appendChild(n.createElement('td'));f.textContent=g[E]||w[E],f.setAttribute('style','padding-bottom: 2em;');var m=u.appendChild(n.createElement('td')),h=m.appendChild(n.createElement('table'));h.style.width='100%';var b=u.appendChild(n.createElement('td'));b.textContent=y[E]||'Unusual combination',b.setAttribute('style','max-width: 30%;');var k=function(t,d){h.NoneTR&&(h.removeChild(h.NoneTR),delete h.NoneTR);var u={};c.modify&&(u.deleteFunction=function(){for(var n=o[s],r=0;r<n.length;r++)if(n[r][0]===t&&n[r][1]===d){n.splice(r,1);break}a.saveBack(function(t){t&&h.removeChild(f)})});var f=h.appendChild(r.widgets.personTR(n,l(t),$rdf.sym(d),u));f.predObj=[t.uri,d.uri]},C=function(t){var s=o[t],d;if(s&&s.length){var l=h.children;s.sort();for(var c=0;c<l.length;c++)l[c].trashme=!0;for(var u=0,a;u<s.length;u++){for(a=!1,d=0;d<l.length;d++)if(l[d].predObj&&l[d].predObj[0]===s[u][0]&&l[d].predObj[1]===s[u][1]){a=!0,delete l[d].trashme;break}a||k(s[u][0],s[u][1])}for(d=l.length-1;0<=d;d--)l[d].trashme&&h.removeChild(l[d])}else{r.widgets.clearElement(h);var f=h.appendChild(n.createElement('tr'));f.textContent='None',f.setAttribute('style','padding: 1em;'),h.NoneTR=f}};C(s),u.refresh=function(){C(s)},c.modify&&(u.addEventListener('dragover',function(t){t.preventDefault(),t.dataTransfer.dropEffect='copy'}),u.addEventListener('dragenter',function(t){console.log('dragenter event dropEffect: '+t.dataTransfer.dropEffect),this.style.backgroundColor='#ccc',t.dataTransfer.dropEffect='link',console.log('dragenter event dropEffect 2: '+t.dataTransfer.dropEffect)}),u.addEventListener('dragleave',function(t){console.log('dragleave event dropEffect: '+t.dataTransfer.dropEffect),this.style.backgroundColor='white'}),u.addEventListener('drop',function(n){n.preventDefault&&n.preventDefault(),console.log('Drop event. dropEffect: '+n.dataTransfer.dropEffect),console.log('Drop event. types: '+(n.dataTransfer.types?n.dataTransfer.types.join(', '):'NOPE'));var r=null,l=this,c;if(n.dataTransfer.types){for(var u=0,f;u<n.dataTransfer.types.length;u++)f=n.dataTransfer.types[u],'text/uri-list'===f?(r=n.dataTransfer.getData(f).split('\n'),console.log('Dropped text/uri-list: '+r)):'text/plain'===f&&(c=n.dataTransfer.getData(f));null===r&&c&&'http'===c.slice(0,4)&&(r=c,console.log('Waring: Poor man\'s drop: using text for URI'))}else r=[n.dataTransfer.getData('Text')],console.log('@@ WARNING non-standrad drop event: '+r[0]);return console.log('Dropped URI list (2): '+r),r&&r.map(function(n){var r=function(){s in o||(o[s]=[]),x(n),o[s].push([c.pred,c.obj.uri]),console.log('ACL: setting access to '+t+' by '+c.pred+': '+c.obj),a.saveBack(function(t){t&&(l.style.backgroundColor='white',T())})},c=_(n);return c?void r():(console.log('   looking up dropped thing '+n),void d.fetcher.nowOrWhenFetched(n,function(t,a){t?(c=_(n),c?r():console.log('Error: Drop fails to drop appropriate thing! '+n)):console.log('Error looking up dropped thing '+n+': '+a)}))}),!1}))},T=function(){for(var t=a.children,n=0;n<t.length;n++)t[n].refresh&&t[n].refresh()},E,k;for(E=15;0<E;E--)k=h(E),(c.modify&&b[E]||m[k])&&C(m,k);return m};return r.acl.getACLorDefault(c,function(t,u,f,m,g,x){var _=!u;if(!t)h.textContent+='Error reading '+(_?' default ':'')+'ACL. status '+f+': '+m;else if(b.isContainer='/'===f.uri.slice(-1),_){var k=d.each(void 0,l('defaultForNew'),g,x);if(!k.length)h.textContent+=' (No defaults given.)';else{h.innerHTML='',h.textContent='The sharing for this '+s+' is the default for folder ';var C=h.appendChild(n.createElement('a'));C.setAttribute('href',g.uri),C.textContent=r.aclControl.shortNameForFolder(g);var T=r.acl.adoptACLDefault(c,m,g,x);w(b,c,m,T,{modify:!1}),b.style.cssText='color: #777;';var E=y.appendChild(n.createElement('button'));E.textContent='Set specific sharing\nfor this '+s,E.style.cssText=v,E.addEventListener('click',function(){a.put(m,T.statements,'text/turtle',function(t,n,a){n?(h.textContent=' (Now editing specific access for this '+s+')',y.removeChild(E)):h.textContent+=' (Error writing back access control file: '+a+')'})})}}else{var S=function(t){R=y.appendChild(n.createElement('button')),R.textContent='Stop specific sharing for this '+s+' -- just use default',t&&(R.textContent+=' for '+o.label(t)),R.style.cssText=v,R.addEventListener('click',function(){d.fetcher.delete(m.uri).then(function(){h.textContent=' The sharing for this '+s+' is now the default.',y.removeChild(R),b.style.cssText='color: #777;'}).catch(function(t){h.textContent+=' (Error deleting access control file: '+m+': '+t+')'})})},A=f.uri.split('#')[0],I=A.slice(0,-1).lastIndexOf('/'),N=A.indexOf('//'),j=0<=N&&I<N+2||0>I?null:A.slice(0,I+1),R,L;if(j?r.acl.getACLorDefault($rdf.sym(j),function(t,n,a,r,o){t&&(L=n?a:o),S(L)}):S(),b.addControlForDefaults=function(){b.notice.textContent='Access to things within this folder:',b.notice.style.cssText='font-size: 120%; color: black;';var t=r.widgets.clearElement(b.offer).appendChild(n.createElement('button'));t.innerHTML='<p>Set default for folder contents to<br />just track the sharing for the folder</p>',t.style.cssText=v,t.addEventListener('click',function(){delete b.defaultsDiffer,delete b.defByCombo,b.saveBack(function(t){t&&b.removeControlForDefaults()})},!1),b.defaultsDiffer=!0,b.defByCombo=w(b,f,m,d,{modify:!0,doingDefaults:!0})},b.removeControlForDefaults=function(){h.textContent='This is also the default for things in this folder.',b.notice.textContent='Sharing for things within the folder currently tracks sharing for the folder.',b.notice.style.cssText='font-size: 80%; color: #888;';var t=r.widgets.clearElement(b.offer).appendChild(n.createElement('button'));for(t.innerHTML='<p>Set the sharing of folder contets <br />separately from the sharing for the folder</p>',t.style.cssText=v,t.addEventListener('click',function(){b.addControlForDefaults(),h.textContent=''});b.divider.nextSibling;)b.removeChild(b.divider.nextSibling);h.textContent='This is now also the default for things in this folder.'},b.isContainer){var O=r.acl.readACL(f,m,d),P=r.acl.readACL(f,m,d,!0);b.defaultsDiffer=!r.acl.sameACL(O,P),console.log('Defaults differ ACL: '+b.defaultsDiffer)}b.mainByCombo=w(b,f,m,d,{modify:!0}),b.divider=b.appendChild(n.createElement('tr')),b.notice=b.divider.appendChild(n.createElement('td')),b.notice.style.cssText='font-size: 80%; color: #888;',b.offer=b.divider.appendChild(n.createElement('td')),b.notice.setAttribute('colspan','2'),b.defaultsDiffer?b.addControlForDefaults():b.removeControlForDefaults()}}),u}},function(t,n,a){'use strict';var r=a(344);t.exports={Signup:a(358),login:r.login,currentUser:r.currentUser}},function(t,n,a){'use strict';(function(n){function r(t){return t=Object.assign({},c,t),o(u.PRIMARY,t).then(function(n){return n||o(u.SECONDARY,t)})}function o(t,a){return n.IS_BROWSER?s(t,a):d(t,a)}function s(t,n){var a;return t===u.PRIMARY?a=n.authEndpoint||window.location.origin+window.location.pathname:t===u.SECONDARY?a=n.fallbackAuthEndpoint:void 0,new Promise(function(t,n){var r=new XMLHttpRequest;r.withCredentials=!0,r.addEventListener('load',function(){t(r.getResponseHeader('user')||null)}),r.addEventListener('error',function(t){n(t)}),r.open('HEAD',a),r.send()})}function d(t,r){if(!(r.key&&r.cert))throw new Error('Must provide TLS key and cert when running in node');var o;t===u.PRIMARY?o=r.authEndpoint:t===u.SECONDARY?o=r.fallbackAuthEndpoint:void 0;var s,d,c;return n.IS_BROWSER||(s=a(345),d=a(346),c=a(182)),Promise.all([r.key,r.cert].map(function(t){return new Promise(function(n,a){s.readFile(t,function(t,r){return t?a(t):n(r)})})})).then(function(t){var n=l(t,2),a=n[0],r=n[1],s=c.parse(o),u={method:'HEAD',hostname:s.hostname,port:s.port,path:s.path,timeout:5e3,key:a,cert:r};return new Promise(function(t,n){var a=d.request(u,function(n){t(n.headers.user||null)});a.on('error',n),a.end()})})}var l=function(){function t(t,n){var a=[],r=!0,o=!1,s;try{for(var d=t[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(a.push(l.value),!(n&&a.length===n));r=!0);}catch(t){o=!0,s=t}finally{try{!r&&d['return']&&d['return']()}finally{if(o)throw s}}return a}return function(n,a){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,a);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),c=a(180),u={PRIMARY:0,SECONDARY:1};t.exports={currentUser:r,login:r}}).call(n,a(3))},function(t){t.exports=r},function(t,n,a){var r=a(347),o=t.exports;for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);o.request=function(t,n){return t||(t={}),t.scheme='https',t.protocol='https:',r.request.call(this,t,n)}},function(t,n,a){(function(t){var r=a(348),o=a(351),s=a(352),d=a(182),l=n;l.request=function(n,a){n='string'==typeof n?d.parse(n):o(n);var s=-1===t.location.protocol.search(/^https?:$/)?'http:':'',l=n.protocol||s,c=n.hostname||n.host,u=n.port,f=n.path||'/';c&&-1!==c.indexOf(':')&&(c='['+c+']'),n.url=(c?l+'//'+c:'')+(u?':'+u:'')+f,n.method=(n.method||'GET').toUpperCase(),n.headers=n.headers||{};var m=new r(n);return a&&m.on('response',a),m},l.get=function(t,n){var a=l.request(t,n);return a.end(),a},l.Agent=function(){},l.Agent.defaultMaxSockets=4,l.STATUS_CODES=s,l.METHODS=['CHECKOUT','CONNECT','COPY','DELETE','GET','HEAD','LOCK','M-SEARCH','MERGE','MKACTIVITY','MKCOL','MOVE','NOTIFY','OPTIONS','PATCH','POST','PROPFIND','PROPPATCH','PURGE','PUT','REPORT','SEARCH','SUBSCRIBE','TRACE','UNLOCK','UNSUBSCRIBE']}).call(n,a(3))},function(t,n,a){(function(n,r,o){function s(t,n){return l.fetch&&n?'fetch':l.mozchunkedarraybuffer?'moz-chunked-arraybuffer':l.msstream?'ms-stream':l.arraybuffer&&t?'arraybuffer':l.vbArray&&t?'text:vbarray':'text'}function d(t){try{var n=t.status;return null!==n&&0!==n}catch(t){return!1}}var l=a(181),c=a(1),u=a(349),f=a(49),m=a(350),h=u.IncomingMessage,g=u.readyStates,b=t.exports=function(t){var a=this;f.Writable.call(a),a._opts=t,a._body=[],a._headers={},t.auth&&a.setHeader('Authorization','Basic '+new n(t.auth).toString('base64')),Object.keys(t.headers).forEach(function(n){a.setHeader(n,t.headers[n])});var r=!0,o;if('disable-fetch'===t.mode||'timeout'in t)r=!1,o=!0;else if('prefer-streaming'===t.mode)o=!1;else if('allow-wrong-content-type'===t.mode)o=!l.overrideMimeType;else if(!t.mode||'default'===t.mode||'prefer-fast'===t.mode)o=!0;else throw new Error('Invalid value for opts.mode');a._mode=s(o,r),a.on('finish',function(){a._onFinish()})};c(b,f.Writable),b.prototype.setHeader=function(t,n){var a=this,r=t.toLowerCase();-1!==y.indexOf(r)||(a._headers[r]={name:t,value:n})},b.prototype.getHeader=function(t){var n=this._headers[t.toLowerCase()];return n?n.value:null},b.prototype.removeHeader=function(t){var n=this;delete n._headers[t.toLowerCase()]},b.prototype._onFinish=function(){var t=this;if(!t._destroyed){var a=t._opts,s=t._headers,d=null;'GET'!==a.method&&'HEAD'!==a.method&&(l.blobConstructor?d=new r.Blob(t._body.map(function(t){return m(t)}),{type:(s['content-type']||{}).value||''}):d=n.concat(t._body).toString());var c=[];if(Object.keys(s).forEach(function(t){var n=s[t].name,a=s[t].value;Array.isArray(a)?a.forEach(function(t){c.push([n,t])}):c.push([n,a])}),'fetch'===t._mode)r.fetch(t._opts.url,{method:t._opts.method,headers:c,body:d||void 0,mode:'cors',credentials:a.withCredentials?'include':'same-origin'}).then(function(n){t._fetchResponse=n,t._connect()},function(n){t.emit('error',n)});else{var u=t._xhr=new r.XMLHttpRequest;try{u.open(t._opts.method,t._opts.url,!0)}catch(n){return void o.nextTick(function(){t.emit('error',n)})}'responseType'in u&&(u.responseType=t._mode.split(':')[0]),'withCredentials'in u&&(u.withCredentials=!!a.withCredentials),'text'===t._mode&&'overrideMimeType'in u&&u.overrideMimeType('text/plain; charset=x-user-defined'),'timeout'in a&&(u.timeout=a.timeout,u.ontimeout=function(){t.emit('timeout')}),c.forEach(function(t){u.setRequestHeader(t[0],t[1])}),t._response=null,u.onreadystatechange=function(){switch(u.readyState){case g.LOADING:case g.DONE:t._onXHRProgress();}},'moz-chunked-arraybuffer'===t._mode&&(u.onprogress=function(){t._onXHRProgress()}),u.onerror=function(){t._destroyed||t.emit('error',new Error('XHR error'))};try{u.send(d)}catch(n){return void o.nextTick(function(){t.emit('error',n)})}}}},b.prototype._onXHRProgress=function(){var t=this;!d(t._xhr)||t._destroyed||(!t._response&&t._connect(),t._response._onXHRProgress())},b.prototype._connect=function(){var t=this;t._destroyed||(t._response=new h(t._xhr,t._fetchResponse,t._mode),t._response.on('error',function(n){t.emit('error',n)}),t.emit('response',t._response))},b.prototype._write=function(t,n,a){var r=this;r._body.push(t),a()},b.prototype.abort=b.prototype.destroy=function(){var t=this;t._destroyed=!0,t._response&&(t._response._destroyed=!0),t._xhr&&t._xhr.abort()},b.prototype.end=function(t,n,a){var r=this;'function'==typeof t&&(a=t,t=void 0),f.Writable.prototype.end.call(r,t,n,a)},b.prototype.flushHeaders=function(){},b.prototype.setTimeout=function(){},b.prototype.setNoDelay=function(){},b.prototype.setSocketKeepAlive=function(){};var y=['accept-charset','accept-encoding','access-control-request-headers','access-control-request-method','connection','content-length','cookie','cookie2','date','dnt','expect','host','keep-alive','origin','referer','te','trailer','transfer-encoding','upgrade','user-agent','via']}).call(n,a(0).Buffer,a(3),a(5))},function(t,n,a){(function(t,r,o){var s=a(181),d=a(1),l=a(49),c=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=n.IncomingMessage=function(n,a,o){var d=this;if(l.Readable.call(d),d._mode=o,d.headers={},d.rawHeaders=[],d.trailers={},d.rawTrailers=[],d.on('end',function(){t.nextTick(function(){d.emit('close')})}),'fetch'===o){function t(){c.read().then(function(n){return d._destroyed?void 0:n.done?void d.push(null):void(d.push(new r(n.value)),t())}).catch(function(t){d.emit('error',t)})}d._fetchResponse=a,d.url=a.url,d.statusCode=a.status,d.statusMessage=a.statusText,a.headers.forEach(function(t,n){d.headers[n.toLowerCase()]=t,d.rawHeaders.push(n,t)});var c=a.body.getReader();t()}else{d._xhr=n,d._pos=0,d.url=n.responseURL,d.statusCode=n.status,d.statusMessage=n.statusText;var u=n.getAllResponseHeaders().split(/\r?\n/);if(u.forEach(function(t){var n=t.match(/^([^:]+):\s*(.*)/);if(n){var a=n[1].toLowerCase();'set-cookie'===a?(void 0===d.headers[a]&&(d.headers[a]=[]),d.headers[a].push(n[2])):void 0===d.headers[a]?d.headers[a]=n[2]:d.headers[a]+=', '+n[2],d.rawHeaders.push(n[1],n[2])}}),d._charset='x-user-defined',!s.overrideMimeType){var f=d.rawHeaders['mime-type'];if(f){var m=f.match(/;\s*charset=([^;])(;|$)/);m&&(d._charset=m[1].toLowerCase())}d._charset||(d._charset='utf-8')}}};d(u,l.Readable),u.prototype._read=function(){},u.prototype._onXHRProgress=function(){var t=this,n=t._xhr,a=null;switch(t._mode){case'text:vbarray':if(n.readyState!==c.DONE)break;try{a=new o.VBArray(n.responseBody).toArray()}catch(t){}if(null!==a){t.push(new r(a));break}case'text':try{a=n.responseText}catch(n){t._mode='text:vbarray';break}if(a.length>t._pos){var s=a.substr(t._pos);if('x-user-defined'===t._charset){for(var d=new r(s.length),l=0;l<s.length;l++)d[l]=255&s.charCodeAt(l);t.push(d)}else t.push(s,t._charset);t._pos=a.length}break;case'arraybuffer':if(n.readyState!==c.DONE||!n.response)break;a=n.response,t.push(new r(new Uint8Array(a)));break;case'moz-chunked-arraybuffer':if(a=n.response,n.readyState!==c.LOADING||!a)break;t.push(new r(new Uint8Array(a)));break;case'ms-stream':if(a=n.response,n.readyState!==c.LOADING)break;var u=new o.MSStreamReader;u.onprogress=function(){u.result.byteLength>t._pos&&(t.push(new r(new Uint8Array(u.result.slice(t._pos)))),t._pos=u.result.byteLength)},u.onload=function(){t.push(null)},u.readAsArrayBuffer(a);}t._xhr.readyState===c.DONE&&'ms-stream'!==t._mode&&t.push(null)}}).call(n,a(5),a(0).Buffer,a(3))},function(t,n,a){var r=a(0).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if('function'==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var n=new Uint8Array(t.length),a=t.length,o=0;o<a;o++)n[o]=t[o];return n.buffer}throw new Error('Argument must be a Buffer')}},function(t){t.exports=function(){for(var t={},a=0,r;a<arguments.length;a++)for(var o in r=arguments[a],r)n.call(r,o)&&(t[o]=r[o]);return t};var n=Object.prototype.hasOwnProperty},function(t){t.exports={100:'Continue',101:'Switching Protocols',102:'Processing',200:'OK',201:'Created',202:'Accepted',203:'Non-Authoritative Information',204:'No Content',205:'Reset Content',206:'Partial Content',207:'Multi-Status',208:'Already Reported',226:'IM Used',300:'Multiple Choices',301:'Moved Permanently',302:'Found',303:'See Other',304:'Not Modified',305:'Use Proxy',307:'Temporary Redirect',308:'Permanent Redirect',400:'Bad Request',401:'Unauthorized',402:'Payment Required',403:'Forbidden',404:'Not Found',405:'Method Not Allowed',406:'Not Acceptable',407:'Proxy Authentication Required',408:'Request Timeout',409:'Conflict',410:'Gone',411:'Length Required',412:'Precondition Failed',413:'Payload Too Large',414:'URI Too Long',415:'Unsupported Media Type',416:'Range Not Satisfiable',417:'Expectation Failed',418:'I\'m a teapot',421:'Misdirected Request',422:'Unprocessable Entity',423:'Locked',424:'Failed Dependency',425:'Unordered Collection',426:'Upgrade Required',428:'Precondition Required',429:'Too Many Requests',431:'Request Header Fields Too Large',451:'Unavailable For Legal Reasons',500:'Internal Server Error',501:'Not Implemented',502:'Bad Gateway',503:'Service Unavailable',504:'Gateway Timeout',505:'HTTP Version Not Supported',506:'Variant Also Negotiates',507:'Insufficient Storage',508:'Loop Detected',509:'Bandwidth Limit Exceeded',510:'Not Extended',511:'Network Authentication Required'}},function(t,n,a){(function(t,r){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(s){function d(t){throw new RangeError(M[t])}function l(t,n){for(var a=t.length,r=[];a--;)r[a]=n(t[a]);return r}function c(t,n){var a=t.split('@'),r='';1<a.length&&(r=a[0]+'@',t=a[1]),t=t.replace(P,'.');var o=t.split('.'),s=l(o,n).join('.');return r+s}function u(t){for(var n=[],a=0,r=t.length,o,s;a<r;)o=t.charCodeAt(a++),55296<=o&&56319>=o&&a<r?(s=t.charCodeAt(a++),56320==(64512&s)?n.push(((1023&o)<<10)+(1023&s)+65536):(n.push(o),a--)):n.push(o);return n}function f(t){return l(t,function(t){var n='';return 65535<t&&(t-=65536,n+=U(55296|1023&t>>>10),t=56320|1023&t),n+=U(t),n}).join('')}function m(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:T}function h(t,n){return t+22+75*(26>t)-((0!=n)<<5)}function g(t,n,a){var r=0;for(t=a?B(t/I):t>>1,t+=B(t/n);t>D*S>>1;r+=T)t=B(t/D);return B(r+(D+1)*t/(t+A))}function b(a){var r=[],o=a.length,s=0,l=R,n=N,c,u,h,b,y,v,w,x,_,t;for(u=a.lastIndexOf(L),0>u&&(u=0),h=0;h<u;++h)128<=a.charCodeAt(h)&&d('not-basic'),r.push(a.charCodeAt(h));for(b=0<u?u+1:0;b<o;){for(y=s,v=1,w=T;;w+=T){if(b>=o&&d('invalid-input'),x=m(a.charCodeAt(b++)),(x>=T||x>B((C-s)/v))&&d('overflow'),s+=x*v,_=w<=n?E:w>=n+S?S:w-n,x<_)break;t=T-_,v>B(C/t)&&d('overflow'),v*=t}c=r.length+1,n=g(s-y,c,0==y),B(s/c)>C-l&&d('overflow'),l+=B(s/c),s%=c,r.splice(s++,0,l)}return f(r)}function y(a){var r=[],o,n,s,l,c,f,b,m,y,v,t,w,x,_,k;for(a=u(a),w=a.length,o=R,n=0,c=N,f=0;f<w;++f)t=a[f],128>t&&r.push(U(t));for(s=l=r.length,l&&r.push(L);s<w;){for(b=C,f=0;f<w;++f)t=a[f],t>=o&&t<b&&(b=t);for(x=s+1,b-o>B((C-n)/x)&&d('overflow'),n+=(b-o)*x,o=b,f=0;f<w;++f)if(t=a[f],t<o&&++n>C&&d('overflow'),t==o){for(m=n,y=T;;y+=T){if(v=y<=c?E:y>=c+S?S:y-c,m<v)break;k=m-v,_=T-v,r.push(U(h(v+k%_,0))),m=B(k/_)}r.push(U(h(m,0))),c=g(n,x,s==l),n=0,++s}++n,++o}return r.join('')}var v='object'==typeof n&&n&&!n.nodeType&&n,_='object'==typeof t&&t&&!t.nodeType&&t,k='object'==typeof r&&r;(k.global===k||k.window===k||k.self===k)&&(s=k);var C=2147483647,T=36,E=1,S=26,A=38,I=700,N=72,R=128,L='-',j=/^xn--/,O=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:'Overflow: input needs wider integers to process',"not-basic":'Illegal input >= 0x80 (not a basic code point)',"invalid-input":'Invalid input'},D=T-E,B=w,U=x,q;q={version:'1.4.1',ucs2:{decode:u,encode:f},decode:b,encode:y,toASCII:function(t){return c(t,function(t){return O.test(t)?'xn--'+y(t):t})},toUnicode:function(t){return c(t,function(t){return j.test(t)?b(t.slice(4).toLowerCase()):t})}};o=function(){return q}.call(n,a,n,t),!(void 0!==o&&(t.exports=o))})(this)}).call(n,a(7)(t),a(3))},function(t){'use strict';t.exports={isString:function(t){return'string'==typeof t},isObject:function(t){return'object'==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,n,a){'use strict';n.decode=n.parse=a(356),n.encode=n.stringify=a(357)},function(t){'use strict';function n(t,n){return Object.prototype.hasOwnProperty.call(t,n)}t.exports=function(t,r,o,s){r=r||'&',o=o||'=';var d={};if('string'!=typeof t||0===t.length)return d;var l=/\+/g;t=t.split(r);var c=1e3;s&&'number'==typeof s.maxKeys&&(c=s.maxKeys);var u=t.length;0<c&&u>c&&(u=c);for(var f=0;f<u;++f){var m=t[f].replace(l,'%20'),h=m.indexOf(o),g,b,y,w;0<=h?(g=m.substr(0,h),b=m.substr(h+1)):(g=m,b=''),y=decodeURIComponent(g),w=decodeURIComponent(b),n(d,y)?a(d[y])?d[y].push(w):d[y]=[d[y],w]:d[y]=w}return d};var a=Array.isArray||function(t){return'[object Array]'===Object.prototype.toString.call(t)}},function(t){'use strict';function n(t,n){if(t.map)return t.map(n);for(var a=[],r=0;r<t.length;r++)a.push(n(t[r],r));return a}var a=function(t){switch(typeof t){case'string':return t;case'boolean':return t?'true':'false';case'number':return isFinite(t)?t:'';default:return'';}};t.exports=function(t,s,d,l){return s=s||'&',d=d||'=',null===t&&(t=void 0),'object'==typeof t?n(o(t),function(o){var l=encodeURIComponent(a(o))+d;return r(t[o])?n(t[o],function(t){return l+encodeURIComponent(a(t))}).join(s):l+encodeURIComponent(a(t[o]))}).join(s):l?encodeURIComponent(a(l))+d+encodeURIComponent(a(t)):''};var r=Array.isArray||function(t){return'[object Array]'===Object.prototype.toString.call(t)},o=Object.keys||function(t){var n=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.push(a);return n}},function(t,n,a){'use strict';function r(t){this.config=t||o}var o=a(180);r.prototype.listen=function(){var t=new Promise(function(t,n){var a=window.addEventListener?'addEventListener':'attachEvent',r=window[a],o='attachEvent'==a?'onmessage':'message';r(o,function(a){var r=a.data;if('User:'===r.slice(0,5)){var o=r.slice(5,r.length);return o&&0<o.length&&'http'===o.slice(0,4)?t(o):n(o)}},!0)});return t},r.prototype.signup=function(t){t=t||this.config.signupEndpoint;var n=this.config.signupWindowWidth,a=this.config.signupWindowHeight,r=window.screen.width/2-(n/2+10),o=window.screen.height/2-(a/2+50),s=t+'?origin='+encodeURIComponent(window.location.origin);window.open(s,'Solid signup','resizable,scrollbars,status,width='+n+',height='+a+',left='+r+',top='+o);var d=this;return new Promise(function(t){d.listen().then(function(n){return t(n)})})},t.exports=r},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.logout=n.currentSession=n.popupLogin=n.login=n.fetch=void 0;var s=a(77),d=o(s),l=a(36),c=o(l),u=a(37),f=o(u),m=function(){var t=(0,f.default)(c.default.mark(function t(n,a){var r;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==a.length){t.next=2;break}return t.abrupt('return',null);case 2:return t.prev=2,t.next=5,a[0]();case 5:if(r=t.sent,!r){t.next=8;break}return t.abrupt('return',(0,x.saveSession)(n)(r));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t['catch'](2),console.error(t.t0);case 13:return t.abrupt('return',m(n,a.slice(1)));case 14:case'end':return t.stop();}},t,this,[[2,10]])}));return function(){return t.apply(this,arguments)}}(),h=n.login=function(){var t=(0,f.default)(c.default.mark(function t(n,a){var r,o;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,d.default)({},A(),a),t.next=3,T.login(n);case 3:if(r=t.sent,!r){t.next=6;break}return t.abrupt('return',(0,x.saveSession)(a.storage)(r));case 6:return t.next=8,S.login(n,a);case 8:return o=t.sent,t.abrupt('return',o);case 10:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}(),g=n.popupLogin=function(){var t=(0,f.default)(c.default.mark(function t(n){var a,r;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.popupUri){t.next=2;break}throw new Error('Must provide options.popupUri');case 2:return n.callbackUri||(n.callbackUri=n.popupUri),n=(0,d.default)({},A(),n),a=(0,w.openIdpSelector)(n),t.next=7,(0,w.startPopupServer)(n.storage,a,n);case 7:return r=t.sent,t.abrupt('return',r);case 9:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}(),b=n.currentSession=function(){var t=(0,f.default)(c.default.mark(function t(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:(0,_.defaultStorage)(),a;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,x.getSession)(n);case 2:if(a=t.sent,!a){t.next=5;break}return t.abrupt('return',a);case 5:return t.abrupt('return',m(n,[S.currentSession.bind(null,n)]));case 6:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}(),y=n.logout=function(){var t=(0,f.default)(c.default.mark(function t(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:(0,_.defaultStorage)(),a;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,x.getSession)(n);case 2:if(a=t.sent,a){t.next=5;break}return t.abrupt('return');case 5:t.t0=a.authType,t.next='WebID-OIDC'===t.t0?8:'WebID-TLS'===t.t0?18:18;break;case 8:return t.prev=8,t.next=11,S.logout(n);case 11:t.next=17;break;case 13:t.prev=13,t.t1=t['catch'](8),console.warn('Error logging out:'),console.error(t.t1);case 17:return t.abrupt('break',19);case 18:return t.abrupt('break',19);case 19:return t.abrupt('return',(0,x.clearSession)(n));case 20:case'end':return t.stop();}},t,this,[[8,13]])}));return function(){return t.apply(this,arguments)}}(),v=a(385),w=a(432),x=a(122),_=a(85),k=a(129),C=a(225),T=r(C),E=a(125),S=r(E),A=function(){var t=(0,k.currentUrlNoParams)();return{callbackUri:t?t.split('#')[0]:null,popupUri:null,storage:(0,_.defaultStorage)()}},I=n.fetch=function(t,n){return(0,v.authnFetch)((0,_.defaultStorage)())(t,n)}},function(t,n,a){t.exports={default:a(361),__esModule:!0}},function(t,n,a){a(362),t.exports=a(16).Object.assign},function(t,n,a){var r=a(28);r(r.S+r.F,'Object',{assign:a(363)})},function(t,n,a){'use strict';var r=a(79),o=a(118),s=a(81),d=a(119),l=a(186),c=Object.assign;t.exports=!c||a(59)(function(){var t={},n={},a=Symbol(),r='abcdefghijklmnopqrst';return t[a]=7,r.split('').forEach(function(t){n[t]=t}),7!=c({},t)[a]||Object.keys(c({},n)).join('')!=r})?function(t){for(var n=d(t),a=arguments.length,c=1,u=o.f,f=s.f;a>c;)for(var m=l(arguments[c++]),h=u?r(m).concat(u(m)):r(m),g=h.length,b=0,y;g>b;)f.call(m,y=h[b++])&&(n[y]=m[y]);return n}:c},function(t,n,a){var r=a(47),o=a(113),s=a(365);t.exports=function(t){return function(n,a,d){var l=r(n),c=o(l.length),u=s(d,c),f;if(t&&a!=a){for(;c>u;)if(f=l[u++],f!=f)return!0;}else for(;c>u;u++)if((t||u in l)&&l[u]===a)return t||u||0;return!t&&-1}}},function(t,n,a){var r=a(114);t.exports=function(t,n){return t=r(t),0>t?y(t+n,0):_(t,n)}},function(t,n,a){var r=function(){return this}()||Function('return this')(),o=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf('regeneratorRuntime'),s=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=a(367),o)r.regeneratorRuntime=s;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t){!function(n){'use strict';function a(t,n,a,r){var s=n&&n.prototype instanceof o?n:o,d=Object.create(s.prototype),l=new g(r||[]);return d._invoke=u(t,a,l),d}function r(t,n,a){try{return{type:'normal',arg:t.call(n,a)}}catch(t){return{type:'throw',arg:t}}}function o(){}function s(){}function d(){}function l(t){['next','throw','return'].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function c(t){function n(a,o,s,d){var l=r(t[a],t,o);if('throw'===l.type)d(l.arg);else{var c=l.arg,u=c.value;return u&&'object'==typeof u&&w.call(u,'__await')?Promise.resolve(u.__await).then(function(t){n('next',t,s,d)},function(t){n('throw',t,s,d)}):Promise.resolve(u).then(function(t){c.value=t,s(c)},d)}}var a;this._invoke=function(t,r){function o(){return new Promise(function(a,o){n(t,r,a,o)})}return a=a?a.then(o,o):o()}}function u(t,n,a){var o=S;return function(s,d){if(o==I)throw new Error('Generator is already running');if(o==N){if('throw'===s)throw d;return y()}for(a.method=s,a.arg=d;;){var l=a.delegate;if(l){var c=f(l,a);if(c){if(c===j)continue;return c}}if('next'===a.method)a.sent=a._sent=a.arg;else if('throw'===a.method){if(o==S)throw o=N,a.arg;a.dispatchException(a.arg)}else'return'===a.method&&a.abrupt('return',a.arg);o=I;var u=r(t,n,a);if('normal'===u.type){if(o=a.done?N:A,u.arg===j)continue;return{value:u.arg,done:a.done}}'throw'===u.type&&(o=N,a.method='throw',a.arg=u.arg)}}}function f(t,n){var a=t.iterator[n.method];if(void 0===a){if(n.delegate=null,'throw'===n.method){if(t.iterator.return&&(n.method='return',n.arg=void 0,f(t,n),'throw'===n.method))return j;n.method='throw',n.arg=new TypeError('The iterator does not provide a \'throw\' method')}return j}var o=r(a,t.iterator,n.arg);if('throw'===o.type)return n.method='throw',n.arg=o.arg,n.delegate=null,j;var s=o.arg;if(!s)return n.method='throw',n.arg=new TypeError('iterator result is not an object'),n.delegate=null,j;if(s.done)n[t.resultName]=s.value,n.next=t.nextLoc,'return'!==n.method&&(n.method='next',n.arg=void 0);else return s;return n.delegate=null,j}function m(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function h(t){var n=t.completion||{};n.type='normal',delete n.arg,t.completion=n}function g(t){this.tryEntries=[{tryLoc:'root'}],t.forEach(m,this),this.reset(!0)}function b(t){if(t){var n=t[_];if(n)return n.call(t);if('function'==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(w.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=void 0,n.done=!0,n};return r.next=r}}return{next:y}}function y(){return{value:void 0,done:!0}}var v=Object.prototype,w=v.hasOwnProperty,x='function'==typeof Symbol?Symbol:{},_=x.iterator||'@@iterator',k=x.asyncIterator||'@@asyncIterator',C=x.toStringTag||'@@toStringTag',T='object'==typeof t,E=n.regeneratorRuntime;if(E)return void(T&&(t.exports=E));E=n.regeneratorRuntime=T?t.exports:{},E.wrap=a;var S='suspendedStart',A='suspendedYield',I='executing',N='completed',j={},R={};R[_]=function(){return this};var L=Object.getPrototypeOf,O=L&&L(L(b([])));O&&O!==v&&w.call(O,_)&&(R=O);var P=d.prototype=o.prototype=Object.create(R);s.prototype=P.constructor=d,d.constructor=s,d[C]=s.displayName='GeneratorFunction',E.isGeneratorFunction=function(t){var n='function'==typeof t&&t.constructor;return!!n&&(n===s||'GeneratorFunction'===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,!(C in t)&&(t[C]='GeneratorFunction')),t.prototype=Object.create(P),t},E.awrap=function(t){return{__await:t}},l(c.prototype),c.prototype[k]=function(){return this},E.AsyncIterator=c,E.async=function(t,n,r,o){var s=new c(a(t,n,r,o));return E.isGeneratorFunction(n)?s:s.next().then(function(t){return t.done?t.value:s.next()})},l(P),P[C]='Generator',P[_]=function(){return this},P.toString=function(){return'[object Generator]'},E.keys=function(t){var n=[];for(var a in t)n.push(a);return n.reverse(),function a(){for(;n.length;){var r=n.pop();if(r in t)return a.value=r,a.done=!1,a}return a.done=!0,a}},E.values=b,g.prototype={constructor:g,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method='next',this.arg=void 0,this.tryEntries.forEach(h),!t)for(var n in this)'t'===n.charAt(0)&&w.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if('throw'===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,r){return s.type='throw',s.arg=t,a.next=n,r&&(a.method='next',a.arg=void 0),!!r}if(this.done)throw t;for(var a=this,r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],s=o.completion;if('root'===o.tryLoc)return n('end');if(o.tryLoc<=this.prev){var d=w.call(o,'catchLoc'),l=w.call(o,'finallyLoc');if(d&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);}else if(!l)throw new Error('try statement without catch or finally');else if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}},abrupt:function(t,n){for(var a=this.tryEntries.length-1,r;0<=a;--a)if(r=this.tryEntries[a],r.tryLoc<=this.prev&&w.call(r,'finallyLoc')&&this.prev<r.finallyLoc){var o=r;break}o&&('break'===t||'continue'===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method='next',this.next=o.finallyLoc,j):this.complete(s)},complete:function(t,n){if('throw'===t.type)throw t.arg;return'break'===t.type||'continue'===t.type?this.next=t.arg:'return'===t.type?(this.rval=this.arg=t.arg,this.method='return',this.next='end'):'normal'===t.type&&n&&(this.next=n),j},finish:function(t){for(var n=this.tryEntries.length-1,a;0<=n;--n)if(a=this.tryEntries[n],a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),h(a),j},catch:function(t){for(var n=this.tryEntries.length-1,a;0<=n;--n)if(a=this.tryEntries[n],a.tryLoc===t){var r=a.completion;if('throw'===r.type){var o=r.arg;h(a)}return o}throw new Error('illegal catch attempt')},delegateYield:function(t,n,a){return this.delegate={iterator:b(t),resultName:n,nextLoc:a},'next'===this.method&&(this.arg=void 0),j}}}(function(){return this}()||Function('return this')())},function(t,n,a){a(187),a(120),a(192),a(376),a(383),a(384),t.exports=a(16).Promise},function(t,n,a){var r=a(114),o=a(112);t.exports=function(t){return function(n,d){var c=o(n)+'',s=r(d),u=c.length,l,a;return 0>s||s>=u?t?'':void 0:(l=c.charCodeAt(s),55296>l||56319<l||s+1===u||56320>(a=c.charCodeAt(s+1))||57343<a?t?c.charAt(s):l:t?c.slice(s,s+2):(l-55296<<10)+(a-56320)+65536)}}},function(t,n,a){'use strict';var r=a(190),o=a(60),s=a(84),d={};a(34)(d,a(11)('iterator'),function(){return this}),t.exports=function(t,n,a){t.prototype=r(d,{next:o(1,a)}),s(t,n+' Iterator')}},function(t,n,a){var r=a(26),o=a(29),s=a(79);t.exports=a(30)?Object.defineProperties:function(t,n){o(t);for(var a=s(n),d=a.length,l=0,c;d>l;)r.f(t,c=a[l++],n[c]);return t}},function(t,n,a){var r=a(35),o=a(119),s=a(115)('IE_PROTO'),d=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,s)?t[s]:'function'==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?d:null}},function(t,n,a){'use strict';var r=a(374),o=a(375),s=a(62),d=a(47);t.exports=a(188)(Array,'Array',function(t,n){this._t=d(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,a=this._i++;return!t||a>=t.length?(this._t=void 0,o(1)):'keys'==n?o(0,a):'values'==n?o(0,t[a]):o(0,[a,t[a]])},'values'),s.Arguments=s.Array,r('keys'),r('values'),r('entries')},function(t){t.exports=function(){}},function(t){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,a){'use strict';var r=a(83),o=a(10),s=a(58),d=a(193),l=a(28),c=a(46),u=a(78),f=a(377),m=a(378),h=a(197),g=a(198).set,b=a(380)(),y=a(121),v=a(199),w=a(200),x='Promise',_=o.TypeError,k=o.process,T=o[x],C='process'==d(k),E=function(){},S=D=y.f,A=!!function(){try{var t=T.resolve(1),n=(t.constructor={})[a(11)('species')]=function(t){t(E,E)};return(C||'function'==typeof PromiseRejectionEvent)&&t.then(E)instanceof n}catch(t){}}(),I=function(t){var n;return c(t)&&'function'==typeof(n=t.then)&&n},N=function(t,n){if(!t._n){t._n=!0;var a=t._c;b(function(){for(var r=t._v,o=1==t._s,s=0,d=function(n){var a=o?n.ok:n.fail,s=n.resolve,d=n.reject,l=n.domain,c,u;try{a?(!o&&(2==t._h&&L(t),t._h=1),!0===a?c=r:(l&&l.enter(),c=a(r),l&&l.exit()),c===n.promise?d(_('Promise-chain cycle')):(u=I(c))?u.call(c,s,d):s(c)):d(r)}catch(t){d(t)}};a.length>s;)d(a[s++]);t._c=[],t._n=!1,n&&!t._h&&j(t)})}},j=function(t){g.call(o,function(){var n=t._v,a=R(t),r,s,d;if(a&&(r=v(function(){C?k.emit('unhandledRejection',n,t):(s=o.onunhandledrejection)?s({promise:t,reason:n}):(d=o.console)&&d.error&&d.error('Unhandled promise rejection',n)}),t._h=C||R(t)?2:1),t._a=void 0,a&&r.e)throw r.v})},R=function(t){if(1==t._h)return!1;for(var n=t._a||t._c,a=0,r;n.length>a;)if(r=n[a++],r.fail||!R(r.promise))return!1;return!0},L=function(t){g.call(o,function(){var n;C?k.emit('rejectionHandled',t):(n=o.onrejectionhandled)&&n({promise:t,reason:t._v})})},O=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,!n._a&&(n._a=n._c.slice()),N(n,!0))},P=function(t){var n=this,a;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _('Promise can\'t be resolved itself');(a=I(t))?b(function(){var r={_w:n,_d:!1};try{a.call(t,s(P,r,1),s(O,r,1))}catch(t){O.call(r,t)}}):(n._v=t,n._s=1,N(n,!1))}catch(t){O.call({_w:n,_d:!1},t)}}},M,D,B,U;A||(T=function(t){f(this,T,x,'_h'),u(t),M.call(this);try{t(s(P,this,1),s(O,this,1))}catch(t){O.call(this,t)}},M=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},M.prototype=a(381)(T.prototype,{then:function(t,n){var a=S(h(this,T));return a.ok='function'!=typeof t||t,a.fail='function'==typeof n&&n,a.domain=C?k.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&N(this,!1),a.promise},catch:function(t){return this.then(void 0,t)}}),B=function(){var t=new M;this.promise=t,this.resolve=s(P,t,1),this.reject=s(O,t,1)},y.f=S=function(t){return t===T||t===U?new B(t):D(t)}),l(l.G+l.W+l.F*!A,{Promise:T}),a(84)(T,x),a(382)(x),U=a(16)[x],l(l.S+l.F*!A,x,{reject:function(t){var n=S(this),a=n.reject;return a(t),n.promise}}),l(l.S+l.F*(r||!A),x,{resolve:function(t){return w(r&&this===U?T:this,t)}}),l(l.S+l.F*!(A&&a(201)(function(t){T.all(t)['catch'](E)})),x,{all:function(t){var n=this,a=S(n),r=a.resolve,o=a.reject,s=v(function(){var a=[],s=0,d=1;m(t,!1,function(t){var l=s++,c=!1;a.push(void 0),d++,n.resolve(t).then(function(t){c||(c=!0,a[l]=t,--d||r(a))},o)}),--d||r(a)});return s.e&&o(s.v),a.promise},race:function(t){var n=this,a=S(n),r=a.reject,o=v(function(){m(t,!1,function(t){n.resolve(t).then(a.resolve,r)})});return o.e&&r(o.v),a.promise}})},function(t){t.exports=function(t,n,a,r){if(!(t instanceof n)||r!==void 0&&r in t)throw TypeError(a+': incorrect invocation!');return t}},function(t,n,a){var r=a(58),o=a(194),s=a(195),d=a(29),l=a(113),c=a(196),u={},m={},n=t.exports=function(t,n,a,h,g){var b=g?function(){return t}:c(t),y=r(a,h,n?2:1),f=0,v,w,x,_;if('function'!=typeof b)throw TypeError(t+' is not iterable!');if(s(b)){for(v=l(t.length);v>f;f++)if(_=n?y(d(w=t[f])[0],w[1]):y(t[f]),_===u||_===m)return _;}else for(x=b.call(t);!(w=x.next()).done;)if(_=o(x,y,w.value,n),_===u||_===m)return _};n.BREAK=u,n.RETURN=m},function(t){t.exports=function(t,n,a){var r=a===void 0;switch(n.length){case 0:return r?t():t.call(a);case 1:return r?t(n[0]):t.call(a,n[0]);case 2:return r?t(n[0],n[1]):t.call(a,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(a,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(a,n[0],n[1],n[2],n[3]);}return t.apply(a,n)}},function(t,n,a){var r=a(10),o=a(198).set,s=r.MutationObserver||r.WebKitMutationObserver,d=r.process,l=r.Promise,c='process'==a(61)(d);t.exports=function(){var t=function(){var t,r;for(c&&(t=d.domain)&&t.exit();n;){r=n.fn,n=n.next;try{r()}catch(t){throw n?u():a=void 0,t}}a=void 0,t&&t.enter()},n,a,u;if(c)u=function(){d.nextTick(t)};else if(s){var f=!0,m=document.createTextNode('');new s(t).observe(m,{characterData:!0}),u=function(){m.data=f=!f}}else if(l&&l.resolve){var h=l.resolve();u=function(){h.then(t)}}else u=function(){o.call(r,t)};return function(t){var r={fn:t,next:void 0};a&&(a.next=r),n||(n=r,u()),a=r}}},function(t,n,a){var r=a(34);t.exports=function(t,n,a){for(var o in n)a&&t[o]?t[o]=n[o]:r(t,o,n[o]);return t}},function(t,n,a){'use strict';var r=a(10),o=a(16),s=a(26),d=a(30),l=a(11)('species');t.exports=function(t){var n='function'==typeof o[t]?o[t]:r[t];d&&n&&!n[l]&&s.f(n,l,{configurable:!0,get:function(){return this}})}},function(t,n,a){'use strict';var r=a(28),o=a(16),s=a(10),d=a(197),l=a(200);r(r.P+r.R,'Promise',{finally:function(t){var n=d(this,o.Promise||s.Promise),a='function'==typeof t;return this.then(a?function(a){return l(n,t()).then(function(){return a})}:t,a?function(a){return l(n,t()).then(function(){throw a})}:t)}})},function(t,n,a){'use strict';var r=a(28),o=a(121),s=a(199);r(r.S,'Promise',{try:function(t){var n=o.f(this),a=s(t);return(a.e?n.reject:n.resolve)(a.v),n.promise}})},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function o(t){var n=this;return function(){var a=(0,c.default)(d.default.mark(function a(r){var o,s;return d.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.getSession)(t);case 2:if(o=n.sent,o){n.next=5;break}return n.abrupt('return',!1);case 5:return n.next=7,(0,u.getHost)(t)(r);case 7:return s=n.sent,n.abrupt('return',null!=s&&o.authType===s.authType);case 9:case'end':return n.stop();}},a,n)}));return function(){return a.apply(this,arguments)}}()}Object.defineProperty(n,'__esModule',{value:!0});var s=a(36),d=r(s),l=a(37),c=r(l);n.authnFetch=function(t){var n=this;return function(){var a=(0,c.default)(d.default.mark(function a(r,s){var l,c,m,h;return d.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=s||{},n.next=3,(0,f.getSession)(t);case 3:return l=n.sent,n.next=6,o(t)(r);case 6:if(c=n.sent,!(l&&c)){n.next=9;break}return n.abrupt('return',g(l,r,s));case 9:return n.next=11,fetch(r,s);case 11:if(m=n.sent,401!==m.status){n.next=20;break}return n.next=15,(0,u.updateHostFromResponse)(t)(m);case 15:return n.next=17,o(t)(r);case 17:if(h=n.sent,!(l&&h)){n.next=20;break}return n.abrupt('return',g(l,r,s));case 20:return n.abrupt('return',m);case 21:case'end':return n.stop();}},a,n)}));return function(){return a.apply(this,arguments)}}()},a(44);var u=a(386),f=a(122),m=a(125),h=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}(m),g=function(){var t=(0,c.default)(d.default.mark(function t(n,a,r){return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.authType,t.next='WebID-OIDC'===t.t0?3:'WebID-TLS'===t.t0?4:4;break;case 3:return t.abrupt('return',h.fetchWithCredentials(n)(a,r));case 4:return t.abrupt('return',fetch(a,r));case 5:case'end':return t.stop();}},t,void 0)}));return function(){return t.apply(this,arguments)}}()},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function o(t){return t&&t.__esModule?t:{default:t}}function s(t){var n=this;return function(){var a=(0,g.default)(m.default.mark(function a(r){var o=r.url,s=r.authType;return m.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,y.updateStorage)(t,function(t){return(0,u.default)({},t,{hosts:(0,u.default)({},t.hosts,(0,l.default)({},o,{authType:s}))})});case 2:return n.abrupt('return',{url:o,authType:s});case 3:case'end':return n.stop();}},a,n)}));return function(){return a.apply(this,arguments)}}()}Object.defineProperty(n,'__esModule',{value:!0}),n.hostNameFromRequestInfo=void 0;var d=a(202),l=o(d),c=a(77),u=o(c),f=a(36),m=o(f),h=a(37),g=o(h);n.getHost=function(t){var n=this;return function(){var a=(0,g.default)(m.default.mark(function a(r){var o,s,d,l;return m.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=k(r),n.next=3,(0,b.getSession)(t);case 3:if(s=n.sent,!(s&&k(s.idp)===o)){n.next=6;break}return n.abrupt('return',{url:o,authType:s.authType});case 6:return n.next=8,(0,y.getData)(t);case 8:if(d=n.sent,l=d.hosts,l){n.next=12;break}return n.abrupt('return',null);case 12:return n.abrupt('return',l[o]||null);case 13:case'end':return n.stop();}},a,n)}));return function(){return a.apply(this,arguments)}}()},n.saveHost=s,n.updateHostFromResponse=function(t){var n=this;return function(){var a=(0,g.default)(m.default.mark(function a(r){var o,d;return m.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=void 0,o=w.requiresAuth(r)?'WebID-OIDC':_.requiresAuth(r)?'WebID-TLS':null,d=k(r.url),!o){n.next=6;break}return n.next=6,s(t)({url:d,authType:o});case 6:case'end':return n.stop();}},a,n)}));return function(){return a.apply(this,arguments)}}()};var b=a(122),y=a(85),v=a(125),w=r(v),x=a(225),_=r(x),k=n.hostNameFromRequestInfo=function(t){var n=t instanceof URL?t:t instanceof Request?new URL(t.url):new URL(t);return n.host}},function(t,n,a){t.exports={default:a(388),__esModule:!0}},function(t,n,a){a(389);var r=a(16).Object;t.exports=function(t,n,a){return r.defineProperty(t,n,a)}},function(t,n,a){var r=a(28);r(r.S+r.F*!a(30),'Object',{defineProperty:a(26).f})},function(t,n,a){t.exports={default:a(391),__esModule:!0}},function(t,n,a){var r=a(16),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(){return o.stringify.apply(o,arguments)}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=a(393),s=r(o),d=a(395),l=r(d),c='function'==typeof l.default&&'symbol'==typeof s.default?function(t){return typeof t}:function(t){return t&&'function'==typeof l.default&&t.constructor===l.default&&t!==l.default.prototype?'symbol':typeof t};n.default='function'==typeof l.default&&'symbol'===c(s.default)?function(t){return'undefined'==typeof t?'undefined':c(t)}:function(t){return t&&'function'==typeof l.default&&t.constructor===l.default&&t!==l.default.prototype?'symbol':'undefined'==typeof t?'undefined':c(t)}},function(t,n,a){t.exports={default:a(394),__esModule:!0}},function(t,n,a){a(120),a(192),t.exports=a(123).f('iterator')},function(t,n,a){t.exports={default:a(396),__esModule:!0}},function(t,n,a){a(397),a(187),a(403),a(404),t.exports=a(16).Symbol},function(t,n,a){'use strict';var r=a(10),o=a(35),s=a(30),d=a(28),l=a(189),c=a(398).KEY,u=a(59),f=a(116),m=a(84),h=a(80),g=a(11),b=a(123),y=a(124),v=a(399),w=a(400),x=a(29),_=a(47),C=a(111),T=a(60),E=a(190),S=a(401),A=a(402),I=a(26),N=a(79),R=A.f,L=I.f,O=S.f,P=r.Symbol,M=r.JSON,D=M&&M.stringify,B='prototype',U=g('_hidden'),q=g('toPrimitive'),F={}.propertyIsEnumerable,z=f('symbol-registry'),H=f('symbols'),W=f('op-symbols'),V=Object[B],G='function'==typeof P,K=r.QObject,J=!K||!K[B]||!K[B].findChild,X=s&&u(function(){return 7!=E(L({},'a',{get:function(){return L(this,'a',{value:7}).a}})).a})?function(t,n,a){var r=R(V,n);r&&delete V[n],L(t,n,a),r&&t!==V&&L(V,n,r)}:L,Z=function(t){var n=H[t]=E(P[B]);return n._k=t,n},Y=G&&'symbol'==typeof P.iterator?function(t){return'symbol'==typeof t}:function(t){return t instanceof P},Q=function(t,n,a){return t===V&&Q(W,n,a),x(t),n=C(n,!0),x(a),o(H,n)?(a.enumerable?(o(t,U)&&t[U][n]&&(t[U][n]=!1),a=E(a,{enumerable:T(0,!1)})):(!o(t,U)&&L(t,U,T(1,{})),t[U][n]=!0),X(t,n,a)):L(t,n,a)},ee=function(t,n){x(t);for(var a=v(n=_(n)),r=0,o=a.length,s;o>r;)Q(t,s=a[r++],n[s]);return t},te=function(t){var n=F.call(this,t=C(t,!0));return this===V&&o(H,t)&&!o(W,t)?!1:n||!o(this,t)||!o(H,t)||o(this,U)&&this[U][t]?n:!0},ne=function(t,n){if(t=_(t),n=C(n,!0),t!==V||!o(H,n)||o(W,n)){var a=R(t,n);return a&&o(H,n)&&!(o(t,U)&&t[U][n])&&(a.enumerable=!0),a}},ae=function(t){for(var n=O(_(t)),a=[],r=0,s;n.length>r;)o(H,s=n[r++])||s==U||s==c||a.push(s);return a},re=function(t){for(var n=t===V,a=O(n?W:_(t)),r=[],s=0,d;a.length>s;)o(H,d=a[s++])&&(!n||o(V,d))&&r.push(H[d]);return r};G||(P=function(){if(this instanceof P)throw TypeError('Symbol is not a constructor!');var t=h(0<arguments.length?arguments[0]:void 0),n=function(a){this===V&&n.call(W,a),o(this,U)&&o(this[U],t)&&(this[U][t]=!1),X(this,t,T(1,a))};return s&&J&&X(V,t,{configurable:!0,set:n}),Z(t)},l(P[B],'toString',function(){return this._k}),A.f=ne,I.f=Q,a(204).f=S.f=ae,a(81).f=te,a(118).f=re,s&&!a(83)&&l(V,'propertyIsEnumerable',te,!0),b.f=function(t){return Z(g(t))}),d(d.G+d.W+d.F*!G,{Symbol:P});for(var oe=['hasInstance','isConcatSpreadable','iterator','match','replace','search','species','split','toPrimitive','toStringTag','unscopables'],ie=0;oe.length>ie;)g(oe[ie++]);for(var j=N(g.store),se=0;j.length>se;)y(j[se++]);d(d.S+d.F*!G,'Symbol',{for:function(t){return o(z,t+='')?z[t]:z[t]=P(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+' is not a symbol!');for(var n in z)if(z[n]===t)return n},useSetter:function(){J=!0},useSimple:function(){J=!1}}),d(d.S+d.F*!G,'Object',{create:function(t,n){return n===void 0?E(t):ee(E(t),n)},defineProperty:Q,defineProperties:ee,getOwnPropertyDescriptor:ne,getOwnPropertyNames:ae,getOwnPropertySymbols:re}),M&&d(d.S+d.F*(!G||u(function(){var t=P();return'[null]'!=D([t])||'{}'!=D({a:t})||'{}'!=D(Object(t))})),'JSON',{stringify:function(t){if(!(void 0===t||Y(t))){for(var n=[t],a=1,r,o;arguments.length>a;)n.push(arguments[a++]);return r=n[1],'function'==typeof r&&(o=r),(o||!w(r))&&(r=function(t,n){if(o&&(n=o.call(this,t,n)),!Y(n))return n}),n[1]=r,D.apply(M,n)}}}),P[B][q]||a(34)(P[B],q,P[B].valueOf),m(P,'Symbol'),m(Math,'Math',!0),m(r.JSON,'JSON',!0)},function(t,n,a){var r=a(80)('meta'),o=a(46),s=a(35),d=a(26).f,l=0,c=Object.isExtensible||function(){return!0},u=!a(59)(function(){return c(Object.preventExtensions({}))}),f=function(t){d(t,r,{value:{i:'O'+ ++l,w:{}}})},m=t.exports={KEY:r,NEED:!1,fastKey:function(t,n){if(!o(t))return'symbol'==typeof t?t:('string'==typeof t?'S':'P')+t;if(!s(t,r)){if(!c(t))return'F';if(!n)return'E';f(t)}return t[r].i},getWeak:function(t,n){if(!s(t,r)){if(!c(t))return!0;if(!n)return!1;f(t)}return t[r].w},onFreeze:function(t){return u&&m.NEED&&c(t)&&!s(t,r)&&f(t),t}}},function(t,n,a){var r=a(79),o=a(118),s=a(81);t.exports=function(t){var n=r(t),a=o.f;if(a)for(var d=a(t),l=s.f,c=0,u;d.length>c;)l.call(t,u=d[c++])&&n.push(u);return n}},function(t,n,a){var r=a(61);t.exports=Array.isArray||function(t){return'Array'==r(t)}},function(t,n,a){var r=a(47),o=a(204).f,s={}.toString,d='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(t){try{return o(t)}catch(t){return d.slice()}};t.exports.f=function(t){return d&&'[object Window]'==s.call(t)?l(t):o(r(t))}},function(t,n,a){var r=a(81),o=a(60),s=a(47),d=a(111),l=a(35),c=a(184),u=Object.getOwnPropertyDescriptor;n.f=a(30)?u:function(t,n){if(t=s(t),n=d(n,!0),c)try{return u(t,n)}catch(t){}return l(t,n)?o(!r.f.call(t,n),t[n]):void 0}},function(t,n,a){a(124)('asyncIterator')},function(t,n,a){a(124)('observable')},function(t,n,a){var r=a(406),o=a(407);t.exports=function(t,n,a){var s=n&&a||0;'string'==typeof t&&(n='binary'==t?Array(16):null,t=null),t=t||{};var d=t.random||(t.rng||r)();if(d[6]=64|15&d[6],d[8]=128|63&d[8],n)for(var l=0;16>l;++l)n[s+l]=d[l];return n||o(d)}},function(t,n,a){(function(n){var a=n.crypto||n.msCrypto,r;if(a&&a.getRandomValues){var o=new Uint8Array(16);r=function(){return a.getRandomValues(o),o}}if(!r){var s=Array(16);r=function(){for(var t=0,n;16>t;t++)0==(3&t)&&(n=4294967296*Math.random()),s[t]=255&n>>>((3&t)<<3);return s}}t.exports=r}).call(n,a(3))},function(t){for(var n=[],a=0;256>a;++a)n[a]=(a+256).toString(16).substr(1);t.exports=function(t,a){var r=a||0,o=n;return o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+'-'+o[t[r++]]+o[t[r++]]+'-'+o[t[r++]]+o[t[r++]]+'-'+o[t[r++]]+o[t[r++]]+'-'+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]}},function(t,n,a){'use strict';function r(t){if(Array.isArray(t)){for(var n=0,a=Array(t.length);n<t.length;n++)a[n]=t[n];return a}return Array.from(t)}var o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol?'symbol':typeof t},s=function(){function t(t,n){var a=[],r=!0,o=!1,s;try{for(var d=t[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(a.push(l.value),!(n&&a.length===n));r=!0);}catch(t){o=!0,s=t}finally{try{!r&&d['return']&&d['return']()}finally{if(o)throw s}}return a}return function(n,a){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,a);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();Object.defineProperty(n,'__esModule',{value:!0});var d=a(206),l=function(t){return function(n){return t+'='+(n&&!(0,d.isToken)(n)?(0,d.quote)(n):n)}},c=function(t){return t.reduce(function(t,n){var a=s(n,2),o=a[0],c=a[1],u=l(o);if(!(0,d.isToken)(o))throw new TypeError;return Array.isArray(c)?[].concat(r(t),r(c.map(u))):[].concat(r(t),[u(c)])},[])},u=function t(n,a){if(Array.isArray(n))return c(n);if('object'===('undefined'==typeof n?'undefined':o(n)))return t(Object.keys(n).map(function(t){return[t,n[t]]}),a);throw new TypeError};n.default=function(t,n,a){var s='string'==typeof t?{scheme:t,token:n,params:a}:t;if('object'!==('undefined'==typeof s?'undefined':o(s)))throw new TypeError;else if(!(0,d.isScheme)(s.scheme))throw new TypeError('Invalid scheme.');return[s.scheme].concat(r('undefined'==typeof s.token?[]:[s.token]),r('undefined'==typeof s.params?[]:u(s.params))).join(' ')}},function(t,n,a){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var r=a(206),o=/((?:[a-zA-Z0-9._~+\/-]+=*(?:\s+|$))|[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+)(?:=([^\\"=\s,]+|"(?:[^"\\]|\\.)*"))?/g,s=function(t,n){var a='"'===n.charAt(0)?(0,r.unquote)(n):n.trim();if(Array.isArray(t))return t.concat(a);return t?[t,a]:a},d=function(t,n){for(var a=null,r=null,d={};null!==(a=o.exec(n));)a[2]?d[a[1]]=s(d[a[1]],a[2]):r=s(r,a[1]);return{scheme:t,params:d,token:r}};n.default=function(t){if('string'!=typeof t)throw new TypeError('Header value must be a string.');var n=t.indexOf(' '),a=t.substr(0,n);if(!(0,r.isScheme)(a))throw new TypeError('Invalid scheme '+a);return d(a,t.substr(n))}},function(t,n,a){'use strict';t.exports=a(207)},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(210),d=function(){function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.initialize(n,a)}return o(t,null,[{key:'schema',get:function(){throw new Error('Schema must be defined by classes extending JSONDocument')}}]),o(t,[{key:'initialize',value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=this.constructor.schema;a.initialize(this,t,n)}},{key:'validate',value:function(t){var n=this.constructor.schema;return(t||n).validate(this)}},{key:'patch',value:function(t){var n=new s(t);n.apply(this)}},{key:'select',value:function(){}},{key:'project',value:function(t){return t.project(this)}}],[{key:'serialize',value:function(t){return JSON.stringify(t)}},{key:'deserialize',value:function(t){try{return JSON.parse(t)}catch(t){throw new Error('Failed to parse JSON')}}}]),t}();t.exports=d},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(127),d=1,l=function(){function t(n){var a=this;r(this,t),Object.defineProperty(this,'mapping',{enumerable:!1,value:new Map}),Object.keys(n).forEach(function(t){var r=n[t];a.mapping.set(new s(t,d),new s(r,d))})}return o(t,[{key:'map',value:function(t,n){this.mapping.forEach(function(a,r){r.add(t,a.get(n))})}},{key:'project',value:function(t,n){this.mapping.forEach(function(a,r){a.add(n,r.get(t))})}}]),t}();t.exports=l},function(t,n,a){'use strict';function r(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function o(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(209),c=a(211),u=function(){function t(n){o(this,t),Object.assign(this,n),Object.defineProperties(this,{initialize:{enumerable:!1,writeable:!1,value:l.compile(n)},validate:{enumerable:!1,writeable:!1,value:c.compile(n)}})}return d(t,[{key:'extend',value:function(n){function a(t){return t&&'object'===('undefined'==typeof t?'undefined':s(t))&&null!==t&&!Array.isArray(t)}function o(t,n){var s=Object.assign({},t);return a(t)&&a(n)&&Object.keys(n).forEach(function(d){a(n[d])?d in t?s[d]=o(t[d],n[d]):Object.assign(s,r({},d,n[d])):Object.assign(s,r({},d,n[d]))}),s}var d=o(this,n);return new t(d)}}]),t}();t.exports=u},function(t,n,a){'use strict';(function(t){function r(n,a){return void 0===a&&(a='utf8'),t.isBuffer(n)?s(n.toString('base64')):s(new t(n,a).toString('base64'))}function o(t){return t=t.toString(),d.default(t).replace(/\-/g,'+').replace(/_/g,'/')}function s(t){return t.replace(/=/g,'').replace(/\+/g,'-').replace(/\//g,'_')}var d=a(415);var l=r;l.encode=r,l.decode=function(n,a){return void 0===a&&(a='utf8'),new t(o(n),'base64').toString(a)},l.toBase64=o,l.fromBase64=s,l.toBuffer=function(n){return new t(o(n),'base64')},Object.defineProperty(n,'__esModule',{value:!0}),n.default=l}).call(n,a(0).Buffer)},function(t,n,a){'use strict';(function(t){Object.defineProperty(n,'__esModule',{value:!0}),n.default=function(n){var a=4,r=n.length,o=r%a;if(!o)return n;var s=r,d=a-o,l=r+d,c=new t(l);for(c.write(n);d--;)c.write('=',s++);return c.toString()}}).call(n,a(0).Buffer)},function(t,n,a){'use strict';var r=a(417),o=a(418),s=a(420),d=a(421),l=new d;l.define('HS256','sign',new o({name:'HMAC',hash:{name:'SHA-256'}})),l.define('HS384','sign',new o({name:'HMAC',hash:{name:'SHA-384'}})),l.define('HS512','sign',new o({name:'HMAC',hash:{name:'SHA-512'}})),l.define('RS256','sign',new s({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-256'}})),l.define('RS384','sign',new s({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-384'}})),l.define('RS512','sign',new s({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-512'}})),l.define('none','sign',new r({})),l.define('HS256','verify',new o({name:'HMAC',hash:{name:'SHA-256'}})),l.define('HS384','verify',new o({name:'HMAC',hash:{name:'SHA-384'}})),l.define('HS512','verify',new o({name:'HMAC',hash:{name:'SHA-512'}})),l.define('RS256','verify',new s({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-256'}})),l.define('RS384','verify',new s({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-384'}})),l.define('RS512','verify',new s({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-512'}})),l.define('none','verify',new r({})),l.define('RS256','importKey',new s({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-256'}})),l.define('RS384','importKey',new s({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-384'}})),l.define('RS512','importKey',new s({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-512'}})),t.exports=l},function(t){'use strict';function n(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var a=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),r=function(){function t(){n(this,t)}return a(t,[{key:'sign',value:function(){return Promise.resolve('')}},{key:'verify',value:function(){}}]),t}();t.exports=r},function(t,n,a){'use strict';(function(n){function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(38),d=a(86),l=a(212),c=function(){function t(n){r(this,t),this.params=n}return o(t,[{key:'sign',value:function(t,a){var r=this.params;return a=new l().encode(a),d.subtle.sign(r,t,a).then(function(t){return s(n.from(t))})}},{key:'verify',value:function(t,n,a){var r=this.params;return'string'==typeof n&&(n=Uint8Array.from(s.toBuffer(n))),'string'==typeof a&&(a=new l().encode(a)),d.subtle.verify(r,t,n,a)}},{key:'assertSufficientKeyLength',value:function(t){if(t.length<this.bitlength)throw new Error('The key is too short.')}}]),t}();t.exports=c}).call(n,a(0).Buffer)},function(t){t.exports=o},function(t,n,a){'use strict';(function(n){function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(38),d=a(86),l=a(212),c=function(){function t(n){r(this,t),this.params=n}return o(t,[{key:'sign',value:function(t,a){var r=this.params;return a=new l().encode(a),d.subtle.sign(r,t,a).then(function(t){return s(n.from(t))})}},{key:'verify',value:function(t,n,a){var r=this.params;return'string'==typeof n&&(n=Uint8Array.from(s.toBuffer(n))),'string'==typeof a&&(a=new l().encode(a)),d.subtle.verify(r,t,n,a)}},{key:'importKey',value:function(t){var n=Object.assign({},t),a=this.params,r=t.key_ops||[];return('sig'===t.use&&r.push('verify'),'enc'===t.use)?Promise.resolve(t):(t.key_ops&&(r=t.key_ops),d.subtle.importKey('jwk',n,a,!0,r).then(function(t){return Object.defineProperty(n,'cryptoKey',{enumerable:!1,value:t}),n}))}}]),t}();t.exports=c}).call(n,a(0).Buffer)},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(213),d=['sign','verify','encrypt','decrypt','importKey'],l=function(){function t(){var n=this;r(this,t),d.forEach(function(t){n[t]={}})}return o(t,[{key:'define',value:function(t,n,a){var r=this[n];r[t]=a}},{key:'normalize',value:function(t,n){var a=this[t];if(!a)return new SyntaxError;var r=a[n];return r?r:new s(n)}}],[{key:'operations',get:function(){return d}}]),t}();t.exports=l},function(t,n,a){'use strict';var r=a(17),o=r.Formats;o.register('StringOrURI',/(?:)/),o.register('NumericDate',/(?:)/),o.register('URI',/(?:)/),o.register('url',/(?:)/),o.register('base64',/(?:)/),o.register('base64url',/(?:)/),o.register('MediaType',/(?:)/)},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(17),c=l.JSONDocument,u=a(217),f=a(216),m=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,t),d(n,null,[{key:'importKeys',value:function(t){var a=this.schema.validate(t);if(!a.valid)return Promise.reject(new Error('Invalid JWKSet: '+JSON.stringify(a,null,2)));if(!t.keys)return Promise.reject(new Error('Cannot import JWKSet: keys property is empty'));var r,o;try{r=new n(t),o=t.keys.map(function(t){return f.importKey(t)})}catch(t){return Promise.reject(t)}return Promise.all(o).then(function(t){return r.keys=t,r})}},{key:'schema',get:function(){return u}}]),n}(c);t.exports=m},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},l=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),c=a(38),u=a(17),f=u.JSONDocument,m=a(218),h=a(222),g=a(215),b=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,t),l(n,[{key:'isJWE',value:function(){return!!this.header.enc}},{key:'resolveKeys',value:function(t){var n=this.header.kid,a,r;if(Array.isArray(t)&&(a=t),t.keys&&(a=t.keys),t.keys||'object'!==('undefined'==typeof t?'undefined':d(t))||(a=[t]),!a)throw new g('Invalid JWK argument');return r=n?a.find(function(t){return t.kid===n}):a.find(function(t){return'sig'===t.use}),!!r&&(this.key=r.cryptoKey,!0)}},{key:'encode',value:function(){var t=this.validate();if(!t.valid)return Promise.reject(t);var n=this;return this.isJWE()?JWE.encrypt(n):h.sign(n)}},{key:'verify',value:function(){var t=this.validate();return t.valid?h.verify(this):Promise.reject(t)}}],[{key:'decode',value:function(t){var n=this,a;if('string'!=typeof t)throw new g('JWT must be a string');if(t.startsWith('{')){try{t=JSON.parse(t,function(){})}catch(t){throw new g('Invalid JWT serialization')}t.serialization=t.signatures||t.recipients?'json':'flattened',a=new n(t,{filter:!1})}else try{var r=t.split('.'),o=r.length;if(3!==o&&5!==o)throw new Error('Malformed JWT');var s=JSON.parse(c.decode(r[0]));if(3===o){var d=JSON.parse(c.decode(r[1])),l=r[2];a=new n({type:'JWS',segments:r,header:s,payload:d,signature:l,serialization:'compact'},{filter:!1})}}catch(t){throw new g('Invalid JWT compact serialization')}return a}},{key:'encode',value:function(t,a,r){var o=new n(t,a);return o.encode(r)}},{key:'verify',value:function(t,a){var r=n.decode(a);return r.key=t,r.verify().then(function(){return r})}},{key:'schema',get:function(){return m}}]),n}(f);t.exports=b},function(t,n,a){(function(n){const r=a(126),o=a(38),s=a(86),{JWT:d}=a(63),l=a(223),{URL:c}=a(41);class u{static create(t,a,d){const{provider:f,defaults:m,registration:h}=t;let g,b,y,v;return Promise.resolve().then(()=>(r(f.configuration,'RelyingParty provider OpenID Configuration is missing'),r(m.authenticate,'RelyingParty default authentication parameters are missing'),r(h,'RelyingParty client registration is missing'),g=f.configuration.issuer,b=f.configuration.authorization_endpoint,y={client_id:h.client_id},v=Object.assign(m.authenticate,y,a),r(g,'Missing issuer in provider OpenID Configuration'),r(b,'Missing authorization_endpoint in provider OpenID Configuration'),r(v.scope,'Missing scope parameter in authentication request'),r(v.response_type,'Missing response_type parameter in authentication request'),r(v.client_id,'Missing client_id parameter in authentication request'),r(v.redirect_uri,'Missing redirect_uri parameter in authentication request'),v.state=Array.from(s.getRandomValues(new Uint8Array(16))),v.nonce=Array.from(s.getRandomValues(new Uint8Array(16))),Promise.all([s.subtle.digest({name:'SHA-256'},new Uint8Array(v.state)),s.subtle.digest({name:'SHA-256'},new Uint8Array(v.nonce))]))).then((t)=>{let a=o(n.from(t[0])),r=o(n.from(t[1])),s=`${g}/requestHistory/${a}`;d[s]=JSON.stringify(v),v.state=a,v.nonce=r}).then(()=>u.generateSessionKeys()).then((t)=>{u.storeSessionKeys(t,v,d)}).then(()=>{if(f.configuration.request_parameter_supported)return u.encodeRequestParams(v).then((t)=>{v=t})}).then(()=>{let t=new c(b);return t.search=l.encode(v),t.href})}static generateSessionKeys(){return s.subtle.generateKey({name:'RSASSA-PKCS1-v1_5',modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:'SHA-256'}},!0,['sign','verify']).then((t)=>Promise.all([s.subtle.exportKey('jwk',t.publicKey),s.subtle.exportKey('jwk',t.privateKey)])).then((t)=>{let[n,a]=t;return{public:n,private:a}})}static storeSessionKeys(t,n,a){a['oidc.session.privateKey']=JSON.stringify(t.private),n.key=t.public}static encodeRequestParams(t){const n=['scope','client_id','response_type','state'],a=Object.keys(t).filter((t)=>!n.includes(t));let r={};a.forEach((n)=>{r[n]=t[n]});let o=new d({header:{alg:'none'},payload:r},{filter:!1});return o.encode().then((n)=>{let a={scope:t.scope,client_id:t.client_id,response_type:t.response_type,request:n,state:t.state};return a})}}t.exports=u}).call(n,a(0).Buffer)},function(t,n,a){(function(n,r){const{URL:o}=a(41),s=a(126),d=a(86),l=a(38),c=a(44),u=c.Headers?c.Headers:n.Headers,f=a(223),m=a(427),h=a(429),g=a(224);class b{static validateResponse(t){return Promise.resolve(t).then(this.parseResponse).then(this.matchRequest).then(this.validateStateParam).then(this.errorResponse).then(this.validateResponseMode).then(this.validateResponseParams).then(this.exchangeAuthorizationCode).then(this.validateIDToken).then(h.fromAuthResponse)}static parseResponse(t){let{redirect:n,body:a}=t;if(n&&a||!n&&!a)throw new Error('Invalid response mode');if(n){let a=new o(n),{search:r,hash:s}=a;if(r&&s||!r&&!s)throw new Error('Invalid response mode');r&&(t.params=f.decode(r.substring(1)),t.mode='query'),s&&(t.params=f.decode(s.substring(1)),t.mode='fragment')}return a&&(t.params=f.decode(a),t.mode='form_post'),t}static matchRequest(t){let{rp:n,params:a,session:r}=t,o=a.state,s=n.provider.configuration.issuer;if(!o)throw new Error('Missing state parameter in authentication response');let d=`${s}/requestHistory/${o}`,l=r[d];if(!l)throw new Error('Mismatching state parameter in authentication response');return t.request=JSON.parse(l),t}static validateStateParam(t){let n=new Uint8Array(t.request.state),a=t.params.state;return d.subtle.digest({name:'SHA-256'},n).then((n)=>{if(a!==l(r.from(n)))throw new Error('Mismatching state parameter in authentication response');return t})}static errorResponse(t){let n=t.params.error;return n?Promise.reject(n):Promise.resolve(t)}static validateResponseMode(t){if('code'!==t.request.response_type&&'query'===t.mode)throw new Error('Invalid response mode');return t}static validateResponseParams(t){let{request:n,params:a}=t,r=n.response_type.split(' ');return r.includes('code')&&s(a.code,'Missing authorization code in authentication response'),r.includes('id_token')&&s(a.id_token,'Missing id_token in authentication response'),r.includes('token')&&(s(a.access_token,'Missing access_token in authentication response'),s(a.token_type,'Missing token_type in authentication response')),t}static exchangeAuthorizationCode(t){let{rp:n,params:a,request:o}=t,d=a.code;if(!d||'code'!==o.response_type)return Promise.resolve(t);let{provider:l,registration:m}=n,h=m.client_id,b=m.client_secret;if(!b)return Promise.reject(new Error('Client cannot exchange authorization code because it is not a confidential client'));let y=l.configuration.token_endpoint,v=new u({"Content-Type":'application/x-www-form-urlencoded'}),w={grant_type:'authorization_code',code:d,redirect_uri:o.redirect_uri},x=m.token_endpoint_auth_method||'client_secret_basic';if('client_secret_basic'===x){let t=new r(`${h}:${b}`).toString('base64');v.set('Authorization',`Basic ${t}`)}'client_secret_post'===x&&(w.client_id=h,w.client_secret=b);let _=f.encode(w);return c(y,{method:'POST',headers:v,body:_}).then(g('Error exchanging authorization code')).then((t)=>t.json()).then((n)=>(s(n.access_token,'Missing access_token in token response'),s(n.token_type,'Missing token_type in token response'),s(n.id_token,'Missing id_token in token response'),t.params=Object.assign(t.params,n),t))}static validateIDToken(t){return t.params.id_token?Promise.resolve(t).then(b.decryptIDToken).then(b.decodeIDToken).then(b.validateIssuer).then(b.validateAudience).then(b.resolveKeys).then(b.verifySignature).then(b.validateExpires).then(b.verifyNonce).then(b.validateAcr).then(b.validateAuthTime).then(b.validateAccessTokenHash).then(b.validateAuthorizationCodeHash):Promise.resolve(t)}static decryptIDToken(t){return Promise.resolve(t)}static decodeIDToken(t){let n=t.params.id_token;return n&&(t.decoded=m.decode(n)),t}static validateIssuer(t){let n=t.rp.provider.configuration,a=t.decoded.payload;if(a.iss!==n.issuer)throw new Error('Mismatching issuer in ID Token');return t}static validateAudience(t){let n=t.rp.registration,{aud:a,azp:r}=t.decoded.payload;if('string'==typeof a&&a!==n.client_id)throw new Error('Mismatching audience in id_token');if(Array.isArray(a)&&!a.includes(n.client_id))throw new Error('Mismatching audience in id_token');if(Array.isArray(a)&&!r)throw new Error('Missing azp claim in id_token');if(r&&r!==n.client_id)throw new Error('Mismatching azp claim in id_token');return t}static resolveKeys(t){let n=t.rp,a=n.provider,r=t.decoded;return Promise.resolve(a.jwks).then((t)=>t?t:n.jwks()).then((n)=>{if(r.resolveKeys(n))return Promise.resolve(t);throw new Error('Cannot resolve signing key for ID Token')})}static verifySignature(t){let n=t.decoded.header.alg,a=t.rp.registration,r=a.id_token_signed_response_alg||'RS256';if(n!==r)throw new Error(`Expected ID Token to be signed with ${r}`);return t.decoded.verify().then((n)=>{if(!n)throw new Error('Invalid ID Token signature');return t})}static validateExpires(t){let n=t.decoded.payload.exp;if(n<=w(Date.now()/1e3))throw new Error('Expired ID Token');return t}static verifyNonce(t){let n=new Uint8Array(t.request.nonce),a=t.decoded.payload.nonce;if(!a)throw new Error('Missing nonce in ID Token');return d.subtle.digest({name:'SHA-256'},n).then((n)=>{if(a!==l(r.from(n)))throw new Error('Mismatching nonce in ID Token');return t})}static validateAcr(t){return t}static validateAuthTime(t){return t}static validateAccessTokenHash(t){return t}static validateAuthorizationCodeHash(t){return t}}t.exports=b}).call(n,a(3),a(0).Buffer)},function(t,n,a){const{JWT:r}=a(63),o=a(428);class s extends r{static get schema(){return o}}t.exports=s},function(t,n,a){const{JWTSchema:r}=a(63),o=r.extend({properties:{header:{},payload:{properties:{iss:{type:'string',format:'url'},sub:{type:'string',maxLength:255},auth_time:{type:'integer',format:'NumericDate'},nonce:{type:'string'},acr:{type:'string'},amr:{type:'array',items:{type:'string'}},azp:{type:'string',format:'StringOrURI'}},required:['iss','sub','aud','exp','iat']}}});t.exports=o},function(t,n,a){'use strict';class r{constructor(t){this.idp=t.idp,this.clientId=t.clientId,this.sessionKey=t.sessionKey,this.decoded=t.decoded,this.accessToken=t.accessToken,this.idToken=t.idToken}static fromAuthResponse(t){const n=a(207),o=t.decoded.payload,s=t.rp.registration,d=t.session[n.SESSION_PRIVATE_KEY];let l={sessionKey:d,idp:o.iss,clientId:s.client_id,decoded:t.decoded,accessToken:t.params.access_token,idToken:t.params.id_token};return new r(l)}}t.exports=r},function(t,n,a){const{JSONSchema:r}=a(17),o=new r({type:'object',properties:{provider:{type:'object',properties:{name:{type:'string'},url:{type:'string',format:'uri'},configuration:{},jwks:{}},required:['url']},defaults:{type:'object',properties:{authenticate:{type:'object',properties:{redirect_uri:{type:'string',format:'uri'},response_type:{type:'string',default:'id_token token',enum:['code','token','id_token token','id_token token code']},display:{type:'string',default:'page',enum:['page','popup']},scope:{type:['string','array'],default:['openid']}}},register:{}}},registration:{},store:{type:'object',default:{}}}});t.exports=o},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function s(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(41),c=l.URL,u=a(63),f=u.JWT,m=u.JWK,h=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,t),d(n,null,[{key:'issueFor',value:function(t,a){if(!t)throw new Error('Cannot issue PoPToken - missing resource server URI');if(!a.sessionKey)throw new Error('Cannot issue PoPToken - missing session key');if(!a.idToken)throw new Error('Cannot issue PoPToken - missing id token');var r=JSON.parse(a.sessionKey);return m.importKey(r).then(function(r){var o={aud:new c(t).origin,key:r,iss:a.clientId,id_token:a.idToken};return n.issue(o)}).then(function(t){return t.encode()})}},{key:'issue',value:function(t){var a=t.aud,r=t.iss,o=t.key,s=o.alg,d=t.iat||w(Date.now()/1e3),l=t.max||3600,c={iss:r,aud:a,exp:d+l,iat:d,id_token:t.id_token,token_type:'pop'},u=new n({header:{alg:s},payload:c,key:o.cryptoKey},{filter:!1});return u}}]),n}(f);t.exports=h},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.openIdpSelector=n.startPopupServer=n.loginHandler=n.storageHandler=void 0;var o=a(82),s=r(o),d=a(433),l=r(d),c=a(203),u=a(129),f=function(t,n,a){return(0,c.combineHandlers)(m(t),h(n,a))},m=n.storageHandler=function(t){return function(n){var a=n.id,r=n.method,o=n.args;return'storage/getItem'===r?t.getItem.apply(t,(0,l.default)(o)).then(function(t){return{id:a,ret:t}}):'storage/setItem'===r?t.setItem.apply(t,(0,l.default)(o)).then(function(){return{id:a,ret:null}}):'storage/removeItem'===r?t.removeItem.apply(t,(0,l.default)(o)).then(function(){return{id:a,ret:null}}):null}},h=n.loginHandler=function(t,n){return function(a){var r=a.id,o=a.method,d=a.args;return'getLoginOptions'===o?s.default.resolve({id:r,ret:{popupUri:t.popupUri,callbackUri:t.callbackUri}}):'foundSession'===o?(n(d[0]),s.default.resolve({id:r,ret:null})):null}},g=n.startPopupServer=function(t,n,a){return new s.default(function(r,o){if(!(a.popupUri&&a.callbackUri))return o(new Error('Cannot serve a popup without both "options.popupUri" and "options.callbackUri"'));var s=(0,c.server)(n,(0,u.originOf)(a.popupUri))(f(t,a,function(t){s.stop(),r(t)}));s.start()})},b=n.openIdpSelector=function(t){if(!(t.popupUri&&t.callbackUri))throw new Error('Cannot open IDP select UI.  Must provide both "options.popupUri" and "options.callbackUri".');var n=650,a=400,r=window.open(t.popupUri,'_blank','width='+n+',height='+a+',left='+(window.innerWidth-n)/2+',top='+(window.innerHeight-a)/2);return r}},function(t,n,a){'use strict';n.__esModule=!0;var r=a(434),o=function(t){return t&&t.__esModule?t:{default:t}}(r);n.default=function(t){if(Array.isArray(t)){for(var n=0,a=Array(t.length);n<t.length;n++)a[n]=t[n];return a}return(0,o.default)(t)}},function(t,n,a){t.exports={default:a(435),__esModule:!0}},function(t,n,a){a(120),a(436),t.exports=a(16).Array.from},function(t,n,a){'use strict';var r=a(58),o=a(28),s=a(119),d=a(194),l=a(195),c=a(113),u=a(437),f=a(196);o(o.S+o.F*!a(201)(function(t){Array.from(t)}),'Array',{from:function(t){var n=s(t),a='function'==typeof this?this:Array,o=arguments.length,m=1<o?arguments[1]:void 0,h=void 0!==m,g=0,b=f(n),y,v,w,x;if(h&&(m=r(m,2<o?arguments[2]:void 0,2)),void 0!=b&&!(a==Array&&l(b)))for(x=b.call(n),v=new a;!(w=x.next()).done;g++)u(v,g,h?d(x,m,[w.value,g],!0):w.value);else for(y=c(n.length),v=new a(y);y>g;g++)u(v,g,h?m(n[g],g):n[g]);return v.length=g,v}})},function(t,n,a){'use strict';var r=a(26),o=a(60);t.exports=function(t,n,a){n in t?r.f(t,n,o(0,a)):t[n]=a}},function(t,n,a){'use strict';function r(t,n,a,r){var o=t.createElement('div');o.innerHTML='<p>Name of new '+a+':</p>';var s=t.createElement('input');s.setAttribute('type','text'),s.setAttribute('size','30'),s.setAttribute('style',u),s.setAttribute('maxLength','2048'),s.select();var d=function(){s.setAttribute('class','pendingedit'),s.disabled=!0,r(!0,s.value)};s.addEventListener('keyup',function(t){13===t.keyCode&&d()},!1),o.appendChild(s);var l=o.appendChild(t.createElement('br')),c=o.appendChild(t.createElement('button'));c.setAttribute('type','button'),c.style.cssText=u,c.innerHTML='Cancel',c.addEventListener('click',function(){o.parentNode.removeChild(o),r(!1)},!1);var f=o.appendChild(t.createElement('button'));return f.setAttribute('type','button'),f.innerHTML='Continue',f.style.cssText=u,f.addEventListener('click',function(){d()},!1),o}var o=a(18),s=a(21),d=a(183),l={authn:a(179),icons:a(20),log:a(19),ns:a(9),store:a(14),utils:a(23)},c=l.store,u='font-size: 100%; margin: 0.8em; padding:0.5em;';t.exports={newThingUI:function(t,n){var a=t.dom,o=t.div;if(t.me&&!t.me.uri)throw new Error('newThingUI:  Invalid userid '+me);var s='padding: 0.7em; width: 2em; height: 2em;',d=o.appendChild(a.createElement('img')),u=!1;d.setAttribute('src',l.icons.iconBase+'noun_34653_green.svg'),d.setAttribute('style',s),d.setAttribute('title','Add another tool to the meeting');var f=function(t){var n=o.appendChild(a.createElement('pre'));n.setAttribute('style','background-color: pink'),n.appendChild(a.createTextNode(t))},m=function(){u=!u,d.setAttribute('style',s+(u?'background-color: yellow;':'')),_(u?'':'display: none;')};d.addEventListener('click',m);var h=function(t){return new Promise(function(n,o){var s=function(n,r){var s={newBase:r,workspace:n};for(var d in t)s[d]=t[d];console.log('newThingUI: Minting new '+s.pane.name+' at '+s.newBase),t.pane.mintNew(s).then(function(n){if(!n||!n.newInstance)throw new Error('Cannot mint new - missing newInstance');if(n.folder)c.add(n.folder,l.ns.ldp('contains'),c.sym(n.newBase),n.folder.doc()),n.refreshTarget&&n.refreshTarget.refresh(),u.parentNode.removeChild(u);else{var r=t.div.appendChild(a.createElement('p'));r.setAttribute('style','font-size: 120%;'),r.innerHTML='Your <a target=\'_blank\' href=\''+n.newInstance.uri+'\'><b>new '+t.noun+'</b></a> is ready to be set up. <br/><br/><a target=\'_blank\' href=\''+n.newInstance.uri+'\'>Go to your new '+t.noun+'.</a>',h.removeChild(u)}m()}).catch(function(t){f(t),o(t)})},d=t.pane,u,h;if(t.appPathSegment='edu.mit.solid.pane.'+d.name,t.noun=d.mintClass?l.utils.label(d.mintClass):d.name,!t.folder)u=l.authn.selectWorkspace(a,t,s),t.div.appendChild(u),h=t.div;else{var g=function(n,a){if(!n)m();else{var r=t.folder.uri;r.endsWith('/')||(r+='/'),r=r+encodeURIComponent(a)+'/',s(null,r)}};u=r(a,l.store,t.noun,g),t.div.appendChild(u),h=t.div}})},g=[];for(var b in n){var y=n[b];if(y.mintNew){var v=t.div.appendChild(a.createElement('img'));v.setAttribute('src',y.icon);var w=y.mintClass?l.utils.label(y.mintClass):y.name+' @@';v.setAttribute('title','Make new '+w),v.setAttribute('style',s+'display: none;'),g.push(v);var x=function(n,a,r){var o=a;a.disabled||a.addEventListener('click',function(a){k(o);var s={event:a,folder:t.folder,iconEle:o,pane:n,noun:r,noIndexHTML:!0,div:t.div,me:t.me,dom:t.dom,refreshTarget:t.refreshTarget};h(s)})};x(y,v,w)}}var _=function(t){for(var n=0,a;n<g.length;n++)a=s+t,g[n].disabled&&(a+='opacity: 0.3;'),g[n].setAttribute('style',a)},k=function(t){_('display: none;'),t.setAttribute('style',s+'background-color: yellow;')}}}},function(t,n,a){'use strict';var r={icons:a(20),log:a(19),ns:a(9),pad:a(2),rdf:a(18),store:a(14),widgets:a(21)},o=a(23),s=r.store;t.exports.matrixForQuery=function(n,t,a,r,d,l,c){var u=n.createElement('table'),f=n.createElement('tr'),m=f.appendChild(n.createElement('td'));m.setAttribute('class','MatrixCorner'),u.appendChild(f),u.lastHeader=f;var h=[],g=[],b=function(t,n,a,r){for(;t.firstChild;)t.removeChild(t.firstChild);t.setAttribute('style',''),t.style.textAlign='center',l.cellFunction?l.cellFunction(t,n,a,r):(t.textContent=o.label(r),t.setAttribute('style','padding: 0.3em')),delete t.old},v=function(t){var a=t.toNT();if(g[a])return g[a];var r=n.createElement('tr'),d=r.appendChild(n.createElement('td'));d.setAttribute('style','padding: 0.3em;'),d.textContent=o.label(t),(t.termType='NamedNode')&&s.fetcher.nowOrWhenFetched(t.uri.split('#')[0],void 0,function(){d.textContent=o.label(t)});for(var c=0;c<h.length;c++)b(r.appendChild(n.createElement('td')),$rdf.fromNT(h[c]),t,null);r.dataValueNT=a,g[a]=r;for(var f=u.lastHeader.nextSibling;f;f=f.nextSibling)if(a>f.dataValueNT&&l&&l.yDecreasing||a<f.dataValueNT&&!(l&&l.yDecreasing))return u.insertBefore(r,f);return u.appendChild(r)},w=function(a){for(var r=a.toNT(),s=null,d=0;d<h.length;d++){if(h[d]===r)return d;if(r>h[d]&&l.xDecreasing||r<h[d]&&!l.xDecreasing){h=h.slice(0,d).concat([r]).concat(h.slice(d)),s=d;break}}null===s&&(s=h.length,h.push(r));for(var c=u.firstChild;c;c=c.nextSibling){var f=c.dataValueNT,m=n.createElement('td');if(m.style.textAlign='center',c===u.firstChild?m.textContent=o.label(a):b(m,a,$rdf.fromNT(f),null),s===h.length-1)c.appendChild(m);else{for(var g=c.firstChild,t=0;t<s+1;t++)g=g.nextSibling;c.insertBefore(m,g)}}return s},y=function(){for(var t=1,n;t<u.children.length;t++){n=u.children[t];for(var a=1;a<n.children.length;a++)n.children[a].old=!0}},x=function(){var t=[],n=[],a,r;if(l.set_y)for(var o=0;o<l.set_y.length;o++)n[l.set_y[o]]=!0;if(l.set_x)for(o=0;o<l.set_x.length;o++)t[w(l.set_x[o])+1]=!0;for(var s=1;s<u.children.length;s++){a=u.children[s];for(var d=1;d<a.children.length;d++)if(r=a.children[d],r.old){var c=$rdf.fromNT(a.dataValueNT),f=$rdf.fromNT(h[d-1]);b(r,f,c,null)}else n[a.dataValueNT]=!0,t[d]=!0}for(var s=0;s<u.children.length;s++)if(a=u.children[s],0<s&&!n[a.dataValueNT])delete g[a.dataValueNT],u.removeChild(a);else for(var d=a.children.length-1,r;0<d;d--)r=a.children[d],t[d]||a.removeChild(r);for(var m=[],d=0;d<h.length;d++)t[d+1]&&m.push(h[d]);h=m};u.refresh=function(){y(),s.query(t,_,void 0,x)};var _=function(t){var n=t[a],o=t[r],s=t[d],l=v(o),c=w(n),u=l.children[c+1];b(u,n,o,s)};if(l.set_y)for(var C=0;C<l.set_y.length;C++)v(l.set_y[C]);if(l.set_x)for(C=0;C<l.set_x.length;C++)w(l.set_x[C]);return s.query(t,_,void 0,c),u}},function(t,n,a){'use strict';var r={icons:a(20),log:a(19),ns:a(9),pad:a(2),rdf:a(18),store:a(14),widgets:a(21)},o=a(23),s=r.store;t.exports=function(t,n,a,s,d){n=n||r.kb;var l=r.ns,c=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),u=$rdf.Namespace('http://purl.org/dc/terms/');d=d||{};var f=!!d.newestFirst,m='white-space: pre-wrap; width: 90%; font-size:100%; background-color: white; border: 0.07em solid #eee; padding: .2em 0.5em; margin: 0.1em 1em 0.1em 1em',h=t.createElement('div'),g=tabulator.preferences.get('me'),b=g?n.sym(g):null,y;b||console.log('Message area: @@ Should be logged in at this point');var w=r.store.updater,x=function(n,o){var s=t.createElement('a');return o.uri&&(s.setAttribute('href',o.uri),s.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),s.setAttribute('style','color: #3B5998; text-decoration: none; ')),s.textContent=n,s},_=function(n,a){var r=t.createElement('pre');return r.setAttribute('style',a||'color: grey'),h.appendChild(r),r.appendChild(t.createTextNode(n)),r},k={log:function(t){_(t,'color: #111;')},warn:function(t){_(t,'color: #880;')},error:function(t){_(t,'color: #800;')}},C=function(){var o=t.createElement('tr'),d=t.createElement('td'),c=t.createElement('td'),f=t.createElement('td');o.appendChild(d),o.appendChild(c),o.appendChild(f),o.AJAR_date='9999-01-01T00:00:00Z';o.appendChild(t.createElement('br'));var h=t.createElement('textarea');c.appendChild(h),h.rows=3,h.setAttribute('style',m);var g=t.createElement('button');return g.textContent='send',g.setAttribute('style','float: right;'),g.addEventListener('click',function(){h.setAttribute('class','pendingedit'),h.disabled=!0;var d=[],c=new Date,f=''+c.getTime(),m=$rdf.term(c),g=n.sym(s.uri+'#Msg'+f);d.push(new $rdf.Statement(a,l.wf('message'),g,s)),d.push(new $rdf.Statement(g,l.sioc('content'),n.literal(h.value),s)),d.push(new $rdf.Statement(g,u('created'),m,s)),b&&d.push(new $rdf.Statement(g,l.foaf('maker'),b,s));w.update([],d,function(a,s,d){if(!s)o.appendChild(r.widgets.errorMessageBlock(t,'Error writing message: '+d));else{var l={"?msg":g,"?content":n.literal(h.value),"?date":m,"?creator":b};I(l),h.value='',h.setAttribute('class',''),h.disabled=!1}})},!1),f.appendChild(g),o},T=function(t){var n=r.store.any(t,r.ns.foaf('nick'));return n?''+n.value:''+o.label(t)},E=function(t,a){var r={},o,s;for(o=a.firstChild;o;o=o.nextSibling)o.AJAR_subject&&(r[o.AJAR_subject.uri]=!0);var d=n.each(t,l.wf('message')),c={};for(d.map(function(t){c[t.uri]=!0,r[t.uri]||A(t)}),o=a.firstChild;o;)s=o.nextSibling,o.AJAR_subject&&!c[o.AJAR_subject.uri]&&a.removeChild(o),o=s},S=function(t){var r=n.statementsMatching(t).concat(n.statementsMatching(void 0,void 0,t));w.update(r,[],function(t,n,r){n?E(a,y):k.error('Cant delete messages:'+r)})},A=function(t){var a={"?msg":t,"?creator":n.any(t,l.foaf('maker')),"?date":n.any(t,u('created')),"?content":n.any(t,l.sioc('content'))};I(a)},I=function(n){var a=n['?creator'],o=n['?msg'],s=n['?date'],d=n['?content'],l=s.value,c=t.createElement('tr');c.AJAR_date=l,c.AJAR_subject=o;for(var u=!1,h=y.firstChild;;h=h.nextSibling){if(!h)break;if(l>h.AJAR_date&&f||l<h.AJAR_date&&!f){y.insertBefore(c,h),u=!0;break}}u||y.appendChild(c);var g=t.createElement('td');c.appendChild(g);var b=g.appendChild(x(T(a),a));a.uri&&r.store.fetcher.nowOrWhenFetched(a.doc(),void 0,function(){b.textContent=T(a)}),g.appendChild(t.createElement('br')),g.appendChild(x(r.widgets.shortDate(l),o));var v=t.createElement('td');c.appendChild(v);var w=t.createElement('p');w.setAttribute('style',m),v.appendChild(w),w.textContent=d.value;var _=t.createElement('td');c.appendChild(_);var k=t.createElement('button');_.appendChild(k),k.textContent='-',c.setAttribute('class','hoverControl'),k.setAttribute('class','hoverControlHide'),k.setAttribute('style','color: red;'),k.addEventListener('click',function(){_.removeChild(k);var n=t.createElement('button');n.textContent='cancel',_.appendChild(n).addEventListener('click',function(){_.removeChild(a),_.removeChild(n),_.appendChild(k)},!1);var a=t.createElement('button');a.textContent='Delete message',_.appendChild(a).addEventListener('click',function(){_.removeChild(a),_.removeChild(n),S(o)},!1)},!1)};if(y=t.createElement('table'),h.appendChild(y),y.setAttribute('style','width: 100%;'),tabulator.preferences.get('me')){var N=C();f?y.insertBefore(N,y.firstChild):y.appendChild(N)}var j;if(d.query)j=d.query;else{j=new $rdf.Query('Messages');var R={};['msg','date','creator','content'].map(function(t){j.vars.push(R[t]=$rdf.variable(t))}),j.pat.add(a,c('message'),R.msg),j.pat.add(R.msg,l.dct('created'),R.date),j.pat.add(R.msg,l.foaf('maker'),R.creator),j.pat.add(R.msg,l.sioc('content'),R.content)}return n.query(j,I),h.refresh=function(){E(a,y)},h}},function(t,n,a){'use strict';var r=a(18),o=t.exports={},s={icons:a(20),log:a(19),ns:a(9),pad:o,rdf:r,store:a(14),widgets:a(21)},d=a(23);s.pad.lightColorHash=function(t){return t&&t.uri?'#'+(12632256|16777215&function(t){return t.split('').reduce(function(t,n){return t=(t<<5)-t+n.charCodeAt(0),t&t},0)}(t.uri)).toString(16):'#ffffff'},s.pad.renderPartipants=function(t,n,a,r,o,l){var c=s.store,u=s.ns;n.setAttribute('style','margin: 0.8em;');var f=function(a){var r=c.any(a,u.wf('participant')),o=c.anyValue(a,u.ui('backgroundColor'))||'white',d=t.createElement('div');d.setAttribute('style','height: 1.5em; width: 1.5em; margin: 0.3em; border 0.01em solid #888; background-color: '+o);var f=s.widgets.personTR(t,null,r,l);n.appendChild(f);var m=t.createElement('td');return m.setAttribute('style','vertical-align: middle;'),m.appendChild(d),f.insertBefore(m,f.firstChild),f},m=function(){var t=c.each(r,u.wf('participation')).map(function(t){return[c.anyValue(t,s.ns.cal('dtstart'))||'9999-12-31',t]});t.sort();var a=t.map(function(t){return t[1]});d.syncTableToArray(n,a,f)};return n.refresh=m,m(),n},s.pad.recordParticipation=function(t,n,a){var r=s.store,o=s.ns,d=tabulator.preferences.get('me');if(d){var l=r.sym(d),c=r.each(t,o.wf('participation')).filter(function(t){return r.holds(t,o.wf('participant'),l)});if(1<c.length)throw'Multiple records of your participation';if(!c.length){var u=s.widgets.newThing(n),f=[s.rdf.st(t,o.wf('participation'),u,n),s.rdf.st(u,o.wf('participant'),l,n),s.rdf.st(u,s.ns.cal('dtstart'),new Date,n),s.rdf.st(u,o.ui('backgroundColor'),s.pad.lightColorHash(l),n)];r.updater.update([],f,function(t,n,r){if(!n)throw new Error('Error recording your partipation: '+r);a&&a.refresh&&a.refresh()})}}},s.pad.manageParticipation=function(t,n,a,r,o,d){var l=t.createElement('table');n.appendChild(l),s.pad.renderPartipants(t,l,a,r,o,d);try{s.pad.recordParticipation(r,a,l)}catch(a){n.appendChild(s.widgets.errorMessageBlock(t,'Error recording your partipation: '+a))}return l},s.pad.notepad=function(n,a,o,l,c){c=c||{};var u=c.exists,f=n.createElement('table'),m=s.store,h=s.ns;if(l&&!l.uri)throw new Error('UI.pad.notepad:  Invalid userid');var g=s.store.updater,b=r.Namespace('http://www.w3.org/ns/pim/pad#');f.setAttribute('style','padding: 1em; overflow: auto; resize: horizontal; min-width: 40em;');var y=null,v=null;if(c.statusArea){var w=c.statusArea.appendChild(n.createElement('table')),t=w.appendChild(n.createElement('tr'));y=t.appendChild(n.createElement('td')),v=t.appendChild(n.createElement('td')),y.setAttribute('style','width:50%'),v.setAttribute('style','width:50%')}var x=function(t,a){console.log(t),c.statusArea&&(a?y:v).appendChild(s.widgets.errorMessageBlock(n,t,'pink'))},_=function(){c.statusArea&&(c.statusArea.innerHTML='')},k=function(t,n,a){var r=t.subject;n=n||'';var o=m.any(r,h.dc('author'));if(!n&&o){var d=s.pad.lightColorHash(o);n='color: '+(a?'#888':'black')+'; background-color: '+d+';'}var l=m.any(r,b('indent'));l=l?l.value:0;var c=0<=l?'font-size: 100%; font-family: monospace; width: 100%; border: none; white-space: pre-wrap;'+'text-indent: '+3*l+'em;':'font-family: sans-serif; font-weight: bold;  border: none;'+['font-size: 110%;  padding-top: 0.5em; padding-bottom: 0.5em; width: 100%;','font-size: 120%; padding-top: 1em; padding-bottom: 1em; width: 100%;','font-size: 150%; padding-top: 1em; padding-bottom: 1em; width: 100%;'][-1-l];t.setAttribute('style',c+n)},C=function(t){var n=t.subject;if(!n)throw'No chunk for line to be deleted!';var s=m.any(void 0,b('next'),n),l=m.any(n,b('next'));if(s.sameTerm(o)&&l.sameTerm(o))return void console.log('You can\'t delete the only line.');var c=m.statementsMatching(n,void 0,void 0,a).concat(m.statementsMatching(void 0,void 0,n,a)),u=[r.st(s,b('next'),l,a)],f=n.uri.slice(-4);console.log('Deleting line '+f),g.update(c,u,function(r,o,s,l){if(o){var u=t.parentNode,m=u.previousSibling;u.parentNode.removeChild(u),console.log('    deleted line '+f+' ok '+t.value),m&&m.firstChild&&m.firstChild.focus()}else if(l&&409===l.status)k(t,'color: black;  background-color: #ffd;'),t.state=0,d.beep(0.5,512),setTimeout(function(){g.requestDownstreamAction(a,O)},1e3);else{console.log('    removePart FAILED '+n+': '+s),console.log('    removePart was deleteing :\''+c),k(t,'color: black;  background-color: #fdd;');var h=l?l.status:' [no response field] ';x('Error '+h+' saving changes: '+s.true)}})},T=function(t,n,o){var s=m.statementsMatching(n,b('indent')),d=s.length?+s[0].object.value:0;if(!(-3>d+o)){var l=d+o,c=r.st(n,b('indent'),l,a);g.update(s,c,function(n,r,o){r?k(t):(console.log('Indent change FAILED \''+l+'\' for '+a+': '+o),k(t,'color: black;  background-color: #fdd;'),g.requestDownstreamAction(a,O))})}},E=function(t,n){t.addEventListener('keydown',function(r){var o,s;switch(r.keyCode){case 13:var d=r.shiftKey;if(console.log('enter'),d?(s=m.any(void 0,b('next'),n),o='newlinesAfter'):(s=m.any(n,b('next')),o='newlinesBefore'),s[o]=s[o]||0,s[o]+=1,1<s[o])return void console.log('    queueing newline queue = '+s[o]);console.log('    go ahead line before '+s[o]),A(t,d);break;case 8:if(0===t.value.length)switch(console.log('Delete key line '+n.uri.slice(-4)+' state '+t.state),t.state){case 1:case 2:return void(t.state=4);case 3:case 4:return;case void 0:case 0:t.state=3,C(t),r.preventDefault();break;default:throw'Unexpected state '+t.state;}break;case 9:var l=r.shiftKey?-1:1;T(t,n,l),r.preventDefault();break;case 27:console.log('escape'),g.requestDownstreamAction(a,O),r.preventDefault();break;case 38:t.parentNode.previousSibling&&(t.parentNode.previousSibling.firstChild.focus(),r.preventDefault());break;case 40:t.parentNode.nextSibling&&(t.parentNode.nextSibling.firstChild.focus(),r.preventDefault());break;default:}});var o=function t(n){var o=n.subject;k(n,void 0,!0);var s=m.any(o,h.sioc('content')).value,l=[r.st(o,h.sioc('content'),s,a)],c=[r.st(o,h.sioc('content'),n.value,a)],u=n.value;if(n.lastSent&&s!=n.lastSent)throw'Out of order, last sent expected \''+s+'\' but found \''+n.lastSent+'\'';n.lastSent=u,console.log(' Patch proposed to '+o.uri.slice(-4)+' \''+s+'\' -> \''+u+'\' '),g.update(l,c,function(r,o,l,c){o?(_(!0),k(n),console.log('    Patch ok \''+s+'\' -> \''+u+'\' '),4===n.state?(n.state=3,C(n)):3===n.state||(2===n.state?(n.state=1,t(n)):n.state=0)):(console.log('    patch FAILED '+c.status+' for \''+s+'\' -> \''+u+'\': '+l),409===c.status?(k(n,'color: black;  background-color: #fdd;'),n.state=0,d.beep(0.5,512),setTimeout(function(){g.requestDownstreamAction(a,O)},1e3)):(k(n,'color: black;  background-color: #fdd;'),n.state=0,x('    Error '+c.status+' sending data: '+l,!0),d.beep(1,128)))})};t.addEventListener('input',function(){switch(k(t,void 0,!0),console.log('Input event state '+t.state+' value \''+t.value+'\''),t.state){case 3:return;case 4:return;case 2:return;case 1:return void(t.state=2);case 0:case void 0:t.state=1,o(t);}})},S=function(t,a,r){var o=m.any(a,h.sioc('content'));o=o?o.value:'';var s=n.createElement('tr');r?f.insertBefore(s,t):t&&t.nextSibling?f.insertBefore(s,t.nextSibling):f.appendChild(s);var d=s.appendChild(n.createElement('input'));return d.subject=a,d.setAttribute('type','text'),d.value=o,l?(k(d,''),E(d,a)):(k(d,'color: #222; background-color: #111;'),console.log('Note can\'t add listeners - not logged in')),d},A=function t(n,d){var c=s.store,u=0,f=null,m,y,v,w,x;n?('input'!==n.tagName.toLowerCase()&&console.log('return pressed when current document is: '+n.tagName),y=n.subject,u=c.any(y,b('indent')),u=u?+u.value:0,d?(v=c.any(void 0,b('next'),y),w=y,x=v,f='newlinesAfter'):(v=y,w=c.any(y,b('next')),x=w,f='newlinesBefore'),m=n.parentNode):(v=o,w=o,m=void 0);var _=s.widgets.newThing(a),C=_.uri.slice(-4),T=[r.st(v,b('next'),w,a)],E=[r.st(v,b('next'),_,a),r.st(_,b('next'),w,a),r.st(_,h.dc('author'),l,a),r.st(_,h.sioc('content'),'',a)];0<u&&E.push(r.st(_,b('indent'),u,a)),console.log('    Fresh chunk '+C+' proposed'),g.update(T,E,function(n,a,r){if(!a)console.log('    ERROR writing new line '+C+': '+r);else{var o=S(m,_,d);k(o),o.focus(),f&&(console.log('    Fresh chunk '+C+' updated, queue = '+x[f]),x[f]-=1,0<x[f]&&(console.log('    Implementing queued newlines = '+w.newLinesBefore),t(o,d)))}})},I=function(){var t=[],n=0,a=function(t){x(t),n++};if(!m.the(o,b('next')))return a('No initial next pointer'),!1;for(var r=o,s;;){if(s=m.the(r,b('next')),s||a('No next pointer from '+r),s.sameTerm(o))break;r=s;var d=s.uri.split('#')[1];if(t[s.uri])return a('Loop!'),!1;t[s.uri]=!0;var l=m.each(s,b('next')).length;1!==l&&a('Should be 1 not '+l+' next pointer for '+d),l=m.each(s,b('indent')).length,1<l&&a('Should be 0 or 1 not '+l+' indent for '+d),l=m.each(s,h.sioc('content')).length,1!==l&&a('Should be 1 not '+l+' contents for '+d),l=m.each(s,h.dc('author')).length,1!==l&&a('Should be 1 not '+l+' author for '+d);var c=m.statementsMatching(void 0,h.sioc('contents'));c.map(function(n){t[n.subject.uri]||a('Loose chunk! '+n.subject.uri)})}return!n},N=function(){var t=m.the(o,b('next'));if(1!==m.each(o,b('next')).length){var n='Pad: Inconsistent data - NEXT pointers: '+m.each(o,b('next')).length;return console.log(n),void(c.statusAra&&(c.statusArea.textContent+=n))}for(var a=m.the(void 0,b('previous'),o),r=t,s=[],r=m.the(o,b('next')),d,l;!r.sameTerm(o);r=m.the(r,b('next')))for(var l=0,u;l<f.children.length;l++)u=f.children[l],u.firstChild.subject.sameTerm(r)&&(s[r.uri]=u.firstChild);for(var l=f.children.length-1;0<=l;l--)d=f.children[l],s[d.firstChild.subject.uri]||f.removeChild(d);d=f.firstChild;for(var r=m.the(o,b('next')),g;!r.sameTerm(o);r=m.the(r,b('next')))if(g=m.any(r,h.sioc('content')).value,d&&s[r.uri]){var y=d.firstChild;g!==y.value&&(y.value=g),k(y),y.state=0,delete y.lastSent,d=d.nextSibling}else S(d,r,!0)},j=function t(n){if(n.refresh)return void n.refresh();for(var a=0;a<n.children.length;a++)t(n.children[a])},R=!1,L=function(){console.log('    reloaded OK'),_(),I()?j(f):x('CONSITENCY CHECK FAILED')},O=function(){if(R)return void console.log('   Already reloading - stop');R=!0;var t=1e3;(function n(){console.log('try reload - timeout = '+t),g.reload(g.store,a,function(r,o,s){R=!1,r?L():0===s.status?(x('Network error refreshing the pad. Retrying in '+t/1e3),R=!0,t*=2,setTimeout(n,t)):x('Error '+s.status+'refreshing the pad:'+o+'. Stopped. '+a)})})()};if(f.refresh=N,f.reloadAndSync=O,l||console.log('Warning: must be logged in for pad to be edited'),u)console.log('Existing pad.'),I()?(N(),m.holds(o,b('next'),o)&&A()):console.log(f.textContent='Inconsistent data. Abort');else{console.log('No pad exists - making new one.');var P=[r.st(o,h.rdf('type'),b('Notepad'),a),r.st(o,h.dc('author'),l,a),r.st(o,h.dc('created'),new Date,a),r.st(o,b('next'),o,a)];g.update([],P,function(t,n,a){n?(console.log('Initial pad created'),A()):x(a)})}return f}},function(t,n,a){'use strict';var r={icons:a(20),log:a(19),ns:a(9),store:a(14),widgets:a(21)},o=a(23),s=a(18);t.exports=function(t,n){function a(t,n){for(var a=n.getColumns(),r=0,o;r<a.length;++r)o=se.variable('_col'+r),t.vars.push(o),a[r].setVariable(o)}function d(t,n,a){var o=a.type;o||(o=se.variable('_any')),t.pat.add(n,r.ns.rdf('type'),o)}function l(t,n,a){for(var r=a.getColumns(),o=0;o<r.length;++o){var s=r[o],d=se.formula();d.add(n,s.predicate,s.getVariable()),t.pat.optional.push(d)}}function c(t){var n=new s.Query,r=se.variable(fe.slice(1));return a(n,t),d(n,r,t),l(n,r,t),n}function u(t){m(_e),_e.appendChild(x(t));var n=c(t);f(n,t)}function f(t,n){ge&&(ge.running=!1);var a=ee(t,n);m(ke),ke.appendChild(a),ge=t}function m(t){for(;0<t.childNodes.length;)t.removeChild(t.childNodes[0])}function h(t){this.type=t,this.columns=null,this.allColumns=null,this.useCount=0,this.getAllColumns=function(){return this.allColumns},this.getColumns=function(){if(!this.columns){var t=this.getAllColumns();this.columns=t.slice(0,7)}return this.columns},this.getUnusedColumns=function(){for(var t=this.getAllColumns(),n=this.getColumns(),a=[],r=0;r<t.length;++r)-1==n.indexOf(t[r])&&a.push(t[r]);return a},this.addColumn=function(t){this.columns.push(t)},this.removeColumn=function(t){this.columns=this.columns.filter(function(n){return n!==t})},this.getLabel=function(){return o.label(this.type)},this.addUse=function(){this.useCount+=1}}function g(){this.useCount=0,this.checkedAnyValues=!1,this.possiblyLiteral=!0,this.possiblyNumber=!0,this.constraints=[],this.checkValue=function(t){var n=t.termType;if(this.possiblyLiteral&&'Literal'!==n&&'NamedNode'!==n)this.possiblyNumber=!1,this.possiblyLiteral=!1;else if(this.possiblyNumber)if('Literal'!=n)this.possiblyNumber=!1;else{var a=t.value;a.match(/^\-?\d+(\.\d*)?$/)||(this.possiblyNumber=!1)}this.checkedAnyValues=!0},this.getVariable=function(){return this.variable},this.setVariable=function(t){this.variable=t},this.getKey=function(){return this.variable.toString()},this.addUse=function(){this.useCount+=1},this.getLabel=function(){return this.predicate?this.predicate.sameTerm(ie.rdf('type'))&&this.superClass?o.label(this.superClass):o.label(this.predicate):this.variable?this.variable.toString():'unlabeled column?'},this.setPredicate=function(t,n,a){n?(this.inverse=t,this.constraints=this.constraints.concat(se.each(t,r.ns.rdfs('domain'))),t.sameTerm(ie.rdfs('subClassOf'))&&'NamedNode'===a.termType&&(this.superClass=a,this.alternatives=se.each(void 0,ie.rdfs('subClassOf'),a))):(this.predicate=t,this.constraints=this.constraints.concat(se.each(t,r.ns.rdfs('range'))))},this.getConstraints=function(){return this.constraints},this.filterFunction=function(){return!0},this.sortKey=function(){return this.getLabel().toLowerCase()},this.isImageColumn=function(){for(var t=0;t<this.constraints.length;t++)if(this.constraints[t].uri in ue)return!0;return!1}}function b(t,n){var a=[];for(var r in t){var o=t[r];(!n||n(r,o))&&a.push(o)}return a}function y(n,a){var r=t.createElement('option');return r.setAttribute('value',a),r.appendChild(t.createTextNode(n)),r}function v(n,a){var r=t.createElement('div');r.appendChild(t.createTextNode('Select type: '));var o=t.createElement('select');for(var s in o.appendChild(y('All types','null')),a)o.appendChild(y(a[s].getLabel(),s));return o.addEventListener('click',function(){var t;t='null'===o.value?n:a[o.value],w(t)},!1),r.appendChild(o),r}function w(t){u(t)}function x(n){var a=t.createElement('div'),r=n.getUnusedColumns();if(r.sort(function(t,n){var a=t.sortKey(),r=n.sortKey();return(a>r)-(a<r)}),0<r.length){a.appendChild(t.createTextNode('Add column: '));var o=t.createElement('select');o.appendChild(y('','-1'));for(var s=0,d;s<r.length;++s)d=r[s],o.appendChild(y(d.getLabel(),''+s));a.appendChild(o),o.addEventListener('click',function(){var t=new Number(o.value);0<=t&&(n.addColumn(r[t]),u(n))},!1)}return a}function _(t,n){var a;return n.uri in t?a=t[n.uri]:(a=new g,a.setPredicate(n),t[n.uri]=a),a}function k(t,n){var a;return n.uri in t?a=t[n.uri]:(a=new h(n),t[n.uri]=a),a}function C(){for(var t={},n=se.statementsMatching(void 0,r.ns.rdf('type'),ae,ne),a={},o=0,s;o<n.length;++o)if(s=n[o].object,'NamedNode'===s.termType){var d=k(t,s);s.uri in a||(a[s.uri]=[]),a[s.uri].push(n[o].subject),d.addUse()}return[a,t]}function T(t,n){for(var a=se.statementsMatching(t,void 0,void 0,ne),r={},o=0,s;o<a.length;++o)if(s=a[o].predicate,!(s.uri in le)){var d=_(n,s);d.checkValue(a[o].object),r[s.uri]=d}return r}function E(t,n){for(var a={},r=0,o;r<n.length;++r)for(var s in o=T(n[r],a),o){var d=o[s];d.addUse()}var l=b(a);A(l),t.allColumns=l}function S(){var t=C(),n,a;for(var r in n=t[0],a=t[1],n){var o=n[r],s=a[r];E(s,o)}var d=new h(null);return[d,b(a)]}function A(t){t.sort(function(t,n){return(t.useCount<n.useCount)-(t.useCount>n.useCount)})}function I(n,a){var r=t.createElement('a');return r.appendChild(t.createTextNode('[x]')),r.addEventListener('click',function(){n.removeColumn(a),u(n)},!1),r}function N(n,a){var r=t.createElement('tr'),o=t.createElement('th');r.appendChild(o);for(var s=0;s<n.length;++s){var d=t.createElement('th'),l=n[s];d.appendChild(t.createTextNode(l.getLabel())),a&&d.appendChild(I(a,l)),r.appendChild(d)}return r}function j(t,n,a,r){var o=n.getKey();if(t.sort(function(t,n){var s=null,d=null;o in t.values&&(s=t.values[o][0]),o in n.values&&(d=n.values[o][0]);var l=a(s,d);return r?-l:l}),t.length){for(var s=t[0]._htmlRow.parentNode,d=0;d<t.length;++d)s.removeChild(t[d]._htmlRow);for(var d=0;d<t.length;++d)s.appendChild(t[d]._htmlRow)}}function R(t,n){for(var a=!0,r=0;r<n.length;++r){var o=n[r],s=o.getKey(),d=null;if(s in t.values&&(d=t.values[s][0]),!o.filterFunction(d)){a=!1;break}}var l=t._htmlRow;l.style.display=a?'':'none'}function L(t,n){for(var a=0,r;a<t.length;++a)r=t[a],R(r,n)}function O(t,n,a){function r(t){return t?'Literal'===t.termType?t.value.toLowerCase():'NamedNode'===t.termType?o.label(t).toLowerCase():t.value.toLowerCase():''}j(t,n,function(t,n){var a=r(t),o=r(n);return a<o?-1:a>o?1:0},a)}function P(n,a,r){var s=t.createElement('div'),d=t.createElement('input');d.setAttribute('type','text'),d.style.width='70%',s.appendChild(d);var l=t.createElement('span');l.appendChild(t.createTextNode('\u25BC')),l.addEventListener('click',function(){O(n,r,!1)},!1),s.appendChild(l);var c=t.createElement('span');c.appendChild(t.createTextNode('\u25B2')),c.addEventListener('click',function(){O(n,r,!0)},!1),s.appendChild(c);var u=null;return r.filterFunction=function(t){if(!u)return!0;if(!t)return!1;var n;return n='Literal'===t.termType?t.value:'NamedNode'===t.termType?o.label(t):'',0<=n.toLowerCase().indexOf(u)},d.addEventListener('keyup',function(){u=''===d.value?null:d.value.toLowerCase(),L(n,a)},!1),s}function M(n,a,r,s){for(var d=!0,l=t.createElement('div'),c=t.createElement('select'),u={},f=0,m;f<s.length;++f)m=s[f],u[m.uri]=!0;var h=W(r).initialSelection;h&&(u=h),c.setAttribute('multiple','true');for(var f=0;f<s.length;++f){var m=s[f],g=y(o.label(m),f);u[m.uri]&&(g.selected=!0),c.appendChild(g)}return l.appendChild(c),r.filterFunction=function(t){return!u||t&&u[t.uri]},c.addEventListener('click',function(){u={};for(var t=c.options,r=0;r<t.length;r++){var o=t[r],d=new Number(o.value);t[r].selected&&(u[s[d].uri]=!0)}var d;L(n,a)},!0),l}function D(n,a,r){function o(){c=''===d.value?null:new Number(d.value),u=''===l.value?null:new Number(l.value),L(n,a)}var s=t.createElement('div'),d=t.createElement('input');d.setAttribute('type','text'),d.style.width='40px',s.appendChild(d);var l=t.createElement('input');l.setAttribute('type','text'),l.style.width='40px',s.appendChild(l);var c=null,u=null;return r.filterFunction=function(t){return t&&(t=new Number(t)),c&&(!t||t<c)?!1:u&&(!t||t>u)?!1:!0},d.addEventListener('keyup',o,!1),l.addEventListener('keyup',o,!1),s}function B(t,n,a){return a.checkedAnyValues&&a.possiblyNumber?D(t,n,a):a.possiblyLiteral?P(t,n,a):null}function U(t,n,a){if(a.superClass&&0<a.alternatives.length)return M(t,n,a,a.alternatives);for(var o=a.getConstraints(),s=0,d;s<o.length;s++){if(d=o[s],a.checkedAnyValues&&a.possiblyNumber||d.uri in pe)return D(t,n,a);if(d.uri===oe)return P(t,n,a);var l=se.each(d,r.ns.owl('oneOf'));if(0<l.length)return M(t,n,a,l.elements)}return B(t,n,a)}function q(n,a){var r=t.createElement('tr');r.className='selectors',r.appendChild(t.createElement('td'));for(var o=0;o<a.length;++o){var s=t.createElement('td'),d=U(n,a,a[o]);d&&s.appendChild(d),r.appendChild(s)}return r}function F(n,a,s){s=s||{};var d=t.createElement('a'),l=s.linkFunction;return d.setAttribute('href',n),d.appendChild(t.createTextNode(a)),l?d.addEventListener('click',function(t){t.preventDefault(),t.stopPropagation();var n=o.getTarget(t),a=n.getAttribute('href');a||console.log('No href found \n'),l(a)},!0):d.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),d}function z(t,n){var a=!1;return t.uri&&(a=t.uri.match(/^mailto:(.*)/)),a?F(t.uri,a[1],n):F(t.uri,o.label(t),n)}function H(n){var a=t.createElement('img');return a.setAttribute('src',n.uri),a.style.height='40px',a}function W(t){return n&&n.hints&&t.variable&&n.hints[t.variable.toNT()]?n.hints[t.variable.toNT()]:{}}function V(n,a){var o=W(a),s=o.cellFormat,d;if(s)switch(s){case'shortDate':return t.createTextNode(r.widgets.shortDate(n.value));break;default:}else{if('Literal'===n.termType){if(n.datatype){if(ce[n.datatype.uri])return t.createTextNode(r.widgets.shortDate(n.value));if(pe[n.datatype.uri]){var d=t.createElement('span');return d.textContent=n.value,d.setAttribute('style','text-align: right'),d}}return t.createTextNode(n.value)}if('NamedNode'===n.termType&&a.isImageColumn())return H(n);if('NamedNode'===n.termType||'BlankNode'===n.termType)return z(n,o);if('Collection'===n.termType){var d=t.createElement('span');return d.appendChild(t.createTextNode('[')),n.elements.map(function(n){d.appendChild(V(n,a)),d.appendChild(t.createTextNode(', '))}),d.removeChild(d.lastChild),d.appendChild(t.createTextNode(']')),d}return t.createTextNode('unknown termtype \''+n.termType+'\'!')}}function G(n,a,r){var o=t.createElement('td');a._subject&&'uri'in a._subject&&o.appendChild(F(a._subject.uri,'\u2192')),n.appendChild(o);for(var s=0;s<r.length;++s){var d=r[s],l=t.createElement('td'),c=d.getKey(),u;if(c in a.values){var f=a.values[c],m=!1;a.originalValues&&a.originalValues[c]&&f.length!==a.originalValues[c].length&&(m=!0);for(var h=0,g;h<f.length;++h)g=f[h],a.originalValues&&a.originalValues[c]&&a.originalValues[c].length>h&&(u=a.originalValues[c][h],g.toString()!==u.toString()&&(m=!0)),l.appendChild(V(g,d)),h!==f.length-1&&l.appendChild(t.createTextNode(',\n')),m&&(l.style.background='#efe')}n.appendChild(l)}return a._htmlRow=n,n}function K(t,n){var a=null;if('Literal'===t.termType)a='value';else if('NamedNode'===t.termType)a='uri';else return 0<=n.indexOf(t);var r;for(r=0;r<n.length;++r)if(n[r].termType===t.termType&&n[r][a]===t[a])return!0;return!1}function J(t,n,a){var r=!1,o;for(o in a){var s=a[o];o in t.values||(t.values[o]=[]),K(s,t.values[o])||(t.values[o].push(s),r=!0)}r&&(m(t._htmlRow),G(t._htmlRow,t,n)),R(t,n)}function X(t){if('uri'in t)return t.uri;if('_subject_id'in t)return t._subject_id;var n=''+he;return t._subject_id=n,++he,n}function Z(a,r,o,s){a.running=!0;var d=Date.now(),l=t.createElement('tr');s.appendChild(l),l.textContent='Loading ...';for(var c=0;c<r.length;c++)r[c].original=!0,r[c].originalValues||(r[c].originalValues=r[c].values),r[c].values={};se.query(a,function(n){if(a.running){l.textContent+='.';var d=null,c=null,u;if(fe in n&&(c=n[fe],u=X(c),u in de&&(d=de[u])),!d){var f=t.createElement('tr');s.appendChild(f),d={_htmlRow:f,_subject:c,values:{}},r.push(d),c&&(de[u]=d)}delete d.original,J(d,o,n)}},void 0,function(){l&&l.parentNode&&l.parentNode.removeChild&&(l.parentNode.removeChild(l),l=null);var t=Date.now()-d;console.log('Query done: '+r.length+' rows, '+t+'ms');for(var a=r.length-1;0<=a;a--)if(r[a].original){console.log('   deleting row '+r[a]._subject);var o=r[a]._htmlRow;o.parentNode.removeChild(o),delete de[X(r[a]._subject)],r.splice(a,1)}n.onDone&&n.onDone()})}function Y(t,n){r.log.debug('>> processing formula');for(var a=0,o;a<n.statements.length;++a){if(o=n.statements[a],'NamedNode'===o.predicate.termType&&'Variable'===o.object.termType){var s=o.object.toString();if(s in t){var d=t[s];d.setPredicate(o.predicate,!1,o.subject)}}if('NamedNode'===o.predicate.termType&&'Variable'===o.subject.termType){var s=o.subject.toString();if(s in t){var d=t[s];d.setPredicate(o.predicate,!0,o.object)}}}for(var a=0;a<n.optional.length;++a)r.log.debug('recurse to optional subformula '+a),Y(t,n.optional[a]);r.log.debug('<< finished processing formula')}function Q(t){for(var n=[],a={},o=0;o<t.vars.length;++o){var s=new g,d=t.vars[o];r.log.debug('column '+o+' : '+d),s.setVariable(d),a[d]=s,n.push(s)}return Y(a,t.pat),n}function ee(n,a){var r=re?Q(n):a.getColumns();var o=[],s=t.createElement('table');return s.appendChild(N(r,a)),s.appendChild(q(o,r)),s.logicalRows=o,s.columns=r,s.query=n,Z(n,o,r,s),s}function te(t){var n=-1,a=null;for(var r in t){var o=t[r];o.useCount>n&&(a=o,n=o.useCount)}return a}var ne=n.sourceDocument,ae=n.tableClass,re=n.query,oe='http://www.w3.org/2000/01/rdf-schema#Literal',ie=r.ns,se=r.store,de={},le={"http://www.w3.org/2002/07/owl#sameAs":!0,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":!0},pe={"http://www.w3.org/2001/XMLSchema#decimal":!0,"http://www.w3.org/2001/XMLSchema#float":!0,"http://www.w3.org/2001/XMLSchema#double":!0,"http://www.w3.org/2001/XMLSchema#integer":!0,"http://www.w3.org/2001/XMLSchema#nonNegativeInteger":!0,"http://www.w3.org/2001/XMLSchema#positiveInteger":!0,"http://www.w3.org/2001/XMLSchema#nonPositiveInteger":!0,"http://www.w3.org/2001/XMLSchema#negativeInteger":!0,"http://www.w3.org/2001/XMLSchema#long":!0,"http://www.w3.org/2001/XMLSchema#int":!0,"http://www.w3.org/2001/XMLSchema#short":!0,"http://www.w3.org/2001/XMLSchema#byte":!0,"http://www.w3.org/2001/XMLSchema#unsignedLong":!0,"http://www.w3.org/2001/XMLSchema#unsignedInt":!0,"http://www.w3.org/2001/XMLSchema#unsignedShort":!0,"http://www.w3.org/2001/XMLSchema#unsignedByte":!0},ce={"http://www.w3.org/2001/XMLSchema#dateTime":!0,"http://www.w3.org/2001/XMLSchema#date":!0},ue={"http://xmlns.com/foaf/0.1/Image":!0,"http://purl.org/dc/terms/Image":!0},fe=n.keyVariable||'?_row',he=0,ge=null,be=null,ye=t.createElement('div'),ve,we,xe,_e;ye.className='tableViewPane',ye.appendChild(function(){var n=t.createElement('table');n.setAttribute('class','toolbar');var a=t.createElement('tr');return xe=t.createElement('td'),a.appendChild(xe),_e=t.createElement('td'),a.appendChild(_e),n.appendChild(a),n}());var ke=t.createElement('div');if(ye.appendChild(ke),ye.refresh=function(){Z(Ce.query,Ce.logicalRows,Ce.columns,Ce)},re){var Ce=ee(re);ke.appendChild(Ce)}else{var Te=S();ve=Te[0],we=Te[1],ae||xe.appendChild(v(ve,we)),be=te(we),be?u(be):u(ve)}return ye}},function(t,n,a){'use strict';var r={};t.exports=r;var o={icons:a(20),log:a(19),ns:a(9),store:a(14),tabs:r,widgets:a(21)},s=a(23);o.tabs.tabWidget=function(t){var n=o.store,a=t.subject,r=t.dom,d=r.createElement('div'),l=parseInt(t.orientation||'0'),c=t.backgroundColor||'#ddddcc',u=2&l,f=1&l,m=d.appendChild(r.createElement('table')),h=function(t,n,a){for(var r='#',o='0123456789abcdef',s=0,d,c,u;3>s;s++){d=parseInt(t.slice(2*s+1,2*s+3),16),c=parseInt(n.slice(2*s+1,2*s+3),16),u=d*(1-a)+c*a;var f=parseInt((''+u).split('.')[0]),m=parseInt((''+f/16).split('.')[0]),h=parseInt((''+f%16).split('.')[0]);r+=o[m]+o[h]}return r},g,b,y,v,w;(function(t){for(var n=0,a=0;3>a;a++)n+=parseInt(t.slice(2*a+1,2*a+3),16);return 384<n})(c)?(w=h(c,'#ffffff',0.3),g='#000000'):(w=h(c,'#000000',0.3),g='#ffffff');var x='resize: both; overflow: scroll; margin:0; border: 0.5em; border-style: solid; border-color: '+w+'; padding: 1em;  min-width: 30em; min-height: 450px; width:100%;';if(f){var _=m.appendChild(r.createElement('tr')),k=r.createElement('td');k.setAttribute('style','margin: 0;');var C=r.createElement('td');C.setAttribute('style','margin: 0;'),u?(_.appendChild(k),_.appendChild(C)):(_.appendChild(C),_.appendChild(k)),b=C.appendChild(r.createElement('table')),y='tr',v=C}else{b=r.createElement('tr');var T=m.appendChild(r.createElement('tr'));if(u)var T=m.appendChild(r.createElement('tr')),E=m.appendChild(r.createElement('tr'));else var E=m.appendChild(r.createElement('tr')),T=m.appendChild(r.createElement('tr'));b=E;var k=T.appendChild(r.createElement('td'));y='td'}var S=k.appendChild(r.createElement('table'));d.tabContainer=b,d.bodyContainer=S;var A=function(){if(t.ordered){var r=n.the(a,t.predicate);return r.elements}return n.each(a,t.predicate)},I=['2em','2em','0','0'];I=I.concat(I).slice(l,l+4),I='border-radius: '+I.join(' ')+';';var N=['0.3em','0.3em','0','0.3em'];N=N.concat(N).slice(l,l+4),N='margin: '+N.join(' ')+';';var j=I+'padding: 0.7em; max-width: 20em;';j+='color: '+g+';';var R=j+'opacity: 50%; margin: 0.3em; background-color: '+c+';',L=j+N+' background-color: '+w+';',O='',P=function(){for(var t=0;t<b.children.length;t++)b.children[t].firstChild.setAttribute('style',R)},M=function(){for(var t=0;t<S.children.length;t++)S.children[t].setAttribute('style',O+'display: none;')},D=function(n){var a=r.createElement(y);a.subject=n;var o=a.appendChild(r.createElement('div'));return o.setAttribute('style',R),o.addEventListener('click',function(s){s.metaKey||(P(),M()),o.setAttribute('style',L),a.bodyTR.setAttribute('style',O);var d=a.bodyTR.firstChild;d||(d=a.bodyTR.appendChild(r.createElement('div')),d.setAttribute('style',x)),t.renderTabSettings&&s.altKey?!0!==d.asSetttings&&(d.innerHTML='loading settings ...'+n,t.renderTabSettings(d,a.subject),d.asSetttings=!0):!1!==d.asSetttings&&(d.innerHTML='loading item ...'+n,t.renderMain(d,a.subject),d.asSetttings=!1)}),t.renderTab?t.renderTab(o,n):o.textContent=s.label(n),a},B=function(){var t=A();f||k.setAttribute('colspan',t.length);var n=!1,a,o,s,d,l;for(d=0;d<b.children.length;d++)if(a=b.children[d],d>=t.length||!a.subject.sameTerm(t[d])){n=!0;break}if(n||t.length!==b.children.length){for(l=b.children.length-1;0<=l&&(a=b.children[l],s=l-b.children.length+t.length,!!a.subject.sameTerm(t[s]));l--);for(var c=t.slice(d,l-b.children.length+t.length+1);l>=d;)b.removeChild(b.children[d]),S.removeChild(S.children[d]),l-=1;for(o=0;o<c.length;o++){var u=D(c[o]),m=r.createElement('tr');u.bodyTR=m,r.createElement('tr'),d===b.children.length?(b.appendChild(u),S.appendChild(m)):(b.insertBefore(u,b.children[d+o]),S.insertBefore(m,S.children[d+o]))}}},U=function(){var t=A();f||k.setAttribute('colspan',t.length);var n=[],a,r,o,s,d;for(r=0;r<b.children.length;r++)a=b.children[r],a.deleteMe=!0;for(o=0;o<t.length;o++){for(s=!1,r=0;r<b.children.length;r++)b.children[r].subject===t[o]&&(s=!0);s||n.push([o,t[o]])}for(o=0;o<n.length;o++)d=n[o],r=d[0],a=D(d[1]),r>=b.length?b.appendChild(a):b.insertBefore(a,b.children[r+1]);for(r=0;r<b.children.length;r++)a=b.children[r],a.deleteMe&&b.removeChild(a)},q=function(){t.ordered?B():U()};return d.refresh=q,q(),!t.startEmpty&&b.children.length&&b.children[0].firstChild.click(),d}},function(t,n,a){'use strict';var r=function(t){console.log(t.slice(0,-1))},o=t.exports={};o.list=[],o.paneForIcon=[],o.paneForPredicate=[],o.register=function(t,n){if(t.requireQueryButton=n,!t.name)return void r('***     No name for pane!\n');if(r('  registering pane: '+t.name+'\n'),!t.label)return void r('***     No label for pane!\n');if(o.list.push(t),t.name in o||(o[t.name]=t),t.icon&&(o.paneForIcon[t.icon]=t),t.predicates)for(var a in t.predicates)o.paneForPredicate[a]={pred:a,code:t.predicates[a]}},o.byName=function(t){for(var n=0;n<o.list.length;n++)if(o.list[n].name===t)return o.list[n]},o.OutlineManager=a(226),o.getOutliner=function(t){return t.outliner||(t.outliner=UI.panes.OutlineManager(t)),t.outliner},o.register(a(448)),o.register(a(449)),o.register(a(456)),o.register(a(457)),o.register(a(458)),o.register(a(459)),o.register(a(460)),o.register(a(461)),o.register(a(463)),o.register(a(464)),o.register(a(465)),o.register(a(466)),o.register(a(467)),o.register(a(468)),o.register(a(469)),o.register(a(470)),o.register(a(471)),o.register(a(472)),o.register(a(474)),o.register(a(475)),o.register(a(476)),o.register(a(478)),o.register(a(479)),o.register(a(480)),o.register(a(481)),o.register(a(482)),o.register(a(483)),o.register(a(484)),o.register(a(485)),o.register(a(486)),o.register(a(487)),o.register(a(488)),o.register(a(489)),o.register(a(490)),o.register(a(491))},function(t){'use strict';var n=t.exports={};n.util={},n.util.Event=function(){var t=[];return{on:function(n,a,r,o,s){var d=function(t){return r.call(o,t,o)};n.addEventListener(a,d,!1);t.push([n,a,s,d])},off:function(n,a,r){var o=this._getCacheIndex(n,a,r);if(-1===o)return!1;var s=t[o];return n.removeEventListener(a,s[this.WFN],!1),delete t[o][this.WFN],delete t[o][this.FN],t.splice(o,1),!0},EL:0,TYPE:1,FNID:2,WFN:3,_getCacheIndex:function(n,a,r){for(var o=0,s=t.length,d;o<s;++o)if(d=t[o],d&&d[this.FNID]==r&&d[this.EL]==n&&d[this.TYPE]==a)return o;return-1}}}(),n.util.DDExternalProxy=function(t){this.initTarget(t)},n.util.DDExternalProxy.prototype={initTarget:function(t){this.DDM=n.util.DDM,this.el=t},b4StartDrag:function(t,n){a.onDragStart(t,n,this.el)},b4Drag:function(){},handleMouseDown:function(t){var n=t.which||t.button;1<n||this.DDM.handleMouseDown(t,this)}},n.util.DDM=function(){return{handleMouseDown:function(t,n){this.dragCurrent=n;var a=n.el;this.startX=t.pageX,this.startY=t.pageY,this.deltaX=this.startX-a.offsetLeft,this.deltaY=this.startY-a.offsetTop,this.dragThreshMet=!1},handleMouseMove:function(t){if(!this.dragCurrent)return!0;if(n.util.Event.isIE&&!t.button)return n.log('button failure','info','DragDropMgr'),this.stopEvent(t),this.handleMouseUp(t);if(!this.dragThreshMet){var a=u(this.startX-t.pageX),r=u(this.startY-t.pageY);(a>this.clickPixelThresh||r>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY)}return this.dragThreshMet,t.preventDefault(),!0},handleMouseUp:function(t){this.dragCurrent&&(n.util.Event.off(this.dragCurrent.el,'mousemove','dragMouseMove'),n.util.Event.off(this.dragCurrent.el,'mouseup','dragMouseUp'),n.util.Event.off(this.dragCurrent.el,'mouseup','dragMouseUp'),this.dragThreshMet&&(a.onDropInside(t.target),this.dragThreshMet=!1),this.dragCurrent=null)},startDrag:function(t,n){this.dragCurrent&&this.dragCurrent.b4StartDrag(t,n),this.dragThreshMet=!0},clickPixelThresh:3}}();var a={onDrop:function(t,n){var a=ancestor(ancestor(t.originalTarget,'TABLE').parentNode,'TABLE').outline.selection,r=n.flavour.contentType,o=transferUtils.retrieveURLFromData(n.data,r);if(o){if('application/x-moz-file'==r&&0==n.data.fileSize){var s=kb.sym('chrome://tabulator/content/internalKnowledge.n3#defaultNew');kb.copyTo(s,kb.sym(o))}var d=a[0],l=ancestor(ancestor(d,'TABLE').parentNode,'TABLE'),c=l.outline;c.UserInput.insertTermTo(d,kb.sym(o))}},onDragEnter:function(t){try{var a=ancestor(ancestor(t.originalTarget,'TABLE').parentNode,'TABLE').outline.selection}catch(t){return}for(var r=t.originalTarget;r;r=r.parentNode)if(r.tabulatorSelect){if(a[0]){try{a[0].tabulatorDeselect()}catch(t){throw a[0]+'causes'+t}n.util.Event.off(r,'mouseup','dragMouseUp')}r.tabulatorSelect();break}},onDragExit:function(){},onDropInside:function(t){var n=t.ownerDocument.getElementById('outline'),a=n.outline;a.UserInput.insertTermTo(t,getAbout(kb,this.dragTarget))},onDragStart:function(t,n,a){this.dragTarget=a;var r=Components.interfaces.nsIDragService,o={action:r.DRAGDROP_ACTION_COPY+r.DRAGDROP_ACTION_MOVE+r.DRAGDROP_ACTION_LINK},s=a.ownerDocument.getBoxObjectFor(a),d=Components.classes['@mozilla.org/gfx/region;1'].createInstance(Components.interfaces.nsIScriptableRegion);d.init(),d.unionRect(s.screenX,s.screenY,s.width,s.height);var l={data:null},c=tabulator.Util.getTerm(a);switch(c.termType){case'NamedNode':l.data=this.URItoTransferDataSet(c.uri);break;case'BlankNode':l.data=this.URItoTransferDataSet(c.toNT());break;case'Literal':l.data=this.URItoTransferDataSet(c.value);}l=l.data;var u=Components.classes['@mozilla.org/supports-array;1'].createInstance(Components.interfaces.nsISupportsArray),f=nsTransferable.set(l.dataList[0]);u.AppendElement(f.QueryInterface(Components.interfaces.nsISupports)),this.mDragService.invokeDragSession(a,u,d,o.action)},getSupportedFlavours:function(){var t=new FlavourSet;return t.appendFlavour('text/x-moz-url'),t.appendFlavour('text/unicode'),t.appendFlavour('application/x-moz-file','nsIFile'),t},URItoTransferDataSet:function(t){var n=new TransferDataSet,a=new TransferData;return a.addDataForFlavour('text/x-moz-url',t),a.addDataForFlavour('text/unicode',t),n.push(a),n},_mDS:null,get_mDragService:function(){if(!this._mDS){var t=Components.interfaces.nsIDragService;this._mDS=Components.classes['@mozilla.org/widget/dragservice;1'].getService(t)}return this._mDS},DDM:n.util.DDM}},function(t,n,a){'use strict';var r=t.exports={},o=a(2);r.src=[],r.tooltips=[],r.src.icon_expand=o.icons.originalIconBase+'tbl-expand-trans.png',r.src.icon_more=o.icons.originalIconBase+'tbl-more-trans.png',r.src.icon_collapse=o.icons.originalIconBase+'tbl-collapse.png',r.src.icon_internals=o.icons.originalIconBase+'tango/22-emblem-system.png',r.src.icon_instances=o.icons.originalIconBase+'tango/22-folder-open.png',r.src.icon_foaf=o.icons.originalIconBase+'foaf/foafTiny.gif',r.src.icon_social=o.icons.originalIconBase+'social/social.gif',r.src.icon_mb=o.icons.originalIconBase+'microblog/microblog.png',r.src.icon_shrink=o.icons.originalIconBase+'tbl-shrink.png',r.src.icon_rows=o.icons.originalIconBase+'tbl-rows.png',r.src.icon_unrequested=o.icons.originalIconBase+'16dot-blue.gif',r.src.icon_fetched=o.icons.originalIconBase+'16dot-green.gif',r.src.icon_failed=o.icons.originalIconBase+'16dot-red.gif',r.src.icon_requested=o.icons.originalIconBase+'16dot-yellow.gif',r.src.icon_CVPane=o.icons.originalIconBase+'CV.png',r.src.icon_defaultPane=o.icons.originalIconBase+'about.png',r.src.icon_visit=o.icons.originalIconBase+'tango/22-text-x-generic.png',r.src.icon_dataContents=o.icons.originalIconBase+'rdf_flyer.24.gif',r.src.icon_n3Pane=o.icons.originalIconBase+'w3c/n3_smaller.png',r.src.icon_RDFXMLPane=o.icons.originalIconBase+'22-text-xml4.png',r.src.icon_imageContents=o.icons.originalIconBase+'tango/22-image-x-generic.png',r.src.icon_airPane=o.icons.originalIconBase+'1pt5a.gif',r.src.icon_LawPane=o.icons.originalIconBase+'law.jpg',r.src.icon_pushbackPane=o.icons.originalIconBase+'pb-logo.png',r.src.icon_photoPane=o.icons.originalIconBase+'photo_small.png',r.src.icon_tagPane=o.icons.originalIconBase+'tag_small.png',r.src.icon_TinyTag=o.icons.originalIconBase+'tag_tiny.png',r.src.icon_photoBegin=o.icons.originalIconBase+'photo_begin.png',r.src.icon_photoNext=o.icons.originalIconBase+'photo_next.png',r.src.icon_photoBack=o.icons.originalIconBase+'photo_back.png',r.src.icon_photoEnd=o.icons.originalIconBase+'photo_end.png',r.src.icon_photoImportPane=o.icons.originalIconBase+'flickr_small.png',r.src.icon_retract=o.icons.originalIconBase+'retract.gif',r.src.icon_refresh=o.icons.originalIconBase+'refresh.gif',r.src.icon_optoff=o.icons.originalIconBase+'optional_off.PNG',r.src.icon_opton=o.icons.originalIconBase+'optional_on.PNG',r.src.icon_map=o.icons.originalIconBase+'compassrose.png',r.src.icon_retracted=r.src.icon_unrequested,r.src.icon_retracted=r.src.icon_unrequested,r.src.icon_time=o.icons.originalIconBase+'icons/Wclocksmall.png',r.src.icon_telephone=o.icons.originalIconBase+'silk/telephone.png',r.src.icon_time=o.icons.originalIconBase+'Wclocksmall.png',r.src.icon_remove_node=o.icons.originalIconBase+'tbl-x-small.png',r.src.icon_add_triple=o.icons.originalIconBase+'tango/22-list-add.png',r.src.icon_add_new_triple=o.icons.originalIconBase+'tango/22-list-add-new.png',r.src.icon_show_choices=o.icons.originalIconBase+'userinput_show_choices_temp.png',r.src.icon_display_reasons=o.icons.originalIconBase+'tango/22-help-browser.png',r.tooltips[r.src.icon_display_reasons]='Display explanations',r.tooltips[r.src.icon_add_triple]='Add more',r.tooltips[r.src.icon_add_new_triple]='Add one',r.tooltips[r.src.icon_remove_node]='Remove',r.tooltips[r.src.icon_expand]='View details.',r.tooltips[r.src.icon_collapse]='Hide details.',r.tooltips[r.src.icon_shrink]='Shrink list.',r.tooltips[r.src.icon_internals]='Under the hood',r.tooltips[r.src.icon_instances]='List',r.tooltips[r.src.icon_foaf]='Friends',r.tooltips[r.src.icon_rows]='Make a table of data like this',r.tooltips[r.src.icon_unrequested]='Fetch this.',r.tooltips[r.src.icon_fetched]='Fetched successfully.',r.tooltips[r.src.icon_failed]='Failed to load. Click to retry.',r.tooltips[r.src.icon_requested]='This is being fetched. Please wait...',r.tooltips[r.src.icon_visit]='View document',r.tooltips[r.src.icon_retract]='Remove this source and all its data from tabulator.',r.tooltips[r.src.icon_refresh]='Refresh this source and reload its triples.',r.OutlinerIcon=function(t,n,a,r,o){return this.src=t,this.alt=a,this.width=n,this.tooltip=r,this.filter=o,this},r.termWidgets={},r.termWidgets.optOn=new r.OutlinerIcon(r.src.icon_opton,20,'opt on','Make this branch of your query mandatory.'),r.termWidgets.optOff=new r.OutlinerIcon(r.src.icon_optoff,20,'opt off','Make this branch of your query optional.'),r.termWidgets.addTri=new r.OutlinerIcon(r.src.icon_add_triple,18,'add tri','Add one')},function(t){'use strict';var n='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},a,r;t.exports=function t(o){var s=this,d=UI.store,l=o.document;this.menuId='predicateMenu1';var c=function(t){dump(t+'\n')},u=UI.ns.foaf,f=UI.ns.rdf,m=UI.ns.rdfs,h=UI.ns.owl,g=UI.ns.dc,b=UI.ns.rss,y=UI.ns.contact,v=UI.ns.mo,w=UI.rdf.Namespace('http://purl.org/ontology/bibo/'),_=UI.rdf.Namespace('http://purl.org/dc/terms/'),k=UI.rdf.Namespace('http://purl.org/dc/elements/1.1/'),C=!1;return a||(a=new UI.rdf.Formula,a.superFormula=d),r||(r=new UI.rdf.IndexedFormula),r.name='TempFormula',UI.store.updater||(UI.store.updater=new UI.rdf.UpdateManager(d)),{sparqler:UI.store.updater,lastModified:null,lastModifiedStat:null,statIsInverse:!1,addNewPredicateObject:function(t){if('bottom-border-active'==UI.utils.getTarget(t).className){var n=o.UserInput,a=UI.utils.getTarget(t),r=l.createElement('tr');UI.utils.ancestor(a,'DIV').insertBefore(r,UI.utils.ancestor(a,'TR'));var s=l.createElement('tr'),c=n.generateRequest('(TBD)',s,!0);r.appendChild(s.firstChild);var u=n.generateRequest('(Enter text or drag an object onto this field)',s,!1);if(r.appendChild(s.firstChild),UI.utils.ancestor(a,'TR').previousSibling&&UI.utils.ancestor(a,'TR').previousSibling.AJAR_statement)preStat=UI.utils.ancestor(a,'TR').previousSibling.AJAR_statement,n.formUndetStat(r,preStat.subject,c,u,preStat.why,!1);else{var f=UI.utils.getAbout(d,UI.utils.ancestor(a.parentNode.parentNode,'TD')),m=d.sym(UI.rdf.Util.uri.docpart(f.uri));n.formUndetStat(r,f,c,u,m,!1)}o.walk('moveTo',r.firstChild),UI.log.info('addNewPredicateObject: selection = '+o.getSelection().map(function(t){return t.textContent}).join(', ')),this.startFillInText(o.getSelection()[0])}},addNewObject:function(t){var n=UI.utils.getTarget(t).parentNode.parentNode,a=UI.utils.getAbout(d,n),r=n.parentNode.AJAR_inverse;this.lastModifiedStat=n.parentNode.AJAR_statement;var s=this.appendToPredicate(n),l=this.generateRequest(' (Error) ',s,!1),c=s.previousSibling.AJAR_statement;r?this.formUndetStat(s,l,c.predicate,c.object,c.why,!0):this.formUndetStat(s,c.subject,c.predicate,l,c.why,!1),o.walk('moveTo',s.lastChild),this.startFillInText(s.lastChild)},Delete:function(t){this.deleteTriple(t,!1)},Enter:function(t){this.literalModification(t)},Click:function(t){var n=UI.utils.getTarget(t);'Literal'!=UI.utils.getTerm(n).termType||(this.literalModification(n),t.preventDefault(),t.stopPropagation())},pasteFromClipboard:function(t,n){function a(t){var n=tabulator.clipboard[t].shift();if(null==n)return void UI.log.warn('no more element in clipboard!');switch(t){case'predicates':case'objects':for(var a=tabulator.clipboard.all,r=0;;r++)if(n.sameTerm(allArray[r])){allArray.splice(r,1);break}break;case'all':var o=n.sameTerm(theCollection('objects').elements[0]);return o?tabulator.clipboard.objecs.shift():tabulator.clipboard.predicates.shift(),[n,o];}return n}var r;switch(n.className){case'undetermined selected':if(r=n.nextSibling?a('predicates'):a('objects'),!r)return;break;case'pred selected':if(r=a('objects'),!r)return;break;case'selected':var o=a('all');return o?(r=o[0],void this.insertTermTo(n,r,o[1])):void 0;}this.insertTermTo(n,r)},startFillInText:function(t){switch(this.whatSortOfEditCell(t)){case'DatatypeProperty-like':UI.utils.emptyNode(t),this.lastModified=this.createInputBoxIn(t,' (Please Input) '),this.lastModified.isNew=!1,this.lastModified.select();break;case'predicate':this.performAutoCompleteEdit(t,'PredicateAutoComplete');break;case'ObjectProperty-like':case'no-idea':this.performAutoCompleteEdit(t,'GeneralAutoComplete');}},literalModification:function(t){if(UI.log.debug('entering literal Modification with '+t+t.textContent),-1!=t.className.indexOf(' pendingedit'))return UI.log.warn('The node you attempted to edit has a request still pending.\nPlease wait for the request to finish (the text will turn black)\nbefore editing this node again.'),!0;var n=t,a=this.getStatementAbout(n);if(a){try{var r=UI.utils.getTerm(n),o=UI.utils.ancestor(n,'TR')}catch(a){UI.log.warn('userinput.js: '+a+UI.utils.getAbout(d,t)),UI.log.error(n+' getStatement Error:'+a)}try{var s=o.lastChild}catch(t){UI.log.error(t+'@'+n)}if('Literal'==r.termType){if(s.removeChild(s.firstChild),r.value.match('\n')){var c=l.createElement('textarea');c.appendChild(l.createTextNode(r.value)),c.setAttribute('rows',(r.value.match(/\n/g).length+1).toString()),c.setAttribute('cols','100'),c.setAttribute('class','textinput'),s.appendChild(c),this.lastModified=c}else this.lastModified=this.createInputBoxIn(s,r.value);this.lastModified.isNew=!1,this.lastModified.select()}return!0}},performAutoCompleteEdit:function(t,n){UI.utils.emptyNode(t),c('perform AutoCompleteEdit. THIS IS='+this),this.lastModified=this.createInputBoxIn(t,''),this.lastModified.select(),this.lastModified.addEventListener('keypress',this.getAutoCompleteHandler(n),!1),this.getAutoCompleteHandler(n)(1)},backOut:function(){this.deleteTriple(this.lastModified.parentNode,!0),this.lastModified=null},clearMenu:function(){var t=l.getElementById(this.menuID);t&&t.parentNode.removeChild(t)},clearInputAndSave:function(t){if(this.lastModified){if(!this.lastModified.isNew)try{var n=this.getStatementAbout(this.lastModified).object}catch(t){return}var a=this.lastModifiedStat;if(this.lastModified.value!=this.lastModified.defaultValue){if(''==this.lastModified.value)return this.lastModified.value=this.lastModified.defaultValue,void this.clearInputAndSave();if(this.lastModified.isNew){a=new UI.rdf.Statement(a.subject,a.predicate,d.literal(this.lastModified.value),a.why);var r=UI.utils.ancestor(this.lastModified,'TR');try{UI.store.updater.update([],[a],function(t,n,s){n||(UI.log.error('Error occurs while inserting '+a+'\n\n'+s+'\n'),o.UserInput.deleteTriple(r.lastChild,!0))})}catch(t){return void UI.log.error('Error inserting fact '+a+':\n\t'+t+'\n')}a=d.add(a.subject,a.predicate,d.literal(this.lastModified.value),a.why)}else{if(this.statIsInverse)return UI.log.error('Invalid Input: a literal can\'t be a subject in RDF/XML'),void this.backOut();switch(n.termType){case'Literal':var s=this.lastModified.value,r=UI.utils.ancestor(this.lastModified,'TR'),l=this.lastModified.defaultValue,c=$rdf.st(a.subject,a.predicate,d.literal(this.lastModified.value),a.why);try{UI.store.updater.update([a],[c],function(t,o,d){o?n.value=s:(UI.log.warn('Error occurs while editing '+a+'\n\n'+d),r.lastChild.textContent=l),r.lastChild.className=r.lastChild.className.replace(/ pendingedit/g,'')})}catch(t){return void UI.log.warn('Error occurs while editing '+a+':\n\t'+t)}break;case'BlankNode':var u=d.literal(this.lastModified.value,''),m;if('Collection'==a.predicate.termType){var h=a.predicate.elements[0];if(d.any(void 0,h,u)){if(!t){var g=this.lastModified.parentNode;t={},t.pageX=UI.utils.findPos(g)[0],t.pageY=UI.utils.findPos(g)[1]+g.clientHeight}this.showMenu(t,'DidYouMeanDialog',void 0,{dialogTerm:d.any(void 0,h,u),bnodeTerm:a.subject})}else{var b=UI.utils.ancestor(UI.utils.ancestor(this.lastModified,'TR').parentNode,'TR').AJAR_statement,c=$rdf.st(a.subject,h,u,a.why),y=d.the(a.subject,f('type')),v=d.anyStatementMatching(a.subject,f('type'),y,a.why),r=UI.utils.ancestor(UI.utils.ancestor(this.lastModified,'TR'),'TD').parentNode;try{UI.store.updater.update([],[b,c,v],function(t,n,a){n||(dump('Error occurs while editing '+b+'\n\n'+a),o.UserInput.deleteTriple(r.lastChild,!0))})}catch(t){return void dump('Error occurs while editing '+b+':\n\t'+t)}d.remove(a),m=d.add(a.subject,h,u,a.why)}var w=UI.utils.ancestor(this.lastModified.parentNode.parentNode,'TD');o.outline_expand(w,a.subject,{pane:defaultPane,already:!0}),o.walk('right',o.focusTd)}else return void this.fillInRequest('object',this.lastModified.parentNode,d.literal(this.lastModified.value));}}}else{if(this.lastModified.isNew){var x=UI.utils.ancestor(this.lastModified,'TR'),_=this.generateRequest('(To be determined. Re-type of drag an object onto this field)'),k=x.previousSibling.AJAR_statement;return this.formUndetStat(x,k.subject,k.predicate,_,k.why,!1),void(this.lastModified=null)}if('Collection'==a.predicate.termType){d.removeMany(a.subject);var C=UI.utils.ancestor(UI.utils.ancestor(this.lastModified,'TR').parentNode,'TR'),k=C.AJAR_statement,_=this.generateRequest('(To be determined. Re-type of drag an object onto this field)');return this.formUndetStat(C,k.subject,k.predicate,_,k.why,!1),o.replaceTD(o.outline_objectTD(_,T),C.lastChild),void(this.lastModified=null)}if('BlankNode'==a.object.termType&&!this.statIsInverse||'BlankNode'==a.subject.termType&&this.statIsInverse)return void this.backOut()}var x=UI.utils.ancestor(this.lastModified,'TR'),T=this.views.defaults[a.predicate.uri];this.statIsInverse?o.replaceTD(o.outline_objectTD(a.subject,T),x.lastChild):o.replaceTD(o.outline_objectTD(d.literal(this.lastModified.value),T),x.lastChild),this.lastModified.value!=this.lastModified.defaultValue&&(x.lastChild.className+=' pendingedit'),this.lastModified=null}},deleteTriple:function(t,n){function a(){var t;for(t=s;1==t.childNodes.length;t=t.previousSibling);if(t==s){var n=t.nextSibling;if(n.nextSibling&&1==n.childNodes.length){var a=t.firstChild;a.setAttribute('rowspan',parseInt(a.getAttribute('rowspan'))-1),n.insertBefore(t.firstChild,n.firstChild)}s.parentNode.removeChild(s)}else{var a=t.firstChild;a.setAttribute('rowspan',parseInt(a.getAttribute('rowspan'))-1),s.parentNode.removeChild(s)}}if(UI.log.debug('deleteTriple entered'),!n&&-1!=t.className.indexOf(' pendingedit'))return dump('The node you attempted to edit has a request still pending.\nPlease wait for the request to finish (the text will turn black)\nbefore editing this node again.'),void o.walk('up');var r=this.getStatementAbout(t),s,l;if(!n&&!d.whether(r.object,f('type'),UI.ns.link('Request'))&&!d.whether(r.predicate,f('type'),UI.ns.link('Request'))&&!d.whether(r.subject,f('type'),UI.ns.link('Request'))){UI.log.debug('about to send SPARQLUpdate');try{UI.store.updater.update([r],[],function(n,o,s){o?a():(dump('Error occurs while deleting '+r+'\n\n'+s),t.className=t.className.replace(/ pendingedit/g,''))}),t.className+=' pendingedit'}catch(t){return UI.log.error(t),void UI.log.warn('Error deleting statement '+r+':\n\t'+t)}UI.log.debug('SPARQLUpdate sent')}else;UI.log.debug('about to remove '+r),UI.log.debug('removed'),o.walk('up'),s=t.parentNode,l=s.nextSibling,n&&a()},clipboardInit:function(){tabulator.clipboard={},tabulator.clipboard.objects=[],tabulator.clipboard.predicates=[],tabulator.clipboard.all=[]},copyToClipboard:function(t,n){var a=UI.utils.getTerm(n);switch(n.className){case'selected':case'obj selected':tabulator.clipboard.objects;tabulator.clipboard.objects.unshift(a);break;case'pred selected':case'pred internal selected':tabulator.clipboard.predicates.unshift(a);}tabulator.clipboard.all.unshift(a)},insertTermTo:function(t,n,r){switch(t.className){case'undetermined selected':var s=this.views.defaults[t.parentNode.AJAR_statement.predicate.uri];this.fillInRequest(t.nextSibling?'predicate':'object',t,n);break;case'pred selected':var c=this.appendToPredicate(t),u=t.parentNode.AJAR_statement,s=this.views.defaults[u.predicate.uri];c.appendChild(o.outline_objectTD(n,s));var f=t.parentNode.AJAR_inverse;f?c.AJAR_statemnet=d.add(n,u.predicate,u.object,u.why):c.AJAR_statement=d.add(u.subject,u.predicate,n,u.why);try{UI.store.updater.update([],[c.AJAR_statement],function(t,n){n||UI.log.error('userinput.js (pred selected): Fail trying to insert statement '+c.AJAR_statement+': '+UI.utils.stackString(e))})}catch(t){return void UI.log.error('Exception trying to insert statement '+c.AJAR_statement+': '+UI.utils.stackString(t))}c.AJAR_inverse=f,a.statements.push(c.AJAR_statement);break;case'selected':var m=UI.utils.ancestor(t,'TABLE').lastChild,h=m.insertBefore(l.createElement('tr'),m.lastChild),u=h.previousSibling.AJAR_statement,u,r;if('undefined'==typeof r&&(r=!0),r)this.formUndetStat(h,u.subject,this.generateRequest('(TBD)',h,!0),n,u.why,!1),h.appendChild(o.outline_objectTD(n)),o.walk('moveTo',h.firstChild),this.startFillInText(h.firstChild);else{var g=this.generateRequest('(To be determined. Re-type of drag an object onto this field)',h);this.formUndetStat(h,u.subject,n,g,u.why,!1),h.insertBefore(o.outline_predicateTD(n,h,!1,!1),h.firstChild),o.walk('moveTo',h.lastChild),this.startFillInText(h.lastChild)}}},Refill:function(t,n){UI.log.info('Refill'+n.textContent);var a=n.nextSibling;if(a){if('undetermined'==n.nextSibling.className){var r=UI.utils.getAbout(d,UI.utils.ancestor(n,'TABLE').parentNode),o=d.any(r,f('type')),s=[],l='.\n';s[0]='SELECT ?pred WHERE{\n?pred '+f('type')+f('Property')+'.\n?pred '+UI.ns.rdfs('domain')+o+'.}',s[1]='SELECT ?pred ?class\nWHERE{\n?pred '+f('type')+f('Property')+'.\n'+o+UI.ns.rdfs('subClassOf')+' ?class.\n?pred '+UI.ns.rdfs('domain')+' ?class.\n}',s[2]='SELECT ?pred WHERE{\n'+r+f('type')+d.variable('subjectClass')+l+d.variable('pred')+UI.ns.rdfs('domain')+d.variable('subjectClass')+l+'}';var c=s.map(SPARQLToQuery)}else var r=UI.utils.getAbout(d,UI.utils.ancestor(n,'TABLE').parentNode),o=d.any(r,f('type')),u=n.parentNode.AJAR_statement.object,m='Literal'==u.termType?UI.ns.rdfs('Literal'):d.any(u,f('type')),s='SELECT ?pred WHERE{'+r+f('type')+'?subjectClass.\n'+u+f('type')+'?objectClass.\n?pred '+UI.ns.rdfs('domain')+'?subjectClass.\n?pred '+UI.ns.rdfs('range')+'?objectClass.\n}',c=SPARQLToQuery(s);this.showMenu(t,'GeneralPredicateChoice',c,{isPredicate:a,selectedTd:n})}else{var h=n.parentNode.AJAR_statement.predicate;if((d.whether(h,f('type'),UI.ns.owl('DatatypeProperty'))||'Collection'==h.termType||d.whether(h,UI.ns.rdfs('range'),UI.ns.rdfs('Literal')))&&(n.className='',UI.utils.emptyNode(n),this.lastModified=this.createInputBoxIn(n,' (Please Input) '),this.lastModified.isNew=!1,this.lastModified.select()),n.parentNode.AJAR_statement.predicate.sameTerm(f('type'))){var s='SELECT ?class WHERE{?class '+f('type')+UI.ns.rdfs('Class')+'.}',g=SPARQLToQuery(s);this.showMenu(t,'TypeChoice',g,{isPredicate:a,selectedTd:n})}}},getAutoCompleteHandler:function(t){c('\n\n***** In getAutoCompleteHandler ****** mode = '+t),'PredicateAutoComplete'==t?t='predicate':'JournalTAC'!=t&&(t='all');var a;return a='JournalTAC'==t?l.getElementById('inpid_journal_title'):this.lastModified||o.getSelection()[0].firstChild,c('InputBox='+a),c('InputBox.value='+a.value),function(r){function s(t){t&&(m.lastHighlight&&(m.lastHighlight.className=''),m.lastHighlight=t,m.lastHighlight.className='activeItem',o.showURI(UI.utils.getAbout(d,m.lastHighlight)))}c('ENTER EVENT='+r),c('1. outside (if eneterEvent)');var u={},f=a.parentNode;t||(t=f.nextSibling?'predicate':'all'),u.pageX=UI.utils.findPos(f)[0],u.pageY=UI.utils.findPos(f)[1]+f.clientHeight,c('epX='+u.pageX+', epY='+u.pageY+', mode='+t);var m=l.getElementById(o.UserInput.menuID);if(r){c('2. in (if enterEvent).  with type = '+('undefined'==typeof r?'undefined':n(r)));var h=a.value;if('object'==('undefined'==typeof r?'undefined':n(r)))switch(c('3. in typeof enterEvent is object, will switch to keys, arrows, etc. keycode = '+r.keyCode),r.stopPropagation(),m&&!m.lastHighlight&&s(m.firstChild.firstChild),r.keyCode){case 13:case 9:if(c('handler: Enter or Tab'),!m)return void o.UserInput.clearInputAndSave();if(!m.lastHighlight)return'JournalTAC'==t?(o.UserInput.clearMenu(),c('no lastH'),'no lastH'):void 0;if('INPUT'==m.lastHighlight.tagName)switch(m.lastHighlight.value){case'New...':c('subcase New'),o.UserInput.createNew();break;case'GiveURI':c('subcase GiveURI'),o.UserInput.inputURI();}else{if('JournalTAC'==t){if(c('movedArrow? '+C),C&&m.lastHighlight){var g=m.lastHighlight.firstChild.firstChild.innerHTML,b=m.lastHighlight.firstChild.nextSibling.innerHTML;return b=b.slice(4,-4),['gotdptitle',g,b]}return'asGivenTxt'}var y=UI.utils.getAbout(d,m.lastHighlight),v='predicate'==t?'predicate':'object';o.UserInput.clearMenu(),o.UserInput.fillInRequest(v,a.parentNode,y)}return void c('outside');case 38:return c('handler: Arrow UP'),C=!0,''!=h||'TR'!=m.lastHighlight.tagName||m.lastHighlight.previousSibling?s(m.lastHighlight.previousSibling):s(m.firstChild.firstChild),'I\'m a little Arrow Up';case 40:return c('handler: Arrow Down'),C=!0,'INPUT'==m.lastHighlight.tagName?s(m.childNodes[1].firstChild):s(m.lastHighlight.nextSibling),'I\'m a little Down Arrow';case 37:case 39:return c('handler: Arrow left, right'),void('INPUT'==m.lastHighlight.tagName&&(37==r.keyCode?s(m.lastHighlight.previousSibling):s(m.lastHighlight.nextSibling)));case 8:c('handler: Backspace'),h=h.slice(0,-1);break;case 27:return(c('handler: Esc'),!m)?void o.UserInput.backOut():void o.UserInput.clearMenu();break;default:c('handler: Default'),C=!1,c('oldtext='+h),h+=x(r.charCode),c('charcodent='+r.charCode),c('strcharcod='+x(r.charCode)),dump('DEFAULT txtstr='+h+'\n');}'all'==t?(c('generalAC after switch, newText='+h+'mode is all'),o.UserInput.clearMenu(),o.UserInput.showMenu(u,'GeneralAutoComplete',void 0,{inputText:h,selectedTd:f}),0==h.length&&o.UserInput.WildCardButtons()):'predicate'==t?(c('predicateAC after switch, newText='+h+'mode is predicate'),o.UserInput.clearMenu(),o.UserInput.showMenu(u,'PredicateAutoComplete',void 0,{inputText:h,isPredicate:!0,selectedTd:f})):'JournalTAC'==t&&(c('JouralTAC after switch, newText='+h),o.UserInput.clearMenu(),o.UserInput.showMenu(u,'JournalTitleAutoComplete',void 0,{inputText:h},'orderisuseless'));var m=l.getElementById(o.UserInput.menuID);return m?(c('at end of handler\n^^^^^^^^^^^^^^^^^\n\n'),s(m.firstChild.firstChild),o.showURI(UI.utils.getAbout(d,m.lastHighlight)),'nothing to return'):void c('No menu element.  Do not show menu.')}}},WildCardButtons:function(){var t=l.getElementById(o.UserInput.menuID),n=t.insertBefore(l.createElement('div'),t.firstChild),a=n.appendChild(l.createElement('input')),r=n.appendChild(l.createElement('input'));a.type='button',a.value='New...',r.type='button',r.value='Know its URI',n.addEventListener('mouseover',function(t){var n=l.getElementById(o.UserInput.menuID);n.lastHighlight&&(n.lastHighlight.className=''),n.lastHighlight=UI.utils.ancestor(UI.utils.getTarget(t),'INPUT'),n.lastHighlight&&(n.lastHighlight.className='activeItem')},!1),a.addEventListener('click',this.createNew,!1),r.addEventListener('click',this.inputURI,!1)},Keypress:function(t){if(13==t.keyCode)if('TEXTAREA'!=o.targetOf(t).tagName)this.clearInputAndSave();else{var n=parseInt(this.lastModified.getAttribute('rows'));this.lastModified.setAttribute('rows',(n+1).toString()),t.stopPropagation()}},Mousedown:function(n){c('MOUSING DOWN'),window.addEventListener('keypress',function(n){n.ctrlKey&&(115==n.charCode||113==n.charCode)&&t.switchMode()},!1),window.addEventListener('mousedown',t.Mousedown,!1),document.getElementById('outline').oncontextmenu=function(){return!1},2==n.button&&(t.switchMode(),n&&(n.preventDefault(),n.stopPropagation()))},Mouseover:function(t){if(this.className='bottom-border-active',1==this._tabulatorMode)switch(UI.utils.getTarget(t).tagName){case'TD':var n=UI.utils.getTarget(t);'pred'==n.className&&(n.style.cursor='copy');break;case'DIV':var a=UI.utils.getTarget(t);'bottom-border'==UI.utils.getTarget(t).className&&(a.style.borderColor='rgb(100%,65%,0%)',a.style.cursor='copy');break;default:}},Mouseout:function(t){if(this.className='bottom-border',1==this._tabulatorMode){var n=UI.utils.getTarget(t);'bottom-border'==UI.utils.getTarget(t).className&&(n.style.borderColor='transparent',n.style.cursor='auto')}},whatSortOfEditCell:function(t){if(t.nextSibling)return'predicate';var n=this.getStatementAbout(t).predicate;return d.whether(n,UI.ns.rdf('type'),UI.ns.owl('DatatypeProperty'))||d.whether(n,UI.ns.rdfs('range'),UI.ns.rdfs('Literal'))||'Collection'==n.termType?'DatatypeProperty-like':d.whether(n,f('type'),UI.ns.owl('ObjectProperty'))?'ObjectProperty-like':'no-idea'},getStatementAbout:function(t){var n=UI.utils.ancestor(t,'TR');if(!n)throw'No ancestor TR for the TD we clicked on:'+t;try{var a=n.AJAR_statement}catch(a){throw'No AJAR_statement!'+t+t.textContent+' has ancestor '+n}return this.lastModifiedStat=n.AJAR_statement,this.statIsInverse=n.AJAR_inverse,a},createInputBoxIn:function(t,n){UI.log.info('myDocument in createInputBoxIn is now '+l.location),UI.log.info('outline.document is now '+o.document.location);var a=l.createElement('input');if(a.setAttribute('value',n),a.setAttribute('class','textinput'),'undetermined selected'!=t.className){var r=function(t){(38==t.keyCode||40==t.keyCode)&&(o.OutlinerKeypressPanel(t),o.UserInput.clearInputAndSave())};a.setAttribute('size','100'),a.addEventListener('keypress',r,!1)}return t.appendChild(a),a},createNew:function(){o.UserInput.clearMenu();var t=o.getSelection()[0],n=t.parentNode.AJAR_statement.why,a=d.nextSymbol(n);o.UserInput.fillInRequest('object',t,a),o.outline_expand(o.getSelection()[0],a)},inputURI:function(){var t=o.UserInput;t.clearMenu();var n=o.getSelection()[0];UI.utils.emptyNode(n);var a=' (Type a URI) ';t.lastModified=t.createInputBoxIn(n,a),t.lastModified.select(),t.lastModified.addEventListener('keypress',function(r){switch(r.stopPropagation(),r.keyCode){case 13:case 9:if(this.value!=a){var o=this.value;t.fillInRequest('object',n,d.sym(o))}}},!1)},appendToPredicate:function(t){var n=!1,a;try{for(a=t.parentNode.nextSibling;1==a.childNodes.length&&a.AJAR_statement;a=a.nextSibling);}catch(t){n=!0}var r=l.createElement('tr');if(r.style.colspan='1',r.style.display='block',r.style.display='',t.hasAttribute('rowspan')&&t.setAttribute('rowspan',parseInt(t.getAttribute('rowspan'))+1),t.hasAttribute('rowspan')||t.setAttribute('rowspan','2'),!n)a.parentNode.insertBefore(r,a);else{var o=t.parentNode.parentNode;'defaultPane'==o.className?o.insertBefore(r,o.lastChild):o.appendChild(r)}return r},bnode2symbol:function(t,n){d.copyTo(t,n,['two-direction','delete'])},generateRequest:function(t,n,a,s){var d;s||(d=n?n:UI.utils.ancestor(this.lastModified,'TR'),UI.utils.emptyNode(d));var l=r,c=l.bnode();if(l.add(c,UI.ns.rdf('type'),UI.ns.link('Request')),10>t.length?l.add(c,UI.ns.link('message'),l.literal(t)):l.add(c,UI.ns.link('message'),l.literal(t)),l.add(c,UI.ns.link('to'),l.literal('The User')),l.add(c,UI.ns.link('from'),l.literal('The User')),!s){var u;u=a?d.appendChild(o.outline_predicateTD(c,d,!1,!1)):d.appendChild(o.outline_objectTD(c)),u.className='undetermined',u.textContent=t}return c},showMenu:function(t,n,a,r){function s(t){g.lastHighlight&&(g.lastHighlight.className=''),g.lastHighlight=UI.utils.ancestor(UI.utils.getTarget(t),'TR'),g.lastHighlight&&(g.lastHighlight.className='activeItem')}function u(t){x.firstChild&&'no-suggest'==x.firstChild.className&&x.removeChild(x.firstChild);var n=UI.utils.predicateLabelForXML(t,!1);if(t.uri){var a='??';for(var r in S)if(UI.log.debug(S[r]),UI.rdf.Util.string_startswith(t.uri,S[r])){a=r;break}var o=x.appendChild(l.createElement('tr'));o.setAttribute('about',t);var s=o.appendChild(l.createElement('th'));s.appendChild(l.createElement('div')).appendChild(l.createTextNode(n)),o.appendChild(l.createElement('td')).appendChild(l.createTextNode(a.toUpperCase()))}}function m(t){return function(n){var a=n[t.vars[0]];u(a)}}UI.log.info('myDocument is now '+l.location),UI.log.info('outline.doucment is now '+o.document.location);var h=this,g=l.createElement('div');if(c('\n**** In showMenu, menuType = '+n+'\n'),r)for(var b in r)dump('\t extra '+b+': '+r[b]+'\n');dump('CREATED MENU\n'),g.id=this.menuID,g.className='outlineMenu',g.style.top=t.pageY+'px',g.style.left=t.pageX+'px';var y=function(t){for(var n=0,a=0,r=0,o=0,s=0,d=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)s=t.offsetLeft,d=t.offsetTop,s!=r&&(n+=t.offsetLeft-t.scrollLeft),d!=o&&(a+=t.offsetTop-t.scrollTop),r=s,o=d,t=t.parentNode;return{top:a+54,left:n-38}};if('JournalTitleAutoComplete'==n){var v=y(l.getElementById('inpid_journal_title'));v.left-=l.getElementById('inpid_journal_title').scrollTop,g.style.top=v.top+'px',g.style.left=v.left+'px'}dump('menu at top='+g.style.top+' left='+g.style.left+'\n'),l.body.appendChild(g);var x=g.appendChild(l.createElement('table'));switch(g.lastHighlight=null,x.addEventListener('mouseover',s,!1),n){case'DidYouMeanDialog':var _=function(t){c('DID YOU MEAN SELECT ITEM!!!!!');var n=UI.utils.ancestor(UI.utils.getTarget(t),'TR');2==n.childNodes.length&&n.nextSibling?(d.add(I,O,P),o.UserInput.clearMenu()):2==n.childNodes.length&&o.UserInput.clearMenu()};break;case'LimitedPredicateChoice':var C=r.clickedTd,_=function(t){c('LIMITED P SELECT ITEM!!!!');for(var n=UI.utils.getAbout(d,UI.utils.getTarget(t)),a=C.parentNode.AJAR_statement.predicate.elements,r=0;r<a.length;r++)a[r].sameTerm(n)&&a.unshift(a.splice(r,1)[0]);o.UserInput.clearMenu();var s=C.parentNode,l=o.outline_predicateTD(s.AJAR_statement.predicate,s);s.insertBefore(l,C),s.removeChild(C),h.lastModified.select()};break;case'PredicateAutoComplete':case'GeneralAutoComplete':case'GeneralPredicateChoice':case'JournalTitleAutoComplete':case'TypeChoice':var T=r.isPredicate,E=r.selectedTd,_=function(t){c('WOOHOO');var n=UI.utils.getAbout(d,UI.utils.getTarget(t));c('GENERAL SELECT ITEM!!!!!!='+n),c('target='+UI.utils.getTarget(t)),T?(c('1'),o.UserInput.fillInRequest('predicate',E,n)&&(c('2'),o.UserInput.clearMenu())):(c('3'),o.UserInput.fillInRequest('object',E,n)&&(c('4'),o.UserInput.clearMenu()))};break;default:throw'userinput: unexpected mode';}x.addEventListener('click',_,!1);var S={};switch(d.each(void 0,UI.ns.rdf('type'),UI.ns.owl('Ontology')).map(function(t){var n=UI.utils.label(t);if(n){var a=n.value.match(/\((.+?)\)/);a?S[a[1]]=t.uri:S[n.value]=t.uri}}),n){case'DidYouMeanDialog':var A=r.dialogTerm,I=r.bnodeTerm;g.style.width='auto';var N=x.appendChild(l.createElement('tr')),j=N.appendChild(l.createElement('th'));j.appendChild(l.createTextNode('Did you mean...'));var R=d.statementsMatching(A),L;for(L=0;L<R.length&&!d.whether(R[L].predicate,f('type'),UI.ns.owl('InverseFunctionalProperty'));L++);var O=R[L].predicate,P=d.any(A,R[L].predicate),M=UI.utils.label(A)+' who has '+UI.utils.label(O)+' '+P+'?',D=x.appendChild(l.createElement('tr')),B=D.appendChild(l.createElement('th'));B.appendChild(l.createTextNode(M)),j.setAttribute('colspan','2'),B.setAttribute('colspan','2');var U=x.appendChild(l.createElement('tr'));U.appendChild(l.createElement('th')).appendChild(l.createTextNode('Yes')),U.appendChild(l.createElement('td')).appendChild(l.createTextNode('BOOLEAN'));var q=x.appendChild(l.createElement('tr'));q.appendChild(l.createElement('th')).appendChild(l.createTextNode('No')),q.appendChild(l.createElement('td')).appendChild(l.createTextNode('BOOLEAN'));break;case'PredicateAutoComplete':var F=r.inputText,z=tabulator.lb.searchAdv(F,void 0,'predicate'),H=z[0];if(0==H.length)return dump('cm length 0\n'),void this.clearMenu();for(var L=0;L<H.length&&10>L;L++)u(H[L][1]);break;case'GeneralAutoComplete':var F=r.inputText;try{var z=tabulator.lb.search(F)}catch(t){dump('stop to see what happens '+r.selectedTd.textContent+'\n'+t+'\n')}var H=z[0],W=z[1];if(0==H.length)return dump('cm length 0\n'),void this.clearMenu();for(var L=0;L<H.length&&10>L;L++){var V=H[L][1].toNT(),G=x.appendChild(l.createElement('tr'));G.setAttribute('about',V);var K=G.appendChild(l.createElement('th'));K.appendChild(l.createElement('div')).appendChild(l.createTextNode(H[L][0]));var J=H[L][1],X=W[L],Z=X?UI.utils.label(X):'';G.appendChild(l.createElement('td')).appendChild(l.createTextNode(Z))}break;case'JournalTitleAutoComplete':var F=r.inputText;dump('testing searching text= '+F+' =====\n'),dump('\n===start JournalTitleAutoComplete\n');for(var Y=d.each(void 0,f('type'),w('Journal')),Q=[],L=0;L<Y.length;L++){var ee=Y[L],te=d.each(ee,k('title'),void 0),ne=F.toLowerCase(),ae=(te+'').toLowerCase();if(-1!=ae.search(ne)){c('FOUND A Journal Title Match!!!!!!'),Q.push(te);var G=x.appendChild(l.createElement('tr'));G.setAttribute('about','journalTitle');var K=G.appendChild(l.createElement('th'));K.appendChild(l.createElement('div')).appendChild(l.createTextNode(te)),G.appendChild(l.createElement('td')).appendChild(l.createTextNode(ee))}}dump('matched: '+Q+'\n'),dump('\\\\done showMenu\'s JTAutocomplete\n');break;case'LimitedPredicateChoice':var re=tabulator.util.getAbout(d,r.clickedTd);re.termType='Collection';for(var oe=d.each(re,UI.ns.link('element')),L=0;L<oe.length;L++)u(oe[L]);break;default:var G=x.appendChild(l.createElement('tr'));G.className='no-suggest';var K=G.appendChild(l.createElement('th'));K.appendChild(l.createElement('div')).appendChild(l.createTextNode('No suggested choices. Try to type instead.')),G.appendChild(l.createElement('td')).appendChild(l.createTextNode('OK'));var h=this,ie=function(t){h.clearMenu(),t.stopPropagation};;G.addEventListener('click',ie,'false');var se=function(){};switch(a.constructor.name){case'Array':for(var L=0;L<a.length;L++)d.query(a[L],m(a[L]),se);break;case'undefined':throw'addPredicateChoice: query is not defined';break;default:d.query(a,m(a),se);}}},fillInRequest:function(t,n,l){var c=n.parentNode,u,f;u=c.AJAR_statement,f=c.AJAR_inverse;var m='object'==t?u.object:u.predicate,h=!1,g,b;if(d.any(m,UI.ns.link('onfillin'))&&(b=new Function('subject',d.any(m,UI.ns.link('onfillin')).value)),'predicate'==t){var y=o.outline_predicateTD(l,c,!1,!1);if('undetermined'!=n.nextSibling.className){var v=new UI.rdf.Statement(u.subject,l,u.object,u.why);try{UI.store.updater.update([],[v],function(t,n,a){n?(g=d.anyStatementMatching(u.subject,l,u.object,u.why),c.AJAR_statement=g,y.className=y.className.replace(/ pendingedit/g,'')):UI.log.warn('Failure occurs (#2) while inserting '+c.AJAR_statement+'\n\n'+a)})}catch(t){return UI.log.error(t),void UI.log.warn('Error when insert (#2) of statement '+v+':\n\t'+t)}y.className+=' pendingedit',this.lastModified=null}else this.formUndetStat(c,u.subject,l,u.object,u.why,!1),o.walk('right'),h=!0;o.replaceTD(y,n),r.remove(u)}else if('object'==t){var y=o.outline_objectTD(l);if(o.replaceTD(y,n),!n.previousSibling||'undetermined'!=n.previousSibling.className){var v=f?new UI.rdf.Statement(l,u.predicate,u.object,u.why):new UI.rdf.Statement(u.subject,u.predicate,l,u.why);try{UI.store.updater.update([],[v],function(t,n){UI.log.info('@@ usinput.js (object) callback ok='+n+' for statement:'+v+'\n '),n?(y.className=y.className.replace(/ pendingedit/g,''),newStats=f?d.statementsMatching(l,u.predicate,u.object,u.why):d.statementsMatching(u.subject,u.predicate,l,u.why),!newStats.length&&UI.log.error('userinput.js 1711: Can\'t find statememt!'),c.AJAR_statement=newStats[0]):UI.log.warn('userinput.js (object): Fail trying to insert statement '+v)})}catch(t){return UI.log.error('userinput.js (object): exception trying to insert statement '+v+': '+UI.utils.stackString(t)),void UI.log.warn('Error trying to insert statement '+v+':\n'+t)}this.lastModified=null,y.className+=' pendingedit'}else o.walk('left'),h=!0;r.remove(u)}return a.statements.push(g),b&&b(u.subject),!h||void this.startFillInText(o.getSelection()[0])},formUndetStat:function(t,n,a,o,s,d){return t.AJAR_inverse=d,t.AJAR_statement=r.add(n,a,o,s),t.AJAR_statement},switchModeByRadio:function(){var t=l.getElementsByName('mode');0==this._tabulatorMode&&!0==t[1].checked&&this.switchMode(),1==this._tabulatorMode&&!0==t[0].checked&&this.switchMode()},_tabulatorMode:0}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_97839.svg',name:'issue',label:function(n){var a=r.store,o=a.findTypeURIs(n);return o['http://www.w3.org/2005/01/wf/flow#Task']||a.holds(n,r.ns.wf('tracker'))?'issue':o['http://www.w3.org/2005/01/wf/flow#Tracker']?'tracker':null},render:function(n,o){var d=r.store,a=r.ns,l=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),s=$rdf.Namespace('http://purl.org/dc/elements/1.1/'),c=$rdf.Namespace('http://purl.org/dc/terms/'),u=o.createElement('div'),f=r.panes.getOutliner(o);u.setAttribute('class','issuePane');var m=function(){var t,t},g=function(t,n){var a=o.createElement('pre');return a.setAttribute('style',n?n:'color: grey'),u.appendChild(a),a.appendChild(o.createTextNode(t)),a},y=function(t,n){t||console.log('Sorry, failed to save your change:\n'+n,'background-color: pink;')},v=function(t){console.warn(t),u.appendChild(r.widgets.errorMessageBlock(o,t))},w=function(t,n){var r=d.any(t,a.ui(n));return!!(r&&r.value)},x=this,_=function(t){var a=t.parentNode,r=x.render(n,o);a.replaceChild(r,t)},k=function(){var t=new Date;return''+t.getTime()},C=function(t,n,o,d){var m=t.createElement('div'),h=n.any(o,l('stateStore')),g=function(){v.setAttribute('class','pendingedit'),v.disabled=!0;var t=[],r=n.anyValue(o,l('issueURITemplate')),g,b;r?(r=$rdf.uri.join(r,h.uri),g=n.sym(function(t){var n=new $rdf.Literal(new Date()),a=''+new Date().getTime(),r=n.value.slice(0,4),o=n.value.slice(5,7),s=n.value.slice(8,10);return t.replace('{N}',a).replace('{YYYY}',r).replace('{MM}',o).replace('{DD}',s)}(r))):g=n.sym(h.uri+'#Iss'+k()),b=g.doc();var y=n.literal(v.value);t.push(new $rdf.Statement(g,l('tracker'),o,h)),t.push(new $rdf.Statement(g,s('title'),y,h)),t.push(new $rdf.Statement(g,c('created'),new Date(),h));var w=n.each(o,l('initialState'));0===w.length&&console.log('This tracker has no initialState');for(var x=0;x<w.length;x++)t.push(new $rdf.Statement(g,a.rdf('type'),w[x],h));d&&t.push(new $rdf.Statement(d,l('dependent'),g,h)),r&&(t.push(new $rdf.Statement(g,l('tracker'),o,b)),t.push(new $rdf.Statement(g,a.rdfs('seeAlso'),h,b)));E.update([],t,function(t,n,a){n?(m.parentNode.removeChild(m),_(u),f.GotoSubject(g,!0,void 0,!0,void 0)):console.log('Error: can\'t save new issue:'+a)})};r.store.fetcher.removeCallback('done','expand'),r.store.fetcher.removeCallback('fail','expand');var b=n.any(o,l('issueClass')),y=r.utils.label(b);m.innerHTML='<h2>Add new '+(d?'sub ':'')+y+'</h2><p>Title of new '+y+':</p>';var v=t.createElement('input');return v.setAttribute('type','text'),v.setAttribute('style','margin: 0.5em; font-size: 100%; padding: 0.3em;'),v.setAttribute('size','100'),v.setAttribute('maxLength','2048'),v.select(),v.addEventListener('keyup',function(t){13===t.keyCode&&g()},!1),m.appendChild(v),m},T=function(t){var n=r.authn.newAppInstance(o,{noun:'tracker'},function(n,a){var o='issuetracker.w3.org';if(a||(a=d.any(n,s('uriPrefix')).value,'/'!==a.slice(-1)&&($rdf.log.error(o+': No / at end of uriPrefix '+a),a+='/'),a+=o+'/'+k()+'/',!!confirm('Make new tracker at '+a+'?'))){for(var s=r.ns.space,d=r.store,c=d.any(R,l('stateStore')),f=d.sym(a+'store.ttl'),u=t.doc(),m=u.uri.slice(0,u.uri.lastIndexOf('/')+1),h=function t(n){if(void 0!==n.elements)return n.elements.map(t);if(void 0===n.uri)return n;var r=n.uri;return r===c.uri?f:(r.slice(0,m.length)===m&&(r=a+r.slice(m.length),$rdf.log.debug(' Map '+n.uri+' to '+r)),d.sym(r))},g=h(u),b=h(t),y=d.statementsMatching(void 0,void 0,void 0,u),v=0,w;v<y.length;v++)w=y[v],d.add(h(w.subject),h(w.predicate),h(w.object),g);d.add(b,r.ns.space('inspiration'),t,c),d.add(b,r.ns.space('inspiration'),t,g),E.put(g,d.statementsMatching(void 0,void 0,void 0,g),'text/turtle',function(t,n,a){n?E.put(f,[],'text/turtle',function(t,n,a){n?console.info('Ok The tracker created OK at: '+b.uri+'\nMake a note of it, bookmark it. '):console.log('FAILED to set up new store at: '+f.uri+' : '+a)}):console.log('FAILED to save new tracker at: '+g.uri+' : '+a)})}});return n.setAttribute('style','margin: 0.5em 1em;'),n},E=d.updater,S=d.statementsMatching(n),A=d.statementsMatching(void 0,void 0,n),I=d.findTypeURIs(n),t=r.authn.currentUser(),N=function t(n){if(n.refresh)return void n.refresh();for(var a=0;a<n.children.length;a++)t(n.children[a])},j=function(t,n){var s=r.ns,c={},u=function(t){c[t.uri]=!0};u(s.rdf('type')),u(s.dc('title'));(function(){var a=d.findTypeURIs(t),r='padding: 0.5em 1.5em 1em 1.5em; ',o=null;for(var s in a)if(o=d.any(d.sym(s),d.sym('http://www.w3.org/ns/ui#backgroundColor')),o)break;o=o?o.value:'#eee',r+='background-color: '+o+'; ',n.setAttribute('style',r)})();var h=d.any(R,l('stateStore')),x=d.sym(t.uri.split('#')[0]);r.authn.checkUser();var _=d.any(R,l('issueClass'));if(!_)throw new Error('This tracker '+R+' has no issueClass');var T=r.widgets.makeSelectForCategory(o,d,t,_,h,function(t,a){t?(m(x,d,x),N(n)):console.log('Failed to change state:\n'+a)});n.appendChild(T);for(var S=d.each(R,l('issueCategory')),A=0;A<S.length;A++)n.appendChild(r.widgets.makeSelectForCategory(o,d,t,S[A],h,function(t,a){t?(m(x,d,x),N(n)):console.log('Failed to change category:\n'+a)}));var I=o.createElement('a');I.setAttribute('href',R.uri),I.setAttribute('style','float:right'),n.appendChild(I).textContent=r.utils.label(R),I.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),u(s.wf('tracker')),n.appendChild(r.widgets.makeDescription(o,d,t,l('description'),x,function(t,n){t?m(x,d,x):console.log('Failed to description:\n'+n)})),u(l('description'));var a=d.statementsMatching(t,s.wf('assignee'));if(1<a.length){g('Weird, was assigned to more than one person. Fixing ..');var j=a.slice(1);E.update(j,[],function(t,n,a){n?g('Now fixed.'):v('Fixed failed: '+a)})}var L=a.length?a[0].object:null,O=d.statementsMatching(void 0,s.wf('assignee')),P=O.map(function(t){return t.object}),M=d.any(void 0,s.doap('bug-database'),R);if(M&&(P=P.concat(d.each(M,s.doap('developer')))),P.length){P.map(function(t){d.fetcher.lookUpThing(t)});var D={mint:'** Add new person **',nullLabel:'(unassigned)',mintStatementsFun:function(t){var n=[$rdf.st(t,s.rdf('type'),s.foaf('Person'))];return M&&n.push($rdf.st(M,s.doap('developer'),t)),n}};n.appendChild(r.widgets.makeSelectForOptions(o,d,t,s.wf('assignee'),P,D,x,function(t,n){t?m(x,d,x):console.log('Failed to description:\n'+n)}))}if(u(s.wf('assignee')),w(R,'allowSubIssues')&&(f.appendPropertyTRs(n,W,!1,function(t,n){return!n&&t.sameTerm(l('dependent'))}),f.appendPropertyTRs(n,V,!0,function(t,n){return n&&t.sameTerm(l('dependent'))}),u(l('dependent'))),n.appendChild(o.createElement('br')),w(R,'allowSubIssues')){var B=o.createElement('button');B.setAttribute('type','button'),n.appendChild(B);var b=r.utils.label(_);B.innerHTML='New sub '+b,B.setAttribute('style','float: right; margin: 0.5em 1em;'),B.addEventListener('click',function(){n.appendChild(C(o,d,R,t))},!1)}var U=d.any(R,s.wf('extrasEntryForm'));if(U){r.widgets.appendForm(o,n,{},t,U,h,y);var q=d.each(U,s.ui('part'));q.map(function(t){var n=d.any(t,s.ui('property'));n&&u(n)})}var F=n.appendChild(o.createElement('tr'));F.setAttribute('style','height: 1em');var z=d.anyValue(R,l('issueURITemplate')),H;if(z)H=t.doc();else{H=d.any(R,s.wf('messageStore')),H||(H=d.any(R,l('stateStore')));d.sym(H.uri+'#Chat'+k())}d.fetcher.nowOrWhenFetched(H,function(a,s){if(!a){var l=o.createElement('p');l.textContent=s,n.insertBefore(l,F)}else{var c=r.messageArea(o,d,t,H);n.insertBefore(c,F)}}),u(s.wf('message'));var I=r.widgets.attachmentList(o,t,n,{promptIcon:r.icons.iconBase+'noun_25830.svg',predicate:s.wf('attachment')});u(s.wf('attachment'));var W=d.statementsMatching(t),V=d.statementsMatching(void 0,void 0,t);f.appendPropertyTRs(n,W,!1,function(t){return!(t.uri in c)}),f.appendPropertyTRs(n,V,!0,function(t){return!(t.uri in c)});var G=o.createElement('button');G.textContent='refresh',G.addEventListener('click',function(){r.store.fetcher.unload(H),r.store.fetcher.nowOrWhenFetched(H.uri,void 0,function(t,a){t?N(n):console.log('Cant refresh messages'+a)})},!1),G.setAttribute('style','margin: 0.5em 1em;'),n.appendChild(G)};if(I['http://www.w3.org/2005/01/wf/flow#Task']||d.holds(n,r.ns.wf('tracker'))){var R=d.any(n,l('tracker'));if(!R)throw'This issue '+n+'has no tracker';var L=R.uri.split('#')[0];r.store.fetcher.load([R.doc(),a.wf('').doc()]).then(function(){var t=d.any(R,l('stateStore'));r.store.fetcher.nowOrWhenFetched(t,n,function(a,r){return a?void(j(n,u),E.addDownstreamChangeListener(t,function(){N(u)})):console.log('Failed to load state '+t+' '+r)})}).catch(function(t){return console.log('Failed to load config '+L+' '+t)}),r.store.fetcher.nowOrWhenFetched(L,n,function(t,n){if(!t)return console.log('Failed to load config '+L+' '+n)})}else if(I['http://www.w3.org/2005/01/wf/flow#Tracker']){var R=n,O=d.any(n,l('issueClass')),P;if(!O)throw new Error('This tracker has no issueClass');var M=d.any(n,l('stateStore'));if(!M)throw new Error('This tracker has no stateStore');r.authn.checkUser();var D=o.createElement('h2');D.setAttribute('style','font-size: 150%'),u.appendChild(D);var h=r.utils.label(O);D.appendChild(o.createTextNode(h+' list'));var B=o.createElement('button'),b=o.createElement('div');B.setAttribute('type','button'),B.setAttribute('style','padding: 0.3em; font-size: 100%; margin: 0.5em;'),b.appendChild(B),u.appendChild(b);var U=o.createElement('img');U.setAttribute('src',r.icons.iconBase+'noun_19460_green.svg'),U.setAttribute('style','width: 1em; height: 1em; margin: 0.2em;'),B.appendChild(U);var q=o.createElement('span');q.innerHTML='New '+h,B.appendChild(q),B.addEventListener('click',function(){B.setAttribute('disabled','true'),b.appendChild(C(o,d,n))},!1),r.store.fetcher.load([M,a.wf('').doc()]).then(function(){for(var t=new $rdf.Query(r.utils.label(n)),s=d.each(R,l('issueCategory')),c=['issue','state','created'],f=0;f<s.length;f++)c.push('_cat_'+f);var m={};c.map(function(n){t.vars.push(m[n]=$rdf.variable(n))}),t.pat.add(m.issue,l('tracker'),R),t.pat.add(m.issue,a.dct('created'),m.created),t.pat.add(m.issue,a.rdf('type'),m.state),t.pat.add(m.state,a.rdfs('subClassOf'),O);for(var f=0;f<s.length;f++)t.pat.add(m.issue,a.rdf('type'),m['_cat_'+f]),t.pat.add(m['_cat_'+f],a.rdfs('subClassOf'),s[f]);t.pat.optional=[];var h=d.any(R,l('propertyList'));if(h)for(var g=h.elements,b=0;b<g.length;b++){var y=g[b],v='_prop_'+b;0<=y.uri.indexOf('#')&&(v=y.uri.split('#')[1]);var w=new $rdf.IndexedFormula;t.pat.optional.push(w),t.vars.push(m[v]=$rdf.variable(v)),w.add(m.issue,y,m[v])}var x={},_=d.each(void 0,a.rdfs('subClassOf'),O);_.map(function(t){(d.holds(t,a.rdfs('subClassOf'),l('Open'))||t.sameTerm(l('Open')))&&(x[t.uri]=!0)});var k=r.table(o,{query:t,keyVariable:'?issue',hints:{"?issue":{linkFunction:function(t){P.innerHTML='';var n=P.appendChild(o.createElement('button'));n.textContent='X',n.addEventListener('click',function(){P.innerHTML=''}),j(d.sym(t),P)}},"?created":{cellFormat:'shortDate'},"?state":{initialSelection:x}}}),C;if(u.appendChild(k),C=u.appendChild(o.createElement('div')),C.setAttribute('style',' position: absolute; top: 100px; right: 20px; margin: 1em white;'),P=C.appendChild(o.createElement('div')),k.refresh){var S=o.createElement('button');S.textContent='refresh',S.addEventListener('click',function(){r.store.fetcher.unload(M),r.store.fetcher.nowOrWhenFetched(M.uri,void 0,function(t,n){t?k.refresh():console.log('Cant refresh data:'+n)})},!1),u.appendChild(S)}else console.log('No refresh function?!');u.appendChild(T(n)),E.addDownstreamChangeListener(M,k.refresh)}).catch(function(t){return console.log('Cannot load state store: '+t)})}else console.log('Error: Issue pane: No evidence that '+n+' is either a bug or a tracker.');var F;return r.authn.checkUser().then(function(n){return n?(console.log('Web ID set already: '+n),void(t=n)):void(F=r.authn.loginStatusBox(o,function(n){n?(t=d.sym(n),console.log('Web ID set from login button: '+n),u.removeChild(F)):t=null}),F.setAttribute('style','margin: 0.5em 1em;'),u.appendChild(F))}),u}}},function(t,n,a){'use strict';var r=a(2),o=a(130),s=a(453),d=s.toolsPane;t.exports={icon:r.icons.iconBase+'noun_99101.svg',name:'contact',label:function(n){var a=r.store,o=r.ns,s=a.findTypeURIs(n);return s[o.vcard('Individual').uri]?'Contact':s[o.vcard('Organization').uri]?'contact':s[o.vcard('Group').uri]?'Group':s[o.vcard('AddressBook').uri]?'Address book':null},mintClass:r.ns.vcard('AddressBook'),mintNew:function(t){return new Promise(function(n,a){var o=t.dom,s=t.me,d=t.div,l=r.store,c=r.ns,u=t.newBase||t.newInstance.dir().uri,f=t.instanceClass||c.vcard('AddressBook');if(f.sameTerm(c.vcard('Group'))){var m=t.newInstance||l.sym(t.newBase+'index.ttl#this'),h=m.doc();return l.add(m,c.rdf('type'),c.vcard('Group'),h),l.add(m,c.vcard('fn'),t.instanceName||'untitled group',h),void l.fetcher.putBack(h,{contentType:'text/turtle'}).then(function(){n(t)}).catch(function(t){a(new Error('Error creating document for new group '+t))})}var g=function(t){d.appendChild(r.widgets.errorMessageBlock(o,t,'pink'))},b='@prefix vcard: <http://www.w3.org/2006/vcard/ns#>.\n  @prefix ab: <http://www.w3.org/ns/pim/ab#>.\n  @prefix dc: <http://purl.org/dc/elements/1.1/>.\n  @prefix xsd: <http://www.w3.org/2001/XMLSchema#>.\n  \n  <#this> a vcard:AddressBook;\n      dc:title "New address Book";\n      vcard:nameEmailIndex <people.ttl>;\n      vcard:groupIndex <groups.ttl>. \n\n';b+='<#this> <http://www.w3.org/ns/auth/acl#owner> <'+s.uri+'>.\n\n';var y=[{to:'index.ttl',content:b,contentType:'text/turtle'},{to:'groups.ttl',content:'',contentType:'text/turtle'},{to:'people.ttl',content:'',contentType:'text/turtle'},{to:'',existing:!0,aclOptions:{defaultForNew:!0}}],v=u+'index.html',w=r.authn.offlineTestID();w&&(y.push({to:'local.html',from:'local.html',contentType:'text/html'}),v=u+'local.html');var x=function(a,r){console.log('Files created. App ready at '+a);var s=d.appendChild(o.createElement('p'));s.setAttribute('style','font-size: 140%;'),s.innerHTML='Your <a href=\''+a+'\'><b>new '+r+'</b></a> is ready. <br/><br/><a href=\''+a+'\'>Go to new '+r+'</a>',n(t)};(function t(){if(0===y.length)x(v,'address book');else{var n=y.shift();console.log('Creating new file '+n.to+' in new instance ');var o=$rdf.uri.join(n.to,u),d=n.aclOptions||{},c=function(l,c){return c?void r.authn.setACLUserPublic(o,s,d).then(function(){return t()}).catch(function(t){var r='Error setting access permissions for '+n.to+' : '+t.message;return g(r),a(new Error(r))}):(g('Error writing new file '+n.to),a(new Error('Error writing new file '+n.to)))};'content'in n?l.fetcher.webOperation('PUT',o,{data:n.content,saveMetadata:!0,contentType:n.contentType}).then(function(){return c(o,!0)}):'existing'in n?c(o,!0):a(new Error('copy not expected buiding new app'))}})()})},render:function(n,s,l){l=l||{};var c=r.store,f=r.ns,u=s.createElement('div'),m=n.doc();r.aclControl.preventBrowserDropEvents(s);var h='font-size: 100%; margin: 0.8em; padding:0.5em;';u.setAttribute('class','contactPane');var g=function(t){console.log(t),u.appendChild(r.widgets.errorMessageBlock(s,t,'pink'))},b=function(t,n){t||g('Error: '+n)},y=this,v=function(n){return r.authn.newAppInstance(s,{noun:'address book',appPathSegment:'contactorator.timbl.com'},function(a,r){y.clone(n,r,{me:t,div:u,dom:s})})},w=r.store.updater;r.aclControl.preventBrowserDropEvents(s);var x=c.statementsMatching(n),_=c.statementsMatching(void 0,void 0,n),k=c.findTypeURIs(n),t=r.authn.currentUser(),C={target:n,me:t,noun:'address book',div:u,dom:s},T=function(t,n,a){c.fetcher.load(t).then(function(){E(t,n,a)}).catch(function(t){g(t)})},E=function(n,a,o){var m=r.utils.label(f.vcard('AddressBook')),y=r.utils.label(f.vcard('Individual')),x=n[0],_=c.any(x,f.vcard('groupIndex')),k={},C=o.foreignGroup||x,T=c.any(C,f.dc('title'))||c.any(C,f.vcard('fn'));l.solo&&T&&'undefined'!=typeof document&&(document.title=T.value),T=T?T.value:m;var E=function(t){if(t)return t;var n;for(var a in k){n=c.sym(a);var r=c.any(void 0,f.vcard('includesGroup'),n);if(r)return r}throw new Error('findBookFromGroups: Cant find address book which this group is part of')},S=function(t,n,a,o){t=E(t);var s=c.any(t,f.vcard('nameEmailIndex')),d=r.utils.genUuid(),l=c.sym(t.dir().uri+'Person/'+d+'/index.ttl#this'),u=l.doc(),m=[[$rdf.st(l,f.vcard('inAddressBook'),t,s),$rdf.st(l,f.vcard('fn'),n,s)]];for(var h in a){var b=c.sym(h),g=b.doc();m.push([$rdf.st(b,f.vcard('hasMember'),l,g),$rdf.st(l,f.vcard('fn'),n,g)])}var y=function t(n,a,s){a?0<m.length?(console.log('Patching '+m[0]+'\n'),w.update([],m.shift(),t)):(console.log('Done patching. Now reading back in.\n'),r.store.fetcher.nowOrWhenFetched(u,void 0,function(t,n){t?(console.log('Read back in OK.\n'),o(!0,l)):(console.log('Read back in FAILED: '+n+'\n'),o(!1,n))})):(console.log('Error: can\'t update '+n+' for new contact:'+s+'\n'),o(!1,'Error: can\'t update '+n+' for new contact:'+s))};r.store.fetcher.nowOrWhenFetched(s,void 0,function(t,a){t?(console.log(' People index must be loaded\n'),w.put(u,[$rdf.st(l,f.vcard('fn'),n,u),$rdf.st(l,f.rdf('type'),f.vcard('Individual'),u)],'text/turtle',y)):(console.log('Error loading people index!'+s.uri+': '+a),o(!1,'Error loading people index!'+s.uri+': '+a+'\n'))})},A=function(t,n,a){var o=c.any(t,f.vcard('groupIndex')),s=t.uri.split('#')[0],d=n.replace(' ','_'),l=c.sym(s.slice(0,s.lastIndexOf('/')+1)+'Group/'+d+'.ttl'),u=c.sym(l.uri+'#this');console.log(' New group will be: '+u+'\n'),r.store.fetcher.nowOrWhenFetched(o,function(r,s){if(r){console.log(' Group index must be loaded\n');var d=[$rdf.st(t,f.vcard('includesGroup'),u,o),$rdf.st(u,f.rdf('type'),f.vcard('Group'),o),$rdf.st(u,f.vcard('fn'),n,o)];w.update([],d,function(s,d,c){if(r){var m=[$rdf.st(t,f.vcard('includesGroup'),u,o),$rdf.st(u,f.rdf('type'),f.vcard('Group'),l),$rdf.st(u,f.vcard('fn'),n,l)];w.put(l,m,'text/turtle',function(t,n,r){a(n,n?u:'Can\'t save new group file '+l+r)})}else a(r,'Could not update group index '+c)})}else console.log('Error loading people index!'+o.uri+': '+s),a(!1,'Error loading people index!'+o.uri+': '+s+'\n')})},I=function(t,n,a,o){var s=t.createElement('div');r.store.fetcher.removeCallback('done','expand'),r.store.fetcher.removeCallback('fail','expand'),s.innerHTML='<p>Name of new '+a+':</p>';var d=t.createElement('input');d.setAttribute('type','text'),d.setAttribute('size','100'),d.setAttribute('maxLength','2048'),d.select();var l=function(){d.setAttribute('class','pendingedit'),d.disabled=!0,o(!0,d.value)};d.addEventListener('keyup',function(t){13===t.keyCode&&l()},!1),s.appendChild(d);var c=s.appendChild(t.createElement('br')),u=s.appendChild(t.createElement('button'));u.setAttribute('type','button'),u.style.cssText=h,u.innerHTML='Cancel',u.addEventListener('click',function(){s.parentNode.removeChild(s),o(!1)},!1);var f=s.appendChild(t.createElement('button'));return f.setAttribute('type','button'),f.innerHTML='Continue',f.style.cssText=h,f.addEventListener('click',function(){l()},!1),s},N=function(t){var n=c.any(t,f.vcard('fn'))||c.any(t,f.foaf('name'))||c.any(t,f.vcard('organization-name'));return n?n.value:'???'},j=function(t){var n=re.value.trim().toLowerCase();if(0===n.length)return!0;for(var a=n.split(' '),r=0,o;r<a.length;r++)if(o=a[r],0>t.toLowerCase().indexOf(o))return!1;return!0},R=function(){for(var t=0,n;t<Q.children.length;t++)n=Q.children[t],n.setAttribute('style',j(N(n.subject))?'':'display: none;')},L=function(t,n,a){for(var r=n.children.length,o=[],s=0;s<n.children.length;s++){var d=n.children[s],l=d.subject,u=function(n,s){s.setAttribute('style','background-color: #ffe;'),c.fetcher.nowOrWhenFetched(n.doc(),void 0,function(d,l){if(!d){var c='Can\'t load group file: '+n+': '+l;return o.push(c),b(d,c)}s.setAttribute('style','background-color: #cce;'),t[n.uri]=!0,q(),U(),r-=1,!r&&a&&a(0===o.length,o)})};u(l,d)}},O=function(){de=[],o.foreignGroup&&de.push(['',c.any(o.foreignGroup,f.vcard('fn')),o.foreignGroup]),x&&(n.map(function(t){var n=t?c.each(t,f.vcard('includesGroup')):[],a=n.map(function(n){return[t,c.any(n,f.vcard('fn')),n]});de=de.concat(a)}),de.sort())},P=function(t,n,a){var o=r.panes.byName(a),s=o.render(n,t);return s.setAttribute('style','border: 0.1em solid #444; border-radius: 0.5em'),s},M=function(t,n){var a=N(t),r=N(n);if(a&&r){if(a=a.toLowerCase(),r=r.toLowerCase(),a>r)return 1;if(a<r)return-1}return t.uri>n.uri?1:t.uri<n.uri?-1:0},D=function(t){function n(){0<o.length?w.update(o.shift(),[],function(a,r,o){return r?void n():void g('Eror deleting all trace of: '+t+': '+o)}):(console.log('Deleting resoure '+t.doc()),c.fetcher.delete(t.doc()).then(function(){console.log('Delete thing '+t+': complete.')}).catch(function(n){g('Error deleting thing '+t+': '+n)}))}var a=c.statementsMatching(t).concat(c.statementsMatching(void 0,void 0,t)),r={};a.map(function(t){r[t.why.uri]=t});var o=[];for(var s in r)o.push(a.filter(function(t){return t.why.uri===s})),console.log('Deleting '+o[o.length-1].length+' from '+s);n()},B=function(t){for(var n=c.allAliases(t),a=x.dir().uri,r=0;r<n.length;r++)if(n[r].uri.slice(0,a.length)===a)return n[r];throw new Error('No local URI for '+t)},U=function t(){var n=[],o=0;for(var d in k)if(k[d]){var l=c.each(c.sym(d),f.vcard('hasMember'));n=n.concat(l),o+=1}n.sort(M);for(var a=0;a<n.length-1;)n[a].uri===n[a+1].uri?n.splice(a,1):a++;Q.innerHTML='',K.textContent=5<n.length?''+n.length+' contacts':'contact';for(var u=0;u<n.length;u++){var m=Q.appendChild(s.createElement('tr')),h=m.appendChild(s.createElement('td')),g=m.appendChild(s.createElement('td'));h.setAttribute('style',ie);var y=n[u],v=N(y);h.textContent=v,m.subject=y,r.widgets.makeDraggable(m,y);var w=function(n,a){r.widgets.deleteButtonWithCheck(s,g,'contact',function(){D(a),t(),oe.innerHTML=''}),m.addEventListener('click',function(t){t.preventDefault(),oe.innerHTML='loading...';var n=x?B(a):a;r.store.fetcher.nowOrWhenFetched(n.doc(),void 0,function(t,a){if(oe.innerHTML='',!t)return b(t,'Can\'t load card: '+n+': '+a);oe.appendChild(P(s,n,'contact')),oe.appendChild(s.createElement('br'));oe.appendChild(r.widgets.linkIcon(s,n))})})};w(m,y)}R()},q=function(){for(var t=0,n;t<Z.children.length;t++)n=Z.children[t],n.subject&&n.setAttribute('style',k[n.subject.uri]?'background-color: #cce;':'')},F=function t(){var n;O();var a;for(a=0;a<Z.children.length;a++){var o=Z.children[a];o.trashMe=!0}for(var d=0;d<de.length;d++){var l=de[d][0],u=de[d][1],m=de[d][2];for(n=!1,a=0;a<Z.children.length;a++){var o=Z.children[a];if(o.subject&&o.subject.sameTerm(m)){o.trashMe=!1,n=!0;break}}if(!n){var h=Z.appendChild(s.createElement('tr'));h.subject=m,r.widgets.makeDraggable(h,m),h.setAttribute('style',ie),h.textContent=u;var y=function(n,a,o){r.widgets.makeDropTarget(n,function(t){t.forEach(function(t){console.log('Dropped on group: '+t);var n=c.sym(t),r=[n.doc(),a.doc()];c.fetcher.load(r).then(function(){var t=c.findTypeURIs(n);for(var r in t)console.log('    drop object type includes: '+r);if(f.vcard('Individual').uri in t||f.vcard('Organization').uri in t){var s=c.any(n,f.vcard('fn'));if(!s)return alert('No vcard name known for '+n);var d=c.holds(a,f.vcard('hasMember'),n,a.doc());if(d)return alert('ALREADY added '+s+' to group '+o);if(confirm('Add '+s+' to group '+o+'?')){var l=[$rdf.st(a,f.vcard('hasMember'),n,a.doc()),$rdf.st(n,f.vcard('fn'),s,a.doc())];c.updater.update([],l,function(t,n,r){return n?void console.log('Added '+s+' to group '+o):g('Error adding member to group '+a+': '+r)})}}}).catch(function(t){g('Error looking up dropped thing '+n+' and group: '+t)})})}),r.widgets.deleteButtonWithCheck(s,n,'group '+o,function(){D(a),t()}),n.addEventListener('click',function(t){t.preventDefault();var n=c.sym(a.uri.split('#')[0]);t.metaKey||(k={}),k[a.uri]=!k[a.uri],q(),Q.innerHTML='',c.fetcher.nowOrWhenFetched(n.uri,void 0,function(o,d){if(!o)return b(o,'Can\'t load group file: '+n+': '+d);if(U(),!t.metaKey){oe.innerHTML='';var l=!1,u=r.aclControl.ACLControlBox5(a,s,'group',c,function(t,n){t||(oe.innerHTML='Failed: '+n)}),f=oe.appendChild(s.createElement('button'));f.style.cssText='padding: 1em; margin: 1em';var m=f.appendChild(s.createElement('img'));m.style.cssText='width: 1.5em; height: 1.5em',m.setAttribute('src',r.icons.iconBase+'noun_123691.svg'),f.addEventListener('click',function(){l=!l,l?oe.appendChild(u):oe.removeChild(u)})}})},!0)};y(h,m,u)}}for(a=0;a<Z.children.length;a++){var o=Z.children[a];o.trashMe&&Z.removeChild(o)}q()},z=s.createElement('table');z.setAttribute('style','border-collapse: collapse; margin-right: 0;'),u.appendChild(z);var H=z.appendChild(s.createElement('tr')),W=z.appendChild(s.createElement('tr')),V=z.appendChild(s.createElement('tr')),G=H.appendChild(s.createElement('td')),K=H.appendChild(s.createElement('td')),J=H.appendChild(s.createElement('td')),X=W.appendChild(s.createElement('td')),Z=X.appendChild(s.createElement('table')),Y=W.appendChild(s.createElement('td')),Q=Y.appendChild(s.createElement('table')),ee=V.appendChild(s.createElement('td')),te=V.appendChild(s.createElement('td')),ne=V.appendChild(s.createElement('td')),ae=J.appendChild(s.createElement('div')),re=J.appendChild(s.createElement('input'));re.setAttribute('type','text'),re.setAttribute('style','border: 0.1em solid #444; border-radius: 0.5em; width: 100%;'),re.addEventListener('input',function(){R()});var oe=W.appendChild(s.createElement('td'));oe.setAttribute('style','margin: 0;');var ie='padding: 0.1em;';G.textContent='groups',G.setAttribute('style','min-width: 10em; padding-bottom 0.2em;');var se=function(t){var n=t?'':'display: none;';G.setAttribute('style','min-width: 10em; padding-bottom 0.2em;'+n);var a='padding: 0.1em;';X.setAttribute('style',a+n),ee.setAttribute('style',a+n)};se(!0);var de;if(o.foreignGroup&&(k[o.foreignGroup.uri]=!0),x){var le=G.appendChild(s.createElement('button'));le.textContent='All';var pe='margin-left: 1em; font-size: 100%;';le.setAttribute('style',pe),le.addEventListener('click',function(){le.state=le.state?0:1,Q.innerHTML='',le.state?(le.setAttribute('style',pe+'background-color: #ff8;'),L(k,Z,function(t,n){return t?void(le.setAttribute('style',pe+'background-color: black; color: white'),q()):g(n)})):(le.setAttribute('style',pe+'background-color: #cfc;'),k={},q())}),r.store.fetcher.nowOrWhenFetched(_.uri,x,function(t,n){return t?void(F(),U()):console.log('Cannot load group index: '+n)})}else F(),U(),console.log('No book, only one group -> hide list of groups'),se(!1);K.textContent='name',K.setAttribute('style','min-width: 18em;'),Y.setAttribute('style','overflow:scroll;');var ce=s.createElement('button'),ue=s.createElement('div');ce.setAttribute('type','button'),t||ce.setAttribute('disabled','true'),r.authn.checkUser().then(function(n){n&&(t=n,ce.removeAttribute('disabled'))}),ue.appendChild(ce),ce.innerHTML='New Contact',te.appendChild(ue);if(ce.addEventListener('click',function(){oe.innerHTML='';var t=E(x);c.fetcher.load(t).then(function(n){if(!n.ok)throw new Error('Book won\'t load:'+t);var a=c.any(t,f.vcard('nameEmailIndex'));if(!a)throw new Error('Wot no nameEmailIndex?');return c.fetcher.load(a)}).then(function(t){console.log('Name index loaded async'+t.url)}),oe.appendChild(I(s,c,'Contact',function(t,n){t&&S(x,n,k,function(t,n){t?(oe.innerHTML='',U(),oe.appendChild(P(s,n,'contact'))):console.log('Error: can\'t save new contact:'+n)})}))},!1),x){var fe=ee.appendChild(s.createElement('button'));fe.setAttribute('type','button'),fe.innerHTML='New Group',fe.addEventListener('click',function(){oe.innerHTML='';var t=c.any(x,f.vcard('groupIndex'));r.store.fetcher.nowOrWhenFetched(t,void 0,function(t,n){t?console.log(' Group index has been loaded\n'):console.log('Error: Group index has NOT been loaded'+n+'\n')}),oe.appendChild(I(s,c,'Group',function(t,n){t&&A(x,n,function(t,n){t?(k={},k[n.uri]=!0,F(),oe.innerHTML='',oe.appendChild(r.aclControl.ACLControlBox5(n,s,'group',c,function(t,n){t||(oe.innerHTML='Group sharing setup failed: '+n)}))):(console.log('Error: can\'t save new group:'+n),oe.innerHTML='Failed to save group'+n)})}))},!1);var he=ne.appendChild(s.createElement('button'));he.setAttribute('type','button'),he.innerHTML='Tools',he.addEventListener('click',function(){oe.innerHTML='',oe.appendChild(d(L,k,Z,x,s,t))})}ne.appendChild(v(x)),u.appendChild(s.createElement('hr'))};return k[f.vcard('Individual').uri]||k[f.vcard('Organization').uri]||k[f.foaf('Person').uri]?function(t){var d=t,n=function(t){c.fetcher.nowOrWhenFetched(t.doc(),function(n,a){if(!n)console.log('Error looking up dropped thing '+t+': '+a);else{var r=c.findTypeURIs(t);for(var o in r)console.log('    drop object type includes: '+o);console.log('Default: assume web page  '+t);c.bnode();c.add(d,f.wf('attachment'),t,d.doc())}})},l=function(a,r,s){var l=o.extension(r);r!==o.lookup(a)&&(a+='_.'+l,console.log('MIME TYPE MISMATCH -- adding extension: '+a));var u,m,h;r.startsWith('image')?(u='image_',m=f.vcard('hasPhoto'),h=!0):(u='attachment_',m=f.wf('attachment'),h=!1);var b,n;for(b=0;;b++){if(n=c.sym(d.dir().uri+a),!c.holds(t,f.vcard('hasPhoto'),n))break;a=u+b+'.'+l}c.add(t,m,n,t.doc()),console.log('Putting '+s.length+' bytes of '+r+' to '+n),c.fetcher.webOperation('PUT',n,{data:s,contentType:r}).then(function(a){return a.ok?(console.log(' Upload: put OK: '+n),c.fetcher.putBack(t.doc())):void g('Error uploading '+n+':'+a.status)}).then(function(){h&&_.setAttribute('src',n.uri)}).catch(function(t){console.log(' Upload: FAIL '+n+', Error: '+t)})},h=function(t){t.map(function(t){var a=$rdf.sym(t);console.log('Dropped on mugshot thing '+a);var a=c.sym(t);return t.startsWith('http')&&0>t.indexOf('#')?void c.fetcher.webOperation('GET',a.uri).then(function(t){var n=t.headers.get('Content-Type'),r=a.uri.split('/').slice(-1)[0];r=r.split('?')[0],t.arrayBuffer().then(function(o){return t.ok?void l(r,n,o):void g('Error downloading '+a+':'+t.status)})}):void(console.log('Not a web document URI, cannot copy as picture: '+a),n(a))})},y=function(t){for(var n=0,a;a=t[n];n++){console.log(' meeting: Filename: '+a.name+', type: '+(a.type||'n/a')+' size: '+a.size+' bytes, last modified: '+(a.lastModifiedDate?a.lastModifiedDate.toLocaleDateString():'n/a'));var r=new FileReader;r.onload=function(t){return function(n){var a=n.target.result;console.log(' File read byteLength : '+a.byteLength);var r=encodeURIComponent(t.name),o=t.type;l(r,o,a)}}(a),r.readAsArrayBuffer(a)}},v=c.sym('https://linkeddata.github.io/solid-app-set/contact/individualForm.ttl#form1'),w=v.doc(),_;if(!c.holds(void 0,void 0,void 0,w)){var x=a(454);$rdf.parse(x,c,w.uri,'text/turtle')}var k=r.ns.vcard('Type').doc();c.holds(void 0,void 0,void 0,k)||$rdf.parse(a(455),c,k.uri,'text/turtle');var C=[t.doc()];r.store.fetcher.load(C).catch(function(t){console.log('Error: Failed to load form or ontology: '+t)}).then(function(){(function(){var n=c.findTypeURIs(t),a='padding: 0.5em 1.5em 1em 1.5em; ',r=null;for(var o in n)if(r=c.any(c.sym(o),c.sym('http://www.w3.org/ns/ui#backgroundColor')),r)break;r=r?r.value:'#fff',a+='background-color: '+r+'; ',u.setAttribute('style',a)})(),r.authn.checkUser(),_=u.appendChild(s.createElement('img')),_.setAttribute('style','max-height: 10em; border-radius: 1em; margin: 0.7em;'),r.widgets.setImage(_,t),r.widgets.makeDropTarget(_,h,y),r.widgets.appendForm(s,u,{},t,v,m,b),u.appendChild(s.createElement('tr')).setAttribute('style','height: 1em');var n=function(t,n,o){var s=a.appendChild(t.createElement('tr'));s.setAttribute('style','margin-top: 0.1em solid #ccc;');var d=s.appendChild(t.createElement('td')),l=s.appendChild(t.createElement('td'));d.textContent=o.uri.split('/')[2],c.fetcher.load(o).then(function(){d.textContent=o.uri.split('/')[2]+' ('+c.statementsMatching(void 0,void 0,void 0,o.doc()).length+')'}).catch(function(n){l.appendChild(r.widgets.errorMessageBlock(t,n,'pink'))});l.appendChild(r.widgets.linkIcon(t,o))},a=u.appendChild(s.createElement('table')),o=c.allAliases(t);if(1<o.length)for(var d=0,l;d<o.length;d++)l=o[d],l.sameTerm(t)||n(s,a,l);var g=r.widgets.attachmentList(s,t,u,{predicate:r.ns.vcard('url')}),w=u.appendChild(s.createElement('hr')),x=c.each(t,f.vcard('url'));x.forEach(function(t){var n=c.any(t,f.rdf('type')),o=c.any(t,f.vcard('value'));if(o){var d=a.appendChild(s.createElement('tr'));d.setAttribute('style','margin-top: 0.1em solid #ccc;');var l=d.appendChild(s.createElement('td'));l.textContent=r.utils.label(n);var u=d.appendChild(s.createElement('td')),m=u.appendChild(s.createElement('a'));m.setAttribute('href',o.uri);var h=m.appendChild(s.createElement('span'));h.textContent=o.uri}})})}(n):k[f.vcard('Group').uri]?r.authn.findAppInstances(C,f.vcard('AddressBook')).then(function(t){var a=t.instances,r={foreignGroup:n};0<a.length?T(a,t,r):T([],t,r)}).catch(function(t){r.widgets.complain(C,t)}):k[f.vcard('AddressBook').uri]?T([n],C,{}):console.log('Error: Contact pane: No evidence that '+n+' is anything to do with contacts.'),t=r.authn.currentUser(),t||console.log('(You do not have your Web Id set. Sign in or sign up to make changes.)'),'webapp'===tabulator.mode&&'undefined'!=typeof document&&document.location&&'http://localhost'===(''+document.location).slice(0,16)&&(t=c.any(n,r.ns.acl('owner')),console.log('Assuming user is '+t)),u}}},function(t,n,a){t.exports=a(451)},function(t){t.exports={"application/1d-interleaved-parityfec":{source:'iana'},"application/3gpdash-qoe-report+xml":{source:'iana'},"application/3gpp-ims+xml":{source:'iana'},"application/a2l":{source:'iana'},"application/activemessage":{source:'iana'},"application/alto-costmap+json":{source:'iana',compressible:!0},"application/alto-costmapfilter+json":{source:'iana',compressible:!0},"application/alto-directory+json":{source:'iana',compressible:!0},"application/alto-endpointcost+json":{source:'iana',compressible:!0},"application/alto-endpointcostparams+json":{source:'iana',compressible:!0},"application/alto-endpointprop+json":{source:'iana',compressible:!0},"application/alto-endpointpropparams+json":{source:'iana',compressible:!0},"application/alto-error+json":{source:'iana',compressible:!0},"application/alto-networkmap+json":{source:'iana',compressible:!0},"application/alto-networkmapfilter+json":{source:'iana',compressible:!0},"application/aml":{source:'iana'},"application/andrew-inset":{source:'iana',extensions:['ez']},"application/applefile":{source:'iana'},"application/applixware":{source:'apache',extensions:['aw']},"application/atf":{source:'iana'},"application/atfx":{source:'iana'},"application/atom+xml":{source:'iana',compressible:!0,extensions:['atom']},"application/atomcat+xml":{source:'iana',extensions:['atomcat']},"application/atomdeleted+xml":{source:'iana'},"application/atomicmail":{source:'iana'},"application/atomsvc+xml":{source:'iana',extensions:['atomsvc']},"application/atxml":{source:'iana'},"application/auth-policy+xml":{source:'iana'},"application/bacnet-xdd+zip":{source:'iana'},"application/batch-smtp":{source:'iana'},"application/bdoc":{compressible:!1,extensions:['bdoc']},"application/beep+xml":{source:'iana'},"application/calendar+json":{source:'iana',compressible:!0},"application/calendar+xml":{source:'iana'},"application/call-completion":{source:'iana'},"application/cals-1840":{source:'iana'},"application/cbor":{source:'iana'},"application/cccex":{source:'iana'},"application/ccmp+xml":{source:'iana'},"application/ccxml+xml":{source:'iana',extensions:['ccxml']},"application/cdfx+xml":{source:'iana'},"application/cdmi-capability":{source:'iana',extensions:['cdmia']},"application/cdmi-container":{source:'iana',extensions:['cdmic']},"application/cdmi-domain":{source:'iana',extensions:['cdmid']},"application/cdmi-object":{source:'iana',extensions:['cdmio']},"application/cdmi-queue":{source:'iana',extensions:['cdmiq']},"application/cdni":{source:'iana'},"application/cea":{source:'iana'},"application/cea-2018+xml":{source:'iana'},"application/cellml+xml":{source:'iana'},"application/cfw":{source:'iana'},"application/clue_info+xml":{source:'iana'},"application/cms":{source:'iana'},"application/cnrp+xml":{source:'iana'},"application/coap-group+json":{source:'iana',compressible:!0},"application/coap-payload":{source:'iana'},"application/commonground":{source:'iana'},"application/conference-info+xml":{source:'iana'},"application/cose":{source:'iana'},"application/cose-key":{source:'iana'},"application/cose-key-set":{source:'iana'},"application/cpl+xml":{source:'iana'},"application/csrattrs":{source:'iana'},"application/csta+xml":{source:'iana'},"application/cstadata+xml":{source:'iana'},"application/csvm+json":{source:'iana',compressible:!0},"application/cu-seeme":{source:'apache',extensions:['cu']},"application/cybercash":{source:'iana'},"application/dart":{compressible:!0},"application/dash+xml":{source:'iana',extensions:['mpd']},"application/dashdelta":{source:'iana'},"application/davmount+xml":{source:'iana',extensions:['davmount']},"application/dca-rft":{source:'iana'},"application/dcd":{source:'iana'},"application/dec-dx":{source:'iana'},"application/dialog-info+xml":{source:'iana'},"application/dicom":{source:'iana'},"application/dicom+json":{source:'iana',compressible:!0},"application/dicom+xml":{source:'iana'},"application/dii":{source:'iana'},"application/dit":{source:'iana'},"application/dns":{source:'iana'},"application/docbook+xml":{source:'apache',extensions:['dbk']},"application/dskpp+xml":{source:'iana'},"application/dssc+der":{source:'iana',extensions:['dssc']},"application/dssc+xml":{source:'iana',extensions:['xdssc']},"application/dvcs":{source:'iana'},"application/ecmascript":{source:'iana',compressible:!0,extensions:['ecma']},"application/edi-consent":{source:'iana'},"application/edi-x12":{source:'iana',compressible:!1},"application/edifact":{source:'iana',compressible:!1},"application/efi":{source:'iana'},"application/emergencycalldata.comment+xml":{source:'iana'},"application/emergencycalldata.control+xml":{source:'iana'},"application/emergencycalldata.deviceinfo+xml":{source:'iana'},"application/emergencycalldata.ecall.msd":{source:'iana'},"application/emergencycalldata.providerinfo+xml":{source:'iana'},"application/emergencycalldata.serviceinfo+xml":{source:'iana'},"application/emergencycalldata.subscriberinfo+xml":{source:'iana'},"application/emergencycalldata.veds+xml":{source:'iana'},"application/emma+xml":{source:'iana',extensions:['emma']},"application/emotionml+xml":{source:'iana'},"application/encaprtp":{source:'iana'},"application/epp+xml":{source:'iana'},"application/epub+zip":{source:'iana',extensions:['epub']},"application/eshop":{source:'iana'},"application/exi":{source:'iana',extensions:['exi']},"application/fastinfoset":{source:'iana'},"application/fastsoap":{source:'iana'},"application/fdt+xml":{source:'iana'},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:'iana'},"application/font-sfnt":{source:'iana'},"application/font-tdpfr":{source:'iana',extensions:['pfr']},"application/font-woff":{source:'iana',compressible:!1,extensions:['woff']},"application/font-woff2":{compressible:!1,extensions:['woff2']},"application/framework-attributes+xml":{source:'iana'},"application/geo+json":{source:'iana',compressible:!0,extensions:['geojson']},"application/geo+json-seq":{source:'iana'},"application/geoxacml+xml":{source:'iana'},"application/gml+xml":{source:'iana',extensions:['gml']},"application/gpx+xml":{source:'apache',extensions:['gpx']},"application/gxf":{source:'apache',extensions:['gxf']},"application/gzip":{source:'iana',compressible:!1,extensions:['gz']},"application/h224":{source:'iana'},"application/held+xml":{source:'iana'},"application/http":{source:'iana'},"application/hyperstudio":{source:'iana',extensions:['stk']},"application/ibe-key-request+xml":{source:'iana'},"application/ibe-pkg-reply+xml":{source:'iana'},"application/ibe-pp-data":{source:'iana'},"application/iges":{source:'iana'},"application/im-iscomposing+xml":{source:'iana'},"application/index":{source:'iana'},"application/index.cmd":{source:'iana'},"application/index.obj":{source:'iana'},"application/index.response":{source:'iana'},"application/index.vnd":{source:'iana'},"application/inkml+xml":{source:'iana',extensions:['ink','inkml']},"application/iotp":{source:'iana'},"application/ipfix":{source:'iana',extensions:['ipfix']},"application/ipp":{source:'iana'},"application/isup":{source:'iana'},"application/its+xml":{source:'iana'},"application/java-archive":{source:'apache',compressible:!1,extensions:['jar','war','ear']},"application/java-serialized-object":{source:'apache',compressible:!1,extensions:['ser']},"application/java-vm":{source:'apache',compressible:!1,extensions:['class']},"application/javascript":{source:'iana',charset:'UTF-8',compressible:!0,extensions:['js','mjs']},"application/jf2feed+json":{source:'iana',compressible:!0},"application/jose":{source:'iana'},"application/jose+json":{source:'iana',compressible:!0},"application/jrd+json":{source:'iana',compressible:!0},"application/json":{source:'iana',charset:'UTF-8',compressible:!0,extensions:['json','map']},"application/json-patch+json":{source:'iana',compressible:!0},"application/json-seq":{source:'iana'},"application/json5":{extensions:['json5']},"application/jsonml+json":{source:'apache',compressible:!0,extensions:['jsonml']},"application/jwk+json":{source:'iana',compressible:!0},"application/jwk-set+json":{source:'iana',compressible:!0},"application/jwt":{source:'iana'},"application/kpml-request+xml":{source:'iana'},"application/kpml-response+xml":{source:'iana'},"application/ld+json":{source:'iana',compressible:!0,extensions:['jsonld']},"application/lgr+xml":{source:'iana'},"application/link-format":{source:'iana'},"application/load-control+xml":{source:'iana'},"application/lost+xml":{source:'iana',extensions:['lostxml']},"application/lostsync+xml":{source:'iana'},"application/lxf":{source:'iana'},"application/mac-binhex40":{source:'iana',extensions:['hqx']},"application/mac-compactpro":{source:'apache',extensions:['cpt']},"application/macwriteii":{source:'iana'},"application/mads+xml":{source:'iana',extensions:['mads']},"application/manifest+json":{charset:'UTF-8',compressible:!0,extensions:['webmanifest']},"application/marc":{source:'iana',extensions:['mrc']},"application/marcxml+xml":{source:'iana',extensions:['mrcx']},"application/mathematica":{source:'iana',extensions:['ma','nb','mb']},"application/mathml+xml":{source:'iana',extensions:['mathml']},"application/mathml-content+xml":{source:'iana'},"application/mathml-presentation+xml":{source:'iana'},"application/mbms-associated-procedure-description+xml":{source:'iana'},"application/mbms-deregister+xml":{source:'iana'},"application/mbms-envelope+xml":{source:'iana'},"application/mbms-msk+xml":{source:'iana'},"application/mbms-msk-response+xml":{source:'iana'},"application/mbms-protection-description+xml":{source:'iana'},"application/mbms-reception-report+xml":{source:'iana'},"application/mbms-register+xml":{source:'iana'},"application/mbms-register-response+xml":{source:'iana'},"application/mbms-schedule+xml":{source:'iana'},"application/mbms-user-service-description+xml":{source:'iana'},"application/mbox":{source:'iana',extensions:['mbox']},"application/media-policy-dataset+xml":{source:'iana'},"application/media_control+xml":{source:'iana'},"application/mediaservercontrol+xml":{source:'iana',extensions:['mscml']},"application/merge-patch+json":{source:'iana',compressible:!0},"application/metalink+xml":{source:'apache',extensions:['metalink']},"application/metalink4+xml":{source:'iana',extensions:['meta4']},"application/mets+xml":{source:'iana',extensions:['mets']},"application/mf4":{source:'iana'},"application/mikey":{source:'iana'},"application/mmt-usd+xml":{source:'iana'},"application/mods+xml":{source:'iana',extensions:['mods']},"application/moss-keys":{source:'iana'},"application/moss-signature":{source:'iana'},"application/mosskey-data":{source:'iana'},"application/mosskey-request":{source:'iana'},"application/mp21":{source:'iana',extensions:['m21','mp21']},"application/mp4":{source:'iana',extensions:['mp4s','m4p']},"application/mpeg4-generic":{source:'iana'},"application/mpeg4-iod":{source:'iana'},"application/mpeg4-iod-xmt":{source:'iana'},"application/mrb-consumer+xml":{source:'iana'},"application/mrb-publish+xml":{source:'iana'},"application/msc-ivr+xml":{source:'iana'},"application/msc-mixer+xml":{source:'iana'},"application/msword":{source:'iana',compressible:!1,extensions:['doc','dot']},"application/mud+json":{source:'iana',compressible:!0},"application/mxf":{source:'iana',extensions:['mxf']},"application/n-quads":{source:'iana'},"application/n-triples":{source:'iana'},"application/nasdata":{source:'iana'},"application/news-checkgroups":{source:'iana'},"application/news-groupinfo":{source:'iana'},"application/news-transmission":{source:'iana'},"application/nlsml+xml":{source:'iana'},"application/nss":{source:'iana'},"application/ocsp-request":{source:'iana'},"application/ocsp-response":{source:'iana'},"application/octet-stream":{source:'iana',compressible:!1,extensions:['bin','dms','lrf','mar','so','dist','distz','pkg','bpk','dump','elc','deploy','exe','dll','deb','dmg','iso','img','msi','msp','msm','buffer']},"application/oda":{source:'iana',extensions:['oda']},"application/odx":{source:'iana'},"application/oebps-package+xml":{source:'iana',extensions:['opf']},"application/ogg":{source:'iana',compressible:!1,extensions:['ogx']},"application/omdoc+xml":{source:'apache',extensions:['omdoc']},"application/onenote":{source:'apache',extensions:['onetoc','onetoc2','onetmp','onepkg']},"application/oxps":{source:'iana',extensions:['oxps']},"application/p2p-overlay+xml":{source:'iana'},"application/parityfec":{source:'iana'},"application/passport":{source:'iana'},"application/patch-ops-error+xml":{source:'iana',extensions:['xer']},"application/pdf":{source:'iana',compressible:!1,extensions:['pdf']},"application/pdx":{source:'iana'},"application/pgp-encrypted":{source:'iana',compressible:!1,extensions:['pgp']},"application/pgp-keys":{source:'iana'},"application/pgp-signature":{source:'iana',extensions:['asc','sig']},"application/pics-rules":{source:'apache',extensions:['prf']},"application/pidf+xml":{source:'iana'},"application/pidf-diff+xml":{source:'iana'},"application/pkcs10":{source:'iana',extensions:['p10']},"application/pkcs12":{source:'iana'},"application/pkcs7-mime":{source:'iana',extensions:['p7m','p7c']},"application/pkcs7-signature":{source:'iana',extensions:['p7s']},"application/pkcs8":{source:'iana',extensions:['p8']},"application/pkix-attr-cert":{source:'iana',extensions:['ac']},"application/pkix-cert":{source:'iana',extensions:['cer']},"application/pkix-crl":{source:'iana',extensions:['crl']},"application/pkix-pkipath":{source:'iana',extensions:['pkipath']},"application/pkixcmp":{source:'iana',extensions:['pki']},"application/pls+xml":{source:'iana',extensions:['pls']},"application/poc-settings+xml":{source:'iana'},"application/postscript":{source:'iana',compressible:!0,extensions:['ai','eps','ps']},"application/ppsp-tracker+json":{source:'iana',compressible:!0},"application/problem+json":{source:'iana',compressible:!0},"application/problem+xml":{source:'iana'},"application/provenance+xml":{source:'iana'},"application/prs.alvestrand.titrax-sheet":{source:'iana'},"application/prs.cww":{source:'iana',extensions:['cww']},"application/prs.hpub+zip":{source:'iana'},"application/prs.nprend":{source:'iana'},"application/prs.plucker":{source:'iana'},"application/prs.rdf-xml-crypt":{source:'iana'},"application/prs.xsf+xml":{source:'iana'},"application/pskc+xml":{source:'iana',extensions:['pskcxml']},"application/qsig":{source:'iana'},"application/raptorfec":{source:'iana'},"application/rdap+json":{source:'iana',compressible:!0},"application/rdf+xml":{source:'iana',compressible:!0,extensions:['rdf']},"application/reginfo+xml":{source:'iana',extensions:['rif']},"application/relax-ng-compact-syntax":{source:'iana',extensions:['rnc']},"application/remote-printing":{source:'iana'},"application/reputon+json":{source:'iana',compressible:!0},"application/resource-lists+xml":{source:'iana',extensions:['rl']},"application/resource-lists-diff+xml":{source:'iana',extensions:['rld']},"application/rfc+xml":{source:'iana'},"application/riscos":{source:'iana'},"application/rlmi+xml":{source:'iana'},"application/rls-services+xml":{source:'iana',extensions:['rs']},"application/route-apd+xml":{source:'iana'},"application/route-s-tsid+xml":{source:'iana'},"application/route-usd+xml":{source:'iana'},"application/rpki-ghostbusters":{source:'iana',extensions:['gbr']},"application/rpki-manifest":{source:'iana',extensions:['mft']},"application/rpki-publication":{source:'iana'},"application/rpki-roa":{source:'iana',extensions:['roa']},"application/rpki-updown":{source:'iana'},"application/rsd+xml":{source:'apache',extensions:['rsd']},"application/rss+xml":{source:'apache',compressible:!0,extensions:['rss']},"application/rtf":{source:'iana',compressible:!0,extensions:['rtf']},"application/rtploopback":{source:'iana'},"application/rtx":{source:'iana'},"application/samlassertion+xml":{source:'iana'},"application/samlmetadata+xml":{source:'iana'},"application/sbml+xml":{source:'iana',extensions:['sbml']},"application/scaip+xml":{source:'iana'},"application/scim+json":{source:'iana',compressible:!0},"application/scvp-cv-request":{source:'iana',extensions:['scq']},"application/scvp-cv-response":{source:'iana',extensions:['scs']},"application/scvp-vp-request":{source:'iana',extensions:['spq']},"application/scvp-vp-response":{source:'iana',extensions:['spp']},"application/sdp":{source:'iana',extensions:['sdp']},"application/sep+xml":{source:'iana'},"application/sep-exi":{source:'iana'},"application/session-info":{source:'iana'},"application/set-payment":{source:'iana'},"application/set-payment-initiation":{source:'iana',extensions:['setpay']},"application/set-registration":{source:'iana'},"application/set-registration-initiation":{source:'iana',extensions:['setreg']},"application/sgml":{source:'iana'},"application/sgml-open-catalog":{source:'iana'},"application/shf+xml":{source:'iana',extensions:['shf']},"application/sieve":{source:'iana'},"application/simple-filter+xml":{source:'iana'},"application/simple-message-summary":{source:'iana'},"application/simplesymbolcontainer":{source:'iana'},"application/slate":{source:'iana'},"application/smil":{source:'iana'},"application/smil+xml":{source:'iana',extensions:['smi','smil']},"application/smpte336m":{source:'iana'},"application/soap+fastinfoset":{source:'iana'},"application/soap+xml":{source:'iana',compressible:!0},"application/sparql-query":{source:'iana',extensions:['rq']},"application/sparql-results+xml":{source:'iana',extensions:['srx']},"application/spirits-event+xml":{source:'iana'},"application/sql":{source:'iana'},"application/srgs":{source:'iana',extensions:['gram']},"application/srgs+xml":{source:'iana',extensions:['grxml']},"application/sru+xml":{source:'iana',extensions:['sru']},"application/ssdl+xml":{source:'apache',extensions:['ssdl']},"application/ssml+xml":{source:'iana',extensions:['ssml']},"application/tamp-apex-update":{source:'iana'},"application/tamp-apex-update-confirm":{source:'iana'},"application/tamp-community-update":{source:'iana'},"application/tamp-community-update-confirm":{source:'iana'},"application/tamp-error":{source:'iana'},"application/tamp-sequence-adjust":{source:'iana'},"application/tamp-sequence-adjust-confirm":{source:'iana'},"application/tamp-status-query":{source:'iana'},"application/tamp-status-response":{source:'iana'},"application/tamp-update":{source:'iana'},"application/tamp-update-confirm":{source:'iana'},"application/tar":{compressible:!0},"application/tei+xml":{source:'iana',extensions:['tei','teicorpus']},"application/thraud+xml":{source:'iana',extensions:['tfi']},"application/timestamp-query":{source:'iana'},"application/timestamp-reply":{source:'iana'},"application/timestamped-data":{source:'iana',extensions:['tsd']},"application/trig":{source:'iana'},"application/ttml+xml":{source:'iana'},"application/tve-trigger":{source:'iana'},"application/ulpfec":{source:'iana'},"application/urc-grpsheet+xml":{source:'iana'},"application/urc-ressheet+xml":{source:'iana'},"application/urc-targetdesc+xml":{source:'iana'},"application/urc-uisocketdesc+xml":{source:'iana'},"application/vcard+json":{source:'iana',compressible:!0},"application/vcard+xml":{source:'iana'},"application/vemmi":{source:'iana'},"application/vividence.scriptfile":{source:'apache'},"application/vnd.1000minds.decision-model+xml":{source:'iana'},"application/vnd.3gpp-prose+xml":{source:'iana'},"application/vnd.3gpp-prose-pc3ch+xml":{source:'iana'},"application/vnd.3gpp.access-transfer-events+xml":{source:'iana'},"application/vnd.3gpp.bsf+xml":{source:'iana'},"application/vnd.3gpp.gmop+xml":{source:'iana'},"application/vnd.3gpp.mcptt-info+xml":{source:'iana'},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:'iana'},"application/vnd.3gpp.mid-call+xml":{source:'iana'},"application/vnd.3gpp.pic-bw-large":{source:'iana',extensions:['plb']},"application/vnd.3gpp.pic-bw-small":{source:'iana',extensions:['psb']},"application/vnd.3gpp.pic-bw-var":{source:'iana',extensions:['pvb']},"application/vnd.3gpp.sms":{source:'iana'},"application/vnd.3gpp.sms+xml":{source:'iana'},"application/vnd.3gpp.srvcc-ext+xml":{source:'iana'},"application/vnd.3gpp.srvcc-info+xml":{source:'iana'},"application/vnd.3gpp.state-and-event-info+xml":{source:'iana'},"application/vnd.3gpp.ussd+xml":{source:'iana'},"application/vnd.3gpp2.bcmcsinfo+xml":{source:'iana'},"application/vnd.3gpp2.sms":{source:'iana'},"application/vnd.3gpp2.tcap":{source:'iana',extensions:['tcap']},"application/vnd.3lightssoftware.imagescal":{source:'iana'},"application/vnd.3m.post-it-notes":{source:'iana',extensions:['pwn']},"application/vnd.accpac.simply.aso":{source:'iana',extensions:['aso']},"application/vnd.accpac.simply.imp":{source:'iana',extensions:['imp']},"application/vnd.acucobol":{source:'iana',extensions:['acu']},"application/vnd.acucorp":{source:'iana',extensions:['atc','acutc']},"application/vnd.adobe.air-application-installer-package+zip":{source:'apache',extensions:['air']},"application/vnd.adobe.flash.movie":{source:'iana'},"application/vnd.adobe.formscentral.fcdt":{source:'iana',extensions:['fcdt']},"application/vnd.adobe.fxp":{source:'iana',extensions:['fxp','fxpl']},"application/vnd.adobe.partial-upload":{source:'iana'},"application/vnd.adobe.xdp+xml":{source:'iana',extensions:['xdp']},"application/vnd.adobe.xfdf":{source:'iana',extensions:['xfdf']},"application/vnd.aether.imp":{source:'iana'},"application/vnd.ah-barcode":{source:'iana'},"application/vnd.ahead.space":{source:'iana',extensions:['ahead']},"application/vnd.airzip.filesecure.azf":{source:'iana',extensions:['azf']},"application/vnd.airzip.filesecure.azs":{source:'iana',extensions:['azs']},"application/vnd.amazon.ebook":{source:'apache',extensions:['azw']},"application/vnd.amazon.mobi8-ebook":{source:'iana'},"application/vnd.americandynamics.acc":{source:'iana',extensions:['acc']},"application/vnd.amiga.ami":{source:'iana',extensions:['ami']},"application/vnd.amundsen.maze+xml":{source:'iana'},"application/vnd.android.package-archive":{source:'apache',compressible:!1,extensions:['apk']},"application/vnd.anki":{source:'iana'},"application/vnd.anser-web-certificate-issue-initiation":{source:'iana',extensions:['cii']},"application/vnd.anser-web-funds-transfer-initiation":{source:'apache',extensions:['fti']},"application/vnd.antix.game-component":{source:'iana',extensions:['atx']},"application/vnd.apache.thrift.binary":{source:'iana'},"application/vnd.apache.thrift.compact":{source:'iana'},"application/vnd.apache.thrift.json":{source:'iana'},"application/vnd.api+json":{source:'iana',compressible:!0},"application/vnd.apothekende.reservation+json":{source:'iana',compressible:!0},"application/vnd.apple.installer+xml":{source:'iana',extensions:['mpkg']},"application/vnd.apple.mpegurl":{source:'iana',extensions:['m3u8']},"application/vnd.apple.pkpass":{compressible:!1,extensions:['pkpass']},"application/vnd.arastra.swi":{source:'iana'},"application/vnd.aristanetworks.swi":{source:'iana',extensions:['swi']},"application/vnd.artsquare":{source:'iana'},"application/vnd.astraea-software.iota":{source:'iana',extensions:['iota']},"application/vnd.audiograph":{source:'iana',extensions:['aep']},"application/vnd.autopackage":{source:'iana'},"application/vnd.avistar+xml":{source:'iana'},"application/vnd.balsamiq.bmml+xml":{source:'iana'},"application/vnd.balsamiq.bmpr":{source:'iana'},"application/vnd.bekitzur-stech+json":{source:'iana',compressible:!0},"application/vnd.bint.med-content":{source:'iana'},"application/vnd.biopax.rdf+xml":{source:'iana'},"application/vnd.blink-idb-value-wrapper":{source:'iana'},"application/vnd.blueice.multipass":{source:'iana',extensions:['mpm']},"application/vnd.bluetooth.ep.oob":{source:'iana'},"application/vnd.bluetooth.le.oob":{source:'iana'},"application/vnd.bmi":{source:'iana',extensions:['bmi']},"application/vnd.businessobjects":{source:'iana',extensions:['rep']},"application/vnd.cab-jscript":{source:'iana'},"application/vnd.canon-cpdl":{source:'iana'},"application/vnd.canon-lips":{source:'iana'},"application/vnd.capasystems-pg+json":{source:'iana',compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:'iana'},"application/vnd.century-systems.tcp_stream":{source:'iana'},"application/vnd.chemdraw+xml":{source:'iana',extensions:['cdxml']},"application/vnd.chess-pgn":{source:'iana'},"application/vnd.chipnuts.karaoke-mmd":{source:'iana',extensions:['mmd']},"application/vnd.cinderella":{source:'iana',extensions:['cdy']},"application/vnd.cirpack.isdn-ext":{source:'iana'},"application/vnd.citationstyles.style+xml":{source:'iana'},"application/vnd.claymore":{source:'iana',extensions:['cla']},"application/vnd.cloanto.rp9":{source:'iana',extensions:['rp9']},"application/vnd.clonk.c4group":{source:'iana',extensions:['c4g','c4d','c4f','c4p','c4u']},"application/vnd.cluetrust.cartomobile-config":{source:'iana',extensions:['c11amc']},"application/vnd.cluetrust.cartomobile-config-pkg":{source:'iana',extensions:['c11amz']},"application/vnd.coffeescript":{source:'iana'},"application/vnd.collection+json":{source:'iana',compressible:!0},"application/vnd.collection.doc+json":{source:'iana',compressible:!0},"application/vnd.collection.next+json":{source:'iana',compressible:!0},"application/vnd.comicbook+zip":{source:'iana'},"application/vnd.commerce-battelle":{source:'iana'},"application/vnd.commonspace":{source:'iana',extensions:['csp']},"application/vnd.contact.cmsg":{source:'iana',extensions:['cdbcmsg']},"application/vnd.coreos.ignition+json":{source:'iana',compressible:!0},"application/vnd.cosmocaller":{source:'iana',extensions:['cmc']},"application/vnd.crick.clicker":{source:'iana',extensions:['clkx']},"application/vnd.crick.clicker.keyboard":{source:'iana',extensions:['clkk']},"application/vnd.crick.clicker.palette":{source:'iana',extensions:['clkp']},"application/vnd.crick.clicker.template":{source:'iana',extensions:['clkt']},"application/vnd.crick.clicker.wordbank":{source:'iana',extensions:['clkw']},"application/vnd.criticaltools.wbs+xml":{source:'iana',extensions:['wbs']},"application/vnd.ctc-posml":{source:'iana',extensions:['pml']},"application/vnd.ctct.ws+xml":{source:'iana'},"application/vnd.cups-pdf":{source:'iana'},"application/vnd.cups-postscript":{source:'iana'},"application/vnd.cups-ppd":{source:'iana',extensions:['ppd']},"application/vnd.cups-raster":{source:'iana'},"application/vnd.cups-raw":{source:'iana'},"application/vnd.curl":{source:'iana'},"application/vnd.curl.car":{source:'apache',extensions:['car']},"application/vnd.curl.pcurl":{source:'apache',extensions:['pcurl']},"application/vnd.cyan.dean.root+xml":{source:'iana'},"application/vnd.cybank":{source:'iana'},"application/vnd.d2l.coursepackage1p0+zip":{source:'iana'},"application/vnd.dart":{source:'iana',compressible:!0,extensions:['dart']},"application/vnd.data-vision.rdz":{source:'iana',extensions:['rdz']},"application/vnd.datapackage+json":{source:'iana',compressible:!0},"application/vnd.dataresource+json":{source:'iana',compressible:!0},"application/vnd.debian.binary-package":{source:'iana'},"application/vnd.dece.data":{source:'iana',extensions:['uvf','uvvf','uvd','uvvd']},"application/vnd.dece.ttml+xml":{source:'iana',extensions:['uvt','uvvt']},"application/vnd.dece.unspecified":{source:'iana',extensions:['uvx','uvvx']},"application/vnd.dece.zip":{source:'iana',extensions:['uvz','uvvz']},"application/vnd.denovo.fcselayout-link":{source:'iana',extensions:['fe_launch']},"application/vnd.desmume-movie":{source:'iana'},"application/vnd.desmume.movie":{source:'apache'},"application/vnd.dir-bi.plate-dl-nosuffix":{source:'iana'},"application/vnd.dm.delegation+xml":{source:'iana'},"application/vnd.dna":{source:'iana',extensions:['dna']},"application/vnd.document+json":{source:'iana',compressible:!0},"application/vnd.dolby.mlp":{source:'apache',extensions:['mlp']},"application/vnd.dolby.mobile.1":{source:'iana'},"application/vnd.dolby.mobile.2":{source:'iana'},"application/vnd.doremir.scorecloud-binary-document":{source:'iana'},"application/vnd.dpgraph":{source:'iana',extensions:['dpg']},"application/vnd.dreamfactory":{source:'iana',extensions:['dfac']},"application/vnd.drive+json":{source:'iana',compressible:!0},"application/vnd.ds-keypoint":{source:'apache',extensions:['kpxx']},"application/vnd.dtg.local":{source:'iana'},"application/vnd.dtg.local.flash":{source:'iana'},"application/vnd.dtg.local.html":{source:'iana'},"application/vnd.dvb.ait":{source:'iana',extensions:['ait']},"application/vnd.dvb.dvbj":{source:'iana'},"application/vnd.dvb.esgcontainer":{source:'iana'},"application/vnd.dvb.ipdcdftnotifaccess":{source:'iana'},"application/vnd.dvb.ipdcesgaccess":{source:'iana'},"application/vnd.dvb.ipdcesgaccess2":{source:'iana'},"application/vnd.dvb.ipdcesgpdd":{source:'iana'},"application/vnd.dvb.ipdcroaming":{source:'iana'},"application/vnd.dvb.iptv.alfec-base":{source:'iana'},"application/vnd.dvb.iptv.alfec-enhancement":{source:'iana'},"application/vnd.dvb.notif-aggregate-root+xml":{source:'iana'},"application/vnd.dvb.notif-container+xml":{source:'iana'},"application/vnd.dvb.notif-generic+xml":{source:'iana'},"application/vnd.dvb.notif-ia-msglist+xml":{source:'iana'},"application/vnd.dvb.notif-ia-registration-request+xml":{source:'iana'},"application/vnd.dvb.notif-ia-registration-response+xml":{source:'iana'},"application/vnd.dvb.notif-init+xml":{source:'iana'},"application/vnd.dvb.pfr":{source:'iana'},"application/vnd.dvb.service":{source:'iana',extensions:['svc']},"application/vnd.dxr":{source:'iana'},"application/vnd.dynageo":{source:'iana',extensions:['geo']},"application/vnd.dzr":{source:'iana'},"application/vnd.easykaraoke.cdgdownload":{source:'iana'},"application/vnd.ecdis-update":{source:'iana'},"application/vnd.ecowin.chart":{source:'iana',extensions:['mag']},"application/vnd.ecowin.filerequest":{source:'iana'},"application/vnd.ecowin.fileupdate":{source:'iana'},"application/vnd.ecowin.series":{source:'iana'},"application/vnd.ecowin.seriesrequest":{source:'iana'},"application/vnd.ecowin.seriesupdate":{source:'iana'},"application/vnd.efi.img":{source:'iana'},"application/vnd.efi.iso":{source:'iana'},"application/vnd.emclient.accessrequest+xml":{source:'iana'},"application/vnd.enliven":{source:'iana',extensions:['nml']},"application/vnd.enphase.envoy":{source:'iana'},"application/vnd.eprints.data+xml":{source:'iana'},"application/vnd.epson.esf":{source:'iana',extensions:['esf']},"application/vnd.epson.msf":{source:'iana',extensions:['msf']},"application/vnd.epson.quickanime":{source:'iana',extensions:['qam']},"application/vnd.epson.salt":{source:'iana',extensions:['slt']},"application/vnd.epson.ssf":{source:'iana',extensions:['ssf']},"application/vnd.ericsson.quickcall":{source:'iana'},"application/vnd.espass-espass+zip":{source:'iana'},"application/vnd.eszigno3+xml":{source:'iana',extensions:['es3','et3']},"application/vnd.etsi.aoc+xml":{source:'iana'},"application/vnd.etsi.asic-e+zip":{source:'iana'},"application/vnd.etsi.asic-s+zip":{source:'iana'},"application/vnd.etsi.cug+xml":{source:'iana'},"application/vnd.etsi.iptvcommand+xml":{source:'iana'},"application/vnd.etsi.iptvdiscovery+xml":{source:'iana'},"application/vnd.etsi.iptvprofile+xml":{source:'iana'},"application/vnd.etsi.iptvsad-bc+xml":{source:'iana'},"application/vnd.etsi.iptvsad-cod+xml":{source:'iana'},"application/vnd.etsi.iptvsad-npvr+xml":{source:'iana'},"application/vnd.etsi.iptvservice+xml":{source:'iana'},"application/vnd.etsi.iptvsync+xml":{source:'iana'},"application/vnd.etsi.iptvueprofile+xml":{source:'iana'},"application/vnd.etsi.mcid+xml":{source:'iana'},"application/vnd.etsi.mheg5":{source:'iana'},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:'iana'},"application/vnd.etsi.pstn+xml":{source:'iana'},"application/vnd.etsi.sci+xml":{source:'iana'},"application/vnd.etsi.simservs+xml":{source:'iana'},"application/vnd.etsi.timestamp-token":{source:'iana'},"application/vnd.etsi.tsl+xml":{source:'iana'},"application/vnd.etsi.tsl.der":{source:'iana'},"application/vnd.eudora.data":{source:'iana'},"application/vnd.evolv.ecig.profile":{source:'iana'},"application/vnd.evolv.ecig.settings":{source:'iana'},"application/vnd.evolv.ecig.theme":{source:'iana'},"application/vnd.ezpix-album":{source:'iana',extensions:['ez2']},"application/vnd.ezpix-package":{source:'iana',extensions:['ez3']},"application/vnd.f-secure.mobile":{source:'iana'},"application/vnd.fastcopy-disk-image":{source:'iana'},"application/vnd.fdf":{source:'iana',extensions:['fdf']},"application/vnd.fdsn.mseed":{source:'iana',extensions:['mseed']},"application/vnd.fdsn.seed":{source:'iana',extensions:['seed','dataless']},"application/vnd.ffsns":{source:'iana'},"application/vnd.filmit.zfc":{source:'iana'},"application/vnd.fints":{source:'iana'},"application/vnd.firemonkeys.cloudcell":{source:'iana'},"application/vnd.flographit":{source:'iana',extensions:['gph']},"application/vnd.fluxtime.clip":{source:'iana',extensions:['ftc']},"application/vnd.font-fontforge-sfd":{source:'iana'},"application/vnd.framemaker":{source:'iana',extensions:['fm','frame','maker','book']},"application/vnd.frogans.fnc":{source:'iana',extensions:['fnc']},"application/vnd.frogans.ltf":{source:'iana',extensions:['ltf']},"application/vnd.fsc.weblaunch":{source:'iana',extensions:['fsc']},"application/vnd.fujitsu.oasys":{source:'iana',extensions:['oas']},"application/vnd.fujitsu.oasys2":{source:'iana',extensions:['oa2']},"application/vnd.fujitsu.oasys3":{source:'iana',extensions:['oa3']},"application/vnd.fujitsu.oasysgp":{source:'iana',extensions:['fg5']},"application/vnd.fujitsu.oasysprs":{source:'iana',extensions:['bh2']},"application/vnd.fujixerox.art-ex":{source:'iana'},"application/vnd.fujixerox.art4":{source:'iana'},"application/vnd.fujixerox.ddd":{source:'iana',extensions:['ddd']},"application/vnd.fujixerox.docuworks":{source:'iana',extensions:['xdw']},"application/vnd.fujixerox.docuworks.binder":{source:'iana',extensions:['xbd']},"application/vnd.fujixerox.docuworks.container":{source:'iana'},"application/vnd.fujixerox.hbpl":{source:'iana'},"application/vnd.fut-misnet":{source:'iana'},"application/vnd.fuzzysheet":{source:'iana',extensions:['fzs']},"application/vnd.genomatix.tuxedo":{source:'iana',extensions:['txd']},"application/vnd.geo+json":{source:'iana',compressible:!0},"application/vnd.geocube+xml":{source:'iana'},"application/vnd.geogebra.file":{source:'iana',extensions:['ggb']},"application/vnd.geogebra.tool":{source:'iana',extensions:['ggt']},"application/vnd.geometry-explorer":{source:'iana',extensions:['gex','gre']},"application/vnd.geonext":{source:'iana',extensions:['gxt']},"application/vnd.geoplan":{source:'iana',extensions:['g2w']},"application/vnd.geospace":{source:'iana',extensions:['g3w']},"application/vnd.gerber":{source:'iana'},"application/vnd.globalplatform.card-content-mgt":{source:'iana'},"application/vnd.globalplatform.card-content-mgt-response":{source:'iana'},"application/vnd.gmx":{source:'iana',extensions:['gmx']},"application/vnd.google-apps.document":{compressible:!1,extensions:['gdoc']},"application/vnd.google-apps.presentation":{compressible:!1,extensions:['gslides']},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:['gsheet']},"application/vnd.google-earth.kml+xml":{source:'iana',compressible:!0,extensions:['kml']},"application/vnd.google-earth.kmz":{source:'iana',compressible:!1,extensions:['kmz']},"application/vnd.gov.sk.e-form+xml":{source:'iana'},"application/vnd.gov.sk.e-form+zip":{source:'iana'},"application/vnd.gov.sk.xmldatacontainer+xml":{source:'iana'},"application/vnd.grafeq":{source:'iana',extensions:['gqf','gqs']},"application/vnd.gridmp":{source:'iana'},"application/vnd.groove-account":{source:'iana',extensions:['gac']},"application/vnd.groove-help":{source:'iana',extensions:['ghf']},"application/vnd.groove-identity-message":{source:'iana',extensions:['gim']},"application/vnd.groove-injector":{source:'iana',extensions:['grv']},"application/vnd.groove-tool-message":{source:'iana',extensions:['gtm']},"application/vnd.groove-tool-template":{source:'iana',extensions:['tpl']},"application/vnd.groove-vcard":{source:'iana',extensions:['vcg']},"application/vnd.hal+json":{source:'iana',compressible:!0},"application/vnd.hal+xml":{source:'iana',extensions:['hal']},"application/vnd.handheld-entertainment+xml":{source:'iana',extensions:['zmm']},"application/vnd.hbci":{source:'iana',extensions:['hbci']},"application/vnd.hc+json":{source:'iana',compressible:!0},"application/vnd.hcl-bireports":{source:'iana'},"application/vnd.hdt":{source:'iana'},"application/vnd.heroku+json":{source:'iana',compressible:!0},"application/vnd.hhe.lesson-player":{source:'iana',extensions:['les']},"application/vnd.hp-hpgl":{source:'iana',extensions:['hpgl']},"application/vnd.hp-hpid":{source:'iana',extensions:['hpid']},"application/vnd.hp-hps":{source:'iana',extensions:['hps']},"application/vnd.hp-jlyt":{source:'iana',extensions:['jlt']},"application/vnd.hp-pcl":{source:'iana',extensions:['pcl']},"application/vnd.hp-pclxl":{source:'iana',extensions:['pclxl']},"application/vnd.httphone":{source:'iana'},"application/vnd.hydrostatix.sof-data":{source:'iana',extensions:['sfd-hdstx']},"application/vnd.hyper-item+json":{source:'iana',compressible:!0},"application/vnd.hyperdrive+json":{source:'iana',compressible:!0},"application/vnd.hzn-3d-crossword":{source:'iana'},"application/vnd.ibm.afplinedata":{source:'iana'},"application/vnd.ibm.electronic-media":{source:'iana'},"application/vnd.ibm.minipay":{source:'iana',extensions:['mpy']},"application/vnd.ibm.modcap":{source:'iana',extensions:['afp','listafp','list3820']},"application/vnd.ibm.rights-management":{source:'iana',extensions:['irm']},"application/vnd.ibm.secure-container":{source:'iana',extensions:['sc']},"application/vnd.iccprofile":{source:'iana',extensions:['icc','icm']},"application/vnd.ieee.1905":{source:'iana'},"application/vnd.igloader":{source:'iana',extensions:['igl']},"application/vnd.imagemeter.folder+zip":{source:'iana'},"application/vnd.imagemeter.image+zip":{source:'iana'},"application/vnd.immervision-ivp":{source:'iana',extensions:['ivp']},"application/vnd.immervision-ivu":{source:'iana',extensions:['ivu']},"application/vnd.ims.imsccv1p1":{source:'iana'},"application/vnd.ims.imsccv1p2":{source:'iana'},"application/vnd.ims.imsccv1p3":{source:'iana'},"application/vnd.ims.lis.v2.result+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:'iana',compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:'iana'},"application/vnd.informix-visionary":{source:'iana'},"application/vnd.infotech.project":{source:'iana'},"application/vnd.infotech.project+xml":{source:'iana'},"application/vnd.innopath.wamp.notification":{source:'iana'},"application/vnd.insors.igm":{source:'iana',extensions:['igm']},"application/vnd.intercon.formnet":{source:'iana',extensions:['xpw','xpx']},"application/vnd.intergeo":{source:'iana',extensions:['i2g']},"application/vnd.intertrust.digibox":{source:'iana'},"application/vnd.intertrust.nncp":{source:'iana'},"application/vnd.intu.qbo":{source:'iana',extensions:['qbo']},"application/vnd.intu.qfx":{source:'iana',extensions:['qfx']},"application/vnd.iptc.g2.catalogitem+xml":{source:'iana'},"application/vnd.iptc.g2.conceptitem+xml":{source:'iana'},"application/vnd.iptc.g2.knowledgeitem+xml":{source:'iana'},"application/vnd.iptc.g2.newsitem+xml":{source:'iana'},"application/vnd.iptc.g2.newsmessage+xml":{source:'iana'},"application/vnd.iptc.g2.packageitem+xml":{source:'iana'},"application/vnd.iptc.g2.planningitem+xml":{source:'iana'},"application/vnd.ipunplugged.rcprofile":{source:'iana',extensions:['rcprofile']},"application/vnd.irepository.package+xml":{source:'iana',extensions:['irp']},"application/vnd.is-xpr":{source:'iana',extensions:['xpr']},"application/vnd.isac.fcs":{source:'iana',extensions:['fcs']},"application/vnd.jam":{source:'iana',extensions:['jam']},"application/vnd.japannet-directory-service":{source:'iana'},"application/vnd.japannet-jpnstore-wakeup":{source:'iana'},"application/vnd.japannet-payment-wakeup":{source:'iana'},"application/vnd.japannet-registration":{source:'iana'},"application/vnd.japannet-registration-wakeup":{source:'iana'},"application/vnd.japannet-setstore-wakeup":{source:'iana'},"application/vnd.japannet-verification":{source:'iana'},"application/vnd.japannet-verification-wakeup":{source:'iana'},"application/vnd.jcp.javame.midlet-rms":{source:'iana',extensions:['rms']},"application/vnd.jisp":{source:'iana',extensions:['jisp']},"application/vnd.joost.joda-archive":{source:'iana',extensions:['joda']},"application/vnd.jsk.isdn-ngn":{source:'iana'},"application/vnd.kahootz":{source:'iana',extensions:['ktz','ktr']},"application/vnd.kde.karbon":{source:'iana',extensions:['karbon']},"application/vnd.kde.kchart":{source:'iana',extensions:['chrt']},"application/vnd.kde.kformula":{source:'iana',extensions:['kfo']},"application/vnd.kde.kivio":{source:'iana',extensions:['flw']},"application/vnd.kde.kontour":{source:'iana',extensions:['kon']},"application/vnd.kde.kpresenter":{source:'iana',extensions:['kpr','kpt']},"application/vnd.kde.kspread":{source:'iana',extensions:['ksp']},"application/vnd.kde.kword":{source:'iana',extensions:['kwd','kwt']},"application/vnd.kenameaapp":{source:'iana',extensions:['htke']},"application/vnd.kidspiration":{source:'iana',extensions:['kia']},"application/vnd.kinar":{source:'iana',extensions:['kne','knp']},"application/vnd.koan":{source:'iana',extensions:['skp','skd','skt','skm']},"application/vnd.kodak-descriptor":{source:'iana',extensions:['sse']},"application/vnd.las.las+json":{source:'iana',compressible:!0},"application/vnd.las.las+xml":{source:'iana',extensions:['lasxml']},"application/vnd.liberty-request+xml":{source:'iana'},"application/vnd.llamagraphics.life-balance.desktop":{source:'iana',extensions:['lbd']},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:'iana',extensions:['lbe']},"application/vnd.lotus-1-2-3":{source:'iana',extensions:['123']},"application/vnd.lotus-approach":{source:'iana',extensions:['apr']},"application/vnd.lotus-freelance":{source:'iana',extensions:['pre']},"application/vnd.lotus-notes":{source:'iana',extensions:['nsf']},"application/vnd.lotus-organizer":{source:'iana',extensions:['org']},"application/vnd.lotus-screencam":{source:'iana',extensions:['scm']},"application/vnd.lotus-wordpro":{source:'iana',extensions:['lwp']},"application/vnd.macports.portpkg":{source:'iana',extensions:['portpkg']},"application/vnd.mapbox-vector-tile":{source:'iana'},"application/vnd.marlin.drm.actiontoken+xml":{source:'iana'},"application/vnd.marlin.drm.conftoken+xml":{source:'iana'},"application/vnd.marlin.drm.license+xml":{source:'iana'},"application/vnd.marlin.drm.mdcf":{source:'iana'},"application/vnd.mason+json":{source:'iana',compressible:!0},"application/vnd.maxmind.maxmind-db":{source:'iana'},"application/vnd.mcd":{source:'iana',extensions:['mcd']},"application/vnd.medcalcdata":{source:'iana',extensions:['mc1']},"application/vnd.mediastation.cdkey":{source:'iana',extensions:['cdkey']},"application/vnd.meridian-slingshot":{source:'iana'},"application/vnd.mfer":{source:'iana',extensions:['mwf']},"application/vnd.mfmp":{source:'iana',extensions:['mfm']},"application/vnd.micro+json":{source:'iana',compressible:!0},"application/vnd.micrografx.flo":{source:'iana',extensions:['flo']},"application/vnd.micrografx.igx":{source:'iana',extensions:['igx']},"application/vnd.microsoft.portable-executable":{source:'iana'},"application/vnd.microsoft.windows.thumbnail-cache":{source:'iana'},"application/vnd.miele+json":{source:'iana',compressible:!0},"application/vnd.mif":{source:'iana',extensions:['mif']},"application/vnd.minisoft-hp3000-save":{source:'iana'},"application/vnd.mitsubishi.misty-guard.trustweb":{source:'iana'},"application/vnd.mobius.daf":{source:'iana',extensions:['daf']},"application/vnd.mobius.dis":{source:'iana',extensions:['dis']},"application/vnd.mobius.mbk":{source:'iana',extensions:['mbk']},"application/vnd.mobius.mqy":{source:'iana',extensions:['mqy']},"application/vnd.mobius.msl":{source:'iana',extensions:['msl']},"application/vnd.mobius.plc":{source:'iana',extensions:['plc']},"application/vnd.mobius.txf":{source:'iana',extensions:['txf']},"application/vnd.mophun.application":{source:'iana',extensions:['mpn']},"application/vnd.mophun.certificate":{source:'iana',extensions:['mpc']},"application/vnd.motorola.flexsuite":{source:'iana'},"application/vnd.motorola.flexsuite.adsi":{source:'iana'},"application/vnd.motorola.flexsuite.fis":{source:'iana'},"application/vnd.motorola.flexsuite.gotap":{source:'iana'},"application/vnd.motorola.flexsuite.kmr":{source:'iana'},"application/vnd.motorola.flexsuite.ttc":{source:'iana'},"application/vnd.motorola.flexsuite.wem":{source:'iana'},"application/vnd.motorola.iprm":{source:'iana'},"application/vnd.mozilla.xul+xml":{source:'iana',compressible:!0,extensions:['xul']},"application/vnd.ms-3mfdocument":{source:'iana'},"application/vnd.ms-artgalry":{source:'iana',extensions:['cil']},"application/vnd.ms-asf":{source:'iana'},"application/vnd.ms-cab-compressed":{source:'iana',extensions:['cab']},"application/vnd.ms-color.iccprofile":{source:'apache'},"application/vnd.ms-excel":{source:'iana',compressible:!1,extensions:['xls','xlm','xla','xlc','xlt','xlw']},"application/vnd.ms-excel.addin.macroenabled.12":{source:'iana',extensions:['xlam']},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:'iana',extensions:['xlsb']},"application/vnd.ms-excel.sheet.macroenabled.12":{source:'iana',extensions:['xlsm']},"application/vnd.ms-excel.template.macroenabled.12":{source:'iana',extensions:['xltm']},"application/vnd.ms-fontobject":{source:'iana',compressible:!0,extensions:['eot']},"application/vnd.ms-htmlhelp":{source:'iana',extensions:['chm']},"application/vnd.ms-ims":{source:'iana',extensions:['ims']},"application/vnd.ms-lrm":{source:'iana',extensions:['lrm']},"application/vnd.ms-office.activex+xml":{source:'iana'},"application/vnd.ms-officetheme":{source:'iana',extensions:['thmx']},"application/vnd.ms-opentype":{source:'apache',compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:['msg']},"application/vnd.ms-package.obfuscated-opentype":{source:'apache'},"application/vnd.ms-pki.seccat":{source:'apache',extensions:['cat']},"application/vnd.ms-pki.stl":{source:'apache',extensions:['stl']},"application/vnd.ms-playready.initiator+xml":{source:'iana'},"application/vnd.ms-powerpoint":{source:'iana',compressible:!1,extensions:['ppt','pps','pot']},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:'iana',extensions:['ppam']},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:'iana',extensions:['pptm']},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:'iana',extensions:['sldm']},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:'iana',extensions:['ppsm']},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:'iana',extensions:['potm']},"application/vnd.ms-printdevicecapabilities+xml":{source:'iana'},"application/vnd.ms-printing.printticket+xml":{source:'apache'},"application/vnd.ms-printschematicket+xml":{source:'iana'},"application/vnd.ms-project":{source:'iana',extensions:['mpp','mpt']},"application/vnd.ms-tnef":{source:'iana'},"application/vnd.ms-windows.devicepairing":{source:'iana'},"application/vnd.ms-windows.nwprinting.oob":{source:'iana'},"application/vnd.ms-windows.printerpairing":{source:'iana'},"application/vnd.ms-windows.wsd.oob":{source:'iana'},"application/vnd.ms-wmdrm.lic-chlg-req":{source:'iana'},"application/vnd.ms-wmdrm.lic-resp":{source:'iana'},"application/vnd.ms-wmdrm.meter-chlg-req":{source:'iana'},"application/vnd.ms-wmdrm.meter-resp":{source:'iana'},"application/vnd.ms-word.document.macroenabled.12":{source:'iana',extensions:['docm']},"application/vnd.ms-word.template.macroenabled.12":{source:'iana',extensions:['dotm']},"application/vnd.ms-works":{source:'iana',extensions:['wps','wks','wcm','wdb']},"application/vnd.ms-wpl":{source:'iana',extensions:['wpl']},"application/vnd.ms-xpsdocument":{source:'iana',compressible:!1,extensions:['xps']},"application/vnd.msa-disk-image":{source:'iana'},"application/vnd.mseq":{source:'iana',extensions:['mseq']},"application/vnd.msign":{source:'iana'},"application/vnd.multiad.creator":{source:'iana'},"application/vnd.multiad.creator.cif":{source:'iana'},"application/vnd.music-niff":{source:'iana'},"application/vnd.musician":{source:'iana',extensions:['mus']},"application/vnd.muvee.style":{source:'iana',extensions:['msty']},"application/vnd.mynfc":{source:'iana',extensions:['taglet']},"application/vnd.ncd.control":{source:'iana'},"application/vnd.ncd.reference":{source:'iana'},"application/vnd.nearst.inv+json":{source:'iana',compressible:!0},"application/vnd.nervana":{source:'iana'},"application/vnd.netfpx":{source:'iana'},"application/vnd.neurolanguage.nlu":{source:'iana',extensions:['nlu']},"application/vnd.nintendo.nitro.rom":{source:'iana'},"application/vnd.nintendo.snes.rom":{source:'iana'},"application/vnd.nitf":{source:'iana',extensions:['ntf','nitf']},"application/vnd.noblenet-directory":{source:'iana',extensions:['nnd']},"application/vnd.noblenet-sealer":{source:'iana',extensions:['nns']},"application/vnd.noblenet-web":{source:'iana',extensions:['nnw']},"application/vnd.nokia.catalogs":{source:'iana'},"application/vnd.nokia.conml+wbxml":{source:'iana'},"application/vnd.nokia.conml+xml":{source:'iana'},"application/vnd.nokia.iptv.config+xml":{source:'iana'},"application/vnd.nokia.isds-radio-presets":{source:'iana'},"application/vnd.nokia.landmark+wbxml":{source:'iana'},"application/vnd.nokia.landmark+xml":{source:'iana'},"application/vnd.nokia.landmarkcollection+xml":{source:'iana'},"application/vnd.nokia.n-gage.ac+xml":{source:'iana'},"application/vnd.nokia.n-gage.data":{source:'iana',extensions:['ngdat']},"application/vnd.nokia.n-gage.symbian.install":{source:'iana',extensions:['n-gage']},"application/vnd.nokia.ncd":{source:'iana'},"application/vnd.nokia.pcd+wbxml":{source:'iana'},"application/vnd.nokia.pcd+xml":{source:'iana'},"application/vnd.nokia.radio-preset":{source:'iana',extensions:['rpst']},"application/vnd.nokia.radio-presets":{source:'iana',extensions:['rpss']},"application/vnd.novadigm.edm":{source:'iana',extensions:['edm']},"application/vnd.novadigm.edx":{source:'iana',extensions:['edx']},"application/vnd.novadigm.ext":{source:'iana',extensions:['ext']},"application/vnd.ntt-local.content-share":{source:'iana'},"application/vnd.ntt-local.file-transfer":{source:'iana'},"application/vnd.ntt-local.ogw_remote-access":{source:'iana'},"application/vnd.ntt-local.sip-ta_remote":{source:'iana'},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:'iana'},"application/vnd.oasis.opendocument.chart":{source:'iana',extensions:['odc']},"application/vnd.oasis.opendocument.chart-template":{source:'iana',extensions:['otc']},"application/vnd.oasis.opendocument.database":{source:'iana',extensions:['odb']},"application/vnd.oasis.opendocument.formula":{source:'iana',extensions:['odf']},"application/vnd.oasis.opendocument.formula-template":{source:'iana',extensions:['odft']},"application/vnd.oasis.opendocument.graphics":{source:'iana',compressible:!1,extensions:['odg']},"application/vnd.oasis.opendocument.graphics-template":{source:'iana',extensions:['otg']},"application/vnd.oasis.opendocument.image":{source:'iana',extensions:['odi']},"application/vnd.oasis.opendocument.image-template":{source:'iana',extensions:['oti']},"application/vnd.oasis.opendocument.presentation":{source:'iana',compressible:!1,extensions:['odp']},"application/vnd.oasis.opendocument.presentation-template":{source:'iana',extensions:['otp']},"application/vnd.oasis.opendocument.spreadsheet":{source:'iana',compressible:!1,extensions:['ods']},"application/vnd.oasis.opendocument.spreadsheet-template":{source:'iana',extensions:['ots']},"application/vnd.oasis.opendocument.text":{source:'iana',compressible:!1,extensions:['odt']},"application/vnd.oasis.opendocument.text-master":{source:'iana',extensions:['odm']},"application/vnd.oasis.opendocument.text-template":{source:'iana',extensions:['ott']},"application/vnd.oasis.opendocument.text-web":{source:'iana',extensions:['oth']},"application/vnd.obn":{source:'iana'},"application/vnd.ocf+cbor":{source:'iana'},"application/vnd.oftn.l10n+json":{source:'iana',compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:'iana'},"application/vnd.oipf.contentaccessstreaming+xml":{source:'iana'},"application/vnd.oipf.cspg-hexbinary":{source:'iana'},"application/vnd.oipf.dae.svg+xml":{source:'iana'},"application/vnd.oipf.dae.xhtml+xml":{source:'iana'},"application/vnd.oipf.mippvcontrolmessage+xml":{source:'iana'},"application/vnd.oipf.pae.gem":{source:'iana'},"application/vnd.oipf.spdiscovery+xml":{source:'iana'},"application/vnd.oipf.spdlist+xml":{source:'iana'},"application/vnd.oipf.ueprofile+xml":{source:'iana'},"application/vnd.oipf.userprofile+xml":{source:'iana'},"application/vnd.olpc-sugar":{source:'iana',extensions:['xo']},"application/vnd.oma-scws-config":{source:'iana'},"application/vnd.oma-scws-http-request":{source:'iana'},"application/vnd.oma-scws-http-response":{source:'iana'},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:'iana'},"application/vnd.oma.bcast.drm-trigger+xml":{source:'iana'},"application/vnd.oma.bcast.imd+xml":{source:'iana'},"application/vnd.oma.bcast.ltkm":{source:'iana'},"application/vnd.oma.bcast.notification+xml":{source:'iana'},"application/vnd.oma.bcast.provisioningtrigger":{source:'iana'},"application/vnd.oma.bcast.sgboot":{source:'iana'},"application/vnd.oma.bcast.sgdd+xml":{source:'iana'},"application/vnd.oma.bcast.sgdu":{source:'iana'},"application/vnd.oma.bcast.simple-symbol-container":{source:'iana'},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:'iana'},"application/vnd.oma.bcast.sprov+xml":{source:'iana'},"application/vnd.oma.bcast.stkm":{source:'iana'},"application/vnd.oma.cab-address-book+xml":{source:'iana'},"application/vnd.oma.cab-feature-handler+xml":{source:'iana'},"application/vnd.oma.cab-pcc+xml":{source:'iana'},"application/vnd.oma.cab-subs-invite+xml":{source:'iana'},"application/vnd.oma.cab-user-prefs+xml":{source:'iana'},"application/vnd.oma.dcd":{source:'iana'},"application/vnd.oma.dcdc":{source:'iana'},"application/vnd.oma.dd2+xml":{source:'iana',extensions:['dd2']},"application/vnd.oma.drm.risd+xml":{source:'iana'},"application/vnd.oma.group-usage-list+xml":{source:'iana'},"application/vnd.oma.lwm2m+json":{source:'iana',compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:'iana'},"application/vnd.oma.pal+xml":{source:'iana'},"application/vnd.oma.poc.detailed-progress-report+xml":{source:'iana'},"application/vnd.oma.poc.final-report+xml":{source:'iana'},"application/vnd.oma.poc.groups+xml":{source:'iana'},"application/vnd.oma.poc.invocation-descriptor+xml":{source:'iana'},"application/vnd.oma.poc.optimized-progress-report+xml":{source:'iana'},"application/vnd.oma.push":{source:'iana'},"application/vnd.oma.scidm.messages+xml":{source:'iana'},"application/vnd.oma.xcap-directory+xml":{source:'iana'},"application/vnd.omads-email+xml":{source:'iana'},"application/vnd.omads-file+xml":{source:'iana'},"application/vnd.omads-folder+xml":{source:'iana'},"application/vnd.omaloc-supl-init":{source:'iana'},"application/vnd.onepager":{source:'iana'},"application/vnd.onepagertamp":{source:'iana'},"application/vnd.onepagertamx":{source:'iana'},"application/vnd.onepagertat":{source:'iana'},"application/vnd.onepagertatp":{source:'iana'},"application/vnd.onepagertatx":{source:'iana'},"application/vnd.openblox.game+xml":{source:'iana'},"application/vnd.openblox.game-binary":{source:'iana'},"application/vnd.openeye.oeb":{source:'iana'},"application/vnd.openofficeorg.extension":{source:'apache',extensions:['oxt']},"application/vnd.openstreetmap.data+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml-template":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:'iana',compressible:!1,extensions:['pptx']},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:'iana',extensions:['sldx']},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:'iana',extensions:['ppsx']},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:'apache',extensions:['potx']},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml-template":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:'iana',compressible:!1,extensions:['xlsx']},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:'apache',extensions:['xltx']},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.theme+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml-template":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:'iana',compressible:!1,extensions:['docx']},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:'apache',extensions:['dotx']},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:'iana'},"application/vnd.openxmlformats-package.core-properties+xml":{source:'iana'},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:'iana'},"application/vnd.openxmlformats-package.relationships+xml":{source:'iana'},"application/vnd.oracle.resource+json":{source:'iana',compressible:!0},"application/vnd.orange.indata":{source:'iana'},"application/vnd.osa.netdeploy":{source:'iana'},"application/vnd.osgeo.mapguide.package":{source:'iana',extensions:['mgp']},"application/vnd.osgi.bundle":{source:'iana'},"application/vnd.osgi.dp":{source:'iana',extensions:['dp']},"application/vnd.osgi.subsystem":{source:'iana',extensions:['esa']},"application/vnd.otps.ct-kip+xml":{source:'iana'},"application/vnd.oxli.countgraph":{source:'iana'},"application/vnd.pagerduty+json":{source:'iana',compressible:!0},"application/vnd.palm":{source:'iana',extensions:['pdb','pqa','oprc']},"application/vnd.panoply":{source:'iana'},"application/vnd.paos+xml":{source:'iana'},"application/vnd.paos.xml":{source:'apache'},"application/vnd.pawaafile":{source:'iana',extensions:['paw']},"application/vnd.pcos":{source:'iana'},"application/vnd.pg.format":{source:'iana',extensions:['str']},"application/vnd.pg.osasli":{source:'iana',extensions:['ei6']},"application/vnd.piaccess.application-licence":{source:'iana'},"application/vnd.picsel":{source:'iana',extensions:['efif']},"application/vnd.pmi.widget":{source:'iana',extensions:['wg']},"application/vnd.poc.group-advertisement+xml":{source:'iana'},"application/vnd.pocketlearn":{source:'iana',extensions:['plf']},"application/vnd.powerbuilder6":{source:'iana',extensions:['pbd']},"application/vnd.powerbuilder6-s":{source:'iana'},"application/vnd.powerbuilder7":{source:'iana'},"application/vnd.powerbuilder7-s":{source:'iana'},"application/vnd.powerbuilder75":{source:'iana'},"application/vnd.powerbuilder75-s":{source:'iana'},"application/vnd.preminet":{source:'iana'},"application/vnd.previewsystems.box":{source:'iana',extensions:['box']},"application/vnd.proteus.magazine":{source:'iana',extensions:['mgz']},"application/vnd.publishare-delta-tree":{source:'iana',extensions:['qps']},"application/vnd.pvi.ptid1":{source:'iana',extensions:['ptid']},"application/vnd.pwg-multiplexed":{source:'iana'},"application/vnd.pwg-xhtml-print+xml":{source:'iana'},"application/vnd.qualcomm.brew-app-res":{source:'iana'},"application/vnd.quarantainenet":{source:'iana'},"application/vnd.quark.quarkxpress":{source:'iana',extensions:['qxd','qxt','qwd','qwt','qxl','qxb']},"application/vnd.quobject-quoxdocument":{source:'iana'},"application/vnd.radisys.moml+xml":{source:'iana'},"application/vnd.radisys.msml+xml":{source:'iana'},"application/vnd.radisys.msml-audit+xml":{source:'iana'},"application/vnd.radisys.msml-audit-conf+xml":{source:'iana'},"application/vnd.radisys.msml-audit-conn+xml":{source:'iana'},"application/vnd.radisys.msml-audit-dialog+xml":{source:'iana'},"application/vnd.radisys.msml-audit-stream+xml":{source:'iana'},"application/vnd.radisys.msml-conf+xml":{source:'iana'},"application/vnd.radisys.msml-dialog+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-base+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-group+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-speech+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-transform+xml":{source:'iana'},"application/vnd.rainstor.data":{source:'iana'},"application/vnd.rapid":{source:'iana'},"application/vnd.rar":{source:'iana'},"application/vnd.realvnc.bed":{source:'iana',extensions:['bed']},"application/vnd.recordare.musicxml":{source:'iana',extensions:['mxl']},"application/vnd.recordare.musicxml+xml":{source:'iana',extensions:['musicxml']},"application/vnd.renlearn.rlprint":{source:'iana'},"application/vnd.rig.cryptonote":{source:'iana',extensions:['cryptonote']},"application/vnd.rim.cod":{source:'apache',extensions:['cod']},"application/vnd.rn-realmedia":{source:'apache',extensions:['rm']},"application/vnd.rn-realmedia-vbr":{source:'apache',extensions:['rmvb']},"application/vnd.route66.link66+xml":{source:'iana',extensions:['link66']},"application/vnd.rs-274x":{source:'iana'},"application/vnd.ruckus.download":{source:'iana'},"application/vnd.s3sms":{source:'iana'},"application/vnd.sailingtracker.track":{source:'iana',extensions:['st']},"application/vnd.sbm.cid":{source:'iana'},"application/vnd.sbm.mid2":{source:'iana'},"application/vnd.scribus":{source:'iana'},"application/vnd.sealed.3df":{source:'iana'},"application/vnd.sealed.csf":{source:'iana'},"application/vnd.sealed.doc":{source:'iana'},"application/vnd.sealed.eml":{source:'iana'},"application/vnd.sealed.mht":{source:'iana'},"application/vnd.sealed.net":{source:'iana'},"application/vnd.sealed.ppt":{source:'iana'},"application/vnd.sealed.tiff":{source:'iana'},"application/vnd.sealed.xls":{source:'iana'},"application/vnd.sealedmedia.softseal.html":{source:'iana'},"application/vnd.sealedmedia.softseal.pdf":{source:'iana'},"application/vnd.seemail":{source:'iana',extensions:['see']},"application/vnd.sema":{source:'iana',extensions:['sema']},"application/vnd.semd":{source:'iana',extensions:['semd']},"application/vnd.semf":{source:'iana',extensions:['semf']},"application/vnd.shana.informed.formdata":{source:'iana',extensions:['ifm']},"application/vnd.shana.informed.formtemplate":{source:'iana',extensions:['itp']},"application/vnd.shana.informed.interchange":{source:'iana',extensions:['iif']},"application/vnd.shana.informed.package":{source:'iana',extensions:['ipk']},"application/vnd.sigrok.session":{source:'iana'},"application/vnd.simtech-mindmapper":{source:'iana',extensions:['twd','twds']},"application/vnd.siren+json":{source:'iana',compressible:!0},"application/vnd.smaf":{source:'iana',extensions:['mmf']},"application/vnd.smart.notebook":{source:'iana'},"application/vnd.smart.teacher":{source:'iana',extensions:['teacher']},"application/vnd.software602.filler.form+xml":{source:'iana'},"application/vnd.software602.filler.form-xml-zip":{source:'iana'},"application/vnd.solent.sdkm+xml":{source:'iana',extensions:['sdkm','sdkd']},"application/vnd.spotfire.dxp":{source:'iana',extensions:['dxp']},"application/vnd.spotfire.sfs":{source:'iana',extensions:['sfs']},"application/vnd.sss-cod":{source:'iana'},"application/vnd.sss-dtf":{source:'iana'},"application/vnd.sss-ntf":{source:'iana'},"application/vnd.stardivision.calc":{source:'apache',extensions:['sdc']},"application/vnd.stardivision.draw":{source:'apache',extensions:['sda']},"application/vnd.stardivision.impress":{source:'apache',extensions:['sdd']},"application/vnd.stardivision.math":{source:'apache',extensions:['smf']},"application/vnd.stardivision.writer":{source:'apache',extensions:['sdw','vor']},"application/vnd.stardivision.writer-global":{source:'apache',extensions:['sgl']},"application/vnd.stepmania.package":{source:'iana',extensions:['smzip']},"application/vnd.stepmania.stepchart":{source:'iana',extensions:['sm']},"application/vnd.street-stream":{source:'iana'},"application/vnd.sun.wadl+xml":{source:'iana',compressible:!0,extensions:['wadl']},"application/vnd.sun.xml.calc":{source:'apache',extensions:['sxc']},"application/vnd.sun.xml.calc.template":{source:'apache',extensions:['stc']},"application/vnd.sun.xml.draw":{source:'apache',extensions:['sxd']},"application/vnd.sun.xml.draw.template":{source:'apache',extensions:['std']},"application/vnd.sun.xml.impress":{source:'apache',extensions:['sxi']},"application/vnd.sun.xml.impress.template":{source:'apache',extensions:['sti']},"application/vnd.sun.xml.math":{source:'apache',extensions:['sxm']},"application/vnd.sun.xml.writer":{source:'apache',extensions:['sxw']},"application/vnd.sun.xml.writer.global":{source:'apache',extensions:['sxg']},"application/vnd.sun.xml.writer.template":{source:'apache',extensions:['stw']},"application/vnd.sus-calendar":{source:'iana',extensions:['sus','susp']},"application/vnd.svd":{source:'iana',extensions:['svd']},"application/vnd.swiftview-ics":{source:'iana'},"application/vnd.symbian.install":{source:'apache',extensions:['sis','sisx']},"application/vnd.syncml+xml":{source:'iana',extensions:['xsm']},"application/vnd.syncml.dm+wbxml":{source:'iana',extensions:['bdm']},"application/vnd.syncml.dm+xml":{source:'iana',extensions:['xdm']},"application/vnd.syncml.dm.notification":{source:'iana'},"application/vnd.syncml.dmddf+wbxml":{source:'iana'},"application/vnd.syncml.dmddf+xml":{source:'iana'},"application/vnd.syncml.dmtnds+wbxml":{source:'iana'},"application/vnd.syncml.dmtnds+xml":{source:'iana'},"application/vnd.syncml.ds.notification":{source:'iana'},"application/vnd.tableschema+json":{source:'iana',compressible:!0},"application/vnd.tao.intent-module-archive":{source:'iana',extensions:['tao']},"application/vnd.tcpdump.pcap":{source:'iana',extensions:['pcap','cap','dmp']},"application/vnd.tmd.mediaflex.api+xml":{source:'iana'},"application/vnd.tml":{source:'iana'},"application/vnd.tmobile-livetv":{source:'iana',extensions:['tmo']},"application/vnd.tri.onesource":{source:'iana'},"application/vnd.trid.tpt":{source:'iana',extensions:['tpt']},"application/vnd.triscape.mxs":{source:'iana',extensions:['mxs']},"application/vnd.trueapp":{source:'iana',extensions:['tra']},"application/vnd.truedoc":{source:'iana'},"application/vnd.ubisoft.webplayer":{source:'iana'},"application/vnd.ufdl":{source:'iana',extensions:['ufd','ufdl']},"application/vnd.uiq.theme":{source:'iana',extensions:['utz']},"application/vnd.umajin":{source:'iana',extensions:['umj']},"application/vnd.unity":{source:'iana',extensions:['unityweb']},"application/vnd.uoml+xml":{source:'iana',extensions:['uoml']},"application/vnd.uplanet.alert":{source:'iana'},"application/vnd.uplanet.alert-wbxml":{source:'iana'},"application/vnd.uplanet.bearer-choice":{source:'iana'},"application/vnd.uplanet.bearer-choice-wbxml":{source:'iana'},"application/vnd.uplanet.cacheop":{source:'iana'},"application/vnd.uplanet.cacheop-wbxml":{source:'iana'},"application/vnd.uplanet.channel":{source:'iana'},"application/vnd.uplanet.channel-wbxml":{source:'iana'},"application/vnd.uplanet.list":{source:'iana'},"application/vnd.uplanet.list-wbxml":{source:'iana'},"application/vnd.uplanet.listcmd":{source:'iana'},"application/vnd.uplanet.listcmd-wbxml":{source:'iana'},"application/vnd.uplanet.signal":{source:'iana'},"application/vnd.uri-map":{source:'iana'},"application/vnd.valve.source.material":{source:'iana'},"application/vnd.vcx":{source:'iana',extensions:['vcx']},"application/vnd.vd-study":{source:'iana'},"application/vnd.vectorworks":{source:'iana'},"application/vnd.vel+json":{source:'iana',compressible:!0},"application/vnd.verimatrix.vcas":{source:'iana'},"application/vnd.vidsoft.vidconference":{source:'iana'},"application/vnd.visio":{source:'iana',extensions:['vsd','vst','vss','vsw']},"application/vnd.visionary":{source:'iana',extensions:['vis']},"application/vnd.vividence.scriptfile":{source:'iana'},"application/vnd.vsf":{source:'iana',extensions:['vsf']},"application/vnd.wap.sic":{source:'iana'},"application/vnd.wap.slc":{source:'iana'},"application/vnd.wap.wbxml":{source:'iana',extensions:['wbxml']},"application/vnd.wap.wmlc":{source:'iana',extensions:['wmlc']},"application/vnd.wap.wmlscriptc":{source:'iana',extensions:['wmlsc']},"application/vnd.webturbo":{source:'iana',extensions:['wtb']},"application/vnd.wfa.p2p":{source:'iana'},"application/vnd.wfa.wsc":{source:'iana'},"application/vnd.windows.devicepairing":{source:'iana'},"application/vnd.wmc":{source:'iana'},"application/vnd.wmf.bootstrap":{source:'iana'},"application/vnd.wolfram.mathematica":{source:'iana'},"application/vnd.wolfram.mathematica.package":{source:'iana'},"application/vnd.wolfram.player":{source:'iana',extensions:['nbp']},"application/vnd.wordperfect":{source:'iana',extensions:['wpd']},"application/vnd.wqd":{source:'iana',extensions:['wqd']},"application/vnd.wrq-hp3000-labelled":{source:'iana'},"application/vnd.wt.stf":{source:'iana',extensions:['stf']},"application/vnd.wv.csp+wbxml":{source:'iana'},"application/vnd.wv.csp+xml":{source:'iana'},"application/vnd.wv.ssp+xml":{source:'iana'},"application/vnd.xacml+json":{source:'iana',compressible:!0},"application/vnd.xara":{source:'iana',extensions:['xar']},"application/vnd.xfdl":{source:'iana',extensions:['xfdl']},"application/vnd.xfdl.webform":{source:'iana'},"application/vnd.xmi+xml":{source:'iana'},"application/vnd.xmpie.cpkg":{source:'iana'},"application/vnd.xmpie.dpkg":{source:'iana'},"application/vnd.xmpie.plan":{source:'iana'},"application/vnd.xmpie.ppkg":{source:'iana'},"application/vnd.xmpie.xlim":{source:'iana'},"application/vnd.yamaha.hv-dic":{source:'iana',extensions:['hvd']},"application/vnd.yamaha.hv-script":{source:'iana',extensions:['hvs']},"application/vnd.yamaha.hv-voice":{source:'iana',extensions:['hvp']},"application/vnd.yamaha.openscoreformat":{source:'iana',extensions:['osf']},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:'iana',extensions:['osfpvg']},"application/vnd.yamaha.remote-setup":{source:'iana'},"application/vnd.yamaha.smaf-audio":{source:'iana',extensions:['saf']},"application/vnd.yamaha.smaf-phrase":{source:'iana',extensions:['spf']},"application/vnd.yamaha.through-ngn":{source:'iana'},"application/vnd.yamaha.tunnel-udpencap":{source:'iana'},"application/vnd.yaoweme":{source:'iana'},"application/vnd.yellowriver-custom-menu":{source:'iana',extensions:['cmp']},"application/vnd.zul":{source:'iana',extensions:['zir','zirz']},"application/vnd.zzazz.deck+xml":{source:'iana',extensions:['zaz']},"application/voicexml+xml":{source:'iana',extensions:['vxml']},"application/vq-rtcpxr":{source:'iana'},"application/watcherinfo+xml":{source:'iana'},"application/whoispp-query":{source:'iana'},"application/whoispp-response":{source:'iana'},"application/widget":{source:'iana',extensions:['wgt']},"application/winhlp":{source:'apache',extensions:['hlp']},"application/wita":{source:'iana'},"application/wordperfect5.1":{source:'iana'},"application/wsdl+xml":{source:'iana',extensions:['wsdl']},"application/wspolicy+xml":{source:'iana',extensions:['wspolicy']},"application/x-7z-compressed":{source:'apache',compressible:!1,extensions:['7z']},"application/x-abiword":{source:'apache',extensions:['abw']},"application/x-ace-compressed":{source:'apache',extensions:['ace']},"application/x-amf":{source:'apache'},"application/x-apple-diskimage":{source:'apache',extensions:['dmg']},"application/x-arj":{compressible:!1,extensions:['arj']},"application/x-authorware-bin":{source:'apache',extensions:['aab','x32','u32','vox']},"application/x-authorware-map":{source:'apache',extensions:['aam']},"application/x-authorware-seg":{source:'apache',extensions:['aas']},"application/x-bcpio":{source:'apache',extensions:['bcpio']},"application/x-bdoc":{compressible:!1,extensions:['bdoc']},"application/x-bittorrent":{source:'apache',extensions:['torrent']},"application/x-blorb":{source:'apache',extensions:['blb','blorb']},"application/x-bzip":{source:'apache',compressible:!1,extensions:['bz']},"application/x-bzip2":{source:'apache',compressible:!1,extensions:['bz2','boz']},"application/x-cbr":{source:'apache',extensions:['cbr','cba','cbt','cbz','cb7']},"application/x-cdlink":{source:'apache',extensions:['vcd']},"application/x-cfs-compressed":{source:'apache',extensions:['cfs']},"application/x-chat":{source:'apache',extensions:['chat']},"application/x-chess-pgn":{source:'apache',extensions:['pgn']},"application/x-chrome-extension":{extensions:['crx']},"application/x-cocoa":{source:'nginx',extensions:['cco']},"application/x-compress":{source:'apache'},"application/x-conference":{source:'apache',extensions:['nsc']},"application/x-cpio":{source:'apache',extensions:['cpio']},"application/x-csh":{source:'apache',extensions:['csh']},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:'apache',extensions:['deb','udeb']},"application/x-dgc-compressed":{source:'apache',extensions:['dgc']},"application/x-director":{source:'apache',extensions:['dir','dcr','dxr','cst','cct','cxt','w3d','fgd','swa']},"application/x-doom":{source:'apache',extensions:['wad']},"application/x-dtbncx+xml":{source:'apache',extensions:['ncx']},"application/x-dtbook+xml":{source:'apache',extensions:['dtb']},"application/x-dtbresource+xml":{source:'apache',extensions:['res']},"application/x-dvi":{source:'apache',compressible:!1,extensions:['dvi']},"application/x-envoy":{source:'apache',extensions:['evy']},"application/x-eva":{source:'apache',extensions:['eva']},"application/x-font-bdf":{source:'apache',extensions:['bdf']},"application/x-font-dos":{source:'apache'},"application/x-font-framemaker":{source:'apache'},"application/x-font-ghostscript":{source:'apache',extensions:['gsf']},"application/x-font-libgrx":{source:'apache'},"application/x-font-linux-psf":{source:'apache',extensions:['psf']},"application/x-font-otf":{source:'apache',compressible:!0,extensions:['otf']},"application/x-font-pcf":{source:'apache',extensions:['pcf']},"application/x-font-snf":{source:'apache',extensions:['snf']},"application/x-font-speedo":{source:'apache'},"application/x-font-sunos-news":{source:'apache'},"application/x-font-ttf":{source:'apache',compressible:!0,extensions:['ttf','ttc']},"application/x-font-type1":{source:'apache',extensions:['pfa','pfb','pfm','afm']},"application/x-font-vfont":{source:'apache'},"application/x-freearc":{source:'apache',extensions:['arc']},"application/x-futuresplash":{source:'apache',extensions:['spl']},"application/x-gca-compressed":{source:'apache',extensions:['gca']},"application/x-glulx":{source:'apache',extensions:['ulx']},"application/x-gnumeric":{source:'apache',extensions:['gnumeric']},"application/x-gramps-xml":{source:'apache',extensions:['gramps']},"application/x-gtar":{source:'apache',extensions:['gtar']},"application/x-gzip":{source:'apache'},"application/x-hdf":{source:'apache',extensions:['hdf']},"application/x-httpd-php":{compressible:!0,extensions:['php']},"application/x-install-instructions":{source:'apache',extensions:['install']},"application/x-iso9660-image":{source:'apache',extensions:['iso']},"application/x-java-archive-diff":{source:'nginx',extensions:['jardiff']},"application/x-java-jnlp-file":{source:'apache',compressible:!1,extensions:['jnlp']},"application/x-javascript":{compressible:!0},"application/x-latex":{source:'apache',compressible:!1,extensions:['latex']},"application/x-lua-bytecode":{extensions:['luac']},"application/x-lzh-compressed":{source:'apache',extensions:['lzh','lha']},"application/x-makeself":{source:'nginx',extensions:['run']},"application/x-mie":{source:'apache',extensions:['mie']},"application/x-mobipocket-ebook":{source:'apache',extensions:['prc','mobi']},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:'apache',extensions:['application']},"application/x-ms-shortcut":{source:'apache',extensions:['lnk']},"application/x-ms-wmd":{source:'apache',extensions:['wmd']},"application/x-ms-wmz":{source:'apache',extensions:['wmz']},"application/x-ms-xbap":{source:'apache',extensions:['xbap']},"application/x-msaccess":{source:'apache',extensions:['mdb']},"application/x-msbinder":{source:'apache',extensions:['obd']},"application/x-mscardfile":{source:'apache',extensions:['crd']},"application/x-msclip":{source:'apache',extensions:['clp']},"application/x-msdos-program":{extensions:['exe']},"application/x-msdownload":{source:'apache',extensions:['exe','dll','com','bat','msi']},"application/x-msmediaview":{source:'apache',extensions:['mvb','m13','m14']},"application/x-msmetafile":{source:'apache',extensions:['wmf','wmz','emf','emz']},"application/x-msmoney":{source:'apache',extensions:['mny']},"application/x-mspublisher":{source:'apache',extensions:['pub']},"application/x-msschedule":{source:'apache',extensions:['scd']},"application/x-msterminal":{source:'apache',extensions:['trm']},"application/x-mswrite":{source:'apache',extensions:['wri']},"application/x-netcdf":{source:'apache',extensions:['nc','cdf']},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:['pac']},"application/x-nzb":{source:'apache',extensions:['nzb']},"application/x-perl":{source:'nginx',extensions:['pl','pm']},"application/x-pilot":{source:'nginx',extensions:['prc','pdb']},"application/x-pkcs12":{source:'apache',compressible:!1,extensions:['p12','pfx']},"application/x-pkcs7-certificates":{source:'apache',extensions:['p7b','spc']},"application/x-pkcs7-certreqresp":{source:'apache',extensions:['p7r']},"application/x-rar-compressed":{source:'apache',compressible:!1,extensions:['rar']},"application/x-redhat-package-manager":{source:'nginx',extensions:['rpm']},"application/x-research-info-systems":{source:'apache',extensions:['ris']},"application/x-sea":{source:'nginx',extensions:['sea']},"application/x-sh":{source:'apache',compressible:!0,extensions:['sh']},"application/x-shar":{source:'apache',extensions:['shar']},"application/x-shockwave-flash":{source:'apache',compressible:!1,extensions:['swf']},"application/x-silverlight-app":{source:'apache',extensions:['xap']},"application/x-sql":{source:'apache',extensions:['sql']},"application/x-stuffit":{source:'apache',compressible:!1,extensions:['sit']},"application/x-stuffitx":{source:'apache',extensions:['sitx']},"application/x-subrip":{source:'apache',extensions:['srt']},"application/x-sv4cpio":{source:'apache',extensions:['sv4cpio']},"application/x-sv4crc":{source:'apache',extensions:['sv4crc']},"application/x-t3vm-image":{source:'apache',extensions:['t3']},"application/x-tads":{source:'apache',extensions:['gam']},"application/x-tar":{source:'apache',compressible:!0,extensions:['tar']},"application/x-tcl":{source:'apache',extensions:['tcl','tk']},"application/x-tex":{source:'apache',extensions:['tex']},"application/x-tex-tfm":{source:'apache',extensions:['tfm']},"application/x-texinfo":{source:'apache',extensions:['texinfo','texi']},"application/x-tgif":{source:'apache',extensions:['obj']},"application/x-ustar":{source:'apache',extensions:['ustar']},"application/x-virtualbox-hdd":{compressible:!0,extensions:['hdd']},"application/x-virtualbox-ova":{compressible:!0,extensions:['ova']},"application/x-virtualbox-ovf":{compressible:!0,extensions:['ovf']},"application/x-virtualbox-vbox":{compressible:!0,extensions:['vbox']},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:['vbox-extpack']},"application/x-virtualbox-vdi":{compressible:!0,extensions:['vdi']},"application/x-virtualbox-vhd":{compressible:!0,extensions:['vhd']},"application/x-virtualbox-vmdk":{compressible:!0,extensions:['vmdk']},"application/x-wais-source":{source:'apache',extensions:['src']},"application/x-web-app-manifest+json":{compressible:!0,extensions:['webapp']},"application/x-www-form-urlencoded":{source:'iana',compressible:!0},"application/x-x509-ca-cert":{source:'apache',extensions:['der','crt','pem']},"application/x-xfig":{source:'apache',extensions:['fig']},"application/x-xliff+xml":{source:'apache',extensions:['xlf']},"application/x-xpinstall":{source:'apache',compressible:!1,extensions:['xpi']},"application/x-xz":{source:'apache',extensions:['xz']},"application/x-zmachine":{source:'apache',extensions:['z1','z2','z3','z4','z5','z6','z7','z8']},"application/x400-bp":{source:'iana'},"application/xacml+xml":{source:'iana'},"application/xaml+xml":{source:'apache',extensions:['xaml']},"application/xcap-att+xml":{source:'iana'},"application/xcap-caps+xml":{source:'iana'},"application/xcap-diff+xml":{source:'iana',extensions:['xdf']},"application/xcap-el+xml":{source:'iana'},"application/xcap-error+xml":{source:'iana'},"application/xcap-ns+xml":{source:'iana'},"application/xcon-conference-info+xml":{source:'iana'},"application/xcon-conference-info-diff+xml":{source:'iana'},"application/xenc+xml":{source:'iana',extensions:['xenc']},"application/xhtml+xml":{source:'iana',compressible:!0,extensions:['xhtml','xht']},"application/xhtml-voice+xml":{source:'apache'},"application/xml":{source:'iana',compressible:!0,extensions:['xml','xsl','xsd','rng']},"application/xml-dtd":{source:'iana',compressible:!0,extensions:['dtd']},"application/xml-external-parsed-entity":{source:'iana'},"application/xml-patch+xml":{source:'iana'},"application/xmpp+xml":{source:'iana'},"application/xop+xml":{source:'iana',compressible:!0,extensions:['xop']},"application/xproc+xml":{source:'apache',extensions:['xpl']},"application/xslt+xml":{source:'iana',extensions:['xslt']},"application/xspf+xml":{source:'apache',extensions:['xspf']},"application/xv+xml":{source:'iana',extensions:['mxml','xhvml','xvml','xvm']},"application/yang":{source:'iana',extensions:['yang']},"application/yang-data+json":{source:'iana',compressible:!0},"application/yang-data+xml":{source:'iana'},"application/yang-patch+json":{source:'iana',compressible:!0},"application/yang-patch+xml":{source:'iana'},"application/yin+xml":{source:'iana',extensions:['yin']},"application/zip":{source:'iana',compressible:!1,extensions:['zip']},"application/zlib":{source:'iana'},"audio/1d-interleaved-parityfec":{source:'iana'},"audio/32kadpcm":{source:'iana'},"audio/3gpp":{source:'iana',compressible:!1,extensions:['3gpp']},"audio/3gpp2":{source:'iana'},"audio/ac3":{source:'iana'},"audio/adpcm":{source:'apache',extensions:['adp']},"audio/amr":{source:'iana'},"audio/amr-wb":{source:'iana'},"audio/amr-wb+":{source:'iana'},"audio/aptx":{source:'iana'},"audio/asc":{source:'iana'},"audio/atrac-advanced-lossless":{source:'iana'},"audio/atrac-x":{source:'iana'},"audio/atrac3":{source:'iana'},"audio/basic":{source:'iana',compressible:!1,extensions:['au','snd']},"audio/bv16":{source:'iana'},"audio/bv32":{source:'iana'},"audio/clearmode":{source:'iana'},"audio/cn":{source:'iana'},"audio/dat12":{source:'iana'},"audio/dls":{source:'iana'},"audio/dsr-es201108":{source:'iana'},"audio/dsr-es202050":{source:'iana'},"audio/dsr-es202211":{source:'iana'},"audio/dsr-es202212":{source:'iana'},"audio/dv":{source:'iana'},"audio/dvi4":{source:'iana'},"audio/eac3":{source:'iana'},"audio/encaprtp":{source:'iana'},"audio/evrc":{source:'iana'},"audio/evrc-qcp":{source:'iana'},"audio/evrc0":{source:'iana'},"audio/evrc1":{source:'iana'},"audio/evrcb":{source:'iana'},"audio/evrcb0":{source:'iana'},"audio/evrcb1":{source:'iana'},"audio/evrcnw":{source:'iana'},"audio/evrcnw0":{source:'iana'},"audio/evrcnw1":{source:'iana'},"audio/evrcwb":{source:'iana'},"audio/evrcwb0":{source:'iana'},"audio/evrcwb1":{source:'iana'},"audio/evs":{source:'iana'},"audio/fwdred":{source:'iana'},"audio/g711-0":{source:'iana'},"audio/g719":{source:'iana'},"audio/g722":{source:'iana'},"audio/g7221":{source:'iana'},"audio/g723":{source:'iana'},"audio/g726-16":{source:'iana'},"audio/g726-24":{source:'iana'},"audio/g726-32":{source:'iana'},"audio/g726-40":{source:'iana'},"audio/g728":{source:'iana'},"audio/g729":{source:'iana'},"audio/g7291":{source:'iana'},"audio/g729d":{source:'iana'},"audio/g729e":{source:'iana'},"audio/gsm":{source:'iana'},"audio/gsm-efr":{source:'iana'},"audio/gsm-hr-08":{source:'iana'},"audio/ilbc":{source:'iana'},"audio/ip-mr_v2.5":{source:'iana'},"audio/isac":{source:'apache'},"audio/l16":{source:'iana'},"audio/l20":{source:'iana'},"audio/l24":{source:'iana',compressible:!1},"audio/l8":{source:'iana'},"audio/lpc":{source:'iana'},"audio/melp":{source:'iana'},"audio/melp1200":{source:'iana'},"audio/melp2400":{source:'iana'},"audio/melp600":{source:'iana'},"audio/midi":{source:'apache',extensions:['mid','midi','kar','rmi']},"audio/mobile-xmf":{source:'iana'},"audio/mp3":{compressible:!1,extensions:['mp3']},"audio/mp4":{source:'iana',compressible:!1,extensions:['m4a','mp4a']},"audio/mp4a-latm":{source:'iana'},"audio/mpa":{source:'iana'},"audio/mpa-robust":{source:'iana'},"audio/mpeg":{source:'iana',compressible:!1,extensions:['mpga','mp2','mp2a','mp3','m2a','m3a']},"audio/mpeg4-generic":{source:'iana'},"audio/musepack":{source:'apache'},"audio/ogg":{source:'iana',compressible:!1,extensions:['oga','ogg','spx']},"audio/opus":{source:'iana'},"audio/parityfec":{source:'iana'},"audio/pcma":{source:'iana'},"audio/pcma-wb":{source:'iana'},"audio/pcmu":{source:'iana'},"audio/pcmu-wb":{source:'iana'},"audio/prs.sid":{source:'iana'},"audio/qcelp":{source:'iana'},"audio/raptorfec":{source:'iana'},"audio/red":{source:'iana'},"audio/rtp-enc-aescm128":{source:'iana'},"audio/rtp-midi":{source:'iana'},"audio/rtploopback":{source:'iana'},"audio/rtx":{source:'iana'},"audio/s3m":{source:'apache',extensions:['s3m']},"audio/silk":{source:'apache',extensions:['sil']},"audio/smv":{source:'iana'},"audio/smv-qcp":{source:'iana'},"audio/smv0":{source:'iana'},"audio/sp-midi":{source:'iana'},"audio/speex":{source:'iana'},"audio/t140c":{source:'iana'},"audio/t38":{source:'iana'},"audio/telephone-event":{source:'iana'},"audio/tone":{source:'iana'},"audio/uemclip":{source:'iana'},"audio/ulpfec":{source:'iana'},"audio/vdvi":{source:'iana'},"audio/vmr-wb":{source:'iana'},"audio/vnd.3gpp.iufp":{source:'iana'},"audio/vnd.4sb":{source:'iana'},"audio/vnd.audiokoz":{source:'iana'},"audio/vnd.celp":{source:'iana'},"audio/vnd.cisco.nse":{source:'iana'},"audio/vnd.cmles.radio-events":{source:'iana'},"audio/vnd.cns.anp1":{source:'iana'},"audio/vnd.cns.inf1":{source:'iana'},"audio/vnd.dece.audio":{source:'iana',extensions:['uva','uvva']},"audio/vnd.digital-winds":{source:'iana',extensions:['eol']},"audio/vnd.dlna.adts":{source:'iana'},"audio/vnd.dolby.heaac.1":{source:'iana'},"audio/vnd.dolby.heaac.2":{source:'iana'},"audio/vnd.dolby.mlp":{source:'iana'},"audio/vnd.dolby.mps":{source:'iana'},"audio/vnd.dolby.pl2":{source:'iana'},"audio/vnd.dolby.pl2x":{source:'iana'},"audio/vnd.dolby.pl2z":{source:'iana'},"audio/vnd.dolby.pulse.1":{source:'iana'},"audio/vnd.dra":{source:'iana',extensions:['dra']},"audio/vnd.dts":{source:'iana',extensions:['dts']},"audio/vnd.dts.hd":{source:'iana',extensions:['dtshd']},"audio/vnd.dvb.file":{source:'iana'},"audio/vnd.everad.plj":{source:'iana'},"audio/vnd.hns.audio":{source:'iana'},"audio/vnd.lucent.voice":{source:'iana',extensions:['lvp']},"audio/vnd.ms-playready.media.pya":{source:'iana',extensions:['pya']},"audio/vnd.nokia.mobile-xmf":{source:'iana'},"audio/vnd.nortel.vbk":{source:'iana'},"audio/vnd.nuera.ecelp4800":{source:'iana',extensions:['ecelp4800']},"audio/vnd.nuera.ecelp7470":{source:'iana',extensions:['ecelp7470']},"audio/vnd.nuera.ecelp9600":{source:'iana',extensions:['ecelp9600']},"audio/vnd.octel.sbc":{source:'iana'},"audio/vnd.presonus.multitrack":{source:'iana'},"audio/vnd.qcelp":{source:'iana'},"audio/vnd.rhetorex.32kadpcm":{source:'iana'},"audio/vnd.rip":{source:'iana',extensions:['rip']},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:'iana'},"audio/vnd.vmx.cvsd":{source:'iana'},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:'iana',compressible:!1},"audio/vorbis-config":{source:'iana'},"audio/wav":{compressible:!1,extensions:['wav']},"audio/wave":{compressible:!1,extensions:['wav']},"audio/webm":{source:'apache',compressible:!1,extensions:['weba']},"audio/x-aac":{source:'apache',compressible:!1,extensions:['aac']},"audio/x-aiff":{source:'apache',extensions:['aif','aiff','aifc']},"audio/x-caf":{source:'apache',compressible:!1,extensions:['caf']},"audio/x-flac":{source:'apache',extensions:['flac']},"audio/x-m4a":{source:'nginx',extensions:['m4a']},"audio/x-matroska":{source:'apache',extensions:['mka']},"audio/x-mpegurl":{source:'apache',extensions:['m3u']},"audio/x-ms-wax":{source:'apache',extensions:['wax']},"audio/x-ms-wma":{source:'apache',extensions:['wma']},"audio/x-pn-realaudio":{source:'apache',extensions:['ram','ra']},"audio/x-pn-realaudio-plugin":{source:'apache',extensions:['rmp']},"audio/x-realaudio":{source:'nginx',extensions:['ra']},"audio/x-tta":{source:'apache'},"audio/x-wav":{source:'apache',extensions:['wav']},"audio/xm":{source:'apache',extensions:['xm']},"chemical/x-cdx":{source:'apache',extensions:['cdx']},"chemical/x-cif":{source:'apache',extensions:['cif']},"chemical/x-cmdf":{source:'apache',extensions:['cmdf']},"chemical/x-cml":{source:'apache',extensions:['cml']},"chemical/x-csml":{source:'apache',extensions:['csml']},"chemical/x-pdb":{source:'apache'},"chemical/x-xyz":{source:'apache',extensions:['xyz']},"font/otf":{compressible:!0,extensions:['otf']},"image/apng":{compressible:!1,extensions:['apng']},"image/bmp":{source:'iana',compressible:!0,extensions:['bmp']},"image/cgm":{source:'iana',extensions:['cgm']},"image/dicom-rle":{source:'iana'},"image/emf":{source:'iana'},"image/fits":{source:'iana'},"image/g3fax":{source:'iana',extensions:['g3']},"image/gif":{source:'iana',compressible:!1,extensions:['gif']},"image/ief":{source:'iana',extensions:['ief']},"image/jls":{source:'iana'},"image/jp2":{source:'iana'},"image/jpeg":{source:'iana',compressible:!1,extensions:['jpeg','jpg','jpe']},"image/jpm":{source:'iana'},"image/jpx":{source:'iana'},"image/ktx":{source:'iana',extensions:['ktx']},"image/naplps":{source:'iana'},"image/pjpeg":{compressible:!1},"image/png":{source:'iana',compressible:!1,extensions:['png']},"image/prs.btif":{source:'iana',extensions:['btif']},"image/prs.pti":{source:'iana'},"image/pwg-raster":{source:'iana'},"image/sgi":{source:'apache',extensions:['sgi']},"image/svg+xml":{source:'iana',compressible:!0,extensions:['svg','svgz']},"image/t38":{source:'iana'},"image/tiff":{source:'iana',compressible:!1,extensions:['tiff','tif']},"image/tiff-fx":{source:'iana'},"image/vnd.adobe.photoshop":{source:'iana',compressible:!0,extensions:['psd']},"image/vnd.airzip.accelerator.azv":{source:'iana'},"image/vnd.cns.inf2":{source:'iana'},"image/vnd.dece.graphic":{source:'iana',extensions:['uvi','uvvi','uvg','uvvg']},"image/vnd.djvu":{source:'iana',extensions:['djvu','djv']},"image/vnd.dvb.subtitle":{source:'iana',extensions:['sub']},"image/vnd.dwg":{source:'iana',extensions:['dwg']},"image/vnd.dxf":{source:'iana',extensions:['dxf']},"image/vnd.fastbidsheet":{source:'iana',extensions:['fbs']},"image/vnd.fpx":{source:'iana',extensions:['fpx']},"image/vnd.fst":{source:'iana',extensions:['fst']},"image/vnd.fujixerox.edmics-mmr":{source:'iana',extensions:['mmr']},"image/vnd.fujixerox.edmics-rlc":{source:'iana',extensions:['rlc']},"image/vnd.globalgraphics.pgb":{source:'iana'},"image/vnd.microsoft.icon":{source:'iana'},"image/vnd.mix":{source:'iana'},"image/vnd.mozilla.apng":{source:'iana'},"image/vnd.ms-modi":{source:'iana',extensions:['mdi']},"image/vnd.ms-photo":{source:'apache',extensions:['wdp']},"image/vnd.net-fpx":{source:'iana',extensions:['npx']},"image/vnd.radiance":{source:'iana'},"image/vnd.sealed.png":{source:'iana'},"image/vnd.sealedmedia.softseal.gif":{source:'iana'},"image/vnd.sealedmedia.softseal.jpg":{source:'iana'},"image/vnd.svf":{source:'iana'},"image/vnd.tencent.tap":{source:'iana'},"image/vnd.valve.source.texture":{source:'iana'},"image/vnd.wap.wbmp":{source:'iana',extensions:['wbmp']},"image/vnd.xiff":{source:'iana',extensions:['xif']},"image/vnd.zbrush.pcx":{source:'iana'},"image/webp":{source:'apache',extensions:['webp']},"image/wmf":{source:'iana'},"image/x-3ds":{source:'apache',extensions:['3ds']},"image/x-cmu-raster":{source:'apache',extensions:['ras']},"image/x-cmx":{source:'apache',extensions:['cmx']},"image/x-freehand":{source:'apache',extensions:['fh','fhc','fh4','fh5','fh7']},"image/x-icon":{source:'apache',compressible:!0,extensions:['ico']},"image/x-jng":{source:'nginx',extensions:['jng']},"image/x-mrsid-image":{source:'apache',extensions:['sid']},"image/x-ms-bmp":{source:'nginx',compressible:!0,extensions:['bmp']},"image/x-pcx":{source:'apache',extensions:['pcx']},"image/x-pict":{source:'apache',extensions:['pic','pct']},"image/x-portable-anymap":{source:'apache',extensions:['pnm']},"image/x-portable-bitmap":{source:'apache',extensions:['pbm']},"image/x-portable-graymap":{source:'apache',extensions:['pgm']},"image/x-portable-pixmap":{source:'apache',extensions:['ppm']},"image/x-rgb":{source:'apache',extensions:['rgb']},"image/x-tga":{source:'apache',extensions:['tga']},"image/x-xbitmap":{source:'apache',extensions:['xbm']},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:'apache',extensions:['xpm']},"image/x-xwindowdump":{source:'apache',extensions:['xwd']},"message/cpim":{source:'iana'},"message/delivery-status":{source:'iana'},"message/disposition-notification":{source:'iana'},"message/external-body":{source:'iana'},"message/feedback-report":{source:'iana'},"message/global":{source:'iana'},"message/global-delivery-status":{source:'iana'},"message/global-disposition-notification":{source:'iana'},"message/global-headers":{source:'iana'},"message/http":{source:'iana',compressible:!1},"message/imdn+xml":{source:'iana',compressible:!0},"message/news":{source:'iana'},"message/partial":{source:'iana',compressible:!1},"message/rfc822":{source:'iana',compressible:!0,extensions:['eml','mime']},"message/s-http":{source:'iana'},"message/sip":{source:'iana'},"message/sipfrag":{source:'iana'},"message/tracking-status":{source:'iana'},"message/vnd.si.simp":{source:'iana'},"message/vnd.wfa.wsc":{source:'iana'},"model/3mf":{source:'iana'},"model/gltf+json":{source:'iana',compressible:!0,extensions:['gltf']},"model/gltf-binary":{compressible:!0,extensions:['glb']},"model/iges":{source:'iana',compressible:!1,extensions:['igs','iges']},"model/mesh":{source:'iana',compressible:!1,extensions:['msh','mesh','silo']},"model/vnd.collada+xml":{source:'iana',extensions:['dae']},"model/vnd.dwf":{source:'iana',extensions:['dwf']},"model/vnd.flatland.3dml":{source:'iana'},"model/vnd.gdl":{source:'iana',extensions:['gdl']},"model/vnd.gs-gdl":{source:'apache'},"model/vnd.gs.gdl":{source:'iana'},"model/vnd.gtw":{source:'iana',extensions:['gtw']},"model/vnd.moml+xml":{source:'iana'},"model/vnd.mts":{source:'iana',extensions:['mts']},"model/vnd.opengex":{source:'iana'},"model/vnd.parasolid.transmit.binary":{source:'iana'},"model/vnd.parasolid.transmit.text":{source:'iana'},"model/vnd.rosette.annotated-data-model":{source:'iana'},"model/vnd.valve.source.compiled-map":{source:'iana'},"model/vnd.vtu":{source:'iana',extensions:['vtu']},"model/vrml":{source:'iana',compressible:!1,extensions:['wrl','vrml']},"model/x3d+binary":{source:'apache',compressible:!1,extensions:['x3db','x3dbz']},"model/x3d+fastinfoset":{source:'iana'},"model/x3d+vrml":{source:'apache',compressible:!1,extensions:['x3dv','x3dvz']},"model/x3d+xml":{source:'iana',compressible:!0,extensions:['x3d','x3dz']},"model/x3d-vrml":{source:'iana'},"multipart/alternative":{source:'iana',compressible:!1},"multipart/appledouble":{source:'iana'},"multipart/byteranges":{source:'iana'},"multipart/digest":{source:'iana'},"multipart/encrypted":{source:'iana',compressible:!1},"multipart/form-data":{source:'iana',compressible:!1},"multipart/header-set":{source:'iana'},"multipart/mixed":{source:'iana',compressible:!1},"multipart/parallel":{source:'iana'},"multipart/related":{source:'iana',compressible:!1},"multipart/report":{source:'iana'},"multipart/signed":{source:'iana',compressible:!1},"multipart/vnd.bint.med-plus":{source:'iana'},"multipart/voice-message":{source:'iana'},"multipart/x-mixed-replace":{source:'iana'},"text/1d-interleaved-parityfec":{source:'iana'},"text/cache-manifest":{source:'iana',compressible:!0,extensions:['appcache','manifest']},"text/calendar":{source:'iana',extensions:['ics','ifb']},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:['coffee','litcoffee']},"text/css":{source:'iana',charset:'UTF-8',compressible:!0,extensions:['css']},"text/csv":{source:'iana',compressible:!0,extensions:['csv']},"text/csv-schema":{source:'iana'},"text/directory":{source:'iana'},"text/dns":{source:'iana'},"text/ecmascript":{source:'iana'},"text/encaprtp":{source:'iana'},"text/enriched":{source:'iana'},"text/fwdred":{source:'iana'},"text/grammar-ref-list":{source:'iana'},"text/hjson":{extensions:['hjson']},"text/html":{source:'iana',compressible:!0,extensions:['html','htm','shtml']},"text/jade":{extensions:['jade']},"text/javascript":{source:'iana',compressible:!0},"text/jcr-cnd":{source:'iana'},"text/jsx":{compressible:!0,extensions:['jsx']},"text/less":{extensions:['less']},"text/markdown":{source:'iana',compressible:!0,extensions:['markdown','md']},"text/mathml":{source:'nginx',extensions:['mml']},"text/mizar":{source:'iana'},"text/n3":{source:'iana',compressible:!0,extensions:['n3']},"text/parameters":{source:'iana'},"text/parityfec":{source:'iana'},"text/plain":{source:'iana',compressible:!0,extensions:['txt','text','conf','def','list','log','in','ini']},"text/provenance-notation":{source:'iana'},"text/prs.fallenstein.rst":{source:'iana'},"text/prs.lines.tag":{source:'iana',extensions:['dsc']},"text/prs.prop.logic":{source:'iana'},"text/raptorfec":{source:'iana'},"text/red":{source:'iana'},"text/rfc822-headers":{source:'iana'},"text/richtext":{source:'iana',compressible:!0,extensions:['rtx']},"text/rtf":{source:'iana',compressible:!0,extensions:['rtf']},"text/rtp-enc-aescm128":{source:'iana'},"text/rtploopback":{source:'iana'},"text/rtx":{source:'iana'},"text/sgml":{source:'iana',extensions:['sgml','sgm']},"text/slim":{extensions:['slim','slm']},"text/strings":{source:'iana'},"text/stylus":{extensions:['stylus','styl']},"text/t140":{source:'iana'},"text/tab-separated-values":{source:'iana',compressible:!0,extensions:['tsv']},"text/troff":{source:'iana',extensions:['t','tr','roff','man','me','ms']},"text/turtle":{source:'iana',extensions:['ttl']},"text/ulpfec":{source:'iana'},"text/uri-list":{source:'iana',compressible:!0,extensions:['uri','uris','urls']},"text/vcard":{source:'iana',compressible:!0,extensions:['vcard']},"text/vnd.a":{source:'iana'},"text/vnd.abc":{source:'iana'},"text/vnd.ascii-art":{source:'iana'},"text/vnd.curl":{source:'iana',extensions:['curl']},"text/vnd.curl.dcurl":{source:'apache',extensions:['dcurl']},"text/vnd.curl.mcurl":{source:'apache',extensions:['mcurl']},"text/vnd.curl.scurl":{source:'apache',extensions:['scurl']},"text/vnd.debian.copyright":{source:'iana'},"text/vnd.dmclientscript":{source:'iana'},"text/vnd.dvb.subtitle":{source:'iana',extensions:['sub']},"text/vnd.esmertec.theme-descriptor":{source:'iana'},"text/vnd.fly":{source:'iana',extensions:['fly']},"text/vnd.fmi.flexstor":{source:'iana',extensions:['flx']},"text/vnd.graphviz":{source:'iana',extensions:['gv']},"text/vnd.in3d.3dml":{source:'iana',extensions:['3dml']},"text/vnd.in3d.spot":{source:'iana',extensions:['spot']},"text/vnd.iptc.newsml":{source:'iana'},"text/vnd.iptc.nitf":{source:'iana'},"text/vnd.latex-z":{source:'iana'},"text/vnd.motorola.reflex":{source:'iana'},"text/vnd.ms-mediapackage":{source:'iana'},"text/vnd.net2phone.commcenter.command":{source:'iana'},"text/vnd.radisys.msml-basic-layout":{source:'iana'},"text/vnd.si.uricatalogue":{source:'iana'},"text/vnd.sun.j2me.app-descriptor":{source:'iana',extensions:['jad']},"text/vnd.trolltech.linguist":{source:'iana'},"text/vnd.wap.si":{source:'iana'},"text/vnd.wap.sl":{source:'iana'},"text/vnd.wap.wml":{source:'iana',extensions:['wml']},"text/vnd.wap.wmlscript":{source:'iana',extensions:['wmls']},"text/vtt":{charset:'UTF-8',compressible:!0,extensions:['vtt']},"text/x-asm":{source:'apache',extensions:['s','asm']},"text/x-c":{source:'apache',extensions:['c','cc','cxx','cpp','h','hh','dic']},"text/x-component":{source:'nginx',extensions:['htc']},"text/x-fortran":{source:'apache',extensions:['f','for','f77','f90']},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:['hbs']},"text/x-java-source":{source:'apache',extensions:['java']},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:['lua']},"text/x-markdown":{compressible:!0,extensions:['mkd']},"text/x-nfo":{source:'apache',extensions:['nfo']},"text/x-opml":{source:'apache',extensions:['opml']},"text/x-org":{compressible:!0,extensions:['org']},"text/x-pascal":{source:'apache',extensions:['p','pas']},"text/x-processing":{compressible:!0,extensions:['pde']},"text/x-sass":{extensions:['sass']},"text/x-scss":{extensions:['scss']},"text/x-setext":{source:'apache',extensions:['etx']},"text/x-sfv":{source:'apache',extensions:['sfv']},"text/x-suse-ymp":{compressible:!0,extensions:['ymp']},"text/x-uuencode":{source:'apache',extensions:['uu']},"text/x-vcalendar":{source:'apache',extensions:['vcs']},"text/x-vcard":{source:'apache',extensions:['vcf']},"text/xml":{source:'iana',compressible:!0,extensions:['xml']},"text/xml-external-parsed-entity":{source:'iana'},"text/yaml":{extensions:['yaml','yml']},"video/1d-interleaved-parityfec":{source:'iana'},"video/3gpp":{source:'iana',extensions:['3gp','3gpp']},"video/3gpp-tt":{source:'iana'},"video/3gpp2":{source:'iana',extensions:['3g2']},"video/bmpeg":{source:'iana'},"video/bt656":{source:'iana'},"video/celb":{source:'iana'},"video/dv":{source:'iana'},"video/encaprtp":{source:'iana'},"video/h261":{source:'iana',extensions:['h261']},"video/h263":{source:'iana',extensions:['h263']},"video/h263-1998":{source:'iana'},"video/h263-2000":{source:'iana'},"video/h264":{source:'iana',extensions:['h264']},"video/h264-rcdo":{source:'iana'},"video/h264-svc":{source:'iana'},"video/h265":{source:'iana'},"video/iso.segment":{source:'iana'},"video/jpeg":{source:'iana',extensions:['jpgv']},"video/jpeg2000":{source:'iana'},"video/jpm":{source:'apache',extensions:['jpm','jpgm']},"video/mj2":{source:'iana',extensions:['mj2','mjp2']},"video/mp1s":{source:'iana'},"video/mp2p":{source:'iana'},"video/mp2t":{source:'iana',extensions:['ts']},"video/mp4":{source:'iana',compressible:!1,extensions:['mp4','mp4v','mpg4']},"video/mp4v-es":{source:'iana'},"video/mpeg":{source:'iana',compressible:!1,extensions:['mpeg','mpg','mpe','m1v','m2v']},"video/mpeg4-generic":{source:'iana'},"video/mpv":{source:'iana'},"video/nv":{source:'iana'},"video/ogg":{source:'iana',compressible:!1,extensions:['ogv']},"video/parityfec":{source:'iana'},"video/pointer":{source:'iana'},"video/quicktime":{source:'iana',compressible:!1,extensions:['qt','mov']},"video/raptorfec":{source:'iana'},"video/raw":{source:'iana'},"video/rtp-enc-aescm128":{source:'iana'},"video/rtploopback":{source:'iana'},"video/rtx":{source:'iana'},"video/smpte292m":{source:'iana'},"video/ulpfec":{source:'iana'},"video/vc1":{source:'iana'},"video/vnd.cctv":{source:'iana'},"video/vnd.dece.hd":{source:'iana',extensions:['uvh','uvvh']},"video/vnd.dece.mobile":{source:'iana',extensions:['uvm','uvvm']},"video/vnd.dece.mp4":{source:'iana'},"video/vnd.dece.pd":{source:'iana',extensions:['uvp','uvvp']},"video/vnd.dece.sd":{source:'iana',extensions:['uvs','uvvs']},"video/vnd.dece.video":{source:'iana',extensions:['uvv','uvvv']},"video/vnd.directv.mpeg":{source:'iana'},"video/vnd.directv.mpeg-tts":{source:'iana'},"video/vnd.dlna.mpeg-tts":{source:'iana'},"video/vnd.dvb.file":{source:'iana',extensions:['dvb']},"video/vnd.fvt":{source:'iana',extensions:['fvt']},"video/vnd.hns.video":{source:'iana'},"video/vnd.iptvforum.1dparityfec-1010":{source:'iana'},"video/vnd.iptvforum.1dparityfec-2005":{source:'iana'},"video/vnd.iptvforum.2dparityfec-1010":{source:'iana'},"video/vnd.iptvforum.2dparityfec-2005":{source:'iana'},"video/vnd.iptvforum.ttsavc":{source:'iana'},"video/vnd.iptvforum.ttsmpeg2":{source:'iana'},"video/vnd.motorola.video":{source:'iana'},"video/vnd.motorola.videop":{source:'iana'},"video/vnd.mpegurl":{source:'iana',extensions:['mxu','m4u']},"video/vnd.ms-playready.media.pyv":{source:'iana',extensions:['pyv']},"video/vnd.nokia.interleaved-multimedia":{source:'iana'},"video/vnd.nokia.videovoip":{source:'iana'},"video/vnd.objectvideo":{source:'iana'},"video/vnd.radgamettools.bink":{source:'iana'},"video/vnd.radgamettools.smacker":{source:'iana'},"video/vnd.sealed.mpeg1":{source:'iana'},"video/vnd.sealed.mpeg4":{source:'iana'},"video/vnd.sealed.swf":{source:'iana'},"video/vnd.sealedmedia.softseal.mov":{source:'iana'},"video/vnd.uvvu.mp4":{source:'iana',extensions:['uvu','uvvu']},"video/vnd.vivo":{source:'iana',extensions:['viv']},"video/vp8":{source:'iana'},"video/webm":{source:'apache',compressible:!1,extensions:['webm']},"video/x-f4v":{source:'apache',extensions:['f4v']},"video/x-fli":{source:'apache',extensions:['fli']},"video/x-flv":{source:'apache',compressible:!1,extensions:['flv']},"video/x-m4v":{source:'apache',extensions:['m4v']},"video/x-matroska":{source:'apache',compressible:!1,extensions:['mkv','mk3d','mks']},"video/x-mng":{source:'apache',extensions:['mng']},"video/x-ms-asf":{source:'apache',extensions:['asf','asx']},"video/x-ms-vob":{source:'apache',extensions:['vob']},"video/x-ms-wm":{source:'apache',extensions:['wm']},"video/x-ms-wmv":{source:'apache',compressible:!1,extensions:['wmv']},"video/x-ms-wmx":{source:'apache',extensions:['wmx']},"video/x-ms-wvx":{source:'apache',extensions:['wvx']},"video/x-msvideo":{source:'apache',extensions:['avi']},"video/x-sgi-movie":{source:'apache',extensions:['movie']},"video/x-smv":{source:'apache',extensions:['smv']},"x-conference/x-cooltalk":{source:'apache',extensions:['ice']},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}},function(t,n,a){(function(t){function a(t,n){for(var a=0,r=t.length-1,o;0<=r;r--)o=t[r],'.'===o?t.splice(r,1):'..'===o?(t.splice(r,1),a++):a&&(t.splice(r,1),a--);if(n)for(;a--;a)t.unshift('..');return t}function r(t,n){if(t.filter)return t.filter(n);for(var a=[],r=0;r<t.length;r++)n(t[r],r,t)&&a.push(t[r]);return a}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return o.exec(t).slice(1)};n.resolve=function(){for(var n='',o=!1,s=arguments.length-1,d;-1<=s&&!o;s--){if(d=0<=s?arguments[s]:t.cwd(),'string'!=typeof d)throw new TypeError('Arguments to path.resolve must be strings');else if(!d)continue;n=d+'/'+n,o='/'===d.charAt(0)}return n=a(r(n.split('/'),function(t){return!!t}),!o).join('/'),(o?'/':'')+n||'.'},n.normalize=function(t){var o=n.isAbsolute(t),s='/'===d(t,-1);return t=a(r(t.split('/'),function(t){return!!t}),!o).join('/'),t||o||(t='.'),t&&s&&(t+='/'),(o?'/':'')+t},n.isAbsolute=function(t){return'/'===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t){if('string'!=typeof t)throw new TypeError('Arguments to path.join must be strings');return t}).join('/'))},n.relative=function(t,a){function r(t){for(var n=0;n<t.length&&''===t[n];n++);for(var a=t.length-1;0<=a&&''===t[a];a--);return n>a?[]:t.slice(n,a-n+1)}t=n.resolve(t).substr(1),a=n.resolve(a).substr(1);for(var o=r(t.split('/')),s=r(a.split('/')),d=_(o.length,s.length),l=d,c=0;c<d;c++)if(o[c]!==s[c]){l=c;break}for(var u=[],c=l;c<o.length;c++)u.push('..');return u=u.concat(s.slice(l)),u.join('/')},n.sep='/',n.delimiter=':',n.dirname=function(t){var n=s(t),a=n[0],r=n[1];return a||r?(r&&(r=r.substr(0,r.length-1)),a+r):'.'},n.basename=function(t,n){var a=s(t)[2];return n&&a.substr(-1*n.length)===n&&(a=a.substr(0,a.length-n.length)),a},n.extname=function(t){return s(t)[3]};var d=function(t,n,a){return t.substr(n,a)}}).call(n,a(5))},function(t,n,a){'use strict';var r=a(2),o=a(130);t.exports={},t.exports.toolsPane=function(t,n,a,o,s,d){var l=r.store,u=r.ns,c=r.store.updater,f=r.ns.acl,m=r.ns.vcard,h=$rdf.sym(o.uri.split('#')[0]),g='font-size: 100%; margin: 0.8em; padding:0.5em;',b=s.createElement('div'),y=b.appendChild(s.createElement('table'));y.setAttribute('style','font-size:120%; margin: 1em; border: 0.1em #ccc ;');var v=y.appendChild(s.createElement('tr'));v.textContent=r.utils.label(o)+' - tools',v.setAttribute('style','min-width: 20em; padding: 1em; font-size: 150%; border-bottom: 0.1em solid red; margin-bottom: 2em;');var w=y.appendChild(s.createElement('tr')),x=w.appendChild(s.createElement('div'));x.setAttribute('style','padding: 2em;');var _=y.appendChild(s.createElement('tr')),k=_.appendChild(s.createElement('table')),C=y.appendChild(s.createElement('tr'));context={target:o,me:d,noun:'address book',div:b,dom:s,statusRegion:x},k.appendChild(r.aclControl.ACLControlBox5(o.dir(),s,'book',l,function(t,n){t||(k.innerHTML='ACL control box Failed: '+n)})),r.authn.registrationControl(context,o,u.vcard('AddressBook')).then(function(){console.log('Registration control finished.')}).catch(function(t){r.widgets.complain(context,t)});var T=_.appendChild(s.createElement('pre')),E=function(t){console.log(t),T.textContent+=t+'\n'},S=b.appendChild(s.createElement('button'));S.textContent='Load main index',S.style.cssText=g,S.addEventListener('click',function(){S.setAttribute('style','background-color: #ffc;');var t=l.any(o,u.vcard('nameEmailIndex'));r.store.fetcher.nowOrWhenFetched(t,void 0,function(t,n){t?(S.setAttribute('style','background-color: #cfc;'),E(' People index has been loaded\n')):(S.setAttribute('style','background-color: #fcc;'),E('Error: People index has NOT been loaded'+n+'\n'))})});var A=b.appendChild(s.createElement('button'));A.textContent='Statistics',A.style.cssText=g,A.addEventListener('click',function(){var t=l.each(void 0,m('inAddressBook'),o).length;E(''+t+' cards loaded. ');var a=l.each(o,m('includesGroup'));E(''+a.length+' total groups. ');var r=[],s;for(s in n)r.push(s);E(''+r.length+' selected groups. ')});var I=_.appendChild(s.createElement('button'));I.textContent='Check inidividual card access of selected groups',I.style.cssText=g,I.addEventListener('click',function(){var t=[],o;for(o in n)t.push(o);for(var s=0;s<t.length;s++){var o=l.sym(t[s]),d=l.each(o,u.vcard('hasMember'));E(r.utils.label(o)+': '+d.length+' members');for(var a=0;a<d.length;a++){var c=function(t){r.widgets.fixIndividualCardACL(t,E,function(n,a){n?E('Sucess for '+r.utils.label(t)):E('Failure for '+r.utils.label(t)+': '+a)})},f=d[a];E(r.utils.label(f)),c(f)}}});var N=_.appendChild(s.createElement('button'));N.textContent='Find duplicate cards',N.style.cssText=g,N.addEventListener('click',function(){var t={};t.book=o,t.nameEmailIndex=l.any(o,u.vcard('nameEmailIndex')),E('Loading name index...'),r.store.fetcher.nowOrWhenFetched(t.nameEmailIndex,void 0,function(){E('Loaded name index.'),t.cards=[],t.duplicates=[],t.definitive=[],t.nameless=[],t.exactDuplicates=[],t.nameOnlyDuplicates=[],t.uniquesSet=[],t.groupProblems=[];t.nameDupLog=l.sym(o.dir().uri+'dedup-nameDupLog.ttl'),t.exactDupLog=l.sym(o.dir().uri+'dedup-exactDupLog.ttl');var n=function(n){return new Promise(function(a){var r=l.anyValue(n,u.vcard('fn')),o=definitive[r];l.fetcher.load([n,o]).then(function(){var r={};r[u.vcard('hasUID').uri]=!0,r[u.dc('created').uri]=!0,r[u.dc('modified').uri]=!0;var s=function(t){return l.statementsMatching(null,null,null,t.doc()).filter(function(t){return!r[t.predicate.uri]})},d=s(n),c=s(o);if(d.length!==c.length)return E('CARDS to NOT match lengths '),t.nameOnlyDuplicates.push(n),a(!1);if(!d.length)return E('@@@@@@  Zero length '),t.nameOnlyDuplicates.push(n),a(!1);var f=new $rdf.Serializer(l).setBase(n.doc().uri).statementsToN3(d),m=new $rdf.Serializer(l).setBase(o.doc().uri).statementsToN3(c);if(f!==m)return E('Texts differ'),t.nameOnlyDuplicates.push(n),a(!1);for(var h=l.each(null,u.vcard('hasMember'),n),g=l.each(null,u.vcard('hasMember'),o),b=0,y;b<h.length;b++){y=!1;for(var v=0;v<g.length;v++)g[v].sameTerm(h[b])&&(y=!0);if(!y)return E('This one groups: '+h),E('Other one groups: '+g),E('Cant delete this one because it has a group, '+h[b]+', which the other does not.'),t.nameOnlyDuplicates.push(n),a(!1)}console.log('Group check done -- exact duplicate: '+n),t.exactDuplicates.push(n),a(!0)}).catch(function(r){E('Cant load a card! '+[n,o]+': '+r),t.nameOnlyDuplicates.push(n),a(!1)})})};t.nameOnlyErrors=[],t.nameLessZeroData=[],t.nameLessIndex=[],t.namelessUniques=[],t.nameOnlyDuplicatesGroupDiff=[];var a=function(n){return new Promise(function(a){l.fetcher.load(n).then(function(){E(' Nameless check '+n);var r={};r[u.vcard('hasUID').uri]=!0,r[u.dc('created').uri]=!0,r[u.dc('modified').uri]=!0;var o=function(t){return l.statementsMatching(null,null,null,t.doc()).filter(function(t){return!r[t.predicate.uri]})}(n);if(!o.length)return E('  Zero length '+n),t.nameLessZeroData.push(n),a(!1);var s=new $rdf.Serializer(l).setBase(n.doc().uri).statementsToN3(o),d=t.nameLessIndex[s];if(d){E('  Matches with '+d);for(var c=l.each(null,u.vcard('hasMember'),n),f=l.each(null,u.vcard('hasMember'),d),m=0,h;m<c.length;m++){h=!1;for(var g=0;g<f.length;g++)f[g].sameTerm(c[m])&&(h=!0);if(!h)return E('This one groups: '+c),E('Other one groups: '+f),E('Cant skip this one because it has a group, '+c[m]+', which the other does not.'),t.nameOnlyDuplicatesGroupDiff.push(n),a(!1)}console.log('Group check done -- exact duplicate: '+n)}else E('First nameless like: '+n.doc()),E('___________________________________________'),E(s),E('___________________________________________'),t.nameLessIndex[s]=n,t.namelessUniques.push(n);a(!0)}).catch(function(r){E('Cant load a nameless card! '+other+': '+r),t.nameOnlyErrors.push(n),a(!1)})})},r=t.duplicates.slice(),s=function(n){var a;return Promise.resolve().then(function(){var r=n.uri.replace('/Group/','/NewGroup/');a=l.sym(r);var o=[];for(i=0;i<t.uniques.length;i++)o=o.concat(l.connectedStatements(t.uniques[i],n.doc()));var s=new $rdf.Serializer(l).setBase(n.uri);E('   Regenerating group of uniques...'+a);var d=s.statementsToN3(o);return l.fetcher.webOperation('PUT',a,{data:d})}).then(function(){return E('     Done uniques group '+a),!0}).catch(function(t){E('Error saving : '+t)})};t.groupObjects=groups.map(function(t){return t[2]}),E('Loading '+t.groupObjects.length+' groups... '),l.fetcher.load(t.groupObjects).then(function(){return new Promise(function(a){t.cards=l.each(void 0,m('inAddressBook'),t.book),E(''+t.cards.length+' total cards');var r,o,s;for(r=0;r<t.cards.length;r++){if(o=t.cards[r],s=l.anyValue(o,u.vcard('fn')),!s){t.nameless.push(o);continue}if(t.definitive[s]===o);else if(t.definitive[s]){var d=t.duplicates.length;100>d||1e3>d&&0==d%10||0==d%100,t.duplicates.push(o)}else t.definitive[s]=o}t.duplicateSet=[];for(var n=0;n<t.duplicates.length;n++)t.duplicateSet[t.duplicates[n].uri]=t.duplicates[n];for(t.namelessSet=[],n=0;n<t.nameless.length;n++)t.namelessSet[t.nameless[n].uri]=t.nameless[n];for(t.uniques=[],t.uniqueSet=[],n=0;n<t.cards.length;n++){var c=t.cards[n].uri;t.duplicateSet[c]||t.namelessSet[c]||(t.uniques.push(t.cards[n]),t.uniqueSet[c]=t.cards[n])}E('Uniques: '+t.uniques.length),E(''+t.nameless.length+' nameless cards.'),E(''+t.duplicates.length+' name-duplicate cards, leaving '+(t.cards.length-t.duplicates.length)),a(!0)})}).then(function(){return new Promise(function(n){var a;for(E('Groups loaded'),a=0;a<t.uniques.length;a++)t.uniquesSet[t.uniques[a].uri]=!0;t.groupMembers=l.statementsMatching(null,u.vcard('hasMember')).map(function(t){return t.object}),E('  Naive group members '+t.groupMembers.length),t.groupMemberSet=[];for(var r=0;r<t.groupMembers.length;r++)t.groupMemberSet[t.groupMembers[r].uri]=t.groupMembers[r];for(var o in t.groupMembers2=[],t.groupMemberSet)t.groupMembers2.push(t.groupMemberSet[o]);E('  Compact group members '+t.groupMembers2.length);n(!0)})}).then(function n(){return t.namelessToCheck=t.namelessToCheck||t.nameless.slice(),E('Nameless check left: '+t.namelessToCheck.length),new Promise(function(r){var o=t.namelessToCheck.shift();if(!o){if(E('namelessUniques: '+t.namelessUniques.length),E('namelessUniques: '+t.namelessUniques),confirm('Add all '+t.namelessUniques.length+' nameless cards to the rescued set?')){t.uniques=t.uniques.concat(t.namelessUniques);for(var s=0;s<t.namelessUniques.length;s++)t.uniqueSet[t.namelessUniques[s].uri]=!0}return r(!0)}a(o).then(function(t){E('    Namelessc check returns '+t),n()})})}).then(function(t,n){confirm('Write new clean versions?')?t(!0):n()}).then(function(){var n;return Promise.resolve().then(function(){n=l.sym(t.book.dir().uri+'clean-people.ttl');var a=[];for(i=0;i<t.uniques.length;i++)a=a.concat(l.connectedStatements(t.uniques[i],t.nameEmailIndex));var r=new $rdf.Serializer(l).setBase(t.nameEmailIndex.uri);E('Serializing index of uniques...');var o=r.statementsToN3(a);return l.fetcher.webOperation('PUT',n,{data:o,contentType:'text/turtle'})}).then(function(){return E('Done uniques log '+n),!0}).catch(function(t){E('Error saving uniques: '+t)})}).then(function(){return E('Saving ALL GROUPS'),Promise.all(t.groupObjects.map(s))}).then(function(){E('Done!')})})});var j=_.appendChild(s.createElement('button'));return j.style.cssText=g,j.textContent='Find inidividuals with no group',j.addEventListener('click',function(){E('Loading groups...'),t(n,a,function(t,n){if(!t)return void E('Failed: '+n);var a=l.any(o,u.vcard('nameEmailIndex'));r.store.fetcher.nowOrWhenFetched(a,void 0,function(){E('Loaded groups and name index.');var t={},n=[],s=l.each(o,m('includesGroup'));E(''+s.length+' total groups. ');for(var d=0;d<s.length;d++){var f=s[d],h=l.each(f,u.vcard('hasMember'));E(r.utils.label(f)+': '+h.length+' members');for(var a=0;a<h.length;a++)l.allAliases(h[a]).forEach(function(n){t[n.uri]=f})}var g=l.each(void 0,m('inAddressBook'),o);E(''+g.length+' total cards');var b;for(b=0;b<g.length;b++)t[g[b].uri]||(n.push(g[b]),E('   groupless '+r.utils.label(g[b])));E(''+n.length+' groupless cards.')})})}),b}},function(t){'use strict';t.exports='\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.\n@prefix ui: <http://www.w3.org/ns/ui#>.\n@prefix : <#>.\n\n<http://www.w3.org/2006/vcard/ns#Individual>\n    ui:creationForm <#form1> .\n\n\n<#form1>\n    <http://purl.org/dc/elements/1.1/title> "Contact Details" ;\n    a ui:Form ;\n    ui:part\n        <#fullNameField>,   <#roleField>,   <#fullNameFieldC>, <#addressesComment>, <#addresses>,\n        <#emailComment>, <#eMails>,\n        <#telephoneComment>, <#telephones>, <#noteComment>, <#noteField> ;\n    ui:parts (\n                <#fullNameField>  <#roleField> <#fullNameFieldC>\n                 <#addressesComment> <#addresses>\n                <#emailComment> <#eMails>\n                <#telephoneComment> <#telephones> <#noteComment> <#noteField> ) .\n\n    <#fullNameField>\n        a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n        ui:label "Name";\n        <http://www.w3.org/ns/ui#maxLength> "128" ;\n        <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#fn> ;\n        <http://www.w3.org/ns/ui#size> "40" .\n\n    <#roleField>\n        a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n        <http://www.w3.org/ns/ui#maxLength> "128" ;\n        <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#role> ;\n        <http://www.w3.org/ns/ui#size> "40" .\n\n      <#fullNameFieldC>\n          a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n          <http://www.w3.org/ns/ui#maxLength> "128" ;\n          <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#organization-name> ;\n          <http://www.w3.org/ns/ui#size> "40" .\n\n\n<#addressesComment>\n    a <http://www.w3.org/ns/ui#Comment> ;\n    <http://www.w3.org/ns/ui#contents> "Address" .\n\n\n<#addresses>\n    <http://purl.org/dc/elements/1.1/title> "Address details" ;\n    a <http://www.w3.org/ns/ui#Multiple> ;\n    <http://www.w3.org/ns/ui#part> <#oneAddress> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#hasAddress> .\n\n<#oneAddress>\n    a <http://www.w3.org/ns/ui#Group> ;\n    <http://www.w3.org/ns/ui#parts> ( <#id1409437207443> <#id1409437292400> <#id1409437421996> <#id1409437467649> <#id1409437569420> <#id1409437646712> ).\n\n<#id1409437207443>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "128" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#street-address> ;\n    <http://www.w3.org/ns/ui#size> "40" .\n\n<#id1409437292400>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "128" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#locality> ;\n    <http://www.w3.org/ns/ui#size> "40" .\n\n<#id1409437421996>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "25" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#postal-code> ;\n    <http://www.w3.org/ns/ui#size> "25" .\n\n<#id1409437467649>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "128" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#region> ;\n    <http://www.w3.org/ns/ui#size> "40" .\n\n<#id1409437569420>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "128" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#country-name> ;\n    <http://www.w3.org/ns/ui#size> "40" .\n\n<#id1409437646712>\n    a <http://www.w3.org/ns/ui#Classifier> ;\n    <http://www.w3.org/ns/ui#from> rdf:Class ;\n    <http://www.w3.org/ns/ui#property> <http://purl.org/dc/terms/type> .\n\n\n##############################\n\n<#emailComment>\n    a <http://www.w3.org/ns/ui#Comment> ;\n    <http://www.w3.org/ns/ui#contents> "Email" .\n\n\n<#eMails>\n    a <http://www.w3.org/ns/ui#Multiple> ;\n    <http://www.w3.org/ns/ui#part> <#oneEMail> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#hasEmail> .\n\n<#oneEMail>\n    a <http://www.w3.org/ns/ui#Group> ;\n    <http://www.w3.org/ns/ui#part> <#emailValue>, <#emailType> .\n\n<#emailValue>\n    a <http://www.w3.org/ns/ui#EmailField> ; ui:label "email";\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#value> ;\n    <http://www.w3.org/ns/ui#size> "50" .\n\n<#emailType>\n    a <http://www.w3.org/ns/ui#Classifier> ;\n    <http://www.w3.org/ns/ui#canMintNew> "0" ;\n    <http://www.w3.org/ns/ui#category> <http://www.w3.org/2006/vcard/ns#Type> ;\n    <http://www.w3.org/ns/ui#from> <http://www.w3.org/2006/vcard/ns#Type> ;\n    <http://www.w3.org/ns/ui#property> <http://purl.org/dc/terms/type> .\n\n##############################\n\n<#telephoneComment>\n    a <http://www.w3.org/ns/ui#Comment> ;\n    <http://www.w3.org/ns/ui#contents> "Phones" .\n\n\n<#telephones>\n    a <http://www.w3.org/ns/ui#Multiple> ;\n    <http://www.w3.org/ns/ui#part> <#onetelephone> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#hasTelephone> .\n\n<#onetelephone>\n    a <http://www.w3.org/ns/ui#Group> ;\n    <http://www.w3.org/ns/ui#part> <#telephoneValue>, <#telephoneType> .\n\n<#telephoneValue>\n    a <http://www.w3.org/ns/ui#PhoneField> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#value> ;\n    <http://www.w3.org/ns/ui#size> "50" .\n\n<#telephoneType>\n    a <http://www.w3.org/ns/ui#Classifier> ;\n    <http://www.w3.org/ns/ui#canMintNew> "0" ;\n    <http://www.w3.org/ns/ui#category> <http://www.w3.org/2006/vcard/ns#Type> ;\n    <http://www.w3.org/ns/ui#from> <http://www.w3.org/2006/vcard/ns#Type> ;\n    <http://www.w3.org/ns/ui#property> <http://purl.org/dc/terms/type> .\n\n##############################\n\n<#noteComment>\n    a <http://www.w3.org/ns/ui#Comment> ;\n    <http://www.w3.org/ns/ui#contents> "General Notes" .\n\n<#noteField>\n    a <http://www.w3.org/ns/ui#MultiLineTextField> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#note> .\n'},function(t){'use strict';t.exports='\n@prefix : <http://www.w3.org/2006/vcard/ns#> .\n@prefix owl: <http://www.w3.org/2002/07/owl#> .\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n@prefix xml: <http://www.w3.org/XML/1998/namespace> .\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n\n:Acquaintance a owl:Class ;\n    rdfs:label "Acquaintance"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Agent a owl:Class ;\n    rdfs:label "Agent"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:BBS a owl:Class ;\n    rdfs:label "BBS"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Car a owl:Class ;\n    rdfs:label "Car"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Cell a owl:Class ;\n    rdfs:label "Cell"@en ;\n    rdfs:comment "Also called mobile telephone"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Child a owl:Class ;\n    rdfs:label "Child"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Colleague a owl:Class ;\n    rdfs:label "Colleague"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Contact a owl:Class ;\n    rdfs:label "Contact"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Coresident a owl:Class ;\n    rdfs:label "Coresident"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Coworker a owl:Class ;\n    rdfs:label "Coworker"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Crush a owl:Class ;\n    rdfs:label "Crush"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Date a owl:Class ;\n    rdfs:label "Date"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Dom a owl:Class ;\n    rdfs:label "Dom"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Emergency a owl:Class ;\n    rdfs:label "Emergency"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Fax a owl:Class ;\n    rdfs:label "Fax"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Female a owl:Class ;\n    rdfs:label "Female"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:Friend a owl:Class ;\n    rdfs:label "Friend"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Home a owl:Class ;\n    rdfs:label "Home"@en ;\n    rdfs:comment "This implies that the property is related to an individual\'s personal life"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type .\n\n:ISDN a owl:Class ;\n    rdfs:label "ISDN"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Internet a owl:Class ;\n    rdfs:label "Internet"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Intl a owl:Class ;\n    rdfs:label "Intl"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Kin a owl:Class ;\n    rdfs:label "Kin"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Label a owl:Class ;\n    rdfs:label "Label"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Male a owl:Class ;\n    rdfs:label "Male"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:Me a owl:Class ;\n    rdfs:label "Me"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Met a owl:Class ;\n    rdfs:label "Met"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Modem a owl:Class ;\n    rdfs:label "Modem"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Msg a owl:Class ;\n    rdfs:label "Msg"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Muse a owl:Class ;\n    rdfs:label "Muse"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Neighbor a owl:Class ;\n    rdfs:label "Neighbor"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:None a owl:Class ;\n    rdfs:label "None"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:Other a owl:Class ;\n    rdfs:label "Other"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:PCS a owl:Class ;\n    rdfs:label "PCS"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Pager a owl:Class ;\n    rdfs:label "Pager"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Parcel a owl:Class ;\n    rdfs:label "Parcel"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Parent a owl:Class ;\n    rdfs:label "Parent"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Postal a owl:Class ;\n    rdfs:label "Postal"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Pref a owl:Class ;\n    rdfs:label "Pref"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Sibling a owl:Class ;\n    rdfs:label "Sibling"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Spouse a owl:Class ;\n    rdfs:label "Spouse"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Sweetheart a owl:Class ;\n    rdfs:label "Sweetheart"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Tel a owl:Class ;\n    rdfs:label "Tel"@en ;\n    rdfs:comment "This class is deprecated. Use the hasTelephone object property."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:Text a owl:Class ;\n    rdfs:label "Text"@en ;\n    rdfs:comment "Also called sms telephone"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:TextPhone a owl:Class ;\n    rdfs:label "Text phone"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Unknown a owl:Class ;\n    rdfs:label "Unknown"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:Video a owl:Class ;\n    rdfs:label "Video"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Voice a owl:Class ;\n    rdfs:label "Voice"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Work a owl:Class ;\n    rdfs:label "Work"@en ;\n    rdfs:comment "This implies that the property is related to an individual\'s work place"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type .\n\n:X400 a owl:Class ;\n    rdfs:label "X400"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:adr a owl:ObjectProperty ;\n    rdfs:label "address"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasAddress .\n\n:agent a owl:ObjectProperty ;\n    rdfs:label "agent"@en ;\n    rdfs:comment "This object property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:anniversary a owl:DatatypeProperty ;\n    rdfs:label "anniversary"@en ;\n    rdfs:comment "The date of marriage, or equivalent, of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range [ a rdfs:Datatype ;\n            owl:unionOf ( xsd:dateTime xsd:gYear ) ] .\n\n:bday a owl:DatatypeProperty ;\n    rdfs:label "birth date"@en ;\n    rdfs:comment "To specify the birth date of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range [ a rdfs:Datatype ;\n            owl:unionOf ( xsd:dateTime xsd:dateTimeStamp xsd:gYear ) ] .\n\n:category a owl:DatatypeProperty ;\n    rdfs:label "category"@en ;\n    rdfs:comment "The category information about the object, also known as tags"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:class a owl:DatatypeProperty ;\n    rdfs:label "class"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:email a owl:ObjectProperty ;\n    rdfs:label "email"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasEmail .\n\n:extended-address a owl:DatatypeProperty ;\n    rdfs:label "extended address"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:geo a owl:ObjectProperty ;\n    rdfs:label "geo"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasGeo .\n\n:hasAdditionalName a owl:ObjectProperty ;\n    rdfs:label "has additional name"@en ;\n    rdfs:comment "Used to support property parameters for the additional name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCalendarBusy a owl:ObjectProperty ;\n    rdfs:label "has calendar busy"@en ;\n    rdfs:comment "To specify the busy time associated with the object. (Was called FBURL in RFC6350)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCalendarLink a owl:ObjectProperty ;\n    rdfs:label "has calendar link"@en ;\n    rdfs:comment "To specify the calendar associated with the object. (Was called CALURI in RFC6350)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCalendarRequest a owl:ObjectProperty ;\n    rdfs:label "has calendar request"@en ;\n    rdfs:comment "To specify the calendar user address to which a scheduling request be sent for the object. (Was called CALADRURI in RFC6350)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCategory a owl:ObjectProperty ;\n    rdfs:label "has category"@en ;\n    rdfs:comment "Used to support property parameters for the category data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCountryName a owl:ObjectProperty ;\n    rdfs:label "has country name"@en ;\n    rdfs:comment "Used to support property parameters for the country name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasFN a owl:ObjectProperty ;\n    rdfs:label "has formatted name"@en ;\n    rdfs:comment "Used to support property parameters for the formatted name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasFamilyName a owl:ObjectProperty ;\n    rdfs:label "has family name"@en ;\n    rdfs:comment "Used to support property parameters for the family name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasGender a owl:ObjectProperty ;\n    rdfs:label "has gender"@en ;\n    rdfs:comment "To specify  the sex or gender identity of the object. URIs are recommended to enable interoperable sex and gender codes to be used."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasGivenName a owl:ObjectProperty ;\n    rdfs:label "has given name"@en ;\n    rdfs:comment "Used to support property parameters for the given name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasHonorificPrefix a owl:ObjectProperty ;\n    rdfs:label "has honorific prefix"@en ;\n    rdfs:comment "Used to support property parameters for the honorific prefix data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasHonorificSuffix a owl:ObjectProperty ;\n    rdfs:label "has honorific suffix"@en ;\n    rdfs:comment "Used to support property parameters for the honorific suffix data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasInstantMessage a owl:ObjectProperty ;\n    rdfs:label "has messaging"@en ;\n    rdfs:comment "To specify the instant messaging and presence protocol communications with the object. (Was called IMPP in RFC6350)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasLanguage a owl:ObjectProperty ;\n    rdfs:label "has language"@en ;\n    rdfs:comment "Used to support property parameters for the language data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasLocality a owl:ObjectProperty ;\n    rdfs:label "has locality"@en ;\n    rdfs:comment "Used to support property parameters for the locality data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasNickname a owl:ObjectProperty ;\n    rdfs:label "has nickname"@en ;\n    rdfs:comment "Used to support property parameters for the nickname data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:seeAlso :nickname .\n\n:hasNote a owl:ObjectProperty ;\n    rdfs:label "has note"@en ;\n    rdfs:comment "Used to support property parameters for the note data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasOrganizationName a owl:ObjectProperty ;\n    rdfs:label "has organization name"@en ;\n    rdfs:comment "Used to support property parameters for the organization name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasOrganizationUnit a owl:ObjectProperty ;\n    rdfs:label "has organization unit name"@en ;\n    rdfs:comment "Used to support property parameters for the organization unit name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasPostalCode a owl:ObjectProperty ;\n    rdfs:label "has postal code"@en ;\n    rdfs:comment "Used to support property parameters for the postal code data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasRegion a owl:ObjectProperty ;\n    rdfs:label "has region"@en ;\n    rdfs:comment "Used to support property parameters for the region data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasRelated a owl:ObjectProperty ;\n    rdfs:label "has related"@en ;\n    rdfs:comment "To specify a relationship between another entity and the entity represented by this object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasRole a owl:ObjectProperty ;\n    rdfs:label "has role"@en ;\n    rdfs:comment "Used to support property parameters for the role data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasSource a owl:ObjectProperty ;\n    rdfs:label "has source"@en ;\n    rdfs:comment "To identify the source of directory information of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasStreetAddress a owl:ObjectProperty ;\n    rdfs:label "has street address"@en ;\n    rdfs:comment "Used to support property parameters for the street address data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasTitle a owl:ObjectProperty ;\n    rdfs:label "has title"@en ;\n    rdfs:comment "Used to support property parameters for the title data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasUID a owl:ObjectProperty ;\n    rdfs:label "has uid"@en ;\n    rdfs:comment "To specify a value that represents a globally unique identifier corresponding to the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasValue a owl:ObjectProperty ;\n    rdfs:label "has value"@en ;\n    rdfs:comment "Used to indicate the resource value of an object property that requires property parameters"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:label a owl:DatatypeProperty ;\n    rdfs:label "label"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:language a owl:DatatypeProperty ;\n    rdfs:label "language"@en ;\n    rdfs:comment "To specify the language that may be used for contacting the object. May also be used as a property parameter."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:latitude a owl:DatatypeProperty ;\n    rdfs:label "latitude"@en ;\n    rdfs:comment "This data property has been deprecated. See hasGeo"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:longitude a owl:DatatypeProperty ;\n    rdfs:label "longitude"@en ;\n    rdfs:comment "This data property has been deprecated. See hasGeo"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:mailer a owl:DatatypeProperty ;\n    rdfs:label "mailer"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:note a owl:DatatypeProperty ;\n    rdfs:label "note"@en ;\n    rdfs:comment "A note associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:org a owl:ObjectProperty ;\n    rdfs:label "organization"@en ;\n    rdfs:comment "This object property has been mapped. Use the organization-name data property."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :organization-name .\n\n:organization-unit a owl:DatatypeProperty ;\n    rdfs:label "organizational unit name"@en ;\n    rdfs:comment "To specify the organizational unit name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string ;\n    rdfs:subPropertyOf :organization-name .\n\n:post-office-box a owl:DatatypeProperty ;\n    rdfs:label "post office box"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:prodid a owl:DatatypeProperty ;\n    rdfs:label "product id"@en ;\n    rdfs:comment "To specify the identifier for the product that created the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:rev a owl:DatatypeProperty ;\n    rdfs:label "revision"@en ;\n    rdfs:comment "To specify revision information about the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:dateTime .\n\n:role a owl:DatatypeProperty ;\n    rdfs:label "role"@en ;\n    rdfs:comment "To specify the function or part played in a particular situation by the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:sort-string a owl:DatatypeProperty ;\n    rdfs:label "sort as"@en ;\n    rdfs:comment "To specify the string to be used for national-language-specific sorting. Used as a property parameter only."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:title a owl:DatatypeProperty ;\n    rdfs:label "title"@en ;\n    rdfs:comment "To specify the position or job of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:tz a owl:DatatypeProperty ;\n    rdfs:label "time zone"@en ;\n    rdfs:comment "To indicate time zone information that is specific to the object. May also be used as a property parameter."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:value a owl:DatatypeProperty ;\n    rdfs:label "value"@en ;\n    rdfs:comment "Used to indicate the literal value of a data property that requires property parameters"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:Address a owl:Class ;\n    rdfs:label "Address"@en ;\n    rdfs:comment "To specify the components of the delivery address for the  object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentClass [ a owl:Class ;\n            owl:unionOf ( [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :country-name ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :country-name ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :locality ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :locality ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :postal-code ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :postal-code ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :region ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :region ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :street-address ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :street-address ] ) ] ) ] .\n\n:Email a owl:Class ;\n    rdfs:label "Email"@en ;\n    rdfs:comment "To specify the electronic mail address for communication with the object the vCard represents. Use the hasEmail object property."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:Group a owl:Class ;\n    rdfs:label "Group"@en ;\n    rdfs:comment "Object representing a group of persons or entities.  A group object will usually contain hasMember properties to specify the members of the group."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Kind ;\n    owl:disjointWith :Individual,\n        :Location,\n        :Organization ;\n    owl:equivalentClass [ a owl:Class ;\n            owl:intersectionOf ( [ a owl:Restriction ;\n                        owl:onProperty :hasMember ;\n                        owl:someValuesFrom :Kind ] [ a owl:Restriction ;\n                        owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;\n                        owl:onClass :Kind ;\n                        owl:onProperty :hasMember ] ) ] .\n\n:Individual a owl:Class ;\n    rdfs:label "Individual"@en ;\n    rdfs:comment "An object representing a single person or entity"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Kind ;\n    owl:disjointWith :Location,\n        :Organization .\n\n:Name a owl:Class ;\n    rdfs:label "Name"@en ;\n    rdfs:comment "To specify the components of the name of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentClass [ a owl:Class ;\n            owl:unionOf ( [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :additional-name ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:minCardinality "0"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :additional-name ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :family-name ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :family-name ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :given-name ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :given-name ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :honorific-prefix ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:minCardinality "0"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :honorific-prefix ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :honorific-suffix ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:minCardinality "0"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :honorific-suffix ] ) ] ) ] .\n\n:VCard a owl:Class ;\n    rdfs:label "VCard"@en ;\n    rdfs:comment "The vCard class is  equivalent to the new Kind class, which is the parent for the four explicit types of vCards (Individual, Organization, Location, Group)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentClass :Kind .\n\n:fn a owl:DatatypeProperty ;\n    rdfs:label "formatted name"@en ;\n    rdfs:comment "The formatted text corresponding to the name of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:hasAddress a owl:ObjectProperty ;\n    rdfs:label "has address"@en ;\n    rdfs:comment "To specify the components of the delivery address for the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range :Address .\n\n:hasEmail a owl:ObjectProperty ;\n    rdfs:label "has email"@en ;\n    rdfs:comment "To specify the electronic mail address for communication with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range :Email .\n\n:hasGeo a owl:ObjectProperty ;\n    rdfs:label "has geo"@en ;\n    rdfs:comment "To specify information related to the global positioning of the object. May also be used as a property parameter."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasKey a owl:ObjectProperty ;\n    rdfs:label "has key"@en ;\n    rdfs:comment "To specify a public key or authentication certificate associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :key .\n\n:hasLogo a owl:ObjectProperty ;\n    rdfs:label "has logo"@en ;\n    rdfs:comment "To specify a graphic image of a logo associated with the object "@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :logo .\n\n:hasName a owl:ObjectProperty ;\n    rdfs:label "has name"@en ;\n    rdfs:comment "To specify the components of the name of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range :Name ;\n    owl:equivalentProperty :n .\n\n:hasPhoto a owl:ObjectProperty ;\n    rdfs:label "has photo"@en ;\n    rdfs:comment "To specify an image or photograph information that annotates some aspect of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :photo .\n\n:hasSound a owl:ObjectProperty ;\n    rdfs:label "has sound"@en ;\n    rdfs:comment "To specify a digital sound content information that annotates some aspect of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :sound .\n\n:hasTelephone a owl:ObjectProperty ;\n    rdfs:label "has telephone"@en ;\n    rdfs:comment "To specify the telephone number for telephony communication with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :tel .\n\n:hasURL a owl:ObjectProperty ;\n    rdfs:label "has url"@en ;\n    rdfs:comment "To specify a uniform resource locator associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :url .\n\n:key a owl:ObjectProperty ;\n    rdfs:label "key"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasKey .\n\n:logo a owl:ObjectProperty ;\n    rdfs:label "logo"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasLogo .\n\n:n a owl:ObjectProperty ;\n    rdfs:label "name"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasName .\n\n:nickname a owl:DatatypeProperty ;\n    rdfs:label "nickname"@en ;\n    rdfs:comment "The nick name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:photo a owl:ObjectProperty ;\n    rdfs:label "photo"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasPhoto .\n\n:sound a owl:ObjectProperty ;\n    rdfs:label "sound"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasSound .\n\n:tel a owl:ObjectProperty ;\n    rdfs:label "telephone"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasTelephone .\n\n:url a owl:ObjectProperty ;\n    rdfs:label "url"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasURL .\n\n:Location a owl:Class ;\n    rdfs:label "Location"@en ;\n    rdfs:comment "An object representing a named geographical place"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Kind ;\n    owl:disjointWith :Organization .\n\n:additional-name a owl:DatatypeProperty ;\n    rdfs:label "additional name"@en ;\n    rdfs:comment "The additional name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:country-name a owl:DatatypeProperty ;\n    rdfs:label "country name"@en ;\n    rdfs:comment "The country name associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:family-name a owl:DatatypeProperty ;\n    rdfs:label "family name"@en ;\n    rdfs:comment "The family name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:given-name a owl:DatatypeProperty ;\n    rdfs:label "given name"@en ;\n    rdfs:comment "The given name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:hasMember a owl:ObjectProperty ;\n    rdfs:label "has member"@en ;\n    rdfs:comment "To include a member in the group this object represents. (This property can only be used by Group individuals)"@en ;\n    rdfs:domain :Group ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range :Kind .\n\n:honorific-prefix a owl:DatatypeProperty ;\n    rdfs:label "honorific prefix"@en ;\n    rdfs:comment "The honorific prefix of the name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:honorific-suffix a owl:DatatypeProperty ;\n    rdfs:label "honorific suffix"@en ;\n    rdfs:comment "The honorific suffix of the name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:locality a owl:DatatypeProperty ;\n    rdfs:label "locality"@en ;\n    rdfs:comment "The locality (e.g. city or town) associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:organization-name a owl:DatatypeProperty ;\n    rdfs:label "organization name"@en ;\n    rdfs:comment "To specify the organizational name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:postal-code a owl:DatatypeProperty ;\n    rdfs:label "postal code"@en ;\n    rdfs:comment "The postal code associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:region a owl:DatatypeProperty ;\n    rdfs:label "region"@en ;\n    rdfs:comment "The region (e.g. state or province) associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:street-address a owl:DatatypeProperty ;\n    rdfs:label "street address"@en ;\n    rdfs:comment "The street address associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:Organization a owl:Class ;\n    rdfs:label "Organization"@en ;\n    rdfs:comment """An object representing an organization.  An organization is a single entity, and might represent a business or government, a department or division within a business or government, a club, an association, or the like.\n"""@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Kind .\n\n:Gender a owl:Class ;\n    rdfs:label "Gender"@en ;\n    rdfs:comment "Used for gender codes. The URI of the gender code must be used as the value for Gender."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:Kind a owl:Class ;\n    rdfs:label "Kind"@en ;\n    rdfs:comment "The parent class for all objects"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentClass [ a owl:Restriction ;\n            owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;\n            owl:onDataRange xsd:string ;\n            owl:onProperty :fn ],\n        :VCard .\n\n:Type a owl:Class ;\n    rdfs:label "Type"@en ;\n    rdfs:comment "Used for type codes. The URI of the type code must be used as the value for Type."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:TelephoneType a owl:Class ;\n    rdfs:label "Phone"@en ;\n    rdfs:comment "Used for telephone type codes. The URI of the telephone type code must be used as the value for the Telephone Type."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:RelatedType a owl:Class ;\n    rdfs:label "Relation Type"@en ;\n    rdfs:comment "Used for relation type codes. The URI of the relation type code must be used as the value for the Relation Type."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n<http://www.w3.org/2006/vcard/ns> a owl:Ontology ;\n    rdfs:label "Ontology for vCard"@en ;\n    rdfs:comment "Ontology for vCard based on RFC6350"@en ;\n    owl:versionInfo "Final"@en .\n\n\n'},function(t,n,a){'use strict';var r=a(2),o=r.ns;t.exports={icon:r.icons.iconBase+'noun_79217.svg',name:'pad',label:function(n){var a=r.store,o=a.findTypeURIs(n);return o['http://www.w3.org/ns/pim/pad#Notepad']?'pad':null},mintClass:o.pad('Notepad'),mintNew:function(t){var n=r.store,a=r.ns,o=n.updater;if(t.me&&!t.me.uri)throw new Error('notepad mintNew:  Invalid userid');var s=t.newInstance=t.newInstance||n.sym(t.newBase+'index.ttl#this'),d=s.doc();n.add(s,a.rdf('type'),a.pad('Notepad'),d),n.add(s,a.dc('title'),'Shared Notes',d),n.add(s,a.dc('created'),new Date,d),t.me&&n.add(s,a.dc('author'),t.me,d);var l=n.sym(s.uri+'_line0');return n.add(s,a.pad('next'),l,d),n.add(l,a.pad('next'),s,d),n.add(l,a.dc('author'),t.me,d),n.add(l,a.sioc('content'),'',d),new Promise(function(a,r){o.put(d,n.statementsMatching(void 0,void 0,void 0,d),'text/turtle',function(n,o,s){o?a(t):r(new Error('FAILED to save new tool at: '+n+' : '+s))})})},render:function(t,n,a){var o=function(t,a){t||k.appendChild(r.widgets.errorMessageBlock(n,a,'pink'))},s=function(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},d=function(t,n,o){var s=$rdf.graph(),d=$rdf.Namespace('http://www.w3.org/ns/auth/acl#'),l=s.sym(n+'#a1'),a=s.sym(n),c=s.sym(t);return s.add(l,r.ns.rdf('type'),d('Authorization'),a),s.add(l,d('accessTo'),c,a),s.add(l,d('agent'),T,a),s.add(l,d('mode'),d('Read'),a),s.add(l,d('mode'),d('Write'),a),s.add(l,d('mode'),d('Control'),a),l=s.sym(n+'#a2'),s.add(l,r.ns.rdf('type'),d('Authorization'),a),s.add(l,d('accessTo'),c,a),s.add(l,d('agentClass'),w.foaf('Agent'),a),s.add(l,d('mode'),d('Read'),a),o&&s.add(l,d('mode'),d('Write'),a),$rdf.serialize(a,s,n,'text/turtle')},l=function(t,n,a){var r=b.any(b.sym(t),b.sym('http://www.iana.org/assignments/link-relations/acl'));if(r){var o=d(t,r.uri,n);return y.webOperation('PUT',r.uri,{data:o,contentType:'text/turtle'}).then(function(){return a(!0)}).catch(function(t){a(!1,t.message)})}return y.load(t).catch(function(t){a(!1,'Getting headers for ACL: '+t)}).then(function(){var a=b.any(b.sym(t),b.sym('http://www.iana.org/assignments/link-relations/acl'));if(!a)throw new Error('No Link rel=ACL header for '+t);var r=d(t,a.uri,n);return y.webOperation('PUT',a.uri,{data:r,contentType:'text/turtle'})}).then(function(){return a(!0)}).catch(function(t){a(!1,t.message)})},c=function(){var a=k.appendChild(n.createElement('button'));return a.textContent='Start another pad',a.addEventListener('click',function(){return u(t,q,'pad')}),a},u=function(t,a,o){var d=s(a),l=d.appendChild(r.authn.newAppInstance(n,{noun:'notepad'},f)),c=d.appendChild(n.createElement('hr')),u=d.appendChild(n.createElement('p'));u.textContent='Where would you like to store the data for the '+o+'?  Give the URL of the directory where you would like the data stored.';var h=d.appendChild(n.createElement('input'));h.setAttribute('type','text'),h.size=80,h.label='base URL',h.autocomplete='on',d.appendChild(n.createElement('br'));var g=d.appendChild(n.createElement('button'));g.textContent='Start new '+o+' at this URI',g.addEventListener('click',function(){var n=h.value;'/'!==n.slice(-1)&&(n+='/'),m(t,n)})},f=function(n){var a=b.any(n,w.space('uriPrefix'));a=a?a.value:n.uri.split('#')[0],'/'!==a.slice(-1)&&($rdf.log.error(g+': No / at end of uriPrefix '+a),a+='/');var r=new Date;a+=g+'/id'+r.getTime()+'/',m(t,a)},m=function(t,a){var s=$rdf.sym(t.uri.split('#')[0]),d=r.ns.space,c=r.store,u=c.sym(a+'pad.ttl'),m=c.sym(a+'index.html');toBeCopied=[{local:'index.html',contentType:'text/html'}],newInstance=c.sym(u.uri+'#thisPad'),agenda=[];var h;for(h=0;h<toBeCopied.length;h++){var f=toBeCopied[h],g=function(t){agenda.push(function(){var n=a+t.local;console.log('Copying '+base+t.local+' to '+n);var s=function(){l(n,!1,function(t,a){t?agenda.shift()():(o(t,'FAILED to set ACL '+n+' : '+a),console.log('FAILED to set ACL '+n+' : '+a))})};c.fetcher.webCopy(base+t.local,a+t.local,t.contentType).then(function(){return r.authn.checkUser()}).then(function(t){T=t,s()}).catch(function(n){console.log('FAILED to copy '+base+t.local+' : '+n.message),o(!1,'FAILED to copy '+base+t.local+' : '+n.message)})})};g(f)}agenda.push(function(){c.add(newInstance,w.rdf('type'),x('Notepad'),u),c.add(newInstance,w.dc('created'),new Date,u),T&&c.add(newInstance,w.dc('author'),T,u),c.add(newInstance,x('next'),newInstance,u),c.add(newInstance,r.ns.space('inspiration'),t,_),c.add(newInstance,r.ns.space('inspiration'),t,u),v.put(u,c.statementsMatching(void 0,void 0,void 0,u),'text/turtle',function(t,n,a){n?agenda.shift()():(o(n,'FAILED to save new notepad at: '+there.uri+' : '+a),console.log('FAILED to save new notepad at: '+there.uri+' : '+a))})}),agenda.push(function(){l(u.uri,!0,function(t,n){o(t,'Failed to set Read-Write ACL on pad data file: '+n),t&&agenda.shift()()})}),agenda.push(function(){var t=k.appendChild(n.createElement('p'));t.setAttribute('style','font-size: 140%;'),t.innerHTML='Your <a href=\''+m.uri+'\'><b>new notepad</b></a> is ready. <br/><br/><a href=\''+m.uri+'\'>Go to new pad</a>'}),agenda.shift()()},h=function(o){console.log('showResults()'),T=r.authn.currentUser(),r.authn.checkUser().then(function(t){T=t});var s=b.any(t,w.dc('title'))||b.any(t,w.vcard('fn'));a.solo&&'undefined'!=typeof window&&s&&(window.document.title=s.value),V.exists=o,E=r.pad.notepad(n,_,t,T,V),R.appendChild(E);var d=b.any(t,w.meeting('parentMeeting'))||t;r.pad.manageParticipation(n,P,_,d,T,V);r.store.updater.setRefreshHandler(_,E.reloadAndSync)},g='app-pad.timbl.com',b=r.store,y=r.store.fetcher,v=r.store.updater,w=r.ns,x=$rdf.Namespace('http://www.w3.org/ns/pim/pad#'),_=t.doc(),k=n.createElement('div'),C=k.appendChild(n.createElement('table')),T,E;C.setAttribute('style','background-color: white; min-width: 94%; margin-right:3% margin-left: 3%; min-height: 13em;');var S=C.appendChild(n.createElement('tr')),A=S.appendChild(n.createElement('td')),I=S.appendChild(n.createElement('td')),N=S.appendChild(n.createElement('td')),j=C.appendChild(n.createElement('tr')),R=j.appendChild(n.createElement('td'));R.setAttribute('colspan','3');var L=C.appendChild(n.createElement('tr')),O=L.appendChild(n.createElement('td')),P=L.appendChild(n.createElement('td')),M=L.appendChild(n.createElement('td')),D=C.appendChild(n.createElement('tr')),B=D.appendChild(n.createElement('div')),U=C.appendChild(n.createElement('tr')),q=U.appendChild(n.createElement('div')),F=C.appendChild(n.createElement('tr'));F.setAttribute('class','naviMenu');var z=F.appendChild(n.createElement('td')),H=F.appendChild(n.createElement('td')),W=F.appendChild(n.createElement('td')),V={statusArea:B,timingArea:O};return function(){y.nowOrWhenFetched(_.uri,void 0,function(n,a,r){n?(s(R),b.holds(t,w.rdf('type'),w.wf('TemplateInstance'))&&u(t,R,'pad'),h(!0),M.appendChild(c())):404===r.status?(console.log('Initializing results file '+_),v.put(_,[],'text/turtle',function(t,n,a){n?(s(R),h(!1)):(o(n,'FAILED to create results file at: '+_.uri+' : '+a),console.log('FAILED to craete results file at: '+_.uri+' : '+a))})):o(n,'FAILED to read results file: '+a)})}(),k}}},function(t,n,a){'use strict';(function(t,n){t.exports={icon:(t.__dirname||n)+'/icon_argument.png',name:'argument',label:function(n){var a=UI.store,r=a.findTypeURIs(n);return r[UI.ns.arg('Position').uri]?'Argument':null},render:function(t,n){var a=UI.panes.getOutliner(dom),r=UI.rdf,o=UI.store,s=UI.ns.arg;t=o.canon(t);var d=o.findTypeURIs(t),l=n.createElement('div');l.setAttribute('class','argumentPane');var c=o.any(t,UI.ns.rdfs('comment'));if(c){var u=n.createElement('p');u.setAttribute('style','margin-left: 2em; font-style: italic;'),l.appendChild(u),u.textContent=c.value}var f=o.statementsMatching(t,s('support'));a.appendPropertyTRs(l,f,!1);var f=o.statementsMatching(t,s('opposition'));return a.appendPropertyTRs(l,f,!1),l}}}).call(n,a(7)(t),'/')},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_106746.svg',name:'transaction',label:function(n){var a=r.store,o=a.findTypeURIs(n);return o['http://www.w3.org/2000/10/swap/pim/qif#Transaction']?'$$':a.any(n,r.ns.qu('amount'))?'$$$':o['http://www.w3.org/ns/pim/trip#Trip']?'Trip $':null},render:function(n,o){var d=r.store,a=d.fetcher,s=r.ns,l=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),c=$rdf.Namespace('http://purl.org/dc/terms/'),u=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),f=$rdf.Namespace('http://www.w3.org/ns/pim/trip#'),m=o.createElement('div');m.setAttribute('class','transactionPane');var h=function(t,n){n==void 0&&(n='color: grey');var a=o.createElement('pre');a.setAttribute('style',n),m.appendChild(a),a.appendChild(o.createTextNode(t))},g=function(t){return h(t,'color: #100; background-color: #fee')},b=this,y=r.store.updater,v=d.statementsMatching(n),w=d.statementsMatching(void 0,void 0,n),x=d.findTypeURIs(n),t=r.authn.currentUser(),_={},k=function(t){_[t.uri]=!0},C=function(){var t='padding: 0.5em 1.5em 1em 1.5em; ';if(O){var n=d.any(O,r.ns.ui('backgroundColor'));n&&(t+='background-color: '+n.value+'; ')}m.setAttribute('style',t)},T=function(t){if(t===void 0)return'';var n=''+t;return 0<=n.indexOf('.')?n.split('.')[0]+'.'+(n.split('.')[1]+'00').slice(0,2):n+'.00'},E=function(t,n){var a=o.createElement('td');return 0===0+t&&n||(a.textContent=T(t)),a.setAttribute('style','width: 6em; text-align: right; '),a},S=function(t){var n=o.createElement('th');return n.textContent=t,n.setAttribute('style','text-align: right; '),n},A=function(t,n){if(dx=r.store.any(t,s.qu('date')),dy=r.store.any(n,s.qu('date')),void 0!==dx&&void 0!==dy){if(dx.value<dy.value)return-1;if(dx.value>dy.value)return 1}return t.uri<n.uri?-1:t.uri>n.uri?1:0},I=function(t,n,a){var o=r.panes.byName(a),s=o.render(n,t);return s.setAttribute('style','border: 0.1em solid green;'),s},N=function(t,n,a,r,o){var s=n.parentNode.children;if(o)for(var d=s.length-1;0<=d;d--)s[d].expanded&&(s[d].parentNode.removeChild(s[d].expanded),s[d].expanded=!1);var l=t.createElement('tr'),c=l.appendChild(t.createElement('td'));c.setAttribute('style','width: 98%; padding: 1em; border: 0.1em solid grey;');var u=n.children.length;n.nextSibling?n.parentNode.insertBefore(l,n.nextSibling):n.parentNode.appendChild(l),n.expanded=l,c.setAttribute('colspan',''+u),c.appendChild(I(t,a,r))},j=function(t,n,a,r,o){n.expanded?(n.parentNode.removeChild(n.expanded),n.expanded=!1):N(t,n,a,r,o)},R=function(t,n,a){var o=t.createElement('table');o.setAttribute('style','padding-left: 0.5em; padding-right: 0.5em; font-size: 9pt; width: 85%;');var l=function(t,n){var a=t.createElement('tr'),o=d.any(n,s.qu('toAccount'));(function(t,n){var a='\'padding-left: 0.5em; padding-right: 0.5em; padding-top: 0.1em;';if(n){var o=d.any(n,r.ns.ui('backgroundColor'));o&&(a+='background-color: '+o.value+'; ')}t.setAttribute('style',a)})(a,o);var l=a.appendChild(t.createElement('td')),c=d.any(n,s.qu('date'));l.textContent=c?c.value.slice(0,10):'???',l.setAttribute('style','width: 7em;');var u=a.appendChild(t.createElement('td'));u.setAttribute('style','width: 36em;');var f=d.any(n,s.qu('payee'));u.textContent=f?f.value:'???';var m=u.appendChild(t.createElement('a'));m.textContent=' \u279C',m.setAttribute('href',n.uri);var h=a.appendChild(t.createElement('td')),g=d.any(n,s.qu('in_USD'));return h.textContent=g?T(g.value):'???',h.setAttribute('style','width: 6em; text-align: right; '),a.addEventListener('click',function(r){j(t,a,n,'transaction',!r.shiftKey)},!1),a},c=a?n.filter(a):n.slice();c.sort(A);for(var u=0;u<c.length;u++)o.appendChild(l(t,c[u]));return o};if(x['http://www.w3.org/2000/10/swap/pim/qif#Transaction']||d.any(n,s.qu('toAccount'))){var L=d.any(n,l('trip')),s=r.ns;k(s.rdf('type'));var C=function(t){var n='padding: 0.5em 1.5em 1em 1.5em; ';if(t){var a=d.any(t,r.ns.ui('backgroundColor'));a&&(n+='background-color: '+a.value+'; ')}m.setAttribute('style',n)},O=d.any(n,r.ns.qu('toAccount'));C(O),O==void 0&&g('(Error: There is no bank account known for this transaction <'+n.uri+'>,\n -- every transaction needs one.)');var P=null,M=d.any(n,r.ns.qu('accordingTo'));M==void 0?g('(Error: There is no back link to the original data source foir this transaction <'+n.uri+'>,\nso I can\'t tell how to annotate it.)'):(P=M==void 0?null:d.any(M,r.ns.qu('annotationStore')),P==void 0&&g('(There is no annotation document for this statement\n<'+M.uri+'>,\nso you cannot classify this transaction.)'));var D=o.createElement('div');D.setAttribute('style','float:right'),m.appendChild(D);var B=function(t,s){k(t);var l=d.any(n,t);if(l){var c=o.createElement('a');c.setAttribute('href',l.uri),c.setAttribute('style','float:right'),D.appendChild(c).textContent=s?s:r.utils.label(l),D.appendChild(o.createElement('br'))}};B(r.ns.qu('toAccount')),B(r.ns.qu('accordingTo'),'Statement'),B(f('trip'));var U=o.createElement('table');m.appendChild(U);var q=['date','payee','amount','in_USD','currency'].map(u),F=q.map(function(t){k(t);var a=d.any(n,t),o=a?r.utils.labelForXML(a):'';return'<tr><td style="text-align: right; padding-right: 0.6em">'+r.utils.labelForXML(t)+'</td><td style="font-weight: bold;">'+o+'</td></tr>'}).join('\n');U.innerHTML=F;var z=function(t,n){t||g('Sorry, failed to save your change:\n'+n)};P&&d.fetcher.nowOrWhenFetched(P.uri,n,function(t,l){t||g('Cannot load store '+P+' '+l);var c=d.any(P,s.qu('calendarYear')),u=function(){m.insertBefore(r.widgets.makeSelectForNestedCategory(o,d,n,r.ns.qu('Classified'),P,z),U.nextSibling)};d.any(void 0,s.rdfs('subClassOf'),s.qu.Classified)?u():c?a.load(c).then(function(){a.load(d.each(c,s.rdfs('seeAlso'))).then(function(){u()}).catch(function(t){console.log('Error loading background data: '+t)})}).catch(function(t){console.log('Error loading calendarYear: '+t)}):console.log('Can\'t get categories, because no calendarYear'),m.appendChild(r.widgets.makeDescription(o,d,n,r.ns.rdfs('comment'),P,z));var h=d.statementsMatching(void 0,f('trip'),void 0,P).map(function(t){return t.object}),b=d.each(void 0,r.ns.rdf('type'),f('Trip'));h=h.concat(b).sort();h=function(t,n,a,r){return l2=n.map(function(n){var r=t.any(n,a);return r=r?r.value:'9999-12-31',[r,n]}),l2.sort(),r&&l2.reverse(),l2.map(function(t){return t[1]})}(d,h,r.ns.cal('dtstart'),!0),1<h.length&&m.appendChild(r.widgets.makeSelectForOptions(o,d,n,f('trip'),h,{multiple:!1,nullLabel:'-- what trip? --',mint:'New Trip *',mintClass:f('Trip'),mintStatementsFun:function(t){var n=[$rdf.st(t,r.ns.rdf('type'),f('Trip'),t.doc())];return n}},P,z)),m.appendChild(o.createElement('br'));var y=r.panes.getOutliner(o);k(s.rdfs('comment'));r.widgets.attachmentList(o,n,m);k(s.wf('attachment')),m.appendChild(o.createElement('tr')).setAttribute('style','height: 1em'),y.appendPropertyTRs(m,v,!1,function(t){return!(t.uri in _)}),y.appendPropertyTRs(m,w,!0,function(t){return!(t.uri in _)})})}else if(x['http://www.w3.org/ns/pim/trip#Trip']){var H=function(){var a={},l={},c={},t=d.each(void 0,f('trip'),n),u=t.map(function(n){return n.doc()});d.fetcher.load(u).then(function(){t.map(function(n){var t=d.the(n,s.qu('date')),o=t?(''+t.value).slice(0,4):'????',u=d.the(n,s.rdf('type'));if(u||(u=r.ns.qu('ErrorNoType')),u&&u.uri){var f=u.uri;l[o]||(l[o]=0),c[o]||(c[o]={}),a[f]||(a[f]=0),c[o][f]||(c[o][f]=0);var m=d.any(n,r.ns.qu('in_USD'));if(m||g('@@ No amount in USD: '+m+' for '+n),m){var h=parseFloat(m.value);a[f]+=h,c[o][f]+=h,l[o]+=h}}});var u=[],f=0,h=[],b;for(var v in c)c.hasOwnProperty(v)&&h.push(v);h.sort();var y=h.length,w=m.appendChild(o.createElement('table')),x;if(w.setAttribute('style','font-size: 120%; margin-left:auto; margin-right:1em; margin-top: 1em; border: 0.05em solid gray; padding: 1em;'),1<y){var _=w.appendChild(o.createElement('tr'));for(_.appendChild(S('')),b=0;b<y;b++)_.appendChild(S(h[b]));_.appendChild(S('total'))}for(var k in a)a.hasOwnProperty(k)&&(u.push(k),f+=a[k]);u.sort();for(var C=0,A,I,N,j;C<u.length;C++){if(j=d.sym(u[C]),A=w.appendChild(o.createElement('tr')),I=A.appendChild(o.createElement('td')),I.textContent=r.utils.label(j),1<y)for(b=0;b<y;b++)N=c[h[b]][u[C]],x=A.appendChild(E(N,!0));A.appendChild(E(a[u[C]],!0))}if(1<u.length){if(A=w.appendChild(o.createElement('tr')),A.appendChild(S('total')),1<y)for(b=0;b<y;b++)N=l[h[b]],x=A.appendChild(E(N?T(N):''));x=A.appendChild(E(f)),x.setAttribute('style','font-weight: bold; text-align: right;')}var L=R(o,t);L.setAttribute('style','margin-left:auto; margin-right:1em; margin-top: 1em; border: padding: 1em;'),m.appendChild(L),r.widgets.attachmentList(o,n,m)}).catch(function(t){g('Error loading transactions: '+t)})};H()}return m}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_142708.svg',name:'period',label:function(n){var a=r.store,o=a.findTypeURIs(n);return o['http://www.w3.org/2000/10/swap/pim/qif#Period']?'period':null},render:function(n,a){var o=r.store,s=r.ns,d=a.createElement('div');d.setAttribute('class','periodPane');var l=function(t,n){n==void 0&&(n='color: grey');var r=a.createElement('pre');r.setAttribute('style',n),d.appendChild(r),r.appendChild(a.createTextNode(t))},c=function(t){return l('\u2713 '+t,'color: #010; background-color: #efe')},u=function(t){return l(t,'color: #100; background-color: #fee')},f=this,m=r.store.updater,h=o.statementsMatching(n),g=o.statementsMatching(void 0,void 0,n),b=o.findTypeURIs(n);if(b['http://www.w3.org/2000/10/swap/pim/qif#Period']){var t=o.any(n,s.cal('dtstart'));t===void 0&&u('(Error: There is no start date known for this period <'+n.uri+'>,\n -- every period needs one.)');var v=o.any(n,s.cal('dtend'));v===void 0&&u('(Error: There is no end date known for this period <'+n.uri+'>,\n -- every period needs one.)');var w=o.any(n,r.ns.qu('annotationStore'))||null,x=o.each(n,s.rdfs('seeAlso')),_={},k=function(t){_[t.uri]=!0};k(s.rdf('type'));var C=function(n){return!!(n&&n>=t&&n<v)},T=function(t){var n=''+t;return 0<=n.indexOf('.')?n.split('.')[0]+'.'+(n.split('.')[1]+'00').slice(0,2):n+'.00'},E=function(t){return C(o.any(t,s.qu('date')))},S=function(t,n){if(dx=r.store.any(t,s.qu('date')),dy=r.store.any(n,s.qu('date')),void 0!==dx&&void 0!==dy){if(dx.value<dy.value)return-1;if(dx.value>dy.value)return 1}return t.uri<n.uri?-1:t.uri>n.uri?1:0},A=d.appendChild(a.createElement('h2'));A.textContent='Period '+t.value.slice(0,10)+' - '+v.value.slice(0,10);var I=function(t,n,a){var o=r.panes.byName(a),s=o.render(n,t);return s.setAttribute('style','border: 0.1em solid green;'),s},N=function(t,n,a,r,o){var s=n.parentNode.children;if(o)for(var d=s.length-1;0<=d;d--)s[d].expanded&&(s[d].parentNode.removeChild(s[d].expanded),s[d].expanded=!1);var l=t.createElement('tr'),c=l.appendChild(t.createElement('td'));c.setAttribute('style','width: 98%; padding: 1em; border: 0.1em solid grey;');var u=n.children.length;n.nextSibling?n.parentNode.insertBefore(l,n.nextSibling):n.parentNode.appendChild(l),n.expanded=l,c.setAttribute('colspan',''+u),c.appendChild(I(t,a,r))},R=function(t,n,a,r,o){n.expanded?(n.parentNode.removeChild(n.expanded),n.expanded=!1):N(t,n,a,r,o)},L=function(t,n){var a=t.createElement('table');a.setAttribute('style','margin-left: 100; font-size: 9pt; width: 85%;');var d=function(t,n){var a=t.createElement('tr'),d=o.any(n,s.qu('toAccount'));(function(t,n){var a='margin-left: 8em; padding-left: 5em;';if(n){var s=o.any(n,r.ns.ui('backgroundColor'));s&&(a+='background-color: '+s.value+'; ')}t.setAttribute('style',a)})(a,d);var l=a.appendChild(t.createElement('td')),c=o.any(n,s.qu('date'));l.textContent=c?c.value.slice(0,10):'???',l.setAttribute('style','width: 7em;');var u=a.appendChild(t.createElement('td'));u.setAttribute('style','width: 36em;');var f=o.any(n,s.qu('payee'));u.textContent=f?f.value:'???';var m=u.appendChild(t.createElement('a'));m.textContent=' \u279C',m.setAttribute('href',n.uri);var h=a.appendChild(t.createElement('td')),g=o.any(n,s.qu('in_USD'));return h.textContent=g?T(g.value):'???',h.setAttribute('style','width: 6em; text-align: right; '),a.addEventListener('click',function(r){R(t,a,n,'transaction',!r.shiftKey)},!1),a},l=n.filter(E);l.sort(S);for(var c=0;c<l.length;c++)a.appendChild(d(t,l[c]));return a},O={"http://www.w3.org/2000/10/swap/pim/qif#Transaction":!0,"http://www.w3.org/2000/10/swap/pim/qif#Unclassified":!0,"http://www.w3.org/2000/10/swap/pim/qif#UnclassifiedOutgoing":!0,"http://www.w3.org/2000/10/swap/pim/qif#UnclassifiedIncome":!0},P=o.findMemberURIs(s.qu('Transaction')),M=[],D=[],B,U,q,b,F;for(var j in P)if(P.hasOwnProperty(j)){for(U=o.sym(j),q=o.each(U,s.rdf('type')),classified=!1,F=0;F<q.length;F++)b=q[F],void 0===O[b.uri]&&(classified=!0);classified||(B=o.any(U,s.qu('in_USD')),B===void 0&&(B=o.any(U,s.qu('amount'))),B&&0<=(''+B.value).indexOf('-')?D.push(o.sym(j)):M.push(o.sym(j)))}var y,z;M.length?(y=L(a,M),z=y.children.length,d.appendChild(a.createElement('h3')).textContent='Unclassified Income'+(4>z?'':' ('+z+')'),d.appendChild(y)):c('No unclassified income'),D.length?(y=L(a,D),z=y.children.length,d.appendChild(a.createElement('h3')).textContent='Unclassified Outgoings'+(4>z?'':' ('+z+')'),d.appendChild(y)):c('No unclassified outgoings ');var H=function(t){var n=o.findSubClassesNT(s.qu('Transaction')),a;for(a in n)if(n.hasOwnProperty(a)&&a.slice(1,-1).split('#')[1]===t)return o.sym(a.slice(1,-1));return null},W=function(t,n){var l=H(t),c=[],f=0,m,f;if(!l)return u('Error: No category correspnding to '+t),null;for(var h=o.each(void 0,s.rdf('type'),l),g=0;g<h.length;g++)o.any(h[g],n)||c.push(h[g]);return c.length&&(m=L(a,c),f=m.children.length,d.appendChild(a.createElement('h3')).textContent=r.utils.label(l)+' with no '+r.utils.label(n)+(4>f?'':' ('+f+')'),d.appendChild(m)),f};0===W('Reimbursables',s.trip('trip'))&&c('Reimbursables all have trips'),0===W('Other_Inc_Speaking',s.trip('trip'))&&c('Speaking income all has trips')}return d}}},function(t,n,a){'use strict';var r=a(2),o=r.ns,s=r.store;t.exports={icon:r.icons.iconBase+'noun_346319.svg',name:'chat',label:function(t){var a=r.store.each(t,o.wf('message')).length;return 0<a?'Chat ('+a+')':s.holds(t,o.rdf('type'),o.meeting('Chat'))?'Meeting chat':s.holds(void 0,o.rdf('type'),o.foaf('ChatChannel'),t)?'IRC log':null},mintClass:o.meeting('Chat'),mintNew:function(t){var n=s.updater;if(t.me&&!t.me.uri)throw new Error('chat mintNew:  Invalid userid');var a=t.newInstance=t.newInstance||s.sym(t.newBase+'index.ttl#this'),r=a.doc();return s.add(a,o.rdf('type'),o.meeting('Chat'),r),s.add(a,o.dc('title'),'Chat',r),s.add(a,o.dc('created'),new Date,r),t.me&&s.add(a,o.dc('author'),t.me,r),new Promise(function(a,o){n.put(r,s.statementsMatching(void 0,void 0,void 0,r),'text/turtle',function(n,r,s){r?a(t):o(new Error('FAILED to save new tool at: '+n+' : '+s))})})},render:function(t,n){var a=n.createElement('div');a.setAttribute('class','chatPane');var d={},l;if(s.holds(t,o.rdf('type'),o.meeting('Chat')))l=t.doc();else if(s.any(t,r.ns.wf('message')))l=r.store.any(t,r.ns.wf('message')).doc();else if(s.holds(void 0,o.rdf('type'),o.foaf('ChatChannel'),t)||s.holds(t,o.rdf('type'),o.foaf('ChatChannel'))){var c=function(){var t=new $rdf.Query('IRC log entries'),n=[];return['chan','msg','date','list','pred','creator','content'].map(function(a){t.vars.push(n[a]=$rdf.variable(a))}),t.pat.add(n.chan,o.foaf('chatEventList'),n.list),t.pat.add(n.list,n.pred,n.msg),t.pat.add(n.msg,o.dc('date'),n.date),t.pat.add(n.msg,o.dc('creator'),n.creator),t.pat.add(n.msg,o.dc('description'),n.content),t};l=t,d.query=c()}else(function(t,r){var o=n.createElement('pre');o.setAttribute('style','background-color: '+r||'#eed;'),a.appendChild(o),o.appendChild(n.createTextNode(t))})('Unknown chat type');return r.authn.logIn({dom:n,div:a}).then(function(){a.appendChild(r.messageArea(n,s,t,l,d)),s.updater.addDownstreamChangeListener(l,function(){r.widgets.refreshTree(a)})}),a}}},function(t,n,a){'use strict';var r=a(2),o=a(130),s=a(462);t.exports={icon:r.icons.iconBase+'noun_66617.svg',name:'meeting',label:function(t){var n=r.store,a=r.ns;return n.holds(t,a.rdf('type'),a.meeting('Meeting'))?'Meeting':null},mintClass:r.ns.meeting('Meeting'),mintNew:function(t){return new Promise(function(n,a){var o=r.store,s=r.ns;t.newInstance=t.newInstance||o.sym(t.newBase+'index.ttl#this');var d=t.newInstance,l=d.doc(),c=r.authn.currentUser();c&&o.add(d,s.dc('author'),c,l),o.add(d,s.rdf('type'),s.meeting('Meeting'),l),o.add(d,s.dc('created'),new Date,l),o.add(d,s.ui('backgroundColor'),new $rdf.Literal('#ddddcc',void 0,s.xsd('color')),l);var u=new $rdf.Collection;o.add(d,s.meeting('toolList'),u,l),u.elements.push(d),o.updater.put(l,o.statementsMatching(void 0,void 0,void 0,l),'text/turtle',function(r,o,s){o?n(t):a(new Error('Error writing meeting configuration: '+s))})})},render:function(t,n){var a=r.store,d=r.ns,l=a.updater,c=this,u=function(t,a){console.log(t);var r=n.createElement('pre');r.setAttribute('style','background-color: '+a||'#eed;'),b.appendChild(r),r.appendChild(n.createTextNode(t))},f=function(t,n){t||u(n)},m=t,h=t.doc(),g=t.dir().uri,b=n.createElement('div'),y=b.appendChild(n.createElement('table')),v=y.appendChild(n.createElement('tr'));v.appendChild(n.createElement('div'));var w=y.appendChild(n.createElement('tr')),x=y.appendChild(n.createElement('td')),_=x.appendChild(n.createElement('table')),k=_.appendChild(n.createElement('tr'));v.setAttribute('style','height: 2em;');var C=null,T=function(){l.put(h,a.statementsMatching(void 0,void 0,void 0,h),'text/turtle',function(t,n,a){n?(ee.refresh(),X()):(a='FAILED to save new thing at: '+h+' : '+a,u(a))})},E=function(t,n,r){var o=n.doc();r&&a.add(m,r,n,o),a.add(n,d.meeting('parentMeeting'),m,o),l.put(o,a.statementsMatching(void 0,void 0,void 0,o),'text/turtle',function(t,a,r){a?T():u('FAILED to save new tool at: '+n+' : '+r)})},S=function(t,n,o,s){n&&a.add(m,n,t,h);var l=r.widgets.newThing(h);o&&a.add(l,d.rdfs('label'),o,h),s&&a.add(l,d.meeting('icon'),a.sym(s),h),a.add(l,d.rdf('type'),d.meeting('Tool'),h),a.add(l,d.meeting('target'),t,h);var c=a.the(m,d.meeting('toolList'));return c.elements.push(l),l},A=function(n){return new Promise(function(o){var s=function(t){var n=S(t,r.ns.wf('attachment'),r.utils.label(t),null);a.add(n,r.ns.meeting('view'),'iframe',h)},l=function(t){var n=a.any(t,d.foaf('preferredURI')),o=n?a.sym(n):t,s=a.any(m,d.meeting('attendeeGroup')),l=function(t,n){var o=[$rdf.st(n,r.ns.vcard('hasMember'),t,n.doc())],s=a.any(t,d.vcard('fn'))||a.any(t,d.foaf('name'));s&&o.push($rdf.st(t,r.ns.vcard('fn'),s,n.doc())),a.fetcher.nowOrWhenFetched(n.doc(),void 0,function(r){return r?void a.updater.update([],o,function(n,a,r){f(a,r),a&&console.log('Addded to particpants OK: '+t)}):void u('Can\'t read group to add person'+n)})};return s?void l(o,s):void L().then(function(t){var n=t.newInstance;l(o,n),a.fetcher.putBack(h,{contentType:'text/turtle'}).then(function(){console.log('Particiants Group created: '+n)})}).catch(function(t){u(t)})};console.log('Dropped on thing '+n);var c=n.uri;return c.startsWith('http:')&&0>c.indexOf('#')?(function(n){var o=d.wf('attachment');a.add(t,o,n,t.doc());var s={newInstance:a.sym(t.doc().uri+'#LinkListTool'),pane:r.panes.link,predicate:d.meeting('attachmentTool'),tabTitle:'Links',noIndexHTML:!0};return O({icon:'noun_160581.svg',limit:1,shareTab:!0},s)}(n),o(n)):void a.fetcher.nowOrWhenFetched(n,function(t,u){if(!t)return console.log('Error looking up dropped thing '+n+': '+u),o(null);var f=a.findTypeURIs(n);for(var m in f)console.log('    drop object type includes: '+m);if(d.vcard('Individual').uri in f||d.foaf('Person').uri in f||d.foaf('Agent').uri in f)return l(n),o(n);if(c.startsWith('https:')&&0>c.indexOf('#')){var g=a.fetcher.getHeader(n,'x-frame-options'),b=!0;if(g)for(var y=0;y<g.length;y++)console.log('x-frame-options: '+g[y]),0>g[y].indexOf('sameorigin')&&(b=!1),0>g[y].indexOf('deny')&&(b=!1);if(b)return s(n),o(n)}console.log('Default: assume web page attachement '+n);var v=S(n,r.ns.wf('attachment'),r.utils.label(n),null);return a.add(v,r.ns.meeting('view'),'iframe',h),o(n)})})},I=function(t){Promise.all(t.map(function(t){var n=$rdf.sym(t);return A(n)})).then(function(){T()})},N=function(t){for(var n=0,a;t[n];n++){a=t[n],console.log(' meeting: Filename: '+a.name+', type: '+(a.type||'n/a')+' size: '+a.size+' bytes, last modified: '+(a.lastModifiedDate?a.lastModifiedDate.toLocaleDateString():'n/a'));var s=new FileReader;s.onload=function(t){return function(n){var a=n.target.result;console.log(' File read byteLength : '+a.byteLength);var s=t.type.startsWith('image/')?'Pictures':'Files',d=m.dir().uri+s+'/'+encodeURIComponent(t.name),l=o.extension(t.type);t.type!==o.lookup(t.name)&&(d+='_.'+l,console.log('MIME TYPE MISMATCH -- adding extension: '+d)),r.store.fetcher.webOperation('PUT',d,{data:a,contentType:t.type}).then(function(){console.log(' Upload: put OK: '+d),t.type.startsWith('image/')?j(s):R(s)}).catch(function(t){console.log(' Upload: FAIL '+d+', Error: '+t)})}}(a),s.readAsArrayBuffer(a)}},j=function(t){var n={newInstance:a.sym(m.dir().uri+t+'/'),pane:r.panes.folder,predicate:d.meeting('pictures'),tabTitle:t,noIndexHTML:!0};return O({icon:'noun_598334.svg',limit:1,shareTab:!0},n)},R=function(){var t={newInstance:a.sym(m.dir().uri+'Files/'),pane:r.panes.folder,predicate:d.meeting('materialsFolder'),tabTitle:'Materials',noIndexHTML:!0};return O({icon:'noun_681601.svg',limit:1,shareTab:!0},t)},L=function(){var n={newInstance:a.sym(m.dir().uri+'Attendees/index.ttl#this'),pane:r.panes.contact,predicate:d.meeting('attendeeGroup'),tabTitle:'Attendees',instanceClass:d.vcard('Group'),instanceName:r.utils.label(t)+' attendees',noIndexHTML:!0};return O({icon:'noun_339237.svg',limit:1,shareTab:!0},n)},O=function(t,n){return new Promise(function(a,o){var s=r.store;if(!n.useExisting){var d=s.any(m,n.predicate);if(d){if(u('Already have '+d+' as '+r.utils.label(n.predicate)),t.limit&&1===t.limit)return u('Cant have two'),a(null);if(t.shareTab)return a({me:C,newInstance:d,instanceClass:n.instanceClass})}}C||n.me||o(new Error('Username not defined for new tool')),n.me=n.me||C,n.newInstance=n.useExisting||n.newInstance||s.sym(n.newBase+'index.ttl#this'),n.pane.mintNew(n).then(function(t){var n=S(t.newInstance,t.predicate,t.tabTitle,t.pane.icon);t.view&&s.add(n,r.ns.meeting('view'),t.view,h),T(),s.fetcher.putBack(h,{contentType:'text/turtle'}).then(function(){a(t)}).catch(function(t){o(t)})}).catch(function(t){u(t),o(t)})})},P=function(){var t=r.widgets.selectWorkspace(n,{noun:'meeting'},function(a,o){c.mintNew({newBase:o}).then(function(a){var r=a.newInstance;q.removeChild(t);var o=q.appendChild(n.createElement('p'));o.setAttribute('style','font-size: 140%;'),o.innerHTML='Your <a target=\'_blank\' href=\''+r.uri+'\'><b>new meeting</b></a> is ready to be set up. <br/><br/><a target=\'_blank\' href=\''+r.uri+'\'>Go to your new meeting.</a>'}).catch(function(a){q.removeChild(t),q.appendChild(r.widgets.errorMessageBlock(n,a))})});q.appendChild(t)},M=[{icon:'noun_339237.svg',maker:function(){var t=r.store,n=t.any(m,d.meeting('particpants'));n||(n=$rdf.sym(g+'Group/'+'index.ttl#this')),console.log('Participant group: '+n);var a=S(n,d.meeting('particpants'),'Particpants',r.icons.iconBase+'noun_339237.svg');t.add(a,r.ns.meeting('view'),'peoplePicker',h),T()},hint:'Make a group of people',limit:1},{icon:'noun_346777.svg',maker:function(t){var n={useExisting:m,pane:r.panes.schedule,view:'schedule',tabTitle:'Schedule poll',noIndexHTML:!0};return O(t,n)},hint:'Make a poll to schedule the meeting'},{icon:'noun_48218.svg',maker:function(){},limit:1,hint:'Add an agenda list',disabled:!0},{icon:'noun_79217.svg',maker:function(t){var n={newBase:g+'SharedNotes/',predicate:r.ns.meeting('sharedNotes'),tabTitle:'Shared Notes',pane:r.panes.pad};return O(t,n)},hint:'Add a shared notepad'},{icon:'noun_346319.svg',maker:function(){var t=r.store;if(t.holds(m,d.meeting('chat')))return void console.log('Ignored - already have chat');var n=t.sym(g+'Chat/'+'chat.ttl');t.add(n,d.rdf('type'),d.meeting('Chat'),n);var a=S(n,d.meeting('chat'),'Chat',r.icons.iconBase+'noun_346319.svg');E(a,n,d.meeting('chat'))},limit:1,hint:'Add a chat channel for the meeting'},{icon:'noun_17020.svg',maker:function(){var t=g+'Actions/',n=r.store;if(n.holds(m,d.meeting('actions')))return void console.log('Ignored - already have actions');var a=n.sym(t+'config.ttl'),o=n.sym(t+'config.ttl#this'),s=n.sym(t+'state.ttl');n.add(o,d.dc('title'),(n.anyValue(m,d.cal('summary'))||'Meeting ')+' actions',a),n.add(o,d.wf('issueClass'),d.wf('Task'),a),n.add(o,d.wf('initialState'),d.wf('Open'),a),n.add(o,d.wf('stateStore'),s,a),n.add(o,d.wf('assigneeClass'),d.foaf('Person'),a),n.add(o,d.rdf('type'),d.wf('Tracker'),a),n.add(o,d.rdf('type'),d.wf('Tracker'),a);var l=S(o,d.meeting('actions'),'Actions',r.icons.iconBase+'noun_17020.svg');E(l,o,d.meeting('actions'))},limit:1,hint:'Add a list of action items'},{icon:'noun_260227.svg',maker:function(){var t=r.store,n=$rdf.sym('https://appear.in/'+r.utils.genUuid());if(t.holds(m,d.meeting('videoCallPage')))return void console.log('Ignored - already have a videoCallPage');t.add(n,d.rdf('type'),d.meeting('VideoCallPage'),h);var a=S(n,d.meeting('videoCallPage'),'Video call',r.icons.iconBase+'noun_260227.svg');t.add(a,d.meeting('view'),'iframe',h),T()},limit:1,hint:'Add a video call for the meeting'},{icon:'noun_25830.svg',maker:function(){r.widgets.askName(n,a,q,d.log('uri'),r.ns.rdf('Resource')).then(function(t){if(!t)return X();var n=r.store,a=r.ns,o=n.sym(t),s=S(o,a.wf('attachment'),r.utils.label(o),null);n.add(s,a.meeting('view'),'iframe',h),T()}).catch(function(t){u('Error making new sub-meeting: '+t)})},hint:'Attach meeting materials',disabled:!1},{icon:'noun_123691.svg',maker:function(t){var n=r.store,a=r.ns,o=m.dir();if(t.limit&&1===t.limit&&n.holds(m,a.wf('sharingControl')))return void u('Ignored - already have '+r.utils.label(Q.predicate));var s=S(o,a.wf('sharingControl'),'Sharing',r.icons.iconBase+'noun_123691.svg');n.add(s,a.meeting('view'),'sharing',h),T()},limit:1,hint:'Control Sharing',disabled:!1},{icon:'noun_66617.svg',maker:function(t){r.widgets.askName(n,a,q,d.foaf('name'),r.ns.meeting('Meeting')).then(function(n){if(!n)return X();var a=encodeURIComponent(n),o={newBase:g+a+'/',predicate:r.ns.meeting('subMeeting'),tabTitle:n,pane:r.panes.meeting};return O(t,o)}).catch(function(t){u('Error making new sub-meeting: '+t)})},hint:'Make a sub meeting',disabled:!1}],D=$rdf.sym('https://linkeddata.github.io/solid-app-set/meeting/meetingDetailsForm.ttl#settings');$rdf.parse(s,a,D.doc().uri,'text/turtle');var B='padding: 1em; width: 3em; height: 3em;',U=k.appendChild(n.createElement('td')),q=k.appendChild(n.createElement('td')),F=U.appendChild(n.createElement('img')),z=!1;F.setAttribute('src',r.icons.iconBase+'noun_19460_green.svg'),F.setAttribute('style',B+'opacity: 50%;'),F.setAttribute('title','Add another tool to the meeting');var H=function(){z=!z,F.setAttribute('style',B+(z?'background-color: yellow;':'')),J(z?'':'display: none;')},W;r.authn.checkUser().then(function(t){return t?(C=t,F.addEventListener('click',H),void F.setAttribute('style',B)):void(W=r.authn.loginStatusBox(n,function(t){t?(C=a.sym(t),q.removeChild(W),F.addEventListener('click',H),F.setAttribute('style',B)):(console.log('(Logged out)'),C=null)}),W.setAttribute('style','margin: 0.5em 1em;'),q.appendChild(W))});for(var V=[],G=0,K;G<M.length;G++)K=function(){var t=M[G],a=U.appendChild(n.createElement('img'));a.setAttribute('src',r.icons.iconBase+t.icon),a.setAttribute('style',B+'display: none;'),V.push(a),a.tool=t;var o=t.maker;t.disabled||a.addEventListener('click',function(){Z(a),o(t)})},K();var J=function(t){for(var n=0,a;n<V.length;n++)a=B+t,M[n].disabled&&(a+='opacity: 0.3;'),V[n].setAttribute('style',a)},X=function(){J('display: none;'),F.setAttribute('style',B)},Z=function(t){J('display: none;'),t.setAttribute('style',B+'background-color: yellow;')},Y=function(t){var a=n.createElement('div'),r=a.appendChild(n.createElement('p'));return r.setAttribute('style','margin: 0em; padding:3em; color: #888;'),r.textContent='Tip: '+t,a},Q={dom:n};Q.predicate=d.meeting('toolList'),Q.subject=t,Q.ordered=!0,Q.orientation=1,Q.renderMain=function(t,o){var s=null,l=null,c;t.innerHTML='';var f=function(n,a){n||(t.textContent=''+a)},g=function(a){var r=t.appendChild(n.createElement('iframe'));r.setAttribute('src',a.uri),r.setAttribute('style','border: none; margin: 0; padding: 0; height: 100%; width: 100%;')},b=function(){t.appendChild(n.createElement('h4')).textContent='Meeting Participants';var o=function(t){var n=[$rdf.st(m,d.meeting('particpantGroup'),t,m.doc())];a.updater.update([],n,{},function(n,a,r){a?l=t:u('Cant save participants group: '+r)})};l=a.any(m,d.meeting('particpantGroup')),r.authn.loadTypeIndexes({div:t,dom:n}).then(function(t){var n={defaultNewGroupName:'Meeting Participants',selectedGroup:l},a=new r.widgets.PeoplePicker(t.div,t.index.private[0],o,n);a.render()})},y=function(){t.appendChild(n.createElement('h3')).textContent='Details of meeting';var o=$rdf.sym('https://linkeddata.github.io/solid-app-set/meeting/meetingDetailsForm.ttl#main');r.widgets.appendForm(document,t,{},m,o,m.doc(),f),t.appendChild(Y('Drag URL-bar icons of web pages into the tab bar on the left to add new meeting materials.')),C=r.authn.currentUser(),C&&a.add(m,d.dc('author'),C,h);var s={noun:'meeting',me:C,statusArea:t,div:t,dom:n};r.authn.registrationControl(s,m,d.meeting('Meeting')).then(function(){console.log('Registration control finsished.')});r.pad.manageParticipation(n,t,h,m,C,{});var l='height: 2em; width: 2em; margin:0.5em;',c=t.appendChild(n.createElement('div')),u=c.appendChild(n.createElement('img'));u.setAttribute('src',r.icons.iconBase+'noun_145978.svg'),u.setAttribute('title','Make a fresh new meeting'),u.addEventListener('click',P),u.setAttribute('style',l);var g=c.appendChild(n.createElement('a'));g.setAttribute('href','https://github.com/linkeddata/solid-app-set'),g.setAttribute('target','_blank');var b=g.appendChild(n.createElement('img'));b.setAttribute('src',r.icons.iconBase+'noun_368567.svg'),b.setAttribute('title','Fork me on github'),b.setAttribute('style',l+'opacity: 50%;')};if(a.holds(o,d.rdf('type'),d.meeting('Tool'))){var v=a.any(o,d.meeting('target'));if(v.sameTerm(m)&&!a.any(o,d.meeting('view')))y();else{var w=a.any(o,d.meeting('view'));w=w?w.value:null,'details'===w?y():'peoplePicker'===w?b():'iframe'===w?g(v):(s=w?r.panes.byName(w):null,c=t.appendChild(n.createElement('table')),r.outline.GotoSubject(v,!0,s,!1,void 0,c))}}else if(o.sameTerm(m))y();else if(o.sameTerm(o.doc())&&!a.holds(o,r.ns.rdf('type'),r.ns.meeting('Chat'))&&!a.holds(o,r.ns.rdf('type'),r.ns.meeting('PaneView')));else c=t.appendChild(n.createElement('table')),r.outline.GotoSubject(o,!0,void 0,!1,void 0,c)},Q.renderTab=function(t,o){if(a.holds(o,d.rdf('type'),d.meeting('Tool'))){var l=a.any(o,d.meeting('target')),c=a.any(o,d.rdfs('label'));c=c?c.value:r.utils.label(l);var u=t.appendChild(n.createElement('div'));u.textContent=c,u.setAttribute('style','margin-left: 0.7em');var s=a.any(o,d.meeting('icon'));if(s){var f=t.appendChild(n.createElement('table')),m=f.appendChild(n.createElement('tr')),h=m.appendChild(n.createElement('td')),g=m.appendChild(n.createElement('td')),b=h.appendChild(n.createElement('img'));b.setAttribute('src',s.uri),b.setAttribute('style','width: 1.5em; height: 1.5em;'),b.setAttribute('title',c),g.appendChild(u)}else t.appendChild(u)}else t.textContent=r.utils.label(o)},Q.renderTabSettings=function(t,o){if(t.innerHTML='',t.style+='border-color: #eed;',t.appendChild(n.createElement('h3')).textContent='Adjust this tab',a.holds(o,d.rdf('type'),d.meeting('Tool'))){var s=$rdf.sym('https://linkeddata.github.io/solid-app-set/meeting/meetingDetailsForm.ttl#settings');r.widgets.appendForm(document,t,{},o,s,m.doc(),f);var l=r.widgets.deleteButtonWithCheck(n,t,'tab',function(){for(var t=a.the(m,d.meeting('toolList')),n=0;n<t.elements.length;n++)if(t.elements[n].sameTerm(o)){t.elements.splice(n,1);break}var r=a.any(o,d.meeting('target')),s=a.statementsMatching(o).concat(a.statementsMatching(void 0,void 0,o)).concat(a.statementsMatching(m,void 0,r));a.remove(s),T()});l.setAttribute('style','width: 1.5em; height: 1.5em;')}else t.appendChild(n.createElement('h4')).textContent='(No adjustments available)'},Q.backgroundColor=a.anyValue(t,d.ui('backgroundColor'))||'#ddddcc';var ee=w.appendChild(r.tabs.tabWidget(Q));return r.aclControl.preventBrowserDropEvents(n),r.widgets.makeDropTarget(ee.tabContainer,I,N),r.widgets.makeDropTarget(U,I,N),b}}},function(t){'use strict';t.exports='@prefix : <http://www.w3.org/ns/ui#> .\n@prefix f: <#> .\n@prefix dc: <http://purl.org/dc/elements/1.1/>.\n@prefix cal: <http://www.w3.org/2002/12/cal/ical#>.\n@prefix meeting: <http://www.w3.org/ns/pim/meeting#>.\n@prefix ns: <http://www.w3.org/2006/vcard/ns#> .\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n@prefix te: <http://purl.org/dc/terms/> .\n@prefix dc: <http://purl.org/dc/elements/1.1/>.\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.\n@prefix ui: <http://www.w3.org/ns/ui#>.\n\n  f:main    a :Form;\n      cal:summary "Meeting Details";\n      :part f:titleField, f:locationField, f:startField,\n                    f:endField, f:eventComment, f:colorField .\n\n  f:titleField     a :SingleLineTextField;\n       :maxLength 256;\n       :property cal:summary;\n       :label "Name of meeting";\n       :size 80 .\n\n   f:locationField     a :SingleLineTextField;\n        :maxLength 128;\n        :property cal:location;\n        :size 40 .\n\n    f:startField     a :DateField;\n        :label "Start";\n         :property cal:dtstart .\n\n   f:endField     a :DateField;\n       :label "End";\n          :property cal:dtend .\n\n    f:colorField     a :ColorField;\n        :label "Tab color";\n  #      :default "#ddddcc"^^xsd:color;\n           :property ui:backgroundColor .\n\n      f:eventComment\n           a    ui:MultiLineTextField;\n       #    ui:maxLength\n       #       "1048";\n       #    ui:size\n       #       "40".\n           ui:property\n              cal:comment.\n\n###################################################\n\nf:settings a :Form;\n    dc:title "Tab settings";\n    :part f:labelField, f:targetField, f:viewField.\n\n    f:labelField     a :SingleLineTextField;\n         :maxLength 128;\n         :property rdfs:label;\n         :label "Label on tab";\n         :size 40 .\n\n   f:targetField     a :NamedNodeURIField;\n     :maxLength 1024;  # Longer?\n     :property meeting:target;\n     :label "URL of resource";\n     :size 80 .\n\n   f:colorField2     a :ColorField;\n       :label "Tab color";\n #      :default "#ddddcc"^^xsd:color;\n          :property ui:backgroundColor .\n\n   f:viewField     a :SingleLineTextField;\n        :maxLength 128;\n        :property meeting:view;\n        :label "View mode (experts only)";\n        :size 40 .\n\n#\n'},function(t,n,a){'use strict';var r=a(2),o=r.ns,s=r.store;t.exports={icon:r.icons.iconBase+'noun_688606.svg',name:'tabbed',label:function(t){var n=r.store,a=r.ns,o=n.findTypeURIs(t);return a.meeting('Cluster').uri in o?'Tabbed':null},render:function(t,n){var a=n.createElement('div');return s.fetcher.load(t).then(function(){var d=s.anyValue(t,o.meeting('orientation'))||0,l=s.the(t,o.meeting('predicate')),c={dom:n,subject:t};c.predicate=s.any(t,o.meeting('predicate'))||o.meeting('toolList'),c.ordered=!0,c.orientation=s.anyValue(t,o.meeting('orientation'))||0,c.renderMain=function(t,a){t.innerHTML='';var o=t.appendChild(n.createElement('table'));r.outline.GotoSubject(a,!0,null,!1,void 0,o)},c.renderTab=function(t,a){t.appendChild(r.widgets.personTR(n,l,a,{}))},c.backgroundColor=s.anyValue(t,o.ui('backgroundColor'))||'#ddddcc';a.appendChild(r.tabs.tabWidget(c))}),a}}},function(t,n,a){'use strict';var r=a(2),o=r.rdf,s=r.ns,d=[s.sched('No'),s.sched('Maybe'),s.sched('Yes')];t.exports={icon:r.icons.iconBase+'noun_346777.svg',name:'schedule',label:function(n){var a=r.store,o=a.findTypeURIs(n);return o['http://www.w3.org/ns/pim/schedule#SchedulableEvent']?'Scheduling poll':null},mintClass:s.sched('SchedulableEvent'),mintNew:function(t){return new Promise(function(n,a){var s=r.ns,d=r.store,l=t.newBase,c=t.useExisting||o.sym(t.newBase+'index.ttl#this'),u=function(t,n){t||(console.log('Error in Schedule Pane: Error constructing new scheduler: '+n),a(new Error(n)))},m=function(t,n,d){var l=o.graph(),c=o.Namespace('http://www.w3.org/ns/auth/acl#'),u=l.sym(n+'#a1'),a=l.sym(n),f=l.sym(t);return l.add(u,r.ns.rdf('type'),c('Authorization'),a),l.add(u,c('accessTo'),f,a),l.add(u,c('agent'),y,a),l.add(u,c('mode'),c('Read'),a),l.add(u,c('mode'),c('Write'),a),l.add(u,c('mode'),c('Control'),a),u=l.sym(n+'#a2'),l.add(u,r.ns.rdf('type'),c('Authorization'),a),l.add(u,c('accessTo'),f,a),l.add(u,c('agentClass'),s.foaf('Agent'),a),l.add(u,c('mode'),c('Read'),a),d&&l.add(u,c('mode'),c('Write'),a),o.serialize(a,l,n,'text/turtle')},h=function(t,n,a){var r=d.any(d.sym(t),d.sym('http://www.iana.org/assignments/link-relations/acl'));if(r){var o=m(t,r.uri,n);return g.webOperation('PUT',r.uri,{data:o,contentType:'text/turtle'}).then(function(){return a(!0)}).catch(function(t){a(!1,t.message)})}return g.load(t).catch(function(t){a(!1,'Getting headers for ACL: '+t)}).then(function(){var a=d.any(d.sym(t),d.sym('http://www.iana.org/assignments/link-relations/acl'));if(!a)throw new Error('No Link rel=ACL header for '+t);var r=m(t,a.uri,n);return g.webOperation('PUT',a.uri,{data:r,contentType:'text/turtle'})}).then(function(){return a(!0)}).catch(function(t){a(!1,t.message)})},g=d.fetcher,b=d.updater,y=r.authn.currentUser();if(!y)return console.log('MUST BE LOGGED IN'),void alert('NOT LOGGED IN');var v=c.dir().uri,w,x;if(!t.useExisting)w=d.sym(l+'details.ttl'),x=d.sym(w.uri+'#event');else if(x=t.useExisting,l=c.dir().uri,w=x.doc(),t.newBase)throw new Error('mint new scheduler: Illegal - have both new base and existing event');for(var _=d.sym(l+'results.ttl'),k=t.noIndexHTML?{}:[{local:'index.html',contentType:'text/html'}],C=[],T=0;T<k.length;T++){var f=k[T],E=function(t){C.push(function(){var n=l+t.local;console.log('Copying '+v+t.local+' to '+n);var a=function(){h(n,!1,function(t,a){t?C.shift()():(u(t,'FAILED to set ACL '+n+' : '+a),console.log('FAILED to set ACL '+n+' : '+a))})};d.fetcher.webCopy(v+t.local,l+t.local,t.contentType).then(function(){return r.authn.checkUser()}).then(function(t){y=t,a()}).catch(function(n){console.log('FAILED to copy '+v+t.local+' : '+n.message),u(!1,'FAILED to copy '+v+t.local+' : '+n.message)})})};E(f)}C.push(function(){d.add(x,s.rdf('type'),s.sched('SchedulableEvent'),w),y&&d.add(x,s.dc('author'),y,w),d.add(x,s.dc('created'),new Date,w),d.add(x,s.sched('resultsDocument'),w),b.put(w,d.statementsMatching(void 0,void 0,void 0,w),'text/turtle',function(t,n,a){n?C.shift()():(u(n,'FAILED to save new scheduler at: '+w+' : '+a),console.log('FAILED to save new scheduler at: '+w+' : '+a))})}),C.push(function(){d.fetcher.webOperation('PUT',_.uri,{data:'',contentType:'text/turtle'}).then(function(){C.shift()()}).catch(function(t){u(!1,'Failed to initialize empty results file: '+t.message)})}),C.push(function(){h(_.uri,!0,function(t,n){u(t,'Failed to set Read-Write ACL on results file: '+n),t&&C.shift()()})}),C.push(function(){h(w.uri,!1,function(t,n){u(t,'Failed to set read ACL on configuration file: '+n),t&&C.shift()()})}),C.push(function(){console.log('Finished minting new scheduler'),n(t)}),C.shift()()})},render:function(t,n){var a=r.store,s=r.ns,d=t,l='app-when-can-we.w3.org',c=r.store.fetcher,u=a.updater,f=!1,m=o.Namespace('http://www.w3.org/2002/12/cal/ical#'),h=t,g=t.doc(),b=g.dir(),y=b.uri,v=o.sym(y+'results.ttl'),w='https://linkeddata.github.io/solid-app-set/schedule/formsForSchedule.ttl',x=a.sym(w+'#form1'),_=a.sym(w+'#form2'),k=a.sym(w+'#form3'),C='background-color: #eef; padding: 0.5em;  border: .5em solid white;',T=function(t,a){t||q.appendChild(r.widgets.errorMessageBlock(n,a,'pink'))},E=function(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},S=function(t,n){var o=a.any(n,r.ns.ui('backgroundColor'));o&&t.setAttribute('style','padding: 0.3em; text-align: center; background-color: '+o+';')},A;r.authn.checkUser().then(function(t){A=t,H&&H.refresh(),t&&f&&(f=!1,O())}),console.log('me: '+A);var I=function(){var t=r.authn.newAppInstance(n,{noun:'scheduler'},N);return t.firstChild.setAttribute('style',C),t},N=function(t){var n=a.any(t,s.space('uriPrefix'));n=n?n.value:t.uri.split('#')[0],'/'!==n.slice(-1)&&(o.log.error(l+': No / at end of uriPrefix '+n),n+='/');var r=new Date;n+=l+'/id'+r.getTime()+'/',j(h,n)},j=function(t,a){var r={thisInstance:t,newBase:a};this.mintNew(r).then(function(t){var a=q.appendChild(n.createElement('p'));a.setAttribute('style','font-size: 140%;'),a.innerHTML='Your <a href=\''+t.newInstance.uri+'\'><b>new scheduler</b></a> is ready to be set up. <br/><br/><a href=\''+t.newInstance.uri+'\'>Say when you what days work for you.</a>'}).catch(function(t){T(!1,'Error createing new scheduler at '+r.newInstance+': '+t)})},R=function(){console.log('getDetails()'),c.nowOrWhenFetched(g.uri,void 0,function(t,n){return console.log('getDetails() ok? '+t),t?void O():T(t,n)})},L=function(){var t=window.addEventListener?'addEventListener':'attachEvent',n=window[t],a='attachEvent'==t?'onmessage':'message';n(a,function(t){if('User:'===t.data.slice(0,5)){var n=t.data.slice(5,t.data.length);'http'===n.slice(0,4)&&setUser(n)}},!1)},O=function(){console.log('showAppropriateDisplay()'),r.authn.checkUser().then(function(n){if(!n)return P();if(!r.store.updater.editable(g.uri,a)||a.holds(t,s.rdf('type'),s.wf('TemplateInstance')))return void M(q);var o=a.any(t,s.sched('ready'));o?B():D()})},P=function(){var t=E(V),n=window&&window.location?window.location.origin:'';t.innerHTML='<p style="font-size: 120%; background-color: #ffe; padding: 2em; margin: 1em; border-radius: 1em;">You need to be logged in.<br />To be able to use this app you need to log in with webid account at a storage provider.</p> <iframe class="text-center" src="https://solid.github.io/solid-idps/?origin='+n+'" style="margin-left: 1em; margin-right: 1em; width: 95%; height: 40em;"  sandbox="allow-same-origin allow-scripts allow-forms" frameborder="0"></iframe>',L(),f=!0},M=function(){var t=E(V);t.appendChild(r.authn.newAppInstance(n,{noun:'poll'},N)),t.appendChild(n.createElement('hr'));var a=t.appendChild(n.createElement('p'));a.textContent='Where would you like to store the data for the poll?  Give the URL of the directory where you would like the data stored.';var o=t.appendChild(n.createElement('input'));o.setAttribute('type','text'),o.size=80,o.label='base URL',o.autocomplete='on',t.appendChild(n.createElement('br'));var s=t.appendChild(n.createElement('button'));s.setAttribute('style',C),s.textContent='Start new poll at this URI',s.addEventListener('click',function(){var t=o.value;'/'!==t.slice(-1)&&(t+='/'),j(h,t)})},D=function(){var d=0,l=!1,c=[x,_,k],u=[];d=0;for(var m=0,f;m<c.length;m++)f=n.createElement('div'),r.widgets.appendForm(document,f,{},t,c[m],g,T),u.push(f);var h=function(){E(V).appendChild(u[d]),0==d?b.setAttribute('disabled',''):b.removeAttribute('disabled'),d==u.length-1?(w.setAttribute('disabled',''),!l&&(J.appendChild(I),J.appendChild(A),l=!0)):w.removeAttribute('disabled')},b=E(K).appendChild(n.createElement('button'));b.setAttribute('style',C),b.textContent='<- go back',b.addEventListener('click',function(){0<d&&(d-=1,h())},!1);var w=E(X).appendChild(n.createElement('button'));w.setAttribute('style',C),w.textContent='continue ->',w.addEventListener('click',function(){d<u.length-1&&(d+=1,h())},!1),h();var S=[o.st(t,s.sched('availabilityOptions'),s.sched('YesNoMaybe'),g),o.st(t,s.sched('ready'),new Date,g),o.st(t,s.sched('results'),v,g)],A=n.createElement('button');A.setAttribute('style',C),A.textContent='Go to poll',A.addEventListener('click',function(){a.any(t,s.sched('ready'))?(B(),X.appendChild(I)):(X.appendChild(I),r.store.updater.update([],S,function(t,n,a){n?B():T(n,a)}))},!1);var I=n.createElement('button');I.setAttribute('style',C);var N=I.appendChild(n.createElement('img'));N.setAttribute('src',r.icons.iconBase+'noun_480183.svg'),I.textContent='email invitations',I.addEventListener('click',function(){var n=''+(a.any(t,s.dc('title'))||''),r='mailto:'+a.each(t,s.sched('invitee')).map(function(t){var n=a.any(t,s.foaf('mbox'));return n?''+n:''}).join(',')+'?subject='+encodeURIComponent(n+'-- When can we meet?')+'&body='+encodeURIComponent(n+'\n\nWhen can you?\n\nSee '+y+'index.html\n');console.log('Mail: '+r),window.location.href=r},!1)},B=function(){c.nowOrWhenFetched(v.uri,function(t,n,a){t?(E(V),U()):404===a.status?(console.log('Initializing details file '+v),u.put(v,[],'text/turtle',function(t,n,a){n?(E(V),U()):(T(n,'FAILED to create results file at: '+v.uri+' : '+a),console.log('FAILED to craete results file at: '+v.uri+' : '+a))})):T(t,'FAILED to read results file: '+n)})},U=function(){var l=a.any(d,s.dc('title')),c=a.any(d,s.rdfs('comment')),u=a.any(d,m('location')),f=V;l&&(f.appendChild(n.createElement('h3')).textContent=l),u&&(f.appendChild(n.createElement('address')).textContent=u.value),c&&(f.appendChild(n.createElement('p')).textContent=c.value);var h=a.any(d,s.dc('author'));if(h){var g=a.any(h,s.foaf('name'));g&&(f.appendChild(n.createElement('p')).textContent=g)}var b=new o.Query('Responses'),y={};['time','author','value','resp','cell'].map(function(t){b.vars.push(y[t]=o.variable(t))}),b.pat.add(d,s.sched('response'),y.resp),b.pat.add(y.resp,s.dc('author'),y.author),b.pat.add(y.resp,s.sched('cell'),y.cell),b.pat.add(y.cell,s.sched('availabilty'),y.value),b.pat.add(y.cell,m('dtstart'),y.time);var w={};w.set_x=a.each(t,s.sched('option')),w.set_x=w.set_x.map(function(t){return a.any(t,m('dtstart'))}),w.set_y=a.each(t,s.sched('response')),w.set_y=w.set_y.map(function(t){return a.any(t,s.dc('author'))});var x=a.each(d,s.sched('option')).map(function(t){return a.any(t,m('dtstart'))}),_=function(){var a=f.appendChild(r.matrix.matrixForQuery(n,b,y.time,y.author,y.value,w,function(){}));a.setAttribute('class','matrix');var o=n.createElement('button');o.setAttribute('style',C),o.textContent='refresh',o.addEventListener('click',function(){o.disabled=!0,r.store.fetcher.nowOrWhenFetched(t.doc(),void 0,function(t,n){t?(a.refresh(),o.disabled=!1):console.log('Cant refresh matrix'+n)})},!1),E(J),J.appendChild(o)},k=[SCHED('No'),SCHED('Maybe'),SCHED('Yes')],A=r.authn.currentUser(),N=[];if(A){var R=v;w.set_y=w.set_y.filter(function(t){return!t.sameTerm(A)}),w.set_y.push(A),w.cellFunction=function(t,o,d,l){if(null!==l&&a.fetcher.nowOrWhenFetched(l.uri.split('#')[0],void 0,function(){S(t,l)}),d.sameTerm(A)){var c=function(){S(t,l)},u=s.sched('availabilty'),f=N[o.toNT()],m=r.widgets.makeSelectForOptions(n,a,f,u,k,{},v,c);t.appendChild(m)}else null!==l&&(t.textContent=r.utils.label(l))};var L=a.each(d,s.sched('response')),O=null;L.map(function(t){a.holds(t,s.dc('author'),A)&&(O=t)});var P=[],M=r.widgets.newThing(R).uri;if(null===O)O=o.sym(M+'_response'),P.push(o.st(d,s.sched('response'),O,R)),P.push(o.st(O,s.dc('author'),A,R));else{var B=a.each(O,s.sched('cell'));B.map(function(t){var n=a.any(t,m('dtstart'));N[n.toNT()]=t})}for(var U=0;U<x.length;U++)if(!N[x[U].toNT()]){var j=o.sym(M+'_'+U);P.push(o.st(O,s.sched('cell'),j,R)),P.push(o.st(j,m('dtstart'),x[U],R)),N[x[U].toNT()]=j}P.length?r.store.updater.update([],P,function(t,n,a){n?_():T(n,a)}):_()}else;var q=a.any(t,s.dc('author'));if(!q||q.sameTerm(A)){var F=n.createElement('button');F.setAttribute('style',C),F.textContent='(Modify the poll)',F.addEventListener('click',function(){E(f),D()},!1),E(K),K.appendChild(F)}E(X),X.appendChild(I())},q=n.createElement('div'),F=q.appendChild(n.createElement('table'));F.setAttribute('style','background-color: white; min-width: 40em; min-height: 13em;');var z=F.appendChild(n.createElement('tr'));z.appendChild(n.createElement('td')),z.appendChild(n.createElement('td')),z.appendChild(n.createElement('td'));var H=null,W=F.appendChild(n.createElement('tr')),V=W.appendChild(n.createElement('td'));V.setAttribute('colspan','3');var G=F.appendChild(n.createElement('tr'));G.setAttribute('class','naviMenu'),G.setAttribute('style',' text-align: middle; vertical-align: middle; padding-top: 4em; ');var K=G.appendChild(n.createElement('td')),J=G.appendChild(n.createElement('td')),X=G.appendChild(n.createElement('td'));return function(){console.log('getforms()'),c.nowOrWhenFetched(w,void 0,function(t,n){return console.log('getforms() ok? '+t),t?void R():T(t,n)})}(),q}}},function(t,n,a){'use strict';var r=a(2),o=r.ns,s=r.store,d=o.wf('attachment');t.exports={icon:r.icons.iconBase+'noun_160581.svg',name:'link',label:function(t){var n=s.any(t,o.meeting('target'))||t,a=s.each(n,d).length;return 0<a?r.utils.label(d)+' '+a:null},mintNew:function(t){return new Promise(function(n){n(t)})},render:function(t,n){var a=s.any(t,o.meeting('target'))||t;createNewRow=function(t){return r.widgets.personTR(n,d,t,{})};var l=n.createElement('div'),c=l.appendChild(n.createElement('table')),u=function(){var t=s.each(a,d);r.utils.syncTableToArray(c,t,createNewRow)};return l.refresh=u,u(),l}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_62007.svg',name:'travel expenses',label:function(n){var a=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),o=r.store,s=o.findTypeURIs(n);return r.ns.qu('Transaction')in o.findSuperClassesNT(n)?'by Trip':s['http://www.w3.org/ns/pim/trip#Trip']?'Trip $':null},render:function(n,a){var o=r.store,s=r.ns,d=$rdf.Namespace('http://www.w3.org/2002/12/cal/ical#'),l=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),c=$rdf.Namespace('http://purl.org/dc/elements/1.1/'),u=$rdf.Namespace('http://purl.org/dc/terms/'),f=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),m=$rdf.Namespace('http://www.w3.org/ns/pim/trip#'),h=a.createElement('div');h.setAttribute('class','transactionPane'),h.innerHTML='<h2>Trip transactions</h2>';var g=function(t,n){n==void 0&&(n='color: grey');var r=a.createElement('pre');r.setAttribute('style',n),h.appendChild(r),r.appendChild(a.createTextNode(t))},b=this,y=o.statementsMatching(n),v=o.statementsMatching(void 0,void 0,n),w=o.findTypeURIs(n),t=r.authn.currentUser(),x=function(t,n){var d=new $rdf.Query(r.utils.label(t)),l={};['date','transaction','comment','type','in_USD'].map(function(t){d.vars.push(l[t]=$rdf.variable(t))}),d.pat.add(l.transaction,m('trip'),t);var c=o.formula();c.add(l.transaction,s.rdf('type'),l.type),d.pat.optional.push(c),d.pat.add(l.transaction,r.ns.qu('date'),l.date);var c=o.formula();c.add(l.transaction,s.rdfs('comment'),l.comment),d.pat.optional.push(c),d.pat.add(l.transaction,r.ns.qu('in_USD'),l.in_USD);var u=r.table(a,{query:d,onDone:function(){var n={},a=o.each(void 0,m('trip'),t);a.map(function(a){var t=o.the(a,s.rdf('type'));if(t||(t=r.ns.qu('ErrorNoType')),t&&t.uri){var d=t.uri;n[d]||(n[d]=0);var l=o.any(a,r.ns.qu('in_USD'));l||g('    @@ No amount in USD: '+l+' for '+a),l&&(n[d]+=parseFloat(l.value))}});var d='',l=0,c=0;for(var u in n)d+=r.utils.label(o.sym(u))+': '+n[u]+'; ',l++,c+=n[u];g('Totals of '+a.length+' transactions: '+d,''),1<l&&g('Overall net: '+c,'text-treatment: bold;')}});n.appendChild(u)};if(r.ns.qu('Transaction')in o.findSuperClassesNT(n)){ts=o.each(void 0,s.rdf('type'),n);for(var _=[],k=[],C=0;C<ts.length;C++){var T=ts[C],E=o.any(T,m('trip'));if(!E)_.push(T);else{T in k||(k[E]={total:0,transactions:[]});var S=o.any(T,r.ns.qu('in_USD'));S&&(k[E].total+=S);var A=o.any(T,r.ns.qu('date'));k[E.toNT()].transactions.push([A,T])}}var I=[];for(var N in k){var R=o.fromNT(N);I.push([o.any(R,d('dtstart')),R])}I.sort();for(var L=0,j;L<I.length;L++)j=I[L][1],x(j,h)}else w['http://www.w3.org/ns/pim/trip#Trip']&&x(n,h);return h}}},function(t,n,a){'use strict';var r=a(2),o=r.rdf.Namespace('http://dig.csail.mit.edu/TAMI/2007/amord/air#'),s=r.rdf.Namespace('http://dig.csail.mit.edu/TAMI/2007/amord/tms#'),d=o('compliant-with'),l=o('non-compliant-with'),c=s('antecedent-expr'),u=s('justification'),f=s('sub-expr'),m=s('description'),h=s('rule-name'),g=s('premise'),b=o('instanceOf'),y=[],v=t.exports={};v.name='air',v.icon=r.icons.originalIconBase+'1pt5a.gif',v.label=function(t){y=[];for(var n=r.store.statementsMatching(void 0,u,void 0,t),a=null,o=0;o<n.length;o++)if('Graph'==n[o].subject.termType&&n[o].object!=g.toString()){var s=n[o].subject.statements;if(1!=s.length)throw new Error('There should be only ONE statement indicating some event is (non-)compliant with some policy!');if(s[0].predicate.toString()==d.toString()){var c=r.utils.label(s[0].subject)+' is compliant with '+r.utils.label(s[0].object),f=[];f.push(s[0].object),f.push(d.toString()),f.push(c),y.push(f)}if(s[0].predicate.toString()==l.toString()){var m=r.utils.label(s[0].subject)+' is non compliant with '+r.utils.label(s[0].object),h=[];h.push(s[0].object),h.push(l.toString()),h.push(m),y.push(h)}a='Justify'}return a},v.render=function(t,n){var a=r.panes.dataContentPane.statementsAsTables,s=n.createElement('div'),w=r.widgets.extractLogURI(n.location.toString());s.setAttribute('class','dataContentPane'),s.setAttribute('id','dataContentPane');var x=n.createElement('select'),_=n.createElement('div');_.setAttribute('id','outcome'),v.render.showSelected=function(){if(null!=n.getElementById('outcome')&&(n.getElementById('outcome').innerHTML=''),v.render.showSelected.hide=function(){null!=n.getElementById('outcome')&&(n.getElementById('outcome').innerHTML='');var t=n.getElementById('dataContentPane'),a=n.getElementById('justification'),r=n.getElementById('hide'),s=n.getElementById('more'),d=n.getElementById('outcome'),o=n.getElementById('whyButton');null!=t&&null!=s&&t.removeChild(s),null!=t&&null!=a&&null!=r&&(t.removeChild(a),t.removeChild(r)),null!=t&&null!=d&&t.removeChild(d),null!=t&&null!=o&&t.removeChild(o)},v.render.showSelected.hide(),0!=this.selectedIndex){selected=y[this.selectedIndex-1];for(var w=r.store.statementsMatching(void 0,u,void 0,t),x=0;x<w.length;x++)if('Graph'==w[x].subject.termType&&w[x].object!=g.toString()&&w[x].subject.statements[0].object.toString()==selected[0].toString()){var k=w[x].subject.statements[0],C;selected[1].toString()==l.toString()?(_.setAttribute('class','nonCompliantPane'),_.setAttribute('style','border-top: solid 1px red; border-left: solid 1px red; border-bottom: solid 1px red; border-right: solid 1px red; padding: 0.5em; background-color: #fbf0f7; margin-top: 0.5em; margin-bottom: 0.5em; border-radius: 1em;')):selected[1].toString()==d.toString()?(_.setAttribute('class','compliantPane'),_.setAttribute('style','border-top: solid 1px green; border-left: solid 1px green; border-bottom: solid 1px green;border-right: solid 1px green;padding: 0.5em; background-color: #def8e0;margin-top: 0.5em; margin-bottom: 0.5em;border-radius: 1em;')):alert('something went terribly wrong');var T=n.createElement('table'),E=n.createElement('tr'),S=n.createElement('td'),A=n.createElement('a');A.setAttribute('href',k.subject.uri),A.appendChild(n.createTextNode(r.utils.label(k.subject))),S.appendChild(A),E.appendChild(S);var I=n.createElement('td');I.appendChild(n.createTextNode(' is ')),E.appendChild(I);var N=n.createElement('td'),j=n.createElement('a');j.setAttribute('href',k.predicate.uri),j.appendChild(n.createTextNode(r.utils.label(k.predicate))),N.appendChild(j),E.appendChild(N);var R=n.createElement('td'),L=n.createElement('a');L.setAttribute('href',k.object.uri),L.appendChild(n.createTextNode(r.utils.label(k.object))),R.appendChild(L),E.appendChild(R),T.appendChild(E),_.appendChild(T),s.appendChild(_),v.render.showSelected.addInitialButtons=function(){if(null==n.getElementById('whyButton')){var t=n.createElement('input');t.setAttribute('type','button'),t.setAttribute('id','whyButton'),t.setAttribute('value','Why?'),s.appendChild(t),t.addEventListener('click',v.render.showSelected.because,!1)}s.appendChild(n.createTextNode('   '))},v.render.showSelected.because=function(){var y=o('closed-world-assumption'),x=r.store.statementsMatching(void 0,y,void 0,t),_=n.getElementById('whyButton'),T=n.getElementById('dataContentPane');null!=T&&null!=_&&T.removeChild(_),v.render.showSelected.because.displayDesc=function(t){for(var a=0;a<t.elements.length;a++)if(dump(t.elements[a]),dump('\n'),'NamedNode'==t.elements[a].termType){var o=n.createElement('a');o.setAttribute('href',t.elements[a].uri),o.appendChild(n.createTextNode(r.utils.label(t.elements[a]))),A.appendChild(o)}else'Literal'==t.elements[a].termType?void 0!=t.elements[a].value&&A.appendChild(n.createTextNode(t.elements[a].value)):'Graph'==t.elements[a].termType&&A.appendChild(n.createTextNode(t.elements[a]))},v.render.showSelected.because.moreInfo=function(o){var s=r.store.statementsMatching(o,u,g,t);if(void 0!=s[0])I.appendChild(n.createElement('br')),I.appendChild(n.createElement('br')),I.appendChild(n.createTextNode('No more information available from the reasoner!')),I.appendChild(n.createElement('br')),I.appendChild(n.createElement('br'));else{for(var d=r.store.statementsMatching(void 0,void 0,o,t),l=r.store.statementsMatching(void 0,void 0,d[0].object),y=0;y<l.length;y++)if(l[y].predicate==b.toString())for(var w=r.store.statementsMatching(l[y].subject,void 0,void 0,t),x=0;x<w.length;x++)w[x].predicate==m.toString()&&'Collection'==w[x].object.termType&&(A.appendChild(n.createElement('br')),v.render.showSelected.because.displayDesc(w[x].object),A.appendChild(n.createElement('br')),A.appendChild(n.createElement('br')));correctCurrentRule='';for(var y=0;y<d.length;y++)if('BlankNode'==d[y].subject.termType){correctCurrentRule=d[y].subject;break}var _=r.store.statementsMatching(correctCurrentRule,u,void 0,t),k=r.store.statementsMatching(_[0].object,h,void 0,t);C=k[0].object;for(var T=r.store.statementsMatching(_[0].object,c,void 0,t),E=r.store.statementsMatching(T[0].object,f,void 0,t),S=!1,N=!1,y=0;y<E.length;y++)'Graph'==E[y].object.termType?(I.appendChild(a(E[y].object.statements,n)),S=!0):'BlankNode'==E[y].object.termType&&(N=!0);N&&(I.appendChild(n.createElement('br')),I.appendChild(n.createTextNode('  No premises applicable.')),I.appendChild(n.createElement('br')),I.appendChild(n.createElement('br')))}},v.render.showSelected.because.justify=function(){n.getElementById('premises').innerHTML='',v.render.showSelected.because.moreInfo(C),S.appendChild(I),s.appendChild(S)};var d=n.createElement('input');d.setAttribute('type','button'),d.setAttribute('id','more'),d.setAttribute('value','More Information'),d.addEventListener('click',v.render.showSelected.because.justify,!1),s.appendChild(d),s.appendChild(n.createTextNode('   ')),s.appendChild(n.createTextNode('   '));var E=n.createElement('input');E.setAttribute('type','button'),E.setAttribute('id','hide'),E.setAttribute('value','Start Over'),s.appendChild(E),E.addEventListener('click',v.render.showSelected.hide,!1);var S=n.createElement('div');S.setAttribute('class','justification'),S.setAttribute('id','justification'),S.appendChild(n.createElement('br'));var A=n.createElement('div');A.setAttribute('class','description'),A.setAttribute('id','description');var I=n.createElement('div');I.setAttribute('class','premises'),I.setAttribute('id','premises');for(var N=r.store.statementsMatching(void 0,m,void 0,t),R=0,j;R<N.length;R++)'Graph'==N[R].subject.termType&&'Collection'==N[R].object.termType&&N[R].subject.statements[0].object.toString()==selected[0].toString()&&(A.appendChild(n.createElement('br')),v.render.showSelected.because.displayDesc(N[R].object),A.appendChild(n.createElement('br')),A.appendChild(n.createElement('br'))),S.appendChild(A);S.appendChild(n.createElement('br')),S.appendChild(n.createElement('br')),S.appendChild(n.createElement('b').appendChild(n.createTextNode('Premises:'))),S.appendChild(n.createElement('br')),S.appendChild(n.createElement('br'));for(var R=0;R<w.length;R++)if('Graph'==w[R].subject.termType&&'BlankNode'==w[R].object.termType){var L=r.store.statementsMatching(w[R].object,h,void 0,t);C=L[0].object;for(var O=r.store.statementsMatching(w[R].object,c,void 0,t),P=0,k;P<O.length;P++){k=r.store.statementsMatching(O[P].object,void 0,void 0,t);for(var M=0;M<k.length;M++)'BlankNode'==k[M].subject.termType&&'Graph'==k[M].object.termType&&(j=k,I.appendChild(n.createElement('br')),I.appendChild(a(k[M].object.statements,n)),I.appendChild(n.createElement('br')))}}S.appendChild(I),s.appendChild(S)},v.render.showSelected.addInitialButtons()}}};var k=n.createElement('option'),C=n.createTextNode(' ');k.appendChild(C),x.appendChild(k);for(var T=0;T<y.length;T++){var E=n.createElement('option'),S=n.createTextNode(y[T][2]);E.appendChild(S),x.appendChild(E)}return s.appendChild(x),x.addEventListener('change',v.render.showSelected,!1),s.appendChild(n.createElement('br')),s.appendChild(n.createElement('br')),s},v.renderReasonsForStatement=function(t,n){var a=myDocument.createElement('div');a.setAttribute('class','description');var o=r.store.statementsMatching(t,u);if(1<o.length)for(var s=0,d;s<o.length;s++)d=n.appendChild(document.createElement('h3')),d.textContent='Reason '+(s+1+''),+':',v.render.because.displayDesc(o[s].object,a),n.appendChild(a),a=a.cloneNode(!1);else v.render.because.displayDesc(o[0].object,a),n.appendChild(a)},v.renderExplanationForStatement=function(t){var n=myDocument.createElement('div'),a=r.store.statementsMatching(t,u),s=myDocument.createElement('div'),l,d,y;if(y=a[0].subject.statements[0],void 0!=y){s.setAttribute('class','compliantPane'),s.setAttribute('id','outcome');var w=myDocument.createElement('table'),x=myDocument.createElement('tr'),_=myDocument.createElement('td');_.appendChild(myDocument.createTextNode('The reason ')),x.appendChild(_);var k=myDocument.createElement('td'),C=myDocument.createElement('a');C.setAttribute('href',y.subject.uri),C.appendChild(myDocument.createTextNode(r.utils.label(y.subject))),k.appendChild(C),x.appendChild(k);var T=myDocument.createElement('td'),E=myDocument.createElement('a');E.setAttribute('href',y.predicate.uri),E.appendChild(myDocument.createTextNode(r.utils.label(y.predicate))),T.appendChild(E),x.appendChild(T);var S=myDocument.createElement('td'),A=null;if('Literal'==y.object.termType)A=myDocument.createTextNode(y.object.value);else{var A=myDocument.createElement('a');A.setAttribute('href',y.object.uri),A.appendChild(myDocument.createTextNode(r.utils.label(y.object)))}S.appendChild(A),x.appendChild(S);var I=myDocument.createElement('td');I.appendChild(myDocument.createTextNode(' is because: ')),x.appendChild(I),w.appendChild(x),s.appendChild(w),n.appendChild(s);var N=myDocument.createElement('input');N.setAttribute('type','button'),N.setAttribute('id','hide'),N.setAttribute('value','Start Over')}return v.render.addInitialButtons=function(){var t=myDocument.createElement('input');t.setAttribute('type','button'),t.setAttribute('id','whyButton'),t.setAttribute('value','Why?'),n.appendChild(t),t.addEventListener('click',v.render.because,!1),n.appendChild(myDocument.createTextNode('   '))},v.render.hide=function(){var t=myDocument.getElementById('dataContentPane'),n=myDocument.getElementById('justification'),a=myDocument.getElementById('hide'),r=myDocument.getElementById('more');null!=t&&null!=r&&t.removeChild(r),null!=t&&null!=n&&null!=a&&(t.removeChild(n),t.removeChild(a)),v.render.addInitialButtons()},v.render.because=function(){var a=o('closed-world-assumption'),s=r.store.statementsMatching(void 0,a,void 0,l),y=!1;0<s.length&&(y=!0);var w=myDocument.getElementById('whyButton'),x=myDocument.getElementById('dataContentPane');null!=x&&null!=w&&x.removeChild(w),v.render.because.displayDesc=function(t,n){function a(t,s){for(var d=0;d<t.statements.length;d++){var l=t.statements[d],c=[l.subject,l.predicate,l.object],f=null;if(s){if(f=myDocument.createElement('p'),'NamedNode'==l.subject.termType){var h=Util.uri.docpart(l.subject.uri);0>n.waitingFor.indexOf(h)&&'undefined'==typeof sf.requested[h]&&n.waitingFor.push(h)}if('NamedNode'==l.object.termType){var h=Util.uri.docpart(l.object.uri);0>n.waitingFor.indexOf(h)&&'undefined'==typeof sf.requested[h]&&n.waitingFor.push(h)}}else f=a.current_p;for(var g=0,b;3>g;g++)switch(b=c[g],b.termType){case'Graph':f.appendChild(myDocument.createTextNode('{ ')),a.current_p=f,a(b,!1),f.appendChild(myDocument.createTextNode(' }'));break;case'NamedNode':var y=myDocument.createElement('a');y.setAttribute('href',b.uri),y.appendChild(myDocument.createTextNode(r.utils.label(b))),f.appendChild(y),f.appendChild(myDocument.createTextNode(' '));break;case'Literal':f.appendChild(myDocument.createTextNode(b.value));}if(f.appendChild(myDocument.createTextNode('. ')),s){var w=function(t,n,a){return function(s){if(a.waitingFor.remove(s),r.store.any(n.AJAR_formula,u)){if(a.informationFound=!0,'#text'==n.lastChild.nodeName){var d=n.appendChild(myDocument.createElement('img'));d.src=r.icons.originalIconBase+'tango/22-help-browser.png';var l=function(){v.renderReasonsForStatement(n.AJAR_formula,_)};d.addEventListener('click',l,!1)}return m&&o&&o(),!1}for(var c=0;2>c;c++)for(var f=[t.subject,t.object][c],h=r.store.uris(f),g=0,b;g<h.length;g++)b=Util.uri.docpart(h[g]),'undefined'==typeof sf.requested[b]&&0>a.waitingFor.indexOf(b)&&(a.waitingFor.push(b),sf.lookUpThing(r.store.sym(b)));return 0==a.waitingFor.length?(m&&o&&o(),!1):(m&&o&&o(),!0)}};n.appendChild(f);var x=new r.rdf.IndexedFormula;x.statements.push(l),f.AJAR_formula=x;var k=w(l,f,n);k(),sf.addCallback('done',k),sf.addCallback('fail',k)}}}function o(t){if(n.waitingFor.remove(t),n.informationFound)return m.removeChild(m.firstChild),m.textContent='More information found!',!1;if(0==n.waitingFor.length){return(m.removeChild(m.firstChild),m.textContent='No more information.'),!1}return!0}var s=r.store.the(t,c),d=r.store.each(s,f),l=null;l='Graph'==d[0].termType?d[0]:d[1],n.waitingFor=[],n.informationFound=!1,a(l,!0);var m=myDocument.createElement('p');m.setAttribute('class','ap_premise_loading');var h=m.appendChild(myDocument.createElement('img'));h.src=r.icons.originalIconBase+'loading.png',m.appendChild(myDocument.createTextNode('Looking for more information...')),n.appendChild(m),o();for(var g=0;g<n.waitingFor.length;g++)sf.lookUpThing(r.store.sym(n.waitingFor[g]))},v.render.because.moreInfo=function(t){var n=r.store.statementsMatching(t,u,g,l);if(void 0!=n[0])divPremises.appendChild(myDocument.createElement('br')),divPremises.appendChild(myDocument.createElement('br')),divPremises.appendChild(myDocument.createTextNode('No more information available from the reasoner!')),divPremises.appendChild(myDocument.createElement('br')),divPremises.appendChild(myDocument.createElement('br'));else{for(var a=r.store.statementsMatching(void 0,void 0,t),o=r.store.statementsMatching(void 0,void 0,a[0].object),s=0;s<o.length;s++)if(o[s].predicate==b.toString())for(var y=r.store.statementsMatching(o[s].subject,void 0,void 0,l),w=0;w<y.length;w++)y[w].predicate==m.toString()&&'Collection'==y[w].object.termType&&(k.appendChild(myDocument.createElement('br')),v.render.because.displayDesc(y[w].object),k.appendChild(myDocument.createElement('br')),k.appendChild(myDocument.createElement('br')));var x=r.store.statementsMatching(a[0].subject,u,void 0),_=r.store.statementsMatching(x[0].object,h,void 0);d=_[0].object;for(var C=r.store.statementsMatching(x[0].object,c,void 0),T=r.store.statementsMatching(C[0].object,f,void 0),s=0;s<T.length;s++)'Graph'==T[s].object.termType&&divPremises.appendChild(statementsAsTables(T[s].object.statements,myDocument))}},v.render.because.justify=function(){myDocument.getElementById('premises').innerHTML='',v.render.because.moreInfo(d),_.appendChild(divPremises),n.appendChild(_)};var _=myDocument.createElement('div');_.setAttribute('class','justification'),_.setAttribute('id','justification');var k=myDocument.createElement('div');k.setAttribute('class','description');v.renderReasonsForStatement(t,_),n.appendChild(_)},v.render.because(),n}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.originalIconBase+'tango/22-image-x-generic.png',name:'image',label:function(t){var n=r.store,a=r.ns;if(!n.anyStatementMatching(t,r.ns.rdf('type'),n.sym('http://purl.org/dc/terms/Image')))return null;return function(t,n,a){var r=t.fetcher.getHeader(n,'content-type');if(r)for(var o=0;o<r.length;o++)for(var s=0;s<a.length;s++)if(0<=r[o].indexOf(a[s]))return!0;return!1}(n,t,['application/pdf'])?null:'view'},render:function(t,n){var a=n.createElement('div');a.setAttribute('class','imageView');var r=n.createElement('IMG');r.setAttribute('src',t.uri),r.setAttribute('style','max-width: 100%; max-height: 100%;');var o=n.createElement('TR');return o.appendChild(r),a.appendChild(o),a}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_1619.svg',name:'playlistSlot',label:function(t){var n=r.store;return n.anyStatementMatching(t,r.ns.rdf('type'),n.sym('http://purl.org/ontology/pbo/core#PlaylistSlot'))?'playlist slot':null},render:function(t,n){var a=function(t,o){if(!o)return t;var s=n.createElement('a');return s.setAttribute('href',o),s.appendChild(t),s.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),s},o=function(t){return n.createTextNode(t)},s=r.store,d=s.any(t,$rdf.sym('http://purl.org/ontology/pbo/core#playlist_item')),l=s.any(t,$rdf.sym('http://purl.org/ontology/olo/core#index')),c=d.uri,u=function(t){if(!t)return{html5:!0};var n=t.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-_%]+)/i),a=t.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),r=t.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),o=t.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return n?{youtube:n}:a?{vimeo:a}:r?{dailymotion:r}:o?{vk:o}:void 0}(c),f=n.createElement('div'),m;if(u&&u.youtube?(c=c.replace('watch?v=','embed/'),f.setAttribute('class','imageView'),m=n.createElement('IFRAME'),m.setAttribute('src',c),m.setAttribute('width',560),m.setAttribute('height',315),m.setAttribute('frameborder',0),m.setAttribute('style','max-width: 850px; max-height: 100%;'),m.setAttribute('allowfullscreen','true')):(f.setAttribute('class','imageView'),m=n.createElement('IMG'),m.setAttribute('src',d.value),m.setAttribute('width',560),m.setAttribute('height',315),m.setAttribute('style','max-width: 560; max-height: 315;')),l){for(var h=s.statementsMatching(null,$rdf.sym('http://purl.org/ontology/olo/core#index')),g=[],b=0;b<h.length;b++)h[b]&&g.push(parseInt(h[b].object.value));l=parseInt(l.value);var y=n.createElement('div'),v=g[(g.indexOf(l)-1+g.length)%g.length],w=g[(g.indexOf(l)+1+g.length)%g.length],x=a(o('<<'),t.uri.split('#')[0]+'#'+v);y.appendChild(x);var _=n.createElement('span');_.innerHTML=' Playlist slot : '+l+' ',y.appendChild(_);var k=a(o('>>'),t.uri.split('#')[0]+'#'+w);y.appendChild(k)}var C=n.createElement('TR');return C.appendChild(m),y&&C.appendChild(y),f.appendChild(C),f}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_1619.svg',name:'video',label:function(n){var a=r.store,o=r.ns,s=a.findTypeURIs(n),d=$rdf.Util.mediaTypeClass('video/*').uri.split('*')[0];for(var l in s)if(l.startsWith(d))return'Play video';return null},render:function(t,n){var a=r.store,o=r.ns,s=n.createElement('div'),d=s.appendChild(n.createElement('video'));return d.setAttribute('controls','yes'),d.setAttribute('src',t.uri),d.setAttribute('width','100%'),s}}},function(t,n,a){'use strict';var r=a(2),o=r.ns,s=r.store;t.exports={icon:r.icons.iconBase+'noun_534313.svg',name:'audio',label:function(n){var a=r.store,o=r.ns,s=a.findTypeURIs(n),d=$rdf.Util.mediaTypeClass('audio/*').uri.split('*')[0];for(var l in s)if(l.startsWith(d))return'Play audio';return null},render:function(t,n){var a={autoplay:!1,chain:!0,chainAlbums:!0,loop:!1},r=function(t){var n=t.lastIndexOf('.');if(0>n)return t;var a=t.lastIndexOf('/');return n<a?t:t.slice(0,n)},d=function(t){var n=s.any(void 0,o.ldp('contains'),t);if(!n)return!1;var a=s.each(n,o.ldp('contains'));if(2>a.length)return!1;for(var d=t.uri,l=0,c;l<a.length;l++){if(c=a[l].uri,d.length>c.length&&d.startsWith(r(c)))return!0;if(d.endsWith('.m4a')&&c.endsWith('.mp3')&&r(d)===r(c))return!0}return!1},l=function(t){var n=t.uri.split('/').slice(-3),a=function(t){try{return decodeURIComponent(t)}catch(n){return t}};b.textContent=a(n[0]),y.textContent=a(n[1]),v.textContent=a(r(n[2]))},c=function t(n,r){return new Promise(function(d){if(r=r||0,!a.chain)return d(null);var l=s.any(void 0,o.ldp('contains'),n)||n.dir();return l?void s.fetcher.load(l).then(function(){var c=s.each(l,o.ldp('contains')),u;c.sort();for(var f=0;f<c.length;f++)if(n.uri===c[f].uri)if(u=(f+1)%c.length,0===u){if(!a.chainAlbums)return a.loop?d(c[u]):d(null);if(1===r||!a.chainAlbums)return d(null);t(l,r+1).then(function(t){t&&s.fetcher.load(t).then(function(){var n=s.each(t,o.ldp('contains'));return 0===n.length?d(null):(n.sort(),console.log('New Album: '+t),d(n[0]))})})}else return d(c[u])}):d(null)})},u=function(t){var n=s.sym(t.target.getAttribute('src'));if(a.chain){var r=function n(a){var r=a;c(r).then(function(a){return a?d(a)?void(console.log('Ignoring redundant '+a),n(a)):(console.log('Moving on to '+a),l(a),w.appendChild(f(a,!0)),void w.removeChild(t.target)):void console.log('No successor to '+r)})};r(n)}},f=function(t,a){var r=n.createElement('audio');return r.setAttribute('controls','yes'),r.setAttribute('src',t.uri),a&&r.setAttribute('autoplay','autoplay'),r.addEventListener('ended',u,!1),r},m=n.createElement('div'),h=m.appendChild(n.createElement('table')),g='padding: 0.3em; color:white; background-color: black;',b=h.appendChild(n.createElement('tr'));b.style.cssText=g;var y=h.appendChild(n.createElement('tr'));y.style.cssText=g;var v=h.appendChild(n.createElement('tr'));v.style.cssText=g;var w=h.appendChild(n.createElement('tr'));return l(t),w.appendChild(f(t,a.autoplay)),!s.holds(void 0,o.ldp('contains'),t)&&t.dir()&&s.fetcher.load(t.dir()),m}}},function(t,n,a){'use strict';var r=a(2),o=a(473);t.exports={icon:r.icons.iconBase+'dokieli-logo.png',name:'Dokieli',mintClass:r.ns.solid('DokieliDocument'),label:function(n,a){if(tabulator.isExtension&&a.location==n.uri)return null;var o=r.store,s=r.ns,d=['text/html','application/xhtml+xml'];if(!n.uri)return null;var l=o.findTypeURIs(n);return l[s.link('WebPage').uri]?'view':function(t,n,a){var r=t.fetcher.getHeader(n,'content-type');if(r)for(var o=0;o<r.length;o++)for(var s=0;s<a.length;s++)if(0<=r[o].indexOf(a[s]))return!0;return!1}(o,n,d)||function(a,r,o){for(var s=a.findTypeURIs(n),t=0;t<o.length;t++)if($rdf.Util.mediaTypeClass(o[t]).uri in s)return!0;return!1}(o,n,d)?'Dok':null},mintNew:function(t){var n=r.store,a=n.updater,s=t.newInstance||n.sym(t.newBase);console.log('New dok called with '+s);var d=s.uri;return d.endsWith('/')&&(d+='index.html'),d.endsWith('.html')||(d+='.html'),t.newInstance=s=n.sym(d),console.log('New dok will make: '+s),new Promise(function(a){n.fetcher.webOperation('PUT',s.uri,{data:o,contentType:'text/html'}).then(function(){console.log('new Dokieli document created at '+t.newInstance),a(t)}).catch(function(n){console.log('Error creating dokelili dok at '+t.newInstance+': '+n)})})},render:function(t,n){var a=n.createElement('div'),o=r.store;a.setAttribute('class','docView');var s=n.createElement('IFRAME');s.setAttribute('src',t.uri),s.setAttribute('class','doc');var d=o.fetcher.getHeader(t.doc(),'content-type'),l=d?d[0]:null;l?console.log('humanReadablePane: c-t:'+l):console.log('humanReadablePane: unknown content-type?'),s.setAttribute('style','resize = both; height: 120em; width:80em;');var c=n.createElement('TR');return c.appendChild(s),a.appendChild(c),a}}},function(t){'use strict';t.exports='\n<!DOCTYPE html>\n<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">\n    <head>\n        <meta charset="utf-8" />\n        <title></title>\n        <meta content="width=device-width, initial-scale=1" name="viewport" />\n        <link href="https://dokie.li/media/css/basic.css" media="all" rel="stylesheet" title="Basic" />\n        <link href="https://dokie.li/media/css/do.css" media="all" rel="stylesheet" />\n        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" media="all" rel="stylesheet" />\n        <script src="https://dokie.li/scripts/simplerdf.js"></script>\n        <script src="https://dokie.li/scripts/medium-editor.min.js"></script>\n        <script src="https://dokie.li/scripts/medium-editor-tables.min.js"></script>\n        <script src="https://dokie.li/scripts/do.js"></script>\n    </head>\n\n    <body about="" prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# owl: http://www.w3.org/2002/07/owl# xsd: http://www.w3.org/2001/XMLSchema# dcterms: http://purl.org/dc/terms/ dctypes: http://purl.org/dc/dcmitype/ foaf: http://xmlns.com/foaf/0.1/ pimspace: http://www.w3.org/ns/pim/space# cc: https://creativecommons.org/ns# skos: http://www.w3.org/2004/02/skos/core# prov: http://www.w3.org/ns/prov# qb: http://purl.org/linked-data/cube# schema: http://schema.org/ void: http://rdfs.org/ns/void# rsa: http://www.w3.org/ns/auth/rsa# cert: http://www.w3.org/ns/auth/cert# wgs: http://www.w3.org/2003/01/geo/wgs84_pos# bibo: http://purl.org/ontology/bibo/ sioc: http://rdfs.org/sioc/ns# doap: http://usefulinc.com/ns/doap# dbr: http://dbpedia.org/resource/ dbp: http://dbpedia.org/property/ sio: http://semanticscience.org/resource/ opmw: http://www.opmw.org/ontology/ deo: http://purl.org/spar/deo/ doco: http://purl.org/spar/doco/ cito: http://purl.org/spar/cito/ fabio: http://purl.org/spar/fabio/ oa: http://www.w3.org/ns/oa# as: https://www.w3.org/ns/activitystreams# ldp: http://www.w3.org/ns/ldp# solid: http://www.w3.org/ns/solid/terms# acl: http://www.w3.org/ns/auth/acl# dio: https://w3id.org/dio#" typeof="schema:CreativeWork sioc:Post prov:Entity">\n        <main>\n            <article about="" typeof="schema:Article">\n\n            </article>\n        </main>\n    </body>\n</html>\n'},function(t,n,a){'use strict';var r=a(2),o=r.ns;t.exports={icon:r.icons.originalIconBase+'tango/22-folder-open.png',name:'folder',mintNew:function(t){var n=r.store,a=t.newInstance||n.sym(t.newBase),o=a.uri;o.endsWith('/')&&(o=o.slice(0,-1)),t.newInstance=n.sym(o+'/');var s=a.dir().uri,d=o.lastIndexOf('/'),l=o.slice(d+1);return n.fetcher.webOperation('PUT',a.uri+'.dummy').then(function(){return console.log('New folder created: '+a.uri),n.fetcher.delete(a.uri+'.dummy')}).then(function(){return console.log('Dummy file deleted : '+a.uri+'.dummy'),n.fetcher.createContainer(s,l)}).then(function(){return console.log('New container created: '+a.uri),t})},label:function(t){var a=r.store,s=a.each(t,o.ldp('contains')).length;return 0<s?'Contents ('+s+')':a.holds(t,o.rdf('type'),o.ldp('Container'))?'Container (0)':null},render:function(t,n){var a=r.panes.getOutliner(n),s=r.store,d=function(t,a){var r=n.createElement('pre');console.log(t),r.setAttribute('style','background-color: '+a||'#eed;'),l.appendChild(r),r.appendChild(n.createTextNode(t))},l=n.createElement('div'),c;l.setAttribute('class','instancePane'),l.setAttribute('style','  border-top: solid 1px #777; border-bottom: solid 1px #777; margin-top: 0.5em; margin-bottom: 0.5em ');var u=function(t){var n=t.uri.slice(t.dir().uri.length);return!(n.startsWith('.')||n.endsWith('.acl')||n.endsWith('~'))},f=t.uri.endsWith('/')?t.uri:t.uri+'/',m=s.sym(f+'index.ttl#this');if(s.holds(t,o.ldp('contains'),m.doc())){console.log('View of folder with be view of indexThing. Loading '+m);var h=l.appendChild(n.createElement('div'));return h.style.cssText='border-top: 0.2em solid #ccc;',s.fetcher.load(m.doc()).then(function(){c=h.appendChild(n.createElement('table')),r.outline.GotoSubject(m,!0,void 0,!1,void 0,c)}),l}c=l.appendChild(n.createElement('table'));var g=function(){var d=s.each(t,o.ldp('contains')).filter(u);d=d.map(function(t){return[r.utils.label(t).toLowerCase(),t]}),d.sort(),d=d.map(function(t){return t[1]}),r.utils.syncTableToArray(c,d,function(r){var d=s.statementsMatching(t,o.ldp('contains'),r)[0],l=a.VIEWAS_boring_default,c=a.propertyTR(n,d,!1);return c.firstChild.textContent='',c.firstChild.style.cssText+='min-width: 3em;',c.appendChild(a.outline_objectTD(r,l,void 0,d)),c})};c.refresh=g,g();var b=l.appendChild(n.createElement('div')),y=r.authn.currentUser(),v={folder:t,div:b,dom:n,statusArea:b,me:y};v.refreshTarget=c;var w=r.create.newThingUI(v,r.panes);r.aclControl.preventBrowserDropEvents(n);var x=b.firstChild;return r.widgets.makeDropTarget(x,null,function(n){for(var a=0,l;n[a];a++){l=n[a],console.log(' folder: dropped filename: '+l.name+', type: '+(l.type||'n/a')+' size: '+l.size+' bytes, last modified: '+(l.lastModifiedDate?l.lastModifiedDate.toLocaleDateString():'n/a'));var u=new FileReader;u.onload=function(n){return function(a){var l=a.target.result;if(console.log(' File read byteLength : '+l.byteLength),!t.uri.endsWith('/'))return void console.log('FAIL: - folder name should end in /');var u=s.sym(t.uri+n.name);return s.holds(t,o.ldp('contains'),u)?(d('Sorry, '+t.uri+' already has something called '+n.name),void console.log('Drag-drop upload aborted: resource already exists: '+u)):void r.store.fetcher.webOperation('PUT',u,{data:l,contentType:n.type}).then(function(){console.log(' Upload: put OK: '+u),s.add(t,o.ldp('contains'),u,t.doc()),c.refresh()}).catch(function(t){d(' Upload: FAILED '+u+', Error: '+t)})}}(l),u.readAsArrayBuffer(l)}}),l}}},function(t,n,a){'use strict';var r=a(2),o=r.ns;t.exports={icon:r.icons.originalIconBase+'tango/22-folder-open.png',name:'classInstance',label:function(t){var a=r.store,s=a.each(void 0,o.rdf('type'),t).length;return 0<s?'List ('+s+')':null},render:function(t,n){var a=r.panes.getOutliner(n),s=r.store,d=function(t,a){var r=n.createElement('pre');r.setAttribute('style','background-color: '+a||'#eed;'),l.appendChild(r),r.appendChild(n.createTextNode(t))},l=n.createElement('div');l.setAttribute('class','instancePane'),l.setAttribute('style','  border-top: solid 1px #777; border-bottom: solid 1px #777; margin-top: 0.5em; margin-bottom: 0.5em ');var c=s.statementsMatching(void 0,o.rdf('type'),t);if(0<c.length){var u={},f=[];for(var m in c.map(function(t){u[t.subject.toNT()]=t}),s.findMembersNT(t))u[m]||f.push($rdf.st(s.fromNT(m),o.rdf('type'),t));if(f.length&&d('There are '+c.length+' explicit and '+f.length+' implicit members of '+r.utils.label(t)),t.sameTerm(o.rdf('Property')));else if(t.sameTerm(o.rdfs('Class'))){var h=s.statementsMatching(void 0,o.rdf('type'),void 0),g={};h.map(function(t){g[t.object]=t});var b=[];for(var y in g)b.push($rdf.st($rdf.sym(y),o.rdf('type'),o.rdfs('Class')));d('Total of '+h.length+' type statments and '+b.length+' unique types.')}if(10<c.length){var v=n.createElement('TR');v.appendChild(n.createTextNode(''+c.length)),l.appendChild(v)}a.appendPropertyTRs(l,c,!0,function(){return!0}),f.length&&(d('Implcit:'),a.appendPropertyTRs(l,f,!0,function(){return!0}))}return l}}},function(t,n,a){'use strict';var r=a(2),o=a(477);t.exports={icon:r.icons.iconBase+'noun_138712.svg',name:'slideshow',label:function(n){var a=r.store,o=r.ns,s=a.findTypeURIs(n);if(s[o.ldp('Container').uri]||s[o.ldp('BasicContainer').uri]){var t=a.each(n,o.ldp('contains')),d=0;return t.map(function(t){r.widgets.isImage(t)&&d++}),0<d?'Slideshow':null}return null},render:function(n,a){r.widgets.addStyleSheet(a,'https://leemark.github.io/better-simple-slideshow/css/simple-slideshow-styles.css');var s=r.store,d=r.ns,l=a.createElement('div');l.setAttribute('class','bss-slides');var c=s.findTypeURIs(n),t;(c[d.ldp('BasicContainer').uri]||c[d.ldp('Container').uri])&&(t=d.ldp('contains'));var u=s.each(n,t);u.sort();for(var f=0;f<u.length;f++)if(r.widgets.isImage(u[f])){var m=l.appendChild(a.createElement('figure')),h=m.appendChild(a.createElement('img'));h.setAttribute('src',u[f].uri),h.setAttribute('width','100%'),m.appendChild(a.createElement('figcaption'))}var g={dom:a};return setTimeout(function(){o('.bss-slides',g)},1e3),l}}},function(t){'undefined'!=typeof t&&t.exports&&(t.exports=function(t,n){if('undefined'==typeof a)var a=n.dom;var r=a.querySelectorAll(t),o={},s={init:function(t,n){this.counter=0,this.el=t,this.$items=t.querySelectorAll('figure'),this.numItems=this.$items.length,n=n||{},n.auto=n.auto||!1,this.opts={auto:'undefined'!=typeof n.auto&&n.auto,speed:'undefined'==typeof n.auto.speed?1500:n.auto.speed,pauseOnHover:'undefined'!=typeof n.auto.pauseOnHover&&n.auto.pauseOnHover,fullScreen:'undefined'!=typeof n.fullScreen&&n.fullScreen,swipe:'undefined'!=typeof n.swipe&&n.swipe},this.$items[0].classList.add('bss-show'),this.injectControls(t),this.addEventListeners(t),this.opts.auto&&this.autoCycle(this.el,this.opts.speed,this.opts.pauseOnHover),this.opts.fullScreen&&this.addFullScreen(this.el),this.opts.swipe&&this.addSwipe(this.el)},showCurrent:function(t){this.counter=0<t?this.counter+1===this.numItems?0:this.counter+1:0>this.counter-1?this.numItems-1:this.counter-1,[].forEach.call(this.$items,function(t){t.classList.remove('bss-show')}),this.$items[this.counter].classList.add('bss-show')},injectControls:function(t){var n=a.createElement('span'),r=a.createElement('span'),o=a.createDocumentFragment();n.classList.add('bss-prev'),r.classList.add('bss-next'),n.innerHTML='&laquo;',r.innerHTML='&raquo;',o.appendChild(n),o.appendChild(r),t.appendChild(o)},addEventListeners:function(t){var n=this;t.querySelector('.bss-next').addEventListener('click',function(){n.showCurrent(1)},!1),t.querySelector('.bss-prev').addEventListener('click',function(){n.showCurrent(-1)},!1),t.onkeydown=function(t){t=t||window.event,37===t.keyCode?n.showCurrent(-1):39===t.keyCode&&n.showCurrent(1)}},autoCycle:function(t,n,a){var r=this,o=window.setInterval(function(){r.showCurrent(1)},n);a&&(t.addEventListener('mouseover',function(){o=clearInterval(o)},!1),t.addEventListener('mouseout',function(){o=window.setInterval(function(){r.showCurrent(1)},n)},!1))},addFullScreen:function(t){var n=this,r=a.createElement('span');r.classList.add('bss-fullscreen'),t.appendChild(r),t.querySelector('.bss-fullscreen').addEventListener('click',function(){n.toggleFullScreen(t)},!1)},addSwipe:function(t){var n=this,a=new Hammer(t);a.on('swiperight',function(){n.showCurrent(-1)}),a.on('swipeleft',function(){n.showCurrent(1)})},toggleFullScreen:function(t){a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement?a.exitFullscreen?a.exitFullscreen():a.msExitFullscreen?a.msExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitExitFullscreen&&a.webkitExitFullscreen():a.documentElement.requestFullscreen?t.requestFullscreen():a.documentElement.msRequestFullscreen?t.msRequestFullscreen():a.documentElement.mozRequestFullScreen?t.mozRequestFullScreen():a.documentElement.webkitRequestFullscreen&&t.webkitRequestFullscreen(t.ALLOW_KEYBOARD_INPUT)}};[].forEach.call(r,function(t){o=Object.create(s),o.init(t,n)})})},function(t,n,a){'use strict';var o=a(2);t.exports={icon:o.icons.originalIconBase+'foaf/foafTiny.gif',name:'social',label:function(t){return o.store.whether(t,o.ns.rdf('type'),o.ns.foaf('Person'))?'Friends':null},render:function(n,s){var c=function(t,n){for(var a=[],r=0;r<t.length;r++)for(var o=0;o<n.length;o++)if(n[o].sameTerm(t[r])){a.push(n[o]);break}return a},u=function(t){var n=' ';return n+=t||'no',1===t?n+' person':n+' people'},m=function(t){console.log(t);var n=s.createElement('p');n.textContent=t,j.appendChild(n)},h=function(t,n){if(!n)return t;var r=s.createElement('a');return r.setAttribute('href',n),r.appendChild(t),r},g=function(t){return s.createTextNode(t)},b=function(t,n,a){var r=s.createElement('form'),d=s.createElement('input');r.appendChild(d);var l=s.createTextNode(t);l.className='question',r.appendChild(l),d.setAttribute('type','checkbox');return d.checked=a,d.addEventListener('click',function(){if(l.className='pendingedit',this.checked)try{y.UserInput.sparqler.insert_statement(n,function(t,a,r){return l.className='question',a?void v.add(n.subject,n.predicate,n.object,n.why):(o.log.alert(null,'Message','Error occurs while inserting '+n+'\n\n'+r),void(d.checked=!1))})}catch(t){o.log.error('Data write fails:'+t),o.log.alert('Data write fails:'+t),d.checked=!1,l.className='question'}else try{y.UserInput.sparqler.delete_statement(n,function(t,a,r){l.className='question',a?v.removeMany(n.subject,n.predicate,n.object,n.why):(o.log.alert('Error occurs while deleting '+n+'\n\n'+r),this.checked=!0)})}catch(t){return o.log.alert('Delete fails:'+t),void(this.checked=!0)}},!1),r},y=o.panes.getOutliner(s),v=o.store,w=s.createElement('div');w.setAttribute('class','socialPane');var x=o.ns.foaf,_='background-color: #eee; width: 25%; border: 0; padding: 0.5em; margin: 0;',C=w.appendChild(s.createElement('table')),T=C.appendChild(s.createElement('tr')),E=T.appendChild(s.createElement('td')),S=T.appendChild(s.createElement('td')),A=T.appendChild(s.createElement('td')),I=E;I.style.cssText=_;var N=S.appendChild(s.createElement('table'));N.style.cssText='background-color: #fff; color: #000; width: 46%; margin: 0; border-left: 1px solid #ccc; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; padding: 0;';var j=A;j.style.cssText=_;var R=v.any(n,x('img'))||v.any(n,x('depiction'));if(R){var L=s.createElement('IMG');L.setAttribute('src',R.uri),L.style.cssText=' width: 100% ; border: none; margin: 0; padding: 0;',I.appendChild(L)}var O=v.anyValue(n,x('name'))||'???',P=s.createElement('H3');P.appendChild(s.createTextNode(O));var M=o.authn.currentUser(),D=M?M.uri:null,B=o.authn.loginStatusBox(s,function(t){M=v.sym(t),o.widgets.refreshTree(w)});j.appendChild(B);var U=M&&v.sameThings(M,n),q=x('knows'),F=v.anyValue(n,x('givenname'))||v.anyValue(n,x('firstName'))||v.anyValue(n,x('nick'))||v.anyValue(n,x('name'))||v.anyValue(n,vcard('fn')),z=v.each(n,q),H=null,W=!1;if(M){for(var V=v.each(void 0,x('primaryTopic'),M),G='',K=0;K<V.length;K++)if(v.whether(V[K],o.ns.rdf('type'),x('PersonalProfileDocument')))if(W=y.UserInput.sparqler.editable(V[K].uri,v),!W)G+='Your profile <'+o.utils.escapeForXML(V[K].uri)+'> is not remotely editable.';else{H=V[K];break}if(H?(m('Editing your profile '+H+'.'),W=y.UserInput.sparqler.editable(H.uri,v)):m(G+'\nI couldn\'t find your editable personal profile document.'),U);else{P=s.createElement('h3'),P.appendChild(s.createTextNode('You and '+F)),I.appendChild(P);var J=v.canon(M),X=v.whether(n,q,J),Z=!1,Y=v.statementsMatching(J,q,n);Y.length&&(Z=!0,!H&&(H=Y[0].why));var T=s.createElement('tr');I.appendChild(T);var Q=function(){T.appendChild(h(g('You'),D)),T.appendChild(g(' and ')),T.appendChild(h(g(F),n.uri))};if(X?Z?(Q(),T.appendChild(g(' say you know each other.'))):(T.appendChild(h(g(F),n.uri)),T.appendChild(g(' knows ')),T.appendChild(h(g('you'),D)),T.appendChild(g(' (unconfirmed).')),T.appendChild(g(' confirm you know ')),T.appendChild(h(g(F),n.uri)),T.appendChild(g('.'))):Z?(T.appendChild(h(g('You'),D)),T.appendChild(g(' know ')),T.appendChild(h(g(F),n.uri)),T.appendChild(g(' (unconfirmed)'))):(Q(),T.appendChild(g(' have not said you know each other.'))),W){var ee=b('You know '+F,new o.rdf.Statement(M,q,n,H),Z);I.appendChild(ee)}if(z){var f=v.each(M,x('knows'));if(f.length){var te=c(z,f),ne=s.createElement('tr');if(I.appendChild(ne),ne.appendChild(s.createTextNode('You'+(F?' and '+F:'')+' know'+u(te.length)+' found in common')),te)for(var ae=0;ae<te.length;ae++)ne.appendChild(s.createTextNode(',  '+o.utils.label(te[ae])))}var re=s.createElement('tr');I.appendChild(re)}}}var oe=o.widgets.attachmentList(s,n,N,{doc:H,modify:!!W,predicate:x('knows'),noun:'friend'});P=s.createElement('h3'),P.appendChild(s.createTextNode('Basic Information')),I.appendChild(P);for(var ie=[o.ns.foaf('homepage'),o.ns.foaf('weblog'),o.ns.foaf('workplaceHomepage'),o.ns.foaf('schoolHomepage')],se=0;se<ie.length;se++){var de=ie[se],le=v.statementsMatching(n,de);if(0===le.length);else{for(var pe=[],ce=0,ue;ce<le.length;ce++)ue=le[ce],ue.object.uri&&pe.push(ue.object.uri);pe.sort();for(var fe='',he=0,k,ge;he<pe.length;he++)if(ge=pe[he],ge!==fe){fe=ge;var be='';if(k=o.utils.label(de),1<pe.length){var ye=ge.indexOf('//');if(0<ye){var l=ge.indexOf('/',ye+2),r=ge.lastIndexOf('.',l);0<r&&(l=r),be=ge.slice(ye+2,l)}}be&&(k=be+' '+k);var ve=s.createTextNode(k),t=s.createElement('a');t.appendChild(ve),t.setAttribute('href',ge);var a=s.createElement('div');a.style.cssText='width: 80%; background-color: #fff; border: solid 0.05em #ccc;  margin-top: 0.1em; margin-bottom: 0.1em; padding: 0.1em; text-align: center;',a.appendChild(t),I.appendChild(a)}}}for(var d=[o.ns.foaf('openid'),o.ns.foaf('nick')],we=0;we<d.length;we++){var xe=d[we],_e=v.statementsMatching(n,xe);0===_e.length||y.appendPropertyTRs(I,_e,!1,function(){return!0})}return w}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.originalIconBase+'tango/22-text-x-generic.png',name:'humanReadable',label:function(n,a){if(tabulator.isExtension&&a.location==n.uri)return null;var o=r.store,s=r.ns,d=['text/plain','text/html','application/xhtml+xml','image/png','image/jpeg','application/pdf','video/mp4'];if(!n.uri)return null;var l=o.findTypeURIs(n);return l[s.link('WebPage').uri]?'view':function(t,n,a){var r=t.fetcher.getHeader(n,'content-type');if(r)for(var o=0;o<r.length;o++)for(var s=0;s<a.length;s++)if(0<=r[o].indexOf(a[s]))return!0;return!1}(o,n,d)||function(a,r,o){for(var s=a.findTypeURIs(n),t=0;t<o.length;t++)if($rdf.Util.mediaTypeClass(o[t]).uri in s)return!0;return!1}(o,n,d)?'View':null},render:function(t,n){var a=n.createElement('div'),o=r.store;a.setAttribute('class','docView');var s=n.createElement('IFRAME');s.setAttribute('src',t.uri),s.setAttribute('class','doc');var d=o.fetcher.getHeader(t.doc(),'content-type'),l=d?d[0]:null;l?console.log('humanReadablePane: c-t:'+l):console.log('humanReadablePane: unknown content-type?'),s.setAttribute('style','resize = both; height: 120em; width:80em;');var c=n.createElement('TR');return c.appendChild(s),a.appendChild(c),a}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.originalIconBase+'rdf_flyer.24.gif',name:'dataContents',label:function(t){if('http://www.w3.org/2007/ont/link#ProtocolEvent'in r.store.findTypeURIs(t))return null;var a=r.store.statementsMatching(void 0,void 0,void 0,t).length;return 0==a?null:'Data ('+a+')'},statementsAsTables:function(t,n,a){function o(t){var a=n.createElement('table'),o=null,d=m[c.toStr(t)];if(!d)return a.appendChild(n.createTextNode('...')),a;d.sort();for(var l=0,u=0,f;u<d.length;u++){var h=d[u],g=n.createElement('tr');if(h.predicate.uri!=o){o&&1<l&&f.setAttribute('rowspan',''+l),f=n.createElement('td'),f.setAttribute('class','pred');var b=n.createElement('a');b.setAttribute('href',h.predicate.uri),b.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),b.appendChild(n.createTextNode(r.utils.predicateLabelForXML(h.predicate))),f.appendChild(b),g.appendChild(f),o=h.predicate.uri,l=0}l++;var y=n.createElement('td');y.appendChild(s(h.object)),g.appendChild(y),a.appendChild(g)}return o&&1<l&&f.setAttribute('rowspan',''+l),a}function s(t){var a;switch(t.termType){case'NamedNode':var d=n.createElement('a');return d.setAttribute('href',t.uri),d.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),d.appendChild(n.createTextNode(r.utils.label(t))),d;case'Literal':if(!t.datatype||!t.datatype.uri)return a=n.createElement('div'),a.setAttribute('style','white-space: pre-wrap;'),a.textContent=t.value,a;if('http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral'==t.datatype.uri)return a=n.createElement('div'),a.setAttribute('class','embeddedXHTML'),a.innerHTML=t.value,a;;return n.createTextNode(t.value);case'BlankNode':if(t.toNT()in b){y[t.toNT()]=!0;var d=n.createElement('a');return d.setAttribute('href','#'+t.toNT().slice(2)),d.setAttribute('class','bnodeRef'),d.textContent='*'+t.toNT().slice(3),d}b[t.toNT()]=!0;var l=o(t);return b[t.toNT()]=l,l.style.backgroundColor=r.utils.ancestor(l,'TABLE')&&'white'==r.utils.ancestor(l,'TABLE').style.backgroundColor?'#eee':'white',l;case'Collection':var a=n.createElement('table');a.setAttribute('class','collectionAsTables');for(var c=0,u;c<t.elements.length;c++)u=n.createElement('tr'),a.appendChild(u),u.appendChild(s(t.elements[c]));return a;case'Graph':var a=r.panes.dataContents.statementsAsTables(t.statements,n);return a.setAttribute('class','nestedFormula'),a;case'Variable':var a=n.createTextNode('?'+t.uri);return a;}throw'Unhandled node type: '+t.termType}var d=r.panes.getOutliner(n),l=n.createElement('table'),c=r.rdf.Serializer(r.store),u=c.rootSubjects(t),f=u.roots,m=u.subjects,h=u.loopBreakers;for(var g in h)dump('\tdataContentPane: loopbreaker:'+g+'\n');var b={},y={};a&&(f=a.concat(f.filter(function(t){for(var n=0;n<a.length;n++)if(t.sameTerm(a[n]))return!1;return!0})));for(var v=0,w;v<f.length;v++){w=n.createElement('tr'),l.appendChild(w);var x=n.createElement('td');w.appendChild(x);var _=n.createElement('td');w.appendChild(_);var k=f[v];'BlankNode'==k.termType?x.appendChild(n.createTextNode(r.utils.label(k))):x.appendChild(s(k)),_.appendChild(o(k))}for(var C in y){var T=b[C],w=n.createElement('tr'),E=n.createElement('a');E.setAttribute('id',C.slice(2)),E.setAttribute('class','bnodeDef'),E.textContent=C.slice(3)+')',T.insertBefore(E,T.firstChild)}return l},render:function(t,n){var a=r.panes.getOutliner(n),o=r.store,s=n.createElement('div');s.setAttribute('class','dataContentPane');var d=o.statementsMatching(void 0,void 0,void 0,t);var l=[];o.holds(t,void 0,void 0,t)&&l.push(t);var c=o.any(t,r.ns.foaf('primaryTopic'),void 0,t);c&&l.push(c),s.appendChild(r.panes.dataContents.statementsAsTables(d,n,l));return s}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.originalIconBase+'w3c/n3_smaller.png',name:'n3',label:function(t){if('http://www.w3.org/2007/ont/link#ProtocolEvent'in r.store.findTypeURIs(t))return null;var a=r.store.statementsMatching(void 0,void 0,void 0,t).length;return 0===a?null:'Data ('+a+') as N3'},render:function(t,n){var a=r.store,o=n.createElement('div');o.setAttribute('class','n3Pane');var s=a.statementsMatching(void 0,void 0,void 0,t),d=r.rdf.Serializer(a);d.suggestNamespaces(a.namespaces),d.setBase(t.uri);var l=d.statementsToN3(s),c=n.createElement('PRE');return c.appendChild(n.createTextNode(l)),o.appendChild(c),o}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.originalIconBase+'22-text-xml4.png',name:'RDFXML',label:function(t){if('http://www.w3.org/2007/ont/link#ProtocolEvent'in r.store.findTypeURIs(t))return null;var a=r.store.statementsMatching(void 0,void 0,void 0,t).length;return 0==a?null:'As RDF/XML ('+a+')'},render:function(t,n){var a=r.store,o=n.createElement('div');o.setAttribute('class','RDFXMLPane');var s=a.statementsMatching(void 0,void 0,void 0,t),d=r.rdf.Serializer(a);d.suggestNamespaces(a.namespaces),d.setBase(t.uri);var l=d.statementsToXML(s),c=n.createElement('PRE');return c.appendChild(n.createTextNode(l)),o.appendChild(c),o}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_122196.svg',name:'form',label:function(t){var a=r.widgets.formsFor(t).length;return r.log.debug('Form pane: forms for '+t+': '+a),a?''+a+' forms':null},render:function(n,a){var o=r.store,l=r.ns,s=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),c=$rdf.Namespace('http://purl.org/dc/elements/1.1/'),u=$rdf.Namespace('http://purl.org/dc/terms/'),f=function(t,n){var r=a.createElement('p');return r.setAttribute('style',n?n:'color: grey; background-color: white'),y.appendChild(r).textContent=t,r},m=function(t,n){f(t,'style',n?n:'color: grey; background-color: #fdd;')},h=function(t,n){t||m('Sorry, failed to save your change:\n'+n)},g=this,b=o.findTypeURIs(n),t=r.authn.currentUser(),y=a.createElement('div');if(y.setAttribute('class','formPane'),!t)f('You are not logged in. If you log in and have workspaces then you would be able to select workspace in which to put this new information');else{var v=o.each(t,l.ui('workspace'));(v.length=0)&&f('You don\'t seem to have any workspaces defined.  A workspace is a place on the web (http://..) or in the file system (file:///) to store application data.\n')}var w=function(t,n){o.fetcher.nowOrWhenFetched(t.uri,n,function(o,s){if(!o)return m('Cannot load store '+t.uri+': '+s);for(var d=r.widgets.formsFor(n),l=0;l<d.length;l++){var c=d[l],u=a.createElement('h4');if(y.appendChild(u),c.uri){var f=$rdf.Util.uri.document(c);if(f.uri!==c.uri){var g=y.appendChild(r.widgets.editFormButton(a,y,c,f,h));g.setAttribute('style','float: right;')}}var b=a.createElement('a');b.setAttribute('href',c.uri),u.appendChild(b),b.textContent=r.utils.label(c,!0),r.widgets.appendForm(a,y,{},n,c,t,h)}})},x=null,_=$rdf.Util.uri.docpart(n.uri);if(x=n.uri!==_&&o.updater.editable(_,o)?o.sym($rdf.Util.uri.docpart(n.uri)):o.any(o.sym(_),l.link('annotationStore')),!x){var k={},C=[];for(var T in o.statementsMatching(n).map(function(t){k[t.why.uri]=1}),o.statementsMatching(void 0,void 0,n).map(function(t){k[t.why.uri]=2}),k)C.push(k[T],T);C.sort();for(var d=0,E;d<C.length;d++)if(E=C[d][1],E&&o.updater.editable(E)){x=o.sym(E);break}}var S='2014';if(x)w(x,n);else{m('No suitable store is known, to edit <'+n.uri+'>.');var A=r.authn.selectWorkspace(a,function(t){f('Workspace selected OK: '+t);for(var a=o.each(void 0,l.space('workspace'),t),r=0;r<a.length;d++){var c=a[r],u=o.any(t,l.space('store')),s=o.any(t,l.ical('dtstart')).value(),h=o.any(t,l.ical('dtend')).value();if(u&&s&&h&&s<=S&&h>S){w(u,n);break}else m('Note no suitable annotation store in activity: '+c)}});y.appendChild(A)}return y}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_25830.svg',name:'attachments',label:function(n){var a=r.store,o=a.findTypeURIs(n),t=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),s=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#');return o['http://www.w3.org/ns/pim/trip#Trip']||'http://www.w3.org/ns/pim/trip#Trip'==n.uri||o['http://www.w3.org/2005/01/wf/flow#Task']||o['http://www.w3.org/2000/10/swap/pim/qif#Transaction']||t('Transaction')in a.findSuperClassesNT(n)||a.holds(n,s('attachment'))?'attachments':null},render:function(t,n){var a=r.store,o=r.ns,s=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),d=$rdf.Namespace('http://www.w3.org/2002/12/cal/ical#'),l=$rdf.Namespace('http://purl.org/dc/elements/1.1/'),c=$rdf.Namespace('http://purl.org/dc/terms/'),u=$rdf.Namespace('http://www.w3.org/ns/pim/trip#'),f=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),m=function(t){var a=n.createElement('pre');a.setAttribute('style','background-color: pink'),b.appendChild(a),a.appendChild(n.createTextNode(t))},h=this,g=function(t,n){if(t.updater.editable(n.doc(),t))return n.doc();var a=t.any(n.doc(),f('annotationStore'));return a},b=n.createElement('div'),y=r.utils.escapeForXML;b.setAttribute('class','attachPane'),b.innerHTML='<h1>'+y(r.utils.label(t,!0))+' attachments</h1>';var v=s('attachment'),w=f('SupportingDocument'),x={},_=0,C=null,T=null,E=f('SupportingDocument'),S=function(){var n=a.sym({"http://www.w3.org/2005/01/wf/flow#Task":'http://purl.org/dc/elements/1.1/created',"http://www.w3.org/ns/pim/trip#Trip":'http://www.w3.org/2002/12/cal/ical#dtstart',"http://www.w3.org/2000/10/swap/pim/qif#Transaction":'http://www.w3.org/2000/10/swap/pim/qif#date',"http://www.w3.org/2000/10/swap/pim/qif#SupportingDocument":'http://purl.org/dc/elements/1.1/date'}[t.uri]);return n||(n=a.any(t,r.ns.ui('sortBy'))),n},A=function(t){var n=S(t.uri);if(n)return n;var r=a.findSuperClassesNT(t);for(var o in r)if(n=S(a.fromNT(o).uri),n)return n},I=function(t){var n=A(t),r=a.findMemberURIs(t),o=[],s=[],d,l,c;for(d in r)r.hasOwnProperty(d)&&(l=a.sym(d),n?(c=a.any(l,n),c=c?c.value:'8888-12-31'):(m('No sortby '+n+' for '+l),c='9999-12-31'),o.push([c,l]));o.sort(),o.reverse();for(var u=0;u<o.length;u++)s.push(o[u][1]);return s},N,j;'http://www.w3.org/ns/pim/trip#Trip'==t.uri||f('Transaction')in a.findSuperClassesNT(t)?(j=!0,N=I(t)):(C=t,_=1,N=[t],j=!1);var R=I(w);R||m('objects:'+R.length);var L=function(){T=null,z.innerHTML=''},O=function(t){var o=0==t?R:1==t?null===C?R.filter(function(t){return!!a.holds(void 0,v,t)}):R.filter(function(t){return!!a.holds(C,v,t)}):R.filter(function(t){return 0==a.each(void 0,v,t).length});r.widgets.selectorPanelRefresh(F,n,a,E,v,!0,o,x,U,M),1==o.length?(T=o[0],U(T,null,!0)):L()},P=function(t,n,r,o){if(a.holds(t,v,n)!=r){var s=r?'attach':'detach',d=function(a,r,d){r?o():m('Error: Unable to '+s+' '+n.uri+' to '+t.uri+':\n'+d)},l=g(a,t);if(!l)m('There is no annotation store for: '+t.uri);else{var c=[$rdf.st(t,v,n,l)];r?a.updater.update([],c,d):a.updater.update(c,[],d)}}},M=function(t,n,r,d){var l,s;if(r){if(!C)return void m('No subject for the link has been selected');l=C,s=t}else{if(!T)return void m('No object for the link has been selected');l=t,s=T}P(l,s,!a.holds(l,v,s),d)},D=function(t,n,a){a?C=t:(C=null,1==_&&L()),0!=_&&O(_)};if(j){var B=r.widgets.selectorPanel(n,a,t,v,!1,N,x,D,M);B.setAttribute('style','background-color: white;  width: 25em; height: 100%; padding: 0 em; overflow:scroll; float:left'),b.appendChild(B)}var U=function(t,o,s){if(!s)return L(),void(z.innerHTML='');T=t;try{z.innerHTML='Loading ....',t.uri&&a.fetcher.load(t.uri).then(function(){var a=r.panes.getOutliner(n),o=a.propertyTable(t);z.innerHTML='',z.appendChild(o)}).catch(function(n){z.textContent='Error loading '+t.uri+': '+n})}catch(t){z.innerHTML='<span style="background-color: pink;">Error:'+t+'</span>'}};b.setAttribute('style','background-color: white; width:40cm; height:20cm;');var q=n.createElement('div');q.setAttribute('style',' width: 30em; height: 100%;  padding: 0em; float:left;'),b.appendChild(q),q.appendChild(function(t,n,a,r){var o=t.createElement('table'),s=a;o.setAttribute('style','float: left; width: 30em; padding: 0.5em; height: 1.5em; background-color: #ddd; color: #444; font-weight: bold');var d=t.createElement('tr'),l='border-radius: 0.6em; text-align: center;';o.appendChild(d);var c=function(){for(f=0;f<n.length;f++)u[f].setAttribute('style',f==s?l+'background-color: #ccc; color: black;':l)},u=[],f,m;for(f=0;f<n.length;f++){m=u[f]=t.createElement('td'),m.textContent=n[f],d.appendChild(u[f]);var h=function(t,n){t.addEventListener('click',function(){s=n,c(),r(n)})};h(m,f)}return c(),o}(n,['all','attached','not attached'],_,function(t){t!==_&&(_=t,L(),O(t))}));var F=r.widgets.selectorPanel(n,a,E,v,!0,R,x,U,M);F.setAttribute('style','background-color: #ffe;  width: 30em; height: 100%; padding: 0em; overflow:scroll;'),q.appendChild(F);var z=n.createElement('div');if(z.setAttribute('style','padding: 0em; margin: 0;  height: 100%; overflow:scroll;'),b.appendChild(z),O(_),0<N.length&&j){for(var H={},W=0,k;W<N.length;W++)k=g(a,N[W]),k&&(H[k.uri]=N[W]);for(var V in H){var k=a.sym(V),G=n.createElement('div');G.setAttribute('style','clear: left; width: 20em; margin-top:2em; background-color:#ccc; border-radius: 1em; padding: 1em; font-weight: bold;'),G.textContent='+ New '+r.utils.label(t),G.textContent+=' in '+r.utils.label(k);var K=n.createElement('span');K.setAttribute('style','font-weight: normal; font-size: 80%; color: #777;'),K.textContent=V,G.appendChild(n.createElement('br')),G.appendChild(K),G.addEventListener('click',function(){var o=r.widgets.promptForNew(n,a,t,v,t,null,k,function(t){});try{b.insertBefore(o,G.nextSibling)}catch(t){b.appendChild(o)}o.AJAR_subject},!1),b.appendChild(G)}}return b}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.originalIconBase+'table.png',name:'tableOfClass',label:function(t){if(!r.store.any(void 0,r.ns.rdf('type'),t))return null;var a=r.store.statementsMatching(void 0,r.ns.rdf('type'),t).length;return 0==a?null:15<a?null:r.utils.label(t)+' table'},render:function(t,n){var a=n.createElement('div');return a.setAttribute('class','tablePane'),a.appendChild(r.table(n,{tableClass:t})),a}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.originalIconBase+'about.png',name:'default',label:function(){return'about '},render:function(t,n){var a=function(t,n){return'undefined'==typeof r.panes.internal.predicates[t.uri]&&(n&&'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'==t.uri?!1:!0)},o=r.panes.getOutliner(n),s=r.store;r.log.info('@defaultPane.render, dom is now '+n.location),t=s.canon(t);var d=n.createElement('div');d.setAttribute('class','defaultPane');var l=s.statementsMatching(t);if(o.appendPropertyTRs(d,l,!1,a),l=s.statementsMatching(void 0,void 0,t),o.appendPropertyTRs(d,l,!0,a),'Literal'==t.termType&&'http://'==t.value.slice(0,7)&&o.appendPropertyTRs(d,[$rdf.st(s.sym(t.value),r.ns.link('uri'),t)],!0,a),'NamedNode'==t.termType&&s.updater.editable(r.rdf.Util.uri.docpart(t.uri),s)||'BlankNode'==t.termType&&s.anyStatementMatching(t)&&s.anyStatementMatching(t).why&&s.anyStatementMatching(t).why.uri&&s.updater.editable(s.anyStatementMatching(t).why.uri)/*! && HCIoptions["bottom insert highlights"].enabled*/){var c=n.createElement('tr'),u=n.createElement('td');u.setAttribute('colspan','2'),u.setAttribute('notSelectable','true');var f=n.createElement('img');f.src=r.icons.originalIconBase+'tango/22-list-add-new.png',f.addEventListener('click',function(t){return o.UserInput.addNewPredicateObject(t),t.stopPropagation(),void t.preventDefault()}),f.className='bottom-border-active',d.appendChild(c).appendChild(u).appendChild(f)}return d},sync:function(t,n,a){r.log.info('Re-expand: '+a);var o={},d,l;for(d=a.firstChild;d;d=d.nextSibling)d.childNodes[1]&&'TABLE'==d.childNodes[1].firstChild.nodeName&&(l=d.AJAR_statement,o[l.predicate.toString()]||(o[l.predicate.toString()]={}),o[l.predicate.toString()][l.object.toString()]=d.childNodes[1].childNodes[1]);var s=propertyTable(t,void 0,pane);for(d=s.firstChild;d;d=d.nextSibling)if(l=d.AJAR_statement,l&&o[l.predicate.toString()]){var c=o[l.predicate.toString()][l.object.toString()];c&&d.childNodes[1].replaceChild(c,d.childNodes[1].firstChild)}}}},function(t,n,a){'use strict';(function(t,n){var r=a(2);t.exports={icon:(t.__dirname||n)+'22-builder.png',name:'ui',label:function(n){var a=r.ns,o=r.store,s=o.findTypeURIs(n);return s[a.rdfs('Class').uri]?'creation forms':s[a.ui('Form').uri]?'edit form':null},render:function(n,a){var o=r.store,s=r.ns,d=a.createElement('div');d.setAttribute('class','formPane');var l=r.utils.label(n),c=function(t,n){var r=a.createElement('p');return r.setAttribute('style',n||'color: grey; background-color: white'),d.appendChild(r).textContent=t,r},u=function(t,n){c(t,'style',n||'color: grey; background-color: #fdd')},f=function(t,n){t||u('Sorry, failed to save your change:\n'+n)},m=this,h=o.statementsMatching(n),g=o.statementsMatching(void 0,void 0,n),b=o.findTypeURIs(n),t=null;if(n.uri){var y=$rdf.Util.uri.docpart(n.uri);n.uri!==y&&r.store.updater.editable(y)&&(t=o.sym($rdf.Util.uri.docpart(n.uri)))}t||(t=o.any(o.sym(y),s.link('annotationStore'))),t||(t=r.widgets.defaultAnnotationStore(n)),t||(t=o.sym('http://tabulator.org/wiki/ontologyAnnotation/common'));var v;b[s.rdfs('Class').uri];var w=c('(Loading data from: '+t+')');return o.fetcher.nowOrWhenFetched(t.uri,n,function(m,h){if(!m)return void u('Cannot load store '+t+' :'+h);if(d.removeChild(w),b[s.rdfs('Class').uri]){var g=function(m,h){var g=o.statementsMatching(n,m);if(g.length){for(var b=0;b<g.length;b++){r.outline.appendPropertyTRs(d,[g[b]]);var y=g[b].object,v=a.createElement('td');d.lastChild.appendChild(v),h&&v.appendChild(r.widgets.newButton(a,o,null,null,n,y,t,function(t,n){t||u('Sorry, failed to save your change:\n'+n)}));var w=o.statementsMatching(y,s.rdf('type'));w.length||(w=o.statementsMatching(y)),w.length?r.widgets.editFormButton(a,d,y,w[0].why,f):u('No data about form')}d.appendChild(a.createElement('hr'))}else c('There are currently no known forms to make a '+l+'.')};v=s.ui('creationForm'),d.appendChild(a.createElement('h2')).textContent=r.utils.label(v),c('Creation forms allow you to add information about a new thing,                                    in this case a new '+l+'.'),g(v,!0),d.appendChild(a.createElement('hr')),c('You can make a new creation form:'),d.appendChild(r.widgets.newButton(a,o,n,v,s.ui('Form'),null,t,f)),d.appendChild(a.createElement('hr')),v=s.ui('annotationForm'),d.appendChild(a.createElement('h2')).textContent=r.utils.label(v),c('Annotaion forms allow you to add extra information about a ,                                '+l+' we already know about.'),g(v,!1),d.appendChild(a.createElement('hr')),c('You can make a new annotation form:'),d.appendChild(r.widgets.newButton(a,o,n,v,s.ui('Form'),null,t,f)),c('(Storing new forms in: '+t+')')}else b[s.ui('Form').uri]?r.widgets.appendForm(a,d,o,n,s.ui('FormForm'),t,f):u('ui/pane internal error -- Eh?')}),d}}}).call(n,a(7)(t),'/')},function(t,n,a){'use strict';var o=a(2);t.exports={icon:o.icons.originalIconBase+'microblog/microblog.png',name:'microblogPane',label:function(t){o.rdf.Namespace('http://rdfs.org/sioc/types#');return o.store.whether(t,o.ns.rdf('type'),o.ns.foaf('Person'))?'Microblog':null},render:function(t,a){var n=o.rdf.Namespace('http://rdfs.org/sioc/ns#'),d=o.rdf.Namespace('http://rdfs.org/sioc/types#'),r=o.rdf.Namespace('http://purl.org/rss/1.0/'),l=o.rdf.Namespace('http://xmlns.com/foaf/0.1/'),s=o.rdf.Namespace('http://purl.org/dc/terms/'),u=o.ns.rdf,g=o.store,c=140,m=o.store.fetcher,f=g.updater;Date.prototype.getISOdate=function(){var t=function(t){return 10>t?'0'+t:t},n=this.getUTCFullYear()+'-'+t(this.getUTCMonth())+'-'+t(this.getUTCDate())+'T'+t(this.getUTCHours())+':'+t(this.getUTCMinutes())+':'+t(this.getUTCSeconds())+'Z';return n},Date.prototype.parseISOdate=function(t){var n=t.split('T'),a=n[0].split('-'),r=n[1].replace('Z','').split(':');return this.setUTCDate(1),this.setUTCFullYear(a[0]),this.setUTCMonth(a[1]),this.setUTCDate(a[2]),this.setUTCHours(r[0]),this.setUTCMinutes(r[1]),this.setUTCSeconds(r[2]),this};var h=function(t){this.userlist={},this.uris={};var a=g.each(g.sym(t),n('follows'));for(var r in a)this.add(g.any(a[r],n('id')),a[r].uri)};h.prototype.add=function(t,n){this.userlist[t]?!(n in this.uris)&&(this.userlist[t].push(n),this.uris[n]=''):this.userlist[t]=[n]},h.prototype.selectUser=function(t){return this.userlist[t]?[1==this.userlist[t].length,this.userlist[t]]:[!1,[]]};var b=function(t){if(this.favorites={},this.favoritesURI='',!!t)for(var a in this.user=t.split('#')[0],created=g.each(g.sym(t),n('creator_of')),created)if(g.whether(created[a],u('type'),d('FavouriteThings'))){this.favoritesURI=created[a];var r=g.each(created[a],n('container_of'));for(var o in r)this.favorites[r[o]]='';break}};b.prototype.favorited=function(t){return g.sym(t)in this.favorites},b.prototype.add=function(t,r){var s=new o.rdf.Statement(this.favoritesURI,n('container_of'),g.sym(t),g.sym(this.user));f.insert_statement(s,function(t,n,a){n&&g.add(s.subject,s.predicate,s.object,s.why),r(t,n,a)})},b.prototype.remove=function(t,r){var s=new o.rdf.Statement(this.favoritesURI,n('container_of'),g.sym(t),g.sym(this.user));f.delete_statement(s,function(t,n,a){n&&g.add(s.subject,s.predicate,s.object,s.why),r(t,n,a)})};var y=function(t){this.kb=t;var n=o.authn.currentUser();if(n){var a=tabulator.preferences.get('acct');a&&(a=t.sym(a)),n&&a&&t.add(n,l('holdsAccount'),a,n.uri.split('#')[0])}};y.prototype.getUser=function(t){var a={name:g.any(t,n('name'))?g.any(t,n('name')):'',avatar:g.any(t,n('avatar'))?g.any(t,n('avatar')):'',id:g.any(t,n('id')),sym:t};return a},y.prototype.getPost=function(t){Post={};var r=new Date;r=r.parseISOdate(g.any(t,s('created'))+'');var o=r.getHours(),d=12<o?' PM':' AM';o=12<o?o-12:o;var a=r.getMinutes();a=10>a?'0'+a:a;var l=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'][r.getDay()]+' '+r.getDate()+' '+['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][r.getMonth()]+' '+r.getFullYear();return r=o+':'+a+d+' on '+l,Post.date=r,Post.mentions='',Post.message=g.any(t,n('content'))+'',Post.creator=g.any(t,n('has_creator')),Post.uri='',Post},y.prototype.gen_random_uri=function(t){var n=t+'#n'+w(1e10*Math.random());return g.sym(n)},y.prototype.statusUpdate=function(t,l,a,c){var m=this.getMyURI();myUser=g.sym(m.split('#')[0]);var h=this.gen_random_uri(myUser.uri),b=g.each(g.sym(m),n('creator_of')),y;for(var v in b)if(g.whether(b[v],u('type'),d('Microblog'))&&!g.whether(b[v],n('topic'),g.sym(this.getMyURI()))){y=b[v];break}var w=[new o.rdf.Statement(h,u('type'),d('MicroblogPost'),myUser),new o.rdf.Statement(h,n('has_creator'),g.sym(m),myUser),new o.rdf.Statement(h,n('content'),t,myUser),new o.rdf.Statement(h,s('created'),new Date().getISOdate()+'',myUser),new o.rdf.Statement(y,n('container_of'),h,myUser)];for(var x in a&&w.push(new o.rdf.Statement(h,n('reply_of'),g.sym(a),myUser)),c.recipients){w.push(new o.rdf.Statement(h,n('topic'),g.sym(c.recipients[x]),myUser)),w.push(new o.rdf.Statement(g.any(),n('container_of'),h,myUser));var r=g.each(g.sym(c.recipients[x]),n('creator_of'));for(var _ in r)if(g.whether(r[_],n('topic'),g.sym(c.recipients[x]))){var k=new o.rdf.Statement(r[_],n('container_of'),h,g.sym(c.recipients[x].split('#')[0]));f.insert_statement(k)}}f.insert_statement(w,function(t,n,a){l(t,n,a,w)})},y.prototype.getMyURI=function(){var t=o.authn.currentUser();dump(t);var n=g.any(g.sym(t),l('holdsAccount'));return dump('\n\n'+n),!!n&&n.uri},y.prototype.generateNewMB=function(a,r,s,c){var m=c+'/'+a,h=function(){tabulator.preferences.set('acct',m+'#'+a)},b=[new o.rdf.Statement(g.sym(m+'#'+a),u('type'),n('User'),g.sym(m)),new o.rdf.Statement(g.sym(m+'#'+a),n('creator_of'),g.sym(m+'#mb'),g.sym(m)),new o.rdf.Statement(g.sym(m+'#'+a),n('creator_of'),g.sym(m+'#mbn'),g.sym(m)),new o.rdf.Statement(g.sym(m+'#'+a),n('creator_of'),g.sym(m+'#fav'),g.sym(m)),new o.rdf.Statement(g.sym(m+'#'+a),n('name'),r,g.sym(m)),new o.rdf.Statement(g.sym(m+'#'+a),n('id'),a,g.sym(m)),new o.rdf.Statement(g.sym(m+'#'+a),u('label'),a,g.sym(m)),new o.rdf.Statement(t,l('holdsAccount'),g.sym(m+'#'+a),g.sym(m)),new o.rdf.Statement(g.sym(m+'#mb'),u('type'),d('Microblog'),g.sym(m)),new o.rdf.Statement(g.sym(m+'#mb'),n('has_creator'),g.sym(m+'#'+a),g.sym(m)),new o.rdf.Statement(g.sym(m+'#mbn'),u('type'),d('Microblog'),g.sym(m)),new o.rdf.Statement(g.sym(m+'#mbn'),n('topic'),g.sym(m+'#'+a),g.sym(m)),new o.rdf.Statement(g.sym(m+'#mbn'),n('has_creator'),g.sym(m+'#'+a),g.sym(m)),new o.rdf.Statement(g.sym(m+'#fav'),u('type'),d('FavouriteThings'),g.sym(m)),new o.rdf.Statement(g.sym(m+'#fav'),n('has_creator'),g.sym(m+'#'+a),g.sym(m))];s&&b.push(new o.rdf.Statement(g.sym(m+'#'+a),n('avatar'),g.sym(s),g.sym(m))),f.insert_statement(b,function(t,n,r,o){if(n)for(var s in notify('Microblog generated at '+m+'#'+a+'please add <b>'+m+'</b> to your foaf.'),mbCancelNewMB(),h(),o)g.add(o[s].subject,o[s].predicate,o[s].object,o[s].why)})};var v=new y(g),b=new b(v.getMyURI()),h=new h(v.getMyURI()),x=function(t,r,s){var c=function(t){this.tablist={},this.doc=t,this.tabView=t.createElement('ul'),this.tabView.className='tabslist'};c.prototype.create=function(t,n,a,o){var s=this.doc.createElement('li');s.innerHTML=n,o&&(s.className='active'),s.id=t,change=this.change,tablist=this.tablist,s.addEventListener('click',function(t){change(t.target.id,tablist,r)},!1),this.tablist[t]={view:a.id,tab:s},this.tabView.appendChild(s)},c.prototype.getTabView=function(){return this.tabView},c.prototype.change=function(t,n,a){for(var r in n)if(r==t)n[t].tab.className='active',a.getElementById(n[t].view).className+=' active';else{var o=a.getElementById(n[r].view);o.className=o.className.replace(/\w*active\w*/,''),n[r].tab.className=n[t].tab.className.replace(/\w*active\w*/,'')}},this.microblogPane=s;var f=g.each(t,l('holdsAccount'));for(var m in f)if(g.whether(f[m],u('type'),n('User'))&&g.whether(g.any(f[m],n('creator_of')),u('type'),d('Microblog'))){var a=f[m];break}this.Ifollow=g.whether(g.sym(v.getMyURI()),n('follows'),a);var h=g.any(t,u('type'));if(h.uri===d('Microblog').uri||h.uri===d('MicroblogPost').uri)this.thisIsMe=g.any(t,n('has_creator')).uri===v.getMyURI();else if(h.uri===n('User').uri)this.thisIsMe=t.uri===v.getMyURI();else if(h.uri===l('Person').uri){var b=o.authn.currentUser(),y=b&&b.uri;this.thisIsMe=t.uri===y}else this.thisIsMe=!1;this.Tab=new c(r)};x.prototype.notify=function(t){var n=a.createElement('li');n.className='notify',n.innerHTML=t,a.getElementById('notify-container').appendChild(n),setTimeout(function(){a.getElementById('notify-container').removeChild(n)},4e3)},x.prototype.header=function(t,a){postNotificationContainer=this.postNotificationContainer;var r=this;lsFollowUser=function(){var t=g.sym(v.getMyURI()),a=r.Ifollow,s=r.creator.name,d=function(t,n){if(!0===n){r.Ifollow?g.removeMany(l.subject,l.predicate,l.object,l.why):!g.whether(l.subject,l.predicate,l.object,l.why)&&g.add(l.subject,l.predicate,l.object,l.why),dump('\n'+r.Ifollow),r.Ifollow=!r.Ifollow,D.disabled=!1,dump(r.Ifollow),followButtonLabel=r.Ifollow?'Unfollow ':'Follow ';var a=r.Ifollow?'now follow ':'no longer follow ';D.value=followButtonLabel+s,r.notify('You '+a+s+'.')}},l=new o.rdf.Statement(t,n('follows'),r.creator.sym,t);D.disabled=!0,D.value='Updating...',r.Ifollow?f.delete_statement(l,d):f.insert_statement(l,d)};var s=function(t){var n=a.createElement('li');n.className='notify',n.innerHTML=t,a.getElementById('notify-container').appendChild(n),setTimeout(function(){a.getElementById('notify-container').removeChild(n)},4e3)},m=function(){C.removeChild(C.childNodes[C.childNodes.length-1]),N.disabled=!1},b=function(){N.disabled=!0;var n=a.createElement('div'),r=a.createElement('input');g.whether(t,l('name'))?r.value=g.any(t,l('name')):(r.value=g.any(t,l('givenname'))?g.any(t,l('givenname'))+' ':'',r.value+=g.any(t,l('family_name'))?g.any(t,l('givenname')):'',r.value=g.any(t,l('givenname'))+' '+g.any(t,l('family_name')));var o=a.createElement('input');o.value=g.any(t,l('nick'))?g.any(t,l('nick')):'';var s=a.createElement('input');s.value=g.whether(t,l('img'))?g.any(t,l('img')).uri:g.any(t,l('depiction'))?g.any(t,l('depiction')).uri:'';var d=a.createElement('input'),c;d.value=c?c:'http://dig.csail.mit.edu/2007/wiki/sandbox',n.innerHTML='                        <form class ="createNewMB" id="createNewMB">                            <p id="xcmbname"><span class="">Name: </span></p>                            <p id="xcmbid">Id: </p>                            <p id="xcmbavatar">Avatar: </p>                             <p id="xcmbwritable">Host my microblog at: </p>                            <input type="button" id="mbCancel" value="Cancel" />                            <input type="submit" id="mbCreate" value="Create!" />                        </form>                        ',C.appendChild(n),a.getElementById('xcmbname').appendChild(r),a.getElementById('xcmbid').appendChild(o),a.getElementById('xcmbavatar').appendChild(s),a.getElementById('xcmbwritable').appendChild(d),a.getElementById('mbCancel').addEventListener('click',m,!1),a.getElementById('createNewMB').addEventListener('submit',function(){v.generateNewMB(o.value,r.value,s.value,d.value)},!1),r.focus()},y=function(){var t=new Date,o={recipients:[]};if(v.getMyURI()){myUser=g.sym(v.getMyURI());var d=function(t,n,o,l){if(!0===n){for(var d in l)g.add(l[d].subject,l[d].predicate,l[d].object,l[d].why);A.disabled=!1,E.value='',w(),s('Microblog Updated.'),r.thisIsMe&&a.getElementById('postNotificationList').insertBefore(r.generatePost(l[0].subject),a.getElementById('postNotificationList').childNodes[0])}else s('There was a problem submitting your post.')},l=E.value.split(' '),c=function(){A.disabled=!0,A.value='Updating...',v.statusUpdate(E.value,d,T.value,o)};for(var u in l)if(l[u].match(/\@\w+/)){var f=l[u].replace(/\W/g,''),m=h.selectUser(f);if(!0===m[0])o.recipients.push(m[1][0]);else{if(1<m[1].length){var b=a.createElement('select'),y=a.createElement('input');y.type='button',y.value='Continue',y.addEventListener('click',function(){o.recipients.push(m[1][b.value]),c(),b.parentNode.removeChild(y),b.parentNode.removeChild(b)},!1);var x=function(t,r){var o=g.any(g.sym(t),n('name')),s=a.createElement('option');return s.value=r,s.innerHTML=o,s};for(var _ in m[1])b.appendChild(x(m[1][_],_));return C.appendChild(b),void C.appendChild(y)}if((g.any(g.sym(v.getMyURI()),n('id'))+'').toLowerCase()==f.toLowerCase())o.recipients.push(v.getMyURI());else return void s('You do not follow '+f+'. Try following '+f+' before mentioning them.')}}c()}else s('Please set your microblog first.')},w=function(){S.innerHTML=c-E.value.length,S.style.color=0>c-E.value.length?'#c33':'',0===E.value.length&&(T.value='',A.value='Send')},x=a.createElement('ul');x.className='replyView',x.addEventListener('click',function(){x.className='replyView'},!1),this.xviewReply=x;var _=a.createElement('div');_.className='header-container';var k=a.createElement('ul');k.id='notify-container',k.className='notify-container',this.xnotify=k;var C=a.createElement('form');if(C.className='update-container',C.innerHTML='<h3>What are you up to?</h3>',v.getMyURI()){var T=a.createElement('input');T.id='xinReplyToContainer',T.type='hidden';var E=a.createElement('textarea');E.id='xupdateStatus';var S=a.createElement('span');S.appendChild(a.createTextNode(c)),E.cols=30,E.addEventListener('keyup',w,!1),E.addEventListener('focus',w,!1);var A=a.createElement('input');A.id='xupdateSubmit',A.type='submit',A.value='Send',C.appendChild(T),C.appendChild(S),C.appendChild(E),C.appendChild(A),C.addEventListener('submit',y,!1)}else{var I=a.createTextNode('                    Hi, it looks like you don\'t have a microblog,                    would you like to create one? '),N=a.createElement('input');N.type='button',N.value='Create a new Microblog',N.addEventListener('click',b,!1),C.appendChild(I),C.appendChild(N)}_.appendChild(C);var j=a.createElement('div');j.className='subheader-container',this.creator;var R=g.each(t,l('holdsAccount'));for(var L in R)if(g.whether(R[L],u('type'),n('User'))&&g.whether(g.any(R[L],n('creator_of')),u('type'),d('Microblog'))){var O=R[L];break}if(O){if(this.creator=v.getUser(O),''!==this.creator.avatar){var P=a.createElement('img');P.src=this.creator.avatar.uri,j.appendChild(P)}var M=a.createElement('h1');if(M.className='fn',M.appendChild(a.createTextNode(this.creator.name+' ('+this.creator.id+')')),j.appendChild(M),!this.thisIsMe&&v.getMyURI()){var D=a.createElement('input');D.setAttribute('type','button'),followButtonLabel=this.Ifollow?'Unfollow ':'Follow ',D.value=followButtonLabel+this.creator.name,D.addEventListener('click',lsFollowUser,!1),j.appendChild(D)}var B=this.Tab.getTabView();_.appendChild(j),_.appendChild(B)}return _},x.prototype.generatePost=function(r){var o=this,s=function(t){for(var r in xviewReply=o.xviewReply,xviewReply.childNodes)xviewReply.removeChild(xviewReply.childNodes[0]);var n=a.createElement('li');n.className='closeContainer';var s=a.createElement('span');for(var d in s.innerHTML='&#215;',s.className='closeButton',n.appendChild(s),xviewReply.appendChild(n),t)xviewReply.appendChild(o.generatePost(g.sym(t[d]),this.thisIsMe,'view'));xviewReply.className='replyView-active',o.microblogPane.appendChild(xviewReply)},d=a.createElement('li');d.className='post',d.setAttribute('id',(r.uri+'').split('#')[1]);var c=v.getPost(r),u=g.any(g.any(r,n('has_creator')),n('id')),h=g.any(void 0,l('holdsAccount'),g.any(r,n('has_creator'))),y=a.createElement('a');y.href=h.uri,y.className='userLink';var w=a.createTextNode(v.getUser(c.creator).id);y.appendChild(w);var x=a.createElement('img');x.src=v.getUser(c.creator).avatar.uri,x.className='postAvatar';var _=a.createElement('blockquote'),k=c.message,C=a.createElement('a');C.className='postLink',C.addEventListener('click',function(){s([r.uri])},!1),C.id='post_'+(r.uri+'').split('#')[1],C.setAttribute('content',r.uri),C.setAttribute('property','permalink'),postLink=a.createTextNode(c.date?c.date:'post date unknown'),C.appendChild(postLink);var T=g.each(r,n('topic'));for(var E in tags={},T)m.lookUpThing(T[E]),id=g.any(T[E],n('id')),tags['@'+id]=T[E];var S=k.match(/(\@|\#|\!)\w+/g),A=function(){return p=S.pop(),tags[p]?g.any(void 0,l('holdsAccount'),tags[p]).uri:p};for(var I in tags){var t=I.replace(/\@/,''),N=RegExp('(@|!|#)('+t+')');k=k.replace(N,'$1<a href="'+A()+'">$2</a>')}_.innerHTML=k;var j=g.each(r,n('reply_of')),R=a.createElement('span');for(var L in j){var O=(j[L]+'').replace(/\<|\>/g,'');var P=function(){var t=a.createElement('a');return t.innerHTML=', <b>in reply to</b>',t.addEventListener('click',function(){return s([r.uri,O]),!1},!1),t};R.appendChild(P())}var M=function(){var t=v.getUser(c.creator).id,n=a.getElementById('xupdateStatus'),o=a.getElementById('xinReplyToContainer'),s=a.getElementById('xupdateSubmit');n.value='@'+t+' ',n.focus(),o.value=r.uri,s.value='Reply'},D=function(t){var r=function(){a.getElementById('notify-container').removeChild(s),t.target.disabled=!1};t.target.disabled=!0;var s=a.createElement('li');s.className='notify conf',s.innerHTML+='<p>Are you sure you want to delete this post?</p>',s.addEventListener('keyup',function(t){27==t.keyCode&&r()},!1);var d=a.createElement('input');d.type='button',d.className='confirm',d.value='Delete',d.addEventListener('click',function(){c(),a.getElementById('notify-container').removeChild(s)},!1);var l=a.createElement('input');l.type='button',l.className='confirm',l.value='Cancel',l.addEventListener('click',r,!1),s.appendChild(l),s.appendChild(d),a.getElementById('notify-container').appendChild(s),l.focus();var c=function(){var r=function(n,a){if(a){o.notify('Post deleted.');var r=t.target.parentNode;r.parentNode.removeChild(r),g.removeMany(deleteMe)}else o.notify('Oops, there was a problem, please try again'),t.target.disabled=!0};t.target.disabled=!0,deleteMe=g.statementsMatching(g.sym(a.getElementById('post_'+t.target.parentNode.id).getAttribute('content'))),f.batch_delete_statement(deleteMe,function(s,d){if(d){var l=g.statementsMatching(void 0,n('container_of'),g.sym(a.getElementById('post_'+t.target.parentNode.id).getAttribute('content')));f.batch_delete_statement(l,r)}else o.notify('Oops, there was a problem, please try again'),t.target.disabled=!1})}};if(v.getMyURI()){var B=g.any(r,n('has_creator'));if(v.getMyURI()!=B.uri){var U=a.createElement('input');U.type='button',U.value='reply',U.className='reply',U.addEventListener('click',M,!1)}else{var q=a.createElement('input');q.type='button',q.value='Delete',q.className='reply',q.addEventListener('click',D,!1)}}var F=a.createElement('a');return F.innerHTML='&#9733;',F.addEventListener('click',function(t){var n=t.target.parentNode.id,r=a.getElementById('post_'+n).getAttribute('content');F.className+=' ing';var o=function(t,n){n&&(F.className='ed'==F.className.split(' ')[1]?'favorit':'favorit ed')};b.favorited(r)?b.remove(r,o):b.add(r,o)},!1),F.className=b.favorited(r.uri)?'favorit ed':'favorit',d.appendChild(x),d.appendChild(_),v.getMyURI()&&(d.appendChild(F),v.getMyURI()==B.uri?d.appendChild(q):d.appendChild(U)),d.appendChild(y),d.appendChild(C),''!==j&&d.appendChild(R),d},x.prototype.generatePostList=function(t){var n=a.createElement('ul'),r={},o=[];for(var l in t){var c=g.any(t[l],s('created'));c&&(o.push(c),r[c]=this.generatePost(t[l],this.thisIsMe))}for(var u in o.sort().reverse(),o)n.appendChild(r[o[u]]);return n},x.prototype.followsView=function(){var t=function(t){var r=g.any(t,n('id')),o=a.createElement('li');o.className='follow',r=r?r:t.uri;var s=g.any(void 0,l('holdsAccount'),t);return s=s?s.uri:t.uri,o.innerHTML='<a href="'+s+'">'+r+'</a>',o},r=a.createElement('div');if(r.id='xfollows',r.className='followlist-container view-container',this.creator&&g.whether(this.creator.sym,n('follows'))){var o=g.each(this.creator.sym,n('follows')),s=a.createElement('ul');for(var d in o)s.appendChild(t(o[d]));r.appendChild(s)}return this.Tab.create('tab-follows','Follows',r,!1),r},x.prototype.streamView=function(t,a){var r=a.createElement('div');r.id='postContainer',r.className='post-container view-container active';var o=[];if(g.whether(t,l('name'))&&g.whether(t,l('holdsAccount'))){m.lookUpThing(g.any(t,l('holdsAccount')));var s=g.each(g.any(t,l('holdsAccount')),n('follows'));for(var d in s){m.lookUpThing(s[d]);var c=g.each(s[d],n('creator_of'));for(var u in c)if(m.lookUpThing(c[u]),g.whether(c[u],n('topic'),s[d]))continue;else o=o.concat(g.each(c[u],n('container_of')))}}if(0<o.length){var f=this.generatePostList(o);f.id='postList',f.className='postList',r.appendChild(f)}return this.Tab.create('tab-stream','By Follows',r,!0),r},x.prototype.notificationsView=function(t,a){var r=a.createElement('div');r.id='postNotificationContainer',r.className='notification-container view-container';var o=a.createElement('div');o.id='postMentionContainer',o.className='mention-container view-container';var s=[],c=[],f=g.any(t,l('holdsAccount')),h=g.any(f,n('id')),b=g.each(f,n('creator_of'));for(var y in b)m.lookUpThing(b[y]),g.whether(b[y],n('topic'),f)?c=c.concat(g.each(b[y],n('container_of'))):g.whether(b[y],u('type'),d('Microblog'))&&(s=s.concat(g.each(b[y],n('container_of'))));var v=this.generatePostList(s);v.id='postNotificationList',v.className='postList',r.appendChild(v);var w=this.generatePostList(c);w.id='postMentionList',w.className='postList',o.appendChild(w),this.postMentionContainer=o,this.postNotificationContainer=r,this.Tab.create('tab-by-user','By '+h,r,!1),this.Tab.create('tab-at-user','@'+h,o,!1)},x.prototype.build=function(){var n=this.microblogPane;this.headerContainer=this.header(t,a),this.postContainer=this.streamView(t,a),this.notificationsView(t,a),this.xfollows=this.followsView(),n.className='ppane',n.appendChild(this.xviewReply),n.appendChild(this.xnotify),n.appendChild(this.headerContainer),void 0!=this.xfollows&&n.appendChild(this.xfollows),n.appendChild(this.postContainer),n.appendChild(this.postNotificationContainer),n.appendChild(this.postMentionContainer)};var _=a.createElement('div'),k=new x(t,a,_);return k.build(),_}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_123691.svg',name:'sharing',label:function(n){var a=r.store,o=r.ns,s=a.findTypeURIs(n);return s[o.ldp('Resource').uri]?'Sharing':s[o.ldp('Container').uri]?'Sharing':s[o.ldp('BasicContainer').uri]?'Sharing':null},render:function(n,a){var o=r.store,s=r.ns,d=a.createElement('div');d.setAttribute('class','sharingPane');var l=o.findTypeURIs(n),t='file';(l[s.ldp('BasicContainer').uri]||l[s.ldp('Container').uri])&&(t='folder');var c=a.createElement('div'),u=c.appendChild(a.createElement('table'));u.setAttribute('style','font-size:120%; margin: 1em; border: 0.1em #ccc ;');var f=u.appendChild(a.createElement('tr')),m=f.appendChild(a.createElement('div'));m.setAttribute('style','padding: 2em;');var h=u.appendChild(a.createElement('tr')),g=h.appendChild(a.createElement('table')),b={target:n,me:null,noun:t,div:c,dom:a,statusRegion:m},y=r.authn.currentUser();return b.me=y,r.aclControl.preventBrowserDropEvents(a),g.appendChild(r.aclControl.ACLControlBox5(n,a,t,o,function(t,n){t||(g.innerHTML='ACL control box Failed: '+n)})),d.appendChild(c),d}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.originalIconBase+'tango/22-emblem-system.png',name:'internal',label:function(){return'under the hood'},render:function(t,n){function a(t){return!!d['http://www.w3.org/2007/ont/link#ProtocolEvent']||'undefined'!=typeof r.panes.internal.predicates[t.uri]}var o=r.rdf,s=r.store;t=s.canon(t);var d=s.findTypeURIs(t),l=n.createElement('div');l.setAttribute('class','internalPane'),l.setAttribute('style','background-color: #ddddff; padding: 0.5em; border-radius: 1em;');var c=s.statementsMatching(t),u=null;if(t.uri&&(c.push(o.st(t,s.sym('http://www.w3.org/2007/ont/link#uri'),t.uri,r.store.fetcher.appNode)),0<=t.uri.indexOf('#')?(u=t.uri.split('#')[0],c.push(o.st(t,s.sym('http://www.w3.org/2007/ont/link#documentURI'),t.uri.split('#')[0],r.store.fetcher.appNode)),c.push(o.st(t,s.sym('http://www.w3.org/2007/ont/link#document'),s.sym(t.uri.split('#')[0]),r.store.fetcher.appNode))):u=t.uri),u){var f=r.store.updater.editable(u);f&&c.push(o.st(t,s.sym('http://www.w3.org/ns/rww#editable'),s.literal(f),r.store.fetcher.appNode))}var m=r.panes.getOutliner(n);return m.appendPropertyTRs(l,c,!1,a),c=s.statementsMatching(void 0,void 0,t),m.appendPropertyTRs(l,c,!0,a),l},predicates:{"http://www.w3.org/2007/ont/link#request":1,"http://www.w3.org/2007/ont/link#requestedBy":1,"http://www.w3.org/2007/ont/link#source":1,"http://www.w3.org/2007/ont/link#session":2,"http://www.w3.org/2007/ont/link#uri":1,"http://www.w3.org/2007/ont/link#documentURI":1,"http://www.w3.org/2007/ont/link#document":1,"http://www.w3.org/2007/ont/link#all":1,"http://www.w3.org/2007/ont/link#Document":1,"http://www.w3.org/ns/rww#editable":1,"http://www.w3.org/2000/01/rdf-schema#seeAlso":1,"http://www.w3.org/2002/07/owl#":1},classes:{"http://www.w3.org/2007/ont/link#ProtocolEvent":1}}},function(t,n,a){'use strict';var r=a(2);t.exports={icon:r.icons.iconBase+'noun_547570.svg',name:'home',label:function(){return'home'},render:function(t,n){var a=n.createElement('div'),o=r.authn.currentUser();return function(){var t=a.appendChild(n.createElement('div'));t.appendChild(n.createElement('h4')).textContent='Make a new tool';r.create.newThingUI({div:t,dom:n,statusArea:a,me:o},r.panes);a.appendChild(n.createElement('h4')).textContent='Private:',r.authn.registrationList({div:a,dom:n,statusArea:a,me:o},{private:!0}).then(function(t){a.appendChild(n.createElement('h4')).textContent='Public:',r.authn.registrationList(t,{public:!0}).then(function(){})})}(),a}}}])});
//# sourceMappingURL=mashlib.min.js.map